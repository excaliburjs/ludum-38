<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>I Just Wanted Groceries - Ludum Dare 38</title>
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower|Press+Start+2P" rel="stylesheet">

    <link rel="stylesheet" href="css/site.css?2e09b48ff4ba130543e75ac1579ab2e8b0f903fe">
    <link rel="stylesheet" href="lib/font-awesome/css/font-awesome.min.css">
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />

    <meta property="og:title" content="I Just Wanted Groceries - Ludum Dare 38"/>
    <meta property="og:url" content="http://excaliburjs.com/ludum-38/"/>
    <meta property="og:image" content="http://excaliburjs.com/ludum-38/img/favicon.png" />

</head>
<body>
   <div class="canvas-wrapper">         
         <canvas id="game"></canvas>
         <div class="game-over-cover"></div>
         <div id="shopping-list" class="playerShoppingList" style="display:none;">
            <div id="shop-message" class="shoppingListMessage"></div>
            <div id="item1" class="shoppingListItem"></div>
            <div id="item2" class="shoppingListItem"></div>
            <div id="item3" class="shoppingListItem"></div>
            <div id="item4" class="shoppingListItem"></div>
            <div id="item5" class="shoppingListItem"></div>
         </div>         
    </div>
    <div>Controls: WASD or arrow keys</div>
    <dialog id="game-over-dialog">
      <section class="game-over-dialog-header">
      </section>
      <section class="game-over-dialog-content">

         <div id="game-over-conversation" style="text-align: center">
            <div id="enemyConvo" class="conversationText" style="visibility: hidden">
               <span id="enemyName"></span>: <br><span id="enemyMessage"></span>
            </div>
            <div style="clear: both">
               <div id="player" class= "characterArt"></div>
               <div id="enemy" class="characterArt"></div>
            </div>
            <div id="playerConvo" class="conversationText" style="visibility: hidden"></div>
         </div>

         <h2 id="game-over-recipe"></h2>
         
         <div id="game-over-shopping-list"></div>  

         <p id="social-container">
            <a id="twidget" href="https://twitter.com/share" class="twitter-share-button" data-text="I went shopping for SOCIAL_SCORE. I Just Wanted Groceries!" data-via="ExcaliburJS" data-hashtags="LDJAM">Tweet</a>
            <div id="facebook-sucks">
               <div style="top: -11px" id="fidget" class="fb-share-button" data-href="http://excaliburjs.com/ludum-38/" data-layout="button_count"></div>
               <div id="fb-root"></div>
               <script>
                     (function (d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s);
                        js.id = id;
                        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
                        fjs.parentNode.insertBefore(js, fjs);
                     }(document, 'script', 'facebook-jssdk'));
               </script>
            </div>

         </p>

         <div id="game-over-playtime"></div>      
         
         <ul>                  
            <li id="game-over-summary-collect">Finished my grocery list</li>
            <li id="game-over-summary-avoid">Avoided small talk</li>
            <li id="game-over-summary-checkout">Made it to the checkout</li>
         </ul>

         <a class="restart-game-button" href="javascript:void(0)">Play again</button>
         <a href="https://ldjam.com/events/ludum-dare/38/i-just-wanted-groceries">Please rate game!</a>
      </section>
   </dialog>
    <div id="sound">
      <a id="mute-music" href="#mute-music"><i class="fa fa-music"></i></a>
      
      <a id="mute-all" href="#mute-all"><i class="fa fa-volume-up"></i></a>
    </div>

    <script src="lib/excalibur-dist/excalibur.js?2e09b48ff4ba130543e75ac1579ab2e8b0f903fe" type="text/javascript"></script>
    <script src="lib/excalibur-tiled/dist/excalibur-tiled.js?2e09b48ff4ba130543e75ac1579ab2e8b0f903fe" type="text/javascript"></script>
    <script src="lib/classnames/index.min.js"></script>
    <script src="lib/zepto/zepto.min.js"></script>
    <script src="lib/storejs/store.min.js"></script>
    <script src="lib/fetchjs/fetch.min.js"></script>
    <script src="lib/dialog-polyfill/dialog-polyfill.js"></script>

    <script src="game/game.js?2e09b48ff4ba130543e75ac1579ab2e8b0f903fe" type="text/javascript"></script>
    <!-- Google analytics --> 
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-46390208-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- App Insights -->
    <script type="text/javascript">
      var appInsights=window.appInsights||function(config){
         function i(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s="AuthenticatedUserContext",h="start",c="stop",l="Track",a=l+"Event",v=l+"Page",y=u.createElement(o),r,f;y.src=config.url||"https://az416426.vo.msecnd.net/scripts/a/ai.0.js";u.getElementsByTagName(o)[0].parentNode.appendChild(y);try{t.cookie=u.cookie}catch(p){}for(t.queue=[],t.version="1.0",r=["Event","Exception","Metric","PageView","Trace","Dependency"];r.length;)i("track"+r.pop());return i("set"+s),i("clear"+s),i(h+a),i(c+a),i(h+v),i(c+v),i("flush"),config.disableExceptionTracking||(r="onerror",i("_"+r),f=e[r],e[r]=function(config,i,u,e,o){var s=f&&f(config,i,u,e,o);return s!==!0&&t["_"+r](config,i,u,e,o),s}),t
         }({
            instrumentationKey:"302d95ed-e11f-4aa0-99c4-b69cc63db829",
            disableAjaxTracking: true,
            disableExceptionTracking: false,
            enableDebug: false
         });
            
         window.appInsights=appInsights;
         appInsights.trackPageView();
      </script>
    
    <footer>Made with <a href="http://excaliburjs.com">Excalibur.js</a> 
      &bull; <a href="credits.html?2e09b48ff4ba130543e75ac1579ab2e8b0f903fe">Credits</a>
      &bull; version <a id='commit-number' href="https://github.com/excaliburjs/ludum-38/commit/2e09b48ff4ba130543e75ac1579ab2e8b0f903fe">@2e09b48ff4ba130543e75ac1579ab2e8b0f903fe</a></footer> 
      <script>
         var gameOverDialog = $('#game-over-dialog').get(0);
         dialogPolyfill.registerDialog(gameOverDialog);

         $('.restart-game-button').click(function(){
               window.location.reload();
         });
         
         //prevent scrolling via arrow keys
          window.addEventListener("keydown", function(e) {
               // space and arrow keys
               if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                  e.preventDefault();
               }
            }, false);  
      </script>   
</body>
</html>