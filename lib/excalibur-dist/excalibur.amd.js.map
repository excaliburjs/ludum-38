{"version":3,"sources":["../../src/engine/Actions/RotationType.ts","../../src/engine/Algebra.ts","../../src/engine/Physics.ts","../../src/engine/Util/EasingFunctions.ts","../../src/engine/Util/Log.ts","../../src/engine/Collision/Side.ts","../../src/engine/Util/Util.ts","../../src/engine/Util/Decorators.ts","../../src/engine/Promises.ts","../../src/engine/Camera.ts","../../src/engine/Debug.ts","../../src/engine/EventDispatcher.ts","../../src/engine/Drawing/Color.ts","../../src/engine/Collision/CollisionContact.ts","../../src/engine/Collision/CollisionJumpTable.ts","../../src/engine/Collision/CircleArea.ts","../../src/engine/Util/DrawUtil.ts","../../src/engine/Collision/Body.ts","../../src/engine/Collision/EdgeArea.ts","../../src/engine/Collision/PolygonArea.ts","../../src/engine/Collision/BoundingBox.ts","../../src/engine/Actions/ActionContext.ts","../../src/engine/Group.ts","../../src/engine/Drawing/SpriteEffects.ts","../../src/engine/Resources/Resource.ts","../../src/engine/Resources/Texture.ts","../../src/engine/Drawing/Sprite.ts","../../src/engine/Drawing/Animation.ts","../../src/engine/Drawing/SpriteSheet.ts","../../src/engine/Label.ts","../../src/engine/Resources/Sound.ts","../../src/engine/Loader.ts","../../src/engine/Traits/CapturePointer.ts","../../src/engine/Traits/EulerMovement.ts","../../src/engine/Util/CullingBox.ts","../../src/engine/Traits/OffscreenCulling.ts","../../src/engine/Traits/TileMapCollisionDetection.ts","../../src/engine/Traits/Index.ts","../../src/engine/Particles.ts","../../src/engine/TileMap.ts","../../src/engine/Timer.ts","../../src/engine/Trigger.ts","../../src/engine/Actions/Index.ts","../../src/engine/Collision/DynamicTree.ts","../../src/engine/Collision/Pair.ts","../../src/engine/Collision/DynamicTreeCollisionBroadphase.ts","../../src/engine/Collision/NaiveCollisionBroadphase.ts","../../src/engine/Collision/Index.ts","../../src/engine/Drawing/Polygon.ts","../../src/engine/Drawing/Index.ts","../../src/engine/Math/Random.ts","../../src/engine/Math/PerlinNoise.ts","../../src/engine/Math/Index.ts","../../src/engine/PostProcessing/ColorBlindCorrector.ts","../../src/engine/PostProcessing/Index.ts","../../src/engine/Resources/Index.ts","../../src/engine/Input/Gamepad.ts","../../src/engine/Input/Pointer.ts","../../src/engine/Input/Keyboard.ts","../../src/engine/Input/Index.ts","../../src/engine/Util/Index.ts","../../src/engine/Util/Detector.ts","../../src/engine/Util/SortedList.ts","../../src/engine/Index.ts","../../src/engine/Engine.ts","../../src/engine/UIActor.ts","../../src/engine/Util/Actors.ts","../../src/engine/Scene.ts","../../src/engine/Events.ts","../../src/engine/Class.ts","../../src/engine/Actor.ts","../../src/engine/Actions/Action.ts","../../src/engine/MonkeyPatch.ts"],"names":[],"mappings":"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GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG;gBACjG,GAAG,EAAE,GAAG,EAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE;gBAChG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAG,CAAC,EAAE,GAAG,EAAE,EAAE;gBAClG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;gBACnG,GAAG,EAAE,GAAG,EAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;gBACpG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAG,EAAE;gBACnG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;gBACjG,GAAG,EAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAG,EAAE;gBAChG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;gBAC/F,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;gBAC/F,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACpB,OAAE,GAAe,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC;YAGrC,0BAAqB,GAA4B;gBACtD,OAAO,EAAE,CAAC;gBACV,SAAS,EAAE,CAAC;gBACZ,SAAS,EAAE,CAAC;gBACZ,WAAW,EAAE,EAAE;aACjB,CAAC;YA4BC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;YAE/D,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;YACvC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;YACnC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;YACnC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;YAE/B,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChB,IAAI,CAAC,OAAO,GAAG,IAAI,eAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,OAAO,GAAG,IAAI,eAAM,EAAE,CAAC;YAC/B,CAAC;YAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAE9C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC5B,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC;YAC3C,CAAC;QACJ,CAAC;QAcM,+BAAK,GAAZ;YACG,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC;YACzB,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;YAE1B,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,QAAQ,GAAG,CAAC,CAAC;YACjB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC;gBACrC,MAAM,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;oBACxB,KAAK,CAAC;wBAAE,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC;wBAAC,KAAK,CAAC;oBACjE,KAAK,CAAC;wBAAE,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,EACnB,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC;wBAAC,KAAK,CAAC;oBACjE,KAAK,CAAC;wBAAE,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,EACnB,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,EACnB,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC;wBAAC,KAAK,CAAC;oBACjE,0BAA0B;oBAC1B,SAAS,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;gBAClE,CAAC;gBACD,QAAQ,IAAI,GAAG,CAAC;gBAChB,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC;gBACxB,IAAI,IAAI,CAAC,CAAC;YACb,CAAC;YACD,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC;QAC3B,CAAC;QAED;;;WAGG;QACI,kCAAQ,GAAf,UAAgB,MAAc,EAAE,IAAa;YAC1C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,IAAI,GAAG,CAAC,GAAG,MAAM,CAAC;YACrB,CAAC;YACD,IAAI,KAAK,GAAa,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;YACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/B,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;YACnC,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAED;;;WAGG;QACI,8BAAI,GAAX,UAAY,KAAa,EAAE,MAAc,EAAE,IAAa;YACrD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;YACxC,CAAC;YAED,IAAI,KAAK,GAAa,IAAI,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC;YAEhD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC9B,KAAK,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;gBACzD,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAEO,qCAAW,GAAnB,UAAoB,IAAY,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS;YAC9D,IAAI,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC;YACnB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACrD,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnE,CAAC;QAEO,qCAAW,GAAnB,UAAoB,IAAY,EAAE,CAAS,EAAE,CAAS;YACnD,IAAI,KAAK,GAAG,CAAC,IAAI,GAAG,CAAG,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACvC,MAAM,CAAC,CAAC,IAAI,GAAG,CAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,CAAC;QAC/C,CAAC;QAEO,qCAAW,GAAnB,UAAoB,IAAY,EAAE,CAAS;YACxC,MAAM,CAAE,CAAC,IAAI,GAAG,CAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACvC,CAAC;QAEO,kCAAQ,GAAhB,UAAiB,CAAS;YACvB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,gDAAgD;YACjF,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACnB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACjH,CAAC;QAEO,kCAAQ,GAAhB,UAAiB,CAAS,EAAE,CAAS;YAClC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAChC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAEhC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAEnB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YACjC,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,EACP,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EAAG,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAC1F,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACnI,CAAC;QAEO,kCAAQ,GAAhB,UAAiB,CAAS,EAAE,CAAS,EAAE,CAAS;YAC7C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAChC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAChC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAEhC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAEnB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACrB,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YAErB,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAEjC,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAC3B,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAE3B,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAC/B,IAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAG/B,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,EACP,KAAK,CAAC,KAAK,EACN,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACvC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EACzD,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAC3C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAClE,KAAK,CAAC,KAAK,EACL,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAC/C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EACjE,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EACnD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACrG,CAAC;QACJ,sBAAC;IAAD,CAxNA,AAwNC,IAAA;IAxNY,0CAAe;IA0N5B;;OAEG;IACH;QACG;;;WAGG;QACH,wBAAmB,SAA0B,EAAS,QAAiC;YAApE,cAAS,GAAT,SAAS,CAAiB;YAAS,aAAQ,GAAR,QAAQ,CAAyB;YACpF,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,QAAQ,GAAG,UAAC,GAAW,IAAO,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,cAAK,CAAC,KAAK,GAAG,cAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACtF,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,8BAAK,GAAZ,UAAa,KAAa,EAAE,MAAc;YACvC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC1C,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAC9C,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;YACrB,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;YACvB,IAAI,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YACpC,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,EAAE,CAAC;YAC/B,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAED;;WAEG;QACI,6BAAI,GAAX,UAAY,GAA6B,EAAE,CAAS,EAAE,CAAS,EAAE,KAAa,EAAE,MAAc;YAC5F,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YAC9C,IAAI,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YACtD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC9B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC9B,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;oBAC9B,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC;oBACrC,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBAC1C,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAE7B,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;oBAChC,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;oBACpC,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;oBACpC,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;gBACzD,CAAC;YACJ,CAAC;YACD,GAAG,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,CAAC;QACJ,qBAAC;IAAD,CA9CA,AA8CC,IAAA;IA9CY,wCAAc;;;;;;;;IC3Q3B,wBAA4B;IAC5B,mBAAuB;;;;;;;;;ICGvB,IAAY,cAIX;IAJD,WAAY,cAAc;QACvB,6DAAS,CAAA;QACT,iEAAW,CAAA;QACX,6DAAS,CAAA;IACZ,CAAC,EAJW,cAAc,GAAd,sBAAc,KAAd,sBAAc,QAIzB;IAGD;;;;;;;OAOG;IACH;QA4FG,6BAAmB,MAAc,EAAS,QAAyB,EAAS,SAAoD;YAAtF,yBAAA,EAAA,gBAAyB;YAAS,0BAAA,EAAA,YAA4B,cAAc,CAAC,SAAS;YAA7G,WAAM,GAAN,MAAM,CAAQ;YAAS,aAAQ,GAAR,QAAQ,CAAiB;YAAS,cAAS,GAAT,SAAS,CAA2C;YA1FxH,kBAAa,GACrB,4BAA4B;gBAC5B,4BAA4B;gBAE5B,4BAA4B;gBAE5B,0BAA0B;gBAE1B,eAAe;gBACZ,kDAAkD;gBAClD,6CAA6C;gBAE7C,4BAA4B;gBAC5B,mCAAmC;gBAEnC,0CAA0C;gBAC1C,mCAAmC;gBAEnC,oDAAoD;gBAEpD,2CAA2C;gBAC3C,sDAAsD;gBACtD,0BAA0B;gBAC7B,GAAG,CAAC;YAEI,oBAAe,GACvB,0BAA0B;gBAC1B,cAAc;gBACd,4BAA4B;gBAC5B,kDAAkD;gBAClD,0BAA0B;gBAE1B,0BAA0B;gBAC1B;;;;;;;;;;;wBAWQ;gBAGR,eAAe;gBAEZ,2CAA2C;gBAC3C,+BAA+B;gBAC5B,gEAAgE;gBAChE,gEAAgE;gBAChE,mEAAmE;gBAEtE,2BAA2B;gBAE3B,eAAe;gBAEf;;;kEAGkD;gBAElD,+BAA+B;gBAC5B,aAAa;gBAChB,wEAAwE;gBACxE,0EAA0E;gBAC1E,6EAA6E;gBAC7E,gBAAgB;gBAEhB,wBAAwB;gBACxB,kBAAkB;gBAClB,qBAAqB;gBACrB,kDAAkD;gBAClD,kDAAkD;gBAClD,8BAA8B;gBAC9B,qBAAqB;gBAErB,cAAc;gBAEjB,GAAG,CAAC;YAUD,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACxD,IAAI,CAAC,eAAe,CAAC,KAAK,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;YACnD,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,MAAM,CAAC,aAAa,EAAE,CAAC;YAErD,IAAI,CAAC,GAAG,GAA0B,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,OAAO,EAAE,EAAE,qBAAqB,EAAE,IAAI,EAAE,CAAC,CAAC;YAE5G,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;YACzC,IAAI,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC,CAAC;YAC3F,IAAI,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAElE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;YACpD,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;YACrD,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEpC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;gBACtE,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,gCAAgC,CAAC,CAAC;YAChE,CAAC;YAED,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACtC,CAAC;QAEO,sDAAwB,GAAhC,UAAiC,SAAyB;YACvD,IAAI,IAAI,GAAG,EAAE,CAAC;YACd,EAAE,CAAC,CAAC,SAAS,KAAK,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC1C,IAAI;oBACD,iDAAiD;wBACjD,wCAAwC;wBACxC,wCAAwC,CAAC;YAC/C,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,KAAK,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;gBACnD,IAAI;oBACD,wCAAwC;wBACxC,iDAAiD;wBACjD,wCAAwC,CAAC;YAC/C,CAAC;YAAA,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,KAAK,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;gBAChD,IAAI;oBACD,wCAAwC;wBACxC,wCAAwC;wBACxC,mDAAmD,CAAC;YAC1D,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,cAAc,EAAE,4BAA4B,CAAC,CAAC;YACrG,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,cAAc,EAAE,iCAAiC,CAAC,CAAC;YAC1G,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAE9D,CAAC;QAEO,2CAAa,GAArB,UAAsB,CAAS,EAAE,CAAS,EAAE,KAAa,EAAE,MAAc;YACtE,IAAI,EAAE,GAAG,CAAC,CAAC;YACX,IAAI,EAAE,GAAG,CAAC,GAAG,KAAK,CAAC;YACnB,IAAI,EAAE,GAAG,CAAC,CAAC;YACX,IAAI,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,YAAY,CAAC;gBACzD,EAAE,EAAE,EAAE;gBACN,EAAE,EAAE,EAAE;gBACN,EAAE,EAAE,EAAE;gBACN,EAAE,EAAE,EAAE;gBACN,EAAE,EAAE,EAAE;gBACN,EAAE,EAAE,EAAE;aAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACtC,CAAC;QAEO,wCAAU,GAAlB,UAAmB,IAAY,EAAE,OAAe;YAC7C,IAAI,MAAmB,CAAC;YACxB,EAAE,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC;gBACvB,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAC5D,CAAC;YAAA,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC3B,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC1D,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAAC,CAAC;YACjE,CAAC;YAGD,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;YACvC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAE/B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACjE,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC3F,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAED,MAAM,CAAC,MAAM,CAAC;QACjB,CAAC;QAEM,qCAAO,GAAd,UAAe,KAAgB,EAAE,GAA6B;YAC3D,6CAA6C;YAC7C,IAAI,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;YAC/E,IAAI,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;YAE/E,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAC7C,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;YAC3D,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,YAAY,CAAC;gBACzD,GAAG,EAAE,GAAG;gBACR,GAAG,EAAE,GAAG;gBACR,GAAG,EAAE,GAAG;gBACR,GAAG,EAAE,GAAG;gBACR,GAAG,EAAE,GAAG;gBACR,GAAG,EAAE,GAAG;aAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACrC,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,CAAC;YACnD,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,gBAAgB,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE/E,oBAAoB;YACpB,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;YACvC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;YAEnD,sDAAsD;YACtD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC7F,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC7F,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAC3F,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAC3F,qHAAqH;YACrH,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;YACtD,qCAAqC;YACrC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;YAEzG,kBAAkB;YAClB,IAAI,kBAAkB,GAAG,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;YAEpF,qBAAqB;YACrB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,kBAAkB,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;YAEhG,6DAA6D;YAC7D,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAC7C,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;YAC3D,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,CAAC;YACnD,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,gBAAgB,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAE/E,8CAA8C;YAC9C,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;YAEpD,sBAAsB;YACtB,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAI9C,6CAA6C;YAC7C,IAAI,SAAS,GAAG,IAAI,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC/D,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;YAEjG,KAAK,CAAC,IAAK,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAEjC,GAAG,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACjC,CAAC;QAGJ,0BAAC;IAAD,CAhPA,AAgPC,IAAA;IAhPY,kDAAmB;;;;;;;;ICnBhC,gCAAsC;;;;;;;;ICAtC,qBAA2B;IAC3B,kBAAwB;IACxB,oBAA0B;;;;;ICG1B;;;;;OAKG;IACH;QAA8B,4BAAK;QAyBhC,kBAAY,MAAc;YAA1B,YACG,iBAAO,SAET;YA1BD;;eAEG;YACI,aAAO,GAAG,KAAK,CAAC;YAEvB;;eAEG;YACI,eAAS,GAAG,CAAC,CAAO,SAAU,CAAC,WAAW,CAAC;YAO1C,wBAAkB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,cAAQ,GAAc,EAAE,CAAC;YACzB,WAAK,GAAc,EAAE,CAAC;YACtB,kBAAY,GAAY,KAAK,CAAC;YAE9B,gBAAU,GAA4B,SAAS,CAAC;YAChD,2BAAqB,GAA0B,IAAI,CAAC;YAIzD,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;;QACzB,CAAC;QAEM,uBAAI,GAAX;YACG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC;YAAC,CAAC;YAChC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC;YAAC,CAAC;YAElC,0EAA0E;YAC1E,kEAAkE;YAClE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;YAC/D,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAC5B,CAAC;QACJ,CAAC;QAED;;;;;WAKG;QACI,iDAA8B,GAArC,UAAsC,MAA6B;YAChE,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,uCAAuC;YAChE,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC;QACvC,CAAC;QAED;;WAEG;QACK,mCAAgB,GAAxB;YACG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAI,CAAC,MAAM,EAAE,CAAC;YACjB,CAAC;QACJ,CAAC;QAED;;WAEG;QACK,kCAAe,GAAvB,UAAwB,GAAsB;YAC3C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC,IAAI,CAAC;YAAC,CAAC;YAAA,CAAC;YAClD,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC,KAAK,CAAC;YAAC,CAAC;YAAA,CAAC;YAC5B,IAAI,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,KAAK;gBACpC,MAAM,CAAC,CAAC,OAAO,KAAK,KAAK,SAAS,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,MAAM,CAAC;YAEV,IAAI,YAAY,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,UAAC,KAAK;gBACzC,MAAM,CAAC,CAAC,OAAO,KAAK,KAAK,SAAS,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC,MAAM,CAAC;YACV,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,qBAAqB,CAAC,IAAI;gBAC3C,YAAY,IAAI,IAAI,CAAC,qBAAqB,CAAC,OAAO;gBAClD,GAAG,CAAC,SAAS,CAAC;QAC1B,CAAC;QAOM,qBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,oBAAoB;YAC7C,iBAAM,EAAE,YAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChC,CAAC;QAEM,sBAAG,GAAV,UAAW,SAAiB,EAAE,OAA0C;YACrE,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,oBAAoB;YAC7C,iBAAM,GAAG,YAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QACjC,CAAC;QAED;;WAEG;QACI,yBAAM,GAAb;YACG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC;YAAC,CAAC;YACjD,IAAI,CAAC,IAAI,EAAE,CAAC;YAEZ,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;YAE7C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAExC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAChB,IAAI,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;oBACzB,4DAA4D;oBAC5D,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;wBACrB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,+BAAsB,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;oBACnF,CAAC;oBACD,0BAA0B;oBAC1B,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC;oBAC1B,QAAQ,CAAC;gBACZ,CAAC;gBAAC,IAAI,CAAC,CAAC;oBAEL,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC9D,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,4BAAmB,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAChF,CAAC;oBACD,wBAAwB;oBACxB,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;gBAC/B,CAAC;gBAAA,CAAC;gBAEF,2BAA2B;gBAC3B,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjF,QAAQ,CAAC;gBACZ,CAAC;gBAED,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;gBAEnD,qCAAqC;gBACrC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAE1C,UAAU;gBACV,IAAI,CAAS,EAAE,EAAU,EAAE,CAAS,EAAE,EAAU,EAAE,KAAa,CAAC;gBAEhE,GAAG,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC;oBACjB,EAAE,GAAQ,OAAO,CAAC,CAAC,CAAC,CAAC;oBACrB,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC;wBAC1B,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;4BAC3B,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC;4BACtC,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gCAC5C,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oCACnC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;oCACnC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,2BAAkB,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCAC5F,CAAC;gCAAC,IAAI,CAAC,CAAC;oCACL,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;gCAClC,CAAC;4BACJ,CAAC;wBACJ,CAAC;oBACJ,CAAC;gBACJ,CAAC;gBAED,OAAO;gBACP,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;oBACd,EAAE,GAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;oBAClB,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,QAAQ,CAAC,CAAC,CAAC;wBAC1B,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;4BAC1C,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;4BACjC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,yBAAgB,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxF,CAAC;oBACJ,CAAC;gBACJ,CAAC;gBAED,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,qBAAE,GAAT,UAAU,KAAa;YACpB,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,0DAA0D;YACnF,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;gBAE9B,oCAAoC;gBACpC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC7D,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC;oBAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC;gBACrC,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;QAED;;WAEG;QACI,mCAAgB,GAAvB;YACG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACxB,IAAI,MAAM,GAAe,EAAE,CAAC;YAC5B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC7E,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3B,CAAC;YACJ,CAAC;YACD,MAAM,CAAC,MAAM,CAAC;QACjB,CAAC;QAED;;WAEG;QACI,wBAAK,GAAZ;YACG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,SAAS,EAAX,CAAW,CAAC,CAAC,MAAM,CAAC;QACrD,CAAC;QAEO,6BAAU,GAAlB,UAAmB,IAAyB;YACzC,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/C,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,CAAC;YACD,MAAM,CAAC,GAAG,CAAC;QACd,CAAC;QAED;;WAEG;QACK,4BAAS,GAAjB,UAAkB,GAAsB;YACrC,IAAI,CAAC,EAAE,GAAG,CAAC;YACX,IAAI,SAAS,GAAG,IAAI,OAAO,EAAE,CAAC;YAE9B,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC,SAAS,CAAC;YAAC,CAAC;YAE/B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBAClD,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClB,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBACnD,CAAC;YACJ,CAAC;YACD,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/C,SAAS,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,CAAC;YAED,MAAM,CAAC,SAAS,CAAC;QACpB,CAAC;QACJ,eAAC;IAAD,CA7OA,AA6OC,CA7O6B,aAAK;IAYhC;;OAEG;IACW,6BAAoB,GAAG,IAAI,CAAC;IAfhC,4BAAQ;IA+OrB;;;OAGG;IACH;QAA6B,2BAAK;QAM/B;YAAA,YACG,iBAAO,SAST;YAfM,eAAS,GAAG,KAAK,CAAC;YAEjB,cAAQ,GAAa,IAAI,KAAK,CAAC,EAAE,CAAC,CAAC;YACnC,WAAK,GAAa,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;YAKpC,IAAI,CAAS,CAAC;YACd,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACzC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACxB,CAAC;YACD,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtC,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YACrB,CAAC;;QACJ,CAAC;QAED;;;;WAIG;QACI,iCAAe,GAAtB,UAAuB,MAAe,EAAE,SAAqB;YAArB,0BAAA,EAAA,aAAqB;YAC1D,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,SAAS,CAAC;QAC7C,CAAC;QAED;;WAEG;QACI,2BAAS,GAAhB,UAAiB,MAAe;YAC7B,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAChC,CAAC;QAED;;;WAGG;QACI,yBAAO,GAAd,UAAe,IAAU;YACtB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAE7B,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBACnD,MAAM,CAAC,CAAC,CAAC;YACZ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,MAAM,CAAC,KAAK,CAAC;YAChB,CAAC;QACJ,CAAC;QAEM,8BAAY,GAAnB,UAAoB,WAAmB,EAAE,KAAa;YACnD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,KAAK,CAAC;QACtC,CAAC;QAEM,4BAAU,GAAjB,UAAkB,SAAiB,EAAE,KAAa;YAC/C,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC;QACjC,CAAC;QACJ,cAAC;IAAD,CAvDA,AAuDC,CAvD4B,aAAK,GAuDjC;IAvDY,0BAAO;IAyDpB;;OAEG;IACH,IAAY,OAiEX;IAjED,WAAY,OAAO;QAChB;;WAEG;QACH,uCAAS,CAAA;QACT;;WAEG;QACH,uCAAS,CAAA;QACT;;WAEG;QACH,uCAAS,CAAA;QACT;;WAEG;QACH,uCAAS,CAAA;QACT;;WAEG;QACH,iDAAc,CAAA;QACd;;WAEG;QACH,mDAAe,CAAA;QACf;;WAEG;QACH,mDAAe,CAAA;QACf;;WAEG;QACH,qDAAgB,CAAA;QAChB;;WAEG;QACH,yCAAU,CAAA;QACV;;WAEG;QACH,uCAAS,CAAA;QACT;;WAEG;QACH,gDAAc,CAAA;QACd;;WAEG;QACH,kDAAe,CAAA;QACf;;WAEG;QACH,0CAAW,CAAA;QACX;;WAEG;QACH,8CAAa,CAAA;QACb;;WAEG;QACH,8CAAa,CAAA;QACb;;WAEG;QACH,gDAAc,CAAA;IACjB,CAAC,EAjEW,OAAO,GAAP,eAAO,KAAP,eAAO,QAiElB;IAED;;OAEG;IACH,IAAY,IAiBX;IAjBD,WAAY,IAAI;QACb;;WAEG;QACH,2CAAc,CAAA;QACd;;WAEG;QACH,2CAAc,CAAA;QACd;;WAEG;QACH,6CAAe,CAAA;QACf;;WAEG;QACH,6CAAe,CAAA;IAClB,CAAC,EAjBW,IAAI,GAAJ,YAAI,KAAJ,YAAI,QAiBf;;;;;ICzYD;;OAEG;IACH,IAAY,WAKX;IALD,WAAY,WAAW;QACpB,+CAAK,CAAA;QACL,+CAAK,CAAA;QACL,2CAAG,CAAA;QACH,mDAAO,CAAA;IACV,CAAC,EALW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAKtB;IAED;;OAEG;IACH,IAAY,aAKX;IALD,WAAY,aAAa;QACtB,iDAAI,CAAA;QACJ,qDAAM,CAAA;QACN,mDAAK,CAAA;QACL,uDAAO,CAAA;IACV,CAAC,EALW,aAAa,GAAb,qBAAa,KAAb,qBAAa,QAKxB;IAED;;OAEG;IACH,IAAY,YAYX;IAZD,WAAY,YAAY;QAErB;;;WAGG;QACH,mDAAM,CAAA;QAEN;;WAEG;QACH,uDAAQ,CAAA;IACX,CAAC,EAZW,YAAY,GAAZ,oBAAY,KAAZ,oBAAY,QAYvB;IAED;;;;;;;OAOG;IACH;QAAkC,gCAAc;QAE7C;;;;;;;;;;;WAWG;QACH,sBAAmB,CAAS,EACT,CAAS,EACT,KAAa,EACb,KAAa,EACb,OAAe,EACf,OAAe,EACf,KAAa,EACb,WAAwB,EACxB,MAAqB,EACrB,EAAO;YAT1B,YAUG,iBAAO,SACT;YAXkB,OAAC,GAAD,CAAC,CAAQ;YACT,OAAC,GAAD,CAAC,CAAQ;YACT,WAAK,GAAL,KAAK,CAAQ;YACb,WAAK,GAAL,KAAK,CAAQ;YACb,aAAO,GAAP,OAAO,CAAQ;YACf,aAAO,GAAP,OAAO,CAAQ;YACf,WAAK,GAAL,KAAK,CAAQ;YACb,iBAAW,GAAX,WAAW,CAAa;YACxB,YAAM,GAAN,MAAM,CAAe;YACrB,QAAE,GAAF,EAAE,CAAK;;QAE1B,CAAC;QACJ,mBAAC;IAAD,CA1BA,AA0BC,CA1BiC,kBAAS,GA0B1C;IA1BY,oCAAY;IA0BxB,CAAC;IAEF;;;;;OAKG;IACH;QAA8B,4BAAK;QAUhC,kBAAY,MAAc;YAA1B,YACG,iBAAO,SAMT;YAdO,kBAAY,GAAmB,EAAE,CAAC;YAClC,gBAAU,GAAmB,EAAE,CAAC;YAChC,kBAAY,GAAmB,EAAE,CAAC;YAClC,oBAAc,GAAmB,EAAE,CAAC;YACpC,eAAS,GAAc,EAAE,CAAC;YAC1B,qBAAe,GAAa,EAAE,CAAC;YAKpC,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC;YACnC,KAAI,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;;QACpC,CAAC;QAOM,qBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,iBAAM,EAAE,YAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChC,CAAC;QAOD;;WAEG;QACI,uBAAI,GAAX,UAAY,KAA2C;YAA3C,sBAAA,EAAA,QAAsB,YAAY,CAAC,QAAQ;YACpD,IAAI,MAAM,GAAQ,QAAQ,CAAC;YAC3B,EAAE,CAAC,CAAC,KAAK,KAAK,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnC,MAAM,GAAG,QAAQ,CAAC;YACrB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,MAAM,GAAQ,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;YACrC,CAAC;YAED,eAAe;YACf,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACzF,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACnF,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACxF,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YAE9F,qBAAqB;YACrB,sBAAsB;YACtB,EAAE,CAAC,CAAO,MAAO,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC9B,OAAO;gBACP,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,GAAG,MAAM,CAAC;gBAC/C,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC5F,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACtF,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC5F,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAEnG,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAO,MAAO,CAAC,cAAc,CAAC,CAAC,CAAC;gBACvC,OAAO;gBACP,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;gBACjD,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC9F,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACxF,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC9F,MAAM,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAErG,CAAC;YAAC,IAAI,CAAC,CAAC;gBAEL,eAAe;gBACf,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACxF,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAClF,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YAC3F,CAAC;QACJ,CAAC;QAEM,yBAAM,GAAb;YACG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;YAC7B,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC;QAClC,CAAC;QAED;;;WAGG;QACI,qBAAE,GAAT,UAAU,KAAa;YACpB,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;gBAElC,wCAAwC;gBACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBACjE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC;oBACnC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACjC,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QAED;;WAEG;QACI,wBAAK,GAAZ;YACG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAChC,CAAC;QAED;;WAEG;QACI,4BAAS,GAAhB,UAAiB,KAAU;YACxB,IAAI,SAAS,GAAG,KAAK,YAAY,iBAAO,CAAC;YACzC,IAAI,CAAC,GAAW,CAAC,EACX,GAAG,GAAW,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAE3C,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAC1E,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/D,CAAC;YACJ,CAAC;YAED,CAAC,GAAG,CAAC,CAAC;YACN,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YAE/B,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAC9E,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;gBACnE,CAAC;YACJ,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC;gBAE1C,CAAC,GAAG,CAAC,CAAC;gBACN,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;gBAE/B,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;wBAC9E,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;oBACnE,CAAC;gBACJ,CAAC;YACJ,CAAC;YAED,CAAC,GAAG,CAAC,CAAC;YACN,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;YAEjC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBAClF,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvE,CAAC;YACJ,CAAC;QACJ,CAAC;QAEO,oCAAiB,GAAzB,UAA0B,SAAiB,EAAE,QAAwB;YAArE,iBAUC;YATE,MAAM,CAAC,UAAC,CAAa;gBAClB,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,IAAI,CAAC,GAAW,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAClE,IAAI,CAAC,GAAW,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAClE,IAAI,gBAAgB,GAAG,KAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC/E,IAAI,EAAE,GAAG,IAAI,YAAY,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC7H,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAClB,KAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;YAClD,CAAC,CAAC;QACL,CAAC;QAEO,oCAAiB,GAAzB,UAA0B,SAAiB,EAAE,QAAwB;YAArE,iBA2BC;YA1BE,MAAM,CAAC,UAAC,CAAc;gBACnB,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC3D,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;oBAClG,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;wBAAC,QAAQ,CAAC;oBAAC,CAAC;oBAC/B,IAAI,CAAC,GAAW,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBACpF,IAAI,CAAC,GAAW,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBACpF,IAAI,gBAAgB,GAAG,KAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;oBAC/E,IAAI,EAAE,GAAG,IAAI,YAAY,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC,EAC7D,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;oBACnH,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBAClB,KAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;oBACnD,0BAA0B;oBAC1B,EAAE,CAAC,CAAC,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7B,EAAE,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC;4BAEtB,qDAAqD;4BACrD,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;wBACpC,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;4BAE/B,gCAAgC;4BAChC,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;wBAChE,CAAC;oBACJ,CAAC;gBACJ,CAAC;YACJ,CAAC,CAAC;QACL,CAAC;QAEO,sCAAmB,GAA3B,UAA4B,SAAiB,EAAE,QAAwB;YAAvE,iBA4BC;YA3BE,MAAM,CAAC,UAAC,CAAiB;gBACtB,CAAC,CAAC,cAAc,EAAE,CAAC;gBAEnB,kEAAkE;gBAClE,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAG,KAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;gBAC/E,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAAC,MAAM,CAAC;gBAAC,CAAC;gBAC7B,IAAI,CAAC,GAAW,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAClE,IAAI,CAAC,GAAW,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAClE,IAAI,gBAAgB,GAAG,KAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC/E,IAAI,EAAE,GAAG,IAAI,YAAY,CAAC,gBAAgB,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC,EAC7D,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACzF,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAClB,KAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;gBAEnD,0BAA0B;gBAC1B,EAAE,CAAC,CAAC,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC7B,EAAE,CAAC,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC;wBAEtB,qDAAqD;wBACrD,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;oBACpC,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;wBAE/B,gCAAgC;wBAChC,KAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC;oBAC7C,CAAC;gBACJ,CAAC;YACJ,CAAC,CAAC;QACL,CAAC;QAED;;;WAGG;QACK,mCAAgB,GAAxB,UAAyB,SAAiB;YACvC,IAAI,GAAG,CAAC;YACR,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACxD,MAAM,CAAC,GAAG,CAAC;YACd,CAAC;YAED,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAAC,MAAM,CAAC,CAAC,CAAC;gBAAC,CAAC;YACpD,CAAC;YAED,6CAA6C;YAC7C,MAAM,CAAC,CAAC,CAAC,CAAC;QACb,CAAC;QAEO,uCAAoB,GAA5B,UAA6B,CAAS;YACnC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACT,KAAK,OAAO;oBACT,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;gBAC5B,KAAK,OAAO;oBACT,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;gBAC5B,KAAK,KAAK;oBACP,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC;gBAC1B;oBACG,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC;YACjC,CAAC;QACJ,CAAC;QACJ,eAAC;IAAD,CA9PA,AA8PC,CA9P6B,aAAK,GA8PlC;IA9PY,4BAAQ;IAgQrB;;OAEG;IACH;QAA6B,2BAAK;QAE/B;YAAA,YACG,iBAAO,SAGT;YAED;;eAEG;YACH,iBAAW,GAAW,IAAI,CAAC;YAE3B;;eAEG;YACH,mBAAa,GAAW,IAAI,CAAC;YAE7B;;eAEG;YACH,kBAAY,GAAW,IAAI,CAAC;YAhBzB,KAAI,CAAC,EAAE,CAAC,MAAM,EAAE,KAAI,CAAC,cAAc,CAAC,CAAC;;QACxC,CAAC;QAiBO,gCAAc,GAAtB,UAAuB,EAAgB;YACpC,IAAI,CAAC,YAAY,GAAG,IAAI,iBAAM,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,WAAW,GAAG,IAAI,iBAAM,CAAC,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC;YAClD,IAAI,CAAC,aAAa,GAAG,IAAI,iBAAM,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;QAC3D,CAAC;QACJ,cAAC;IAAD,CA5BA,AA4BC,CA5B4B,aAAK,GA4BjC;IA5BY,0BAAO;;;;;ICrVpB;;OAEG;IACH,IAAY,IAmDX;IAnDD,WAAY,IAAI;QACb,gCAAS,CAAA;QACT,gCAAS,CAAA;QACT,gCAAS,CAAA;QACT,iCAAU,CAAA;QACV,iCAAU,CAAA;QACV,iCAAU,CAAA;QACV,iCAAU,CAAA;QACV,iCAAU,CAAA;QACV,iCAAU,CAAA;QACV,gCAAS,CAAA;QAET,uCAAa,CAAA;QAEb,2CAAe,CAAA;QAEf,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QACN,0BAAM,CAAA;QAEN,kCAAU,CAAA;QACV,8BAAQ,CAAA;QACR,4BAAO,CAAA;QACP,gCAAS,CAAA;QACT,gCAAS,CAAA;QACT,kCAAU,CAAA;QACV,kCAAU,CAAA;QACV,8BAAQ,CAAA;IACX,CAAC,EAnDW,IAAI,GAAJ,YAAI,KAAJ,YAAI,QAmDf;IAAA,CAAC;IAEF;;OAEG;IACH;QAA8B,4BAAc;QAEzC;;WAEG;QACH,kBAAmB,GAAS;YAA5B,YACG,iBAAO,SACT;YAFkB,SAAG,GAAH,GAAG,CAAM;;QAE5B,CAAC;QACJ,eAAC;IAAD,CARA,AAQC,CAR6B,kBAAS,GAQtC;IARY,4BAAQ;IAUrB;;;;OAIG;IACH;QAA8B,4BAAK;QAOhC,kBAAY,MAAc;YAA1B,YACG,iBAAO,SAGT;YATO,WAAK,GAAa,EAAE,CAAC;YACrB,aAAO,GAAa,EAAE,CAAC;YACvB,eAAS,GAAa,EAAE,CAAC;YAM9B,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;;QACzB,CAAC;QAMM,qBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,iBAAM,EAAE,YAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChC,CAAC;QAED;;WAEG;QACH,uBAAI,GAAJ,UAAK,MAAY;YAAjB,iBA4BC;YA3BE,MAAM,GAAG,MAAM,IAAI,MAAM,CAAC;YAC1B,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;gBAC7B,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,4BAA4B;YACtD,CAAC,CAAC,CAAC;YAEH,uDAAuD;YACvD,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,EAAiB;gBAChD,IAAI,GAAG,GAAG,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;gBACzC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;gBAC1B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;gBAC9B,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;gBAExC,iEAAiE;gBACjE,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;gBAC1C,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;YAClD,CAAC,CAAC,CAAC;YAEH,yDAAyD;YACzD,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,EAAiB;gBAClD,EAAE,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBACzC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;oBAC5B,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;oBAChC,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;oBACxC,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;oBAC5C,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;gBAChD,CAAC;YACJ,CAAC,CAAC,CAAC;QACN,CAAC;QAEM,yBAAM,GAAb;YACG,qDAAqD;YACrD,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;YAExB,8BAA8B;YAC9B,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC1C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClE,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,0BAAO,GAAd;YACG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACrB,CAAC;QAED;;;WAGG;QACI,6BAAU,GAAjB,UAAkB,GAAS;YACxB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3C,CAAC;QAED;;;WAGG;QACI,yBAAM,GAAb,UAAc,GAAS;YACpB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACvC,CAAC;QAED;;;WAGG;QACI,8BAAW,GAAlB,UAAmB,GAAS;YACzB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACzC,CAAC;QACJ,eAAC;IAAD,CA/FA,AA+FC,CA/F6B,aAAK,GA+FlC;IA/FY,4BAAQ;;;;;;AC/ErB;;;;GAIG;;;;;;;IAEH;;OAEG;IACH,oBAA0B;IAC1B,oBAA0B;IAC1B,qBAA2B;;;;;;;;ICX3B,iBAAuB;IAGF,4BAAQ;;;;;ICF7B;;;OAGG;IAEH,IAAM,iBAAiB,GAA8B;QAClD,KAAK,EAAE,OAAO;QACd,QAAQ,EAAE,UAAU;QACpB,UAAU,EAAE,aAAa;KAC3B,CAAC;IA6BF;;OAEG;IACH;QAMG;YAJQ,cAAS,GAAsB,IAAI,CAAC;YAErC,gBAAW,GAAa,EAAE,CAAC;YAgGlC,mDAAmD;YAC3C,mBAAc,GAAmB;gBACtC,iCAAiC;gBACjC,aAAa,EAAE;oBACZ,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAC5C,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;gBACvD,CAAC;gBAED,gEAAgE;gBAChE,kBAAkB,EAAE;oBACjB,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;oBAC/B,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;oBACrB,IAAI,CAAC;wBACF,GAAG,CAAC,YAAY,GAAG,aAAa,CAAC;oBACpC,CAAC;oBAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACV,MAAM,CAAC,KAAK,CAAC;oBAChB,CAAC;oBACD,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,aAAa,CAAC;gBAC7C,CAAC;gBAED,qCAAqC;gBACrC,cAAc,EAAE;oBACb,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAC9C,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBACxE,CAAC;gBAED,sCAAsC;gBACtC,gBAAgB,EAAE;oBACf,MAAM,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,iBAAiB,IAAI,GAAG,CAAC,IAAI,CAAC,iBAAiB,IAAI,GAAG,CAAC,CAAC;gBACxF,CAAC;gBAED,0BAA0B;gBAC1B,WAAW,EAAE;oBACV,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;oBAC9C,KAAK,CAAC,OAAO,GAAG,uCAAuC,CAAC;oBACxD,MAAM,CAAC,CAAC,EAAE,GAAG,KAAK,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC5D,CAAC;aACH,CAAC;YAEF,kDAAkD;YAC1C,iBAAY,GAAkB;gBACnC,eAAe,EAAE;oBACd,MAAM,CAAC,CAAC,CAAC,CAAO,MAAO,CAAC,YAAY;wBACrB,MAAO,CAAC,kBAAkB;wBAC1B,MAAO,CAAC,eAAe;wBACvB,MAAO,CAAC,cAAc;wBACtB,MAAO,CAAC,aAAa,CAAC,CAAC;gBACzC,CAAC;gBACD,YAAY,EAAE;oBACX,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAC5C,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC1D,CAAC;aACH,CAAC;YAjJC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAChD,CAAC;QAED;;;;WAIG;QACI,qCAAkB,GAAzB;YACG,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAChD,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;QACzB,CAAC;QAED;;;WAGG;QACI,qCAAkB,GAAzB;YACG,IAAI,GAAG,GAAG,8DAA8D,CAAC;YACzE,IAAI,IAAI,GAAG;gBACR,gCAAgC;gBAChC,qCAAqC;aACvC,CAAC;YAEF,IAAI,SAAS,GAAQ,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC/C,GAAG,CAAC,CAAgB,UAA8B,EAA9B,KAAA,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAA9B,cAA8B,EAA9B,IAA8B;gBAA7C,IAAI,OAAO,SAAA;gBACb,EAAE,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;oBACtB,GAAG,IAAI,cAAc,CAAC,CAAC,MAAM;oBAC7B,IAAI,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;oBAC7C,IAAI,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;gBACpD,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,GAAG,IAAI,cAAc,CAAC,CAAC,MAAM;oBAC7B,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;oBAC3C,IAAI,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;gBACpD,CAAC;gBAAA,CAAC;gBAEF,GAAG,IAAI,GAAG,GAAG,iBAAiB,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;aACjD;YAED,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACpC,CAAC;QAED;;;WAGG;QACK,uCAAoB,GAA5B;YAAA,iBA0CC;YAzCE,MAAM,CAAC;gBACJ,+BAA+B;gBAC/B,MAAM,EAAE,CAAC;oBACN,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;gBAC9C,CAAC,CAAC,EAAE;gBAEJ,oCAAoC;gBACpC,WAAW,EAAE,CAAC;oBACX,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,kBAAkB,EAAE,CAAC;gBACnD,CAAC,CAAC,EAAE;gBAEJ,gCAAgC;gBAChC,OAAO,EAAE,CAAC;oBACP,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC;gBAC/C,CAAC,CAAC,EAAE;gBAEJ,kCAAkC;gBAClC,SAAS,EAAE,CAAC;oBACT,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,gBAAgB,EAAE,CAAC;gBACjD,CAAC,CAAC,EAAE;gBAEJ,6BAA6B;gBAC7B,IAAI,EAAE,CAAC;oBACJ,MAAM,CAAC,KAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;gBAC5C,CAAC,CAAC,EAAE;gBAEJ,iCAAiC;gBACjC,QAAQ,EAAE,CAAC;oBACR,MAAM,CAAC,KAAI,CAAC,YAAY,CAAC,eAAe,EAAE,CAAC;gBAC9C,CAAC,CAAC,EAAE;gBAEJ,8BAA8B;gBAC9B,KAAK,EAAE,CAAC;oBACL,MAAM,CAAC,KAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;gBAC3C,CAAC,CAAC,EAAE;gBAEJ,mCAAmC;gBACnC,UAAU,EAAE,CAAC;oBACV,MAAM,CAAC,CAAC,CAAO,SAAU,CAAC,WAAW,CAAC;gBACzC,CAAC,CAAC,EAAE;aACN,CAAC;QACL,CAAC;QAwDM,uBAAI,GAAX;YACG,uCAAuC;YACvC,IAAI,cAAc,GAAG,KAAK,CAAC;YAC3B,GAAG,CAAC,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBACpC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAuB,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC/D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC5B,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,uDAAuD,EAC/E,IAAI,CAAC,CAAC;oBACT,cAAc,GAAG,IAAI,CAAC;gBACzB,CAAC;YACJ,CAAC;YACD,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBAClB,MAAM,CAAC,KAAK,CAAC;YAChB,CAAC;YAED,+DAA+D;YAC/D,GAAG,CAAC,CAAC,IAAI,OAAO,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACrC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAsB,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;oBACtD,aAAM,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,2EAA2E,EAClG,OAAO,CAAC,CAAC;gBACf,CAAC;YACJ,CAAC;YAED,MAAM,CAAC,IAAI,CAAC;QACf,CAAC;QAEJ,eAAC;IAAD,CApLA,AAoLC,IAAA;IApLY,4BAAQ;;;;;IC1CrB;;OAEG;IACH;QAKG,oBAAY,aAAwB;YACjC,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QACvC,CAAC;QAEM,yBAAI,GAAX,UAAY,OAAY;YACrB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAC1C,CAAC;QAEO,0BAAK,GAAb,UAAc,IAAoB,EAAE,OAAY;YAC7C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,KAAK,CAAC;YAChB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC9D,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxC,MAAM,CAAC,IAAI,CAAC;gBACf,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,MAAM,CAAC,KAAK,CAAC;gBAChB,CAAC;YACJ,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC5D,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC;YAC9C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,CAAC,CAAC;YAC/C,CAAC;QACJ,CAAC;QAED,wDAAwD;QACjD,wBAAG,GAAV,UAAW,GAAW;YACnB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACrC,CAAC;QAEO,yBAAI,GAAZ,UAAa,IAAoB,EAAE,GAAW;YAC3C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,EAAE,CAAC;YACb,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAChC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,GAAG,CAAC,CAAC;YACzC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,CAAC;YAC1C,CAAC;QACJ,CAAC;QAEM,wBAAG,GAAV,UAAW,OAAY;YACpB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,KAAK,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;gBAC1F,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YAC5C,CAAC;QACJ,CAAC;QAEO,4BAAO,GAAf,UAAgB,IAAoB,EAAE,OAAY;YAC/C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBAChB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBACvD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxC,MAAM,CAAC,KAAK,CAAC,CAAC,oDAAoD;oBACrE,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACL,IAAI,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBAC7B,MAAM,CAAC,IAAI,CAAC;oBACf,CAAC;gBACJ,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBAC5D,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;wBAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;wBAC3F,MAAM,CAAC,IAAI,CAAC;oBACf,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACL,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC;oBAChD,CAAC;gBACJ,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;wBAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;wBAC5F,MAAM,CAAC,IAAI,CAAC;oBACf,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACL,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,CAAC,CAAC;oBACjD,CAAC;gBACJ,CAAC;YACJ,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAEM,uCAAkB,GAAzB,UAA0B,OAAY;YACnC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAClD,CAAC;QAEO,4BAAO,GAAf,UAAgB,IAAoB,EAAE,OAAY;YAC/C,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC9D,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBACnD,uDAAuD;gBACvD,EAAE,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACrB,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;oBACvC,oEAAoE;oBACpE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;wBAC/B,wBAAwB;wBACxB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;4BACrD,MAAM,CAAC,IAAI,CAAC;wBACf,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;4BACjC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;wBAC1B,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;4BAClC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;wBACzB,CAAC;wBACD,yBAAyB;wBACzB,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;wBAC9C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;wBAC3B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;wBAC7B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,4CAA4C;wBACjG,MAAM,CAAC,IAAI,CAAC;oBAEf,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACL,6EAA6E;wBAC7E,MAAM,CAAC,IAAI,CAAC;oBACf,CAAC;gBACJ,CAAC;YACJ,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC5D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;gBACpD,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;gBACtD,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACf,CAAC;QAED,mIAAmI;QAC3H,6BAAQ,GAAhB,UAAiB,IAAoB,EAAE,OAAuB;YAC3D,IAAI,UAAU,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YAClC,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,KAAK,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBACvC,wBAAwB;gBACxB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;oBACrD,MAAM,CAAC,IAAI,CAAC;gBACf,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;oBACjC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAC1B,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC;oBAClC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACzB,CAAC;gBACD,yBAAyB;gBACzB,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAC9C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;gBAC3B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;gBAE7B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;gBACpD,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC5D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;gBACrD,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;gBACvD,MAAM,CAAC,IAAI,CAAC;YACf,CAAC;QACJ,CAAC;QAEO,iCAAY,GAApB,UAAqB,IAAoB;YACtC,IAAI,OAAO,GAAG,IAAI,CAAC;YACnB,OAAO,OAAO,CAAC,OAAO,EAAE,IAAI,IAAI,EAAE,CAAC;gBAChC,OAAO,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;YAC/B,CAAC;YACD,MAAM,CAAC,OAAO,CAAC;QAClB,CAAC;QAEM,yBAAI,GAAX;YACG,IAAI,OAAO,GAAG,IAAI,KAAK,EAAO,CAAC;YAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YAChC,MAAM,CAAC,OAAO,CAAC;QAClB,CAAC;QAEO,0BAAK,GAAb,UAAc,QAAwB,EAAE,OAAiB;YACtD,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;gBACpB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC;gBACxC,QAAQ,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,UAAU,OAAO;oBACzC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACzB,CAAC,CAAC,CAAC;gBACH,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,OAAO,CAAC,CAAC;YAC5C,CAAC;QACJ,CAAC;QAEJ,iBAAC;IAAD,CArLA,AAqLC,IAAA;IArLY,gCAAU;IAuLvB;;OAEG;IACH;QAMG,wBAAY,GAAW,EAAE,IAAgB,EAAE,IAAoB,EAAE,KAAqB;YACnF,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;YAChB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QAEM,+BAAM,GAAb;YACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACpB,CAAC;QAEM,+BAAM,GAAb,UAAc,GAAW;YACtB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QACnB,CAAC;QAEM,gCAAO,GAAd;YACG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACrB,CAAC;QAEM,gCAAO,GAAd,UAAe,IAAS;YACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACrB,CAAC;QAEM,gCAAO,GAAd;YACG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACrB,CAAC;QAEM,gCAAO,GAAd,UAAe,IAAoB;YAChC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACrB,CAAC;QAEM,iCAAQ,GAAf;YACG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACtB,CAAC;QAEM,iCAAQ,GAAf,UAAgB,KAAqB;YAClC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QACJ,qBAAC;IAAD,CA5CA,AA4CC,IAAA;IA5CY,wCAAc;IA8C3B;;;;OAIG;IACH;QAGG,uBAAY,GAAW;YAFf,SAAI,GAAW,CAAC,CAAC;YAGtB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QACnB,CAAC;QAEM,iCAAS,GAAhB;YACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACpB,CAAC;QAEM,8BAAM,GAAb,UAAc,GAAW;YACtB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QACnB,CAAC;QACJ,oBAAC;IAAD,CAdA,AAcC,IAAA;IAdY,sCAAa;;;;;;;;IChP1B;;OAEG;IACQ,QAAA,UAAU,GAAG,cAAc,CAAC;IAEvC,oEAAoE;IACpE,oDAAoD;IAEpD,mBAAwB;IACxB,qBAA0B;IAC1B,mBAAyB;IACzB,kBAAwB;IACxB,kBAAwB;IACxB,mBAAyB;IACzB,4BAAkC;IAClC,mBAAyB;IACzB,kBAAwB;IACxB,kBAAwB;IACxB,mBAAyB;IACzB,sBAA4B;IAC5B,qBAA0B;IAC1B,qBAA2B;IAC3B,kBAAwB;IACxB,oBAA0B;IAC1B,kBAAwB;IACxB,oBAA0B;IAC1B,oBAA0B;IAE1B,kBAAgC;IAChC,kBAAkC;IAClC,kBAAgC;IAEhC,kBAA6B;IAC7B,kBAAuC;IACvC,kBAAkC;IAIf,wBAAM;IAIP,sBAAK;IAIJ,wBAAM;IAIR,oBAAI;IAErB,uBAAkC;IAClC,qBAAgC;IAChC,uBAAkC;IAClC,4BAAuC;IACvC,iBAA2B;IAC3B,uBAAkC;;;;;IC/BlC;;OAEG;IACH,IAAY,WAaX;IAbD,WAAY,WAAW;QACpB;;WAEG;QACH,yDAAU,CAAA;QACV;;WAEG;QACH,uDAAS,CAAA;QACT;;WAEG;QACH,+CAAK,CAAA;IACR,CAAC,EAbW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAatB;IA6CD;;;;;;;;OAQG;IACH;QAA4B,0BAAK;QAqJ9B;;;;;;;;;;;;;;;;;;;;;WAqBG;QACH,gBAAY,OAAwB;YAApC,YACG,iBAAO,SAkFT;YA9NO,iBAAW,GAAY,KAAK,CAAC;YAWrC;;eAEG;YACI,WAAK,GAAG,IAAI,aAAK,EAAE,CAAC;YAS3B;;eAEG;YACI,oBAAc,GAAqB,EAAE,CAAC;YAY7C;;eAEG;YACI,YAAM,GAA8B,EAAE,CAAC;YAEtC,iBAAW,GAAoB,EAAE,CAAC;YAE1C;;eAEG;YACI,kBAAY,GAAY,KAAK,CAAC;YAErC;;eAEG;YACI,iBAAW,GAAgB,WAAW,CAAC,UAAU,CAAC;YAEzD;;eAEG;YACI,0BAAoB,GAAY,IAAI,CAAC;YAE5C;;eAEG;YACI,aAAO,GAAY,KAAK,CAAC;YACzB,gBAAU,GAAU,IAAI,cAAK,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YACpD;;eAEG;YACI,qBAAe,GAAU,IAAI,cAAK,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;YAErD;;eAEG;YACI,sBAAgB,GAAG,UAAC,CAAM,IAAO,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAGjE,yBAAmB,GAAY,IAAI,CAAC;YAQpC,gBAAU,GAAW,GAAG,CAAC;YAIzB,gBAAU,GAAY,KAAK,CAAC;YAsDjC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;YAEjE,uBAAuB;YACvB,IAAI,QAAQ,GAAG,IAAI,mBAAQ,EAAE,CAAC;YAC9B,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,sCAAsC,IAAI,CAAC,CAAC,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC5F,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC5C,OAAO,CAAC,SAAS,GAAG,4EAA4E,CAAC;gBACjG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;gBAEnC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,IAAI;oBACxC,IAAI,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;oBAChD,WAAW,CAAC,SAAS,GAAG,0BAA0B,GAAG,IAAI,CAAC;oBAC1D,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBAC1C,CAAC,CAAC,CAAC;gBAEH,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;oBAC3B,IAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;oBAC9D,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBACV,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;oBAC5C,CAAC;gBACJ,CAAC;;YAGJ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YAC3B,CAAC;YAED,uCAAuC;YACvC,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,CAAC;gBACtD,OAAO,CAAC,GAAG,CAAC,iCAA+B,kBAAU,MAAG,EACrD,4GAA4G,CAAC,CAAC;gBACjH,OAAO,CAAC,GAAG,CAAC;;;UAGX,CAAC,CAAC;gBACH,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,wBAAwB,EAAE,sBAAsB,CAAC,CAAC;YAC1E,CAAC;YAED,KAAI,CAAC,OAAO,GAAG,aAAM,CAAC,WAAW,EAAE,CAAC;YAEpC,kEAAkE;YAClE,EAAE,CAAC,CAAC,KAAI,CAAC,OAAO,CAAC,YAAY,KAAK,eAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;gBAChD,QAAQ,CAAC,kBAAkB,EAAE,CAAC;YACjC,CAAC;YAED,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;YAEzC,KAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAC;YAE/C,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;gBAC3B,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,kCAAkC,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;gBACjF,KAAI,CAAC,MAAM,GAAsB,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;YACrF,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,gCAAgC,CAAC,CAAC;gBACrD,KAAI,CAAC,MAAM,GAAsB,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACrE,CAAC;YACD,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;gBACnC,EAAE,CAAC,CAAC,OAAO,CAAC,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC;oBACrC,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC;gBACxC,CAAC;gBACD,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,0BAA0B,GAAG,OAAO,CAAC,KAAK,GAAG,KAAK,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;gBACxF,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC;gBACjC,KAAI,CAAC,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;gBAClC,KAAI,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC;gBACnC,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;YAEvC,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;gBAC/B,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,+BAA+B,CAAC,CAAC;gBACpD,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC,UAAU,CAAC;YAC7C,CAAC;YAGD,KAAI,CAAC,OAAO,GAAG,IAAI,eAAM,EAAE,CAAC;YAE5B,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;YAE1B,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,YAAY,GAAG,IAAI,aAAK,CAAC,KAAI,CAAC,CAAC;YAErD,KAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC;YACtC,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;;QAC1B,CAAC;QAvND,sBAAW,uBAAG;YALd;;;eAGG;iBAEH;gBACG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC;YACnC,CAAC;;;WAAA;QAUD,sBAAW,yBAAK;YAHhB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC3B,CAAC;;;WAAA;QAgFM,mBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,iBAAM,EAAE,YAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChC,CAAC;QAyHD;;;WAGG;QACI,+BAAc,GAArB;YACG,IAAI,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC,iBAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,GAAG,GAAG,IAAI,CAAC,wBAAwB,CAAC,iBAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YACvC,IAAI,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAExC,MAAM,CAAC,IAAI,yBAAW,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACpD,CAAC;QAMD,sBAAW,6BAAS;YAHpB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAC1B,CAAC;YAED;;;eAGG;iBACH,UAAqB,KAAa;gBAC/B,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;oBACd,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,6DAA6D,CAAC,CAAC;oBAC1F,MAAM,CAAC;gBACV,CAAC;gBAED,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YAC3B,CAAC;;;WAbA;QAeD;;;;;;;;;;WAUG;QACI,8BAAa,GAApB,UAAqB,SAAoB,EAAE,CAAS,EAAE,CAAS;YAC5D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,aAAa,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC7D,CAAC;QAED;;;WAGG;QACI,2BAAU,GAAjB,UAAkB,OAAgB;YAC/B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACzC,CAAC;QAED;;WAEG;QACI,8BAAa,GAApB,UAAqB,OAAgB;YAClC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC5C,CAAC;QAED;;;WAGG;QACI,yBAAQ,GAAf,UAAgB,KAAY;YACzB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAC5C,CAAC;QAED;;;WAGG;QACI,4BAAW,GAAlB,UAAmB,KAAY;YAC5B,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC/C,CAAC;QAED;;;;;;WAMG;QACI,yBAAQ,GAAf,UAAgB,GAAW,EAAE,KAAY;YACtC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,4BAA4B,CAAC,CAAC;YACjE,CAAC;YACD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;YACzB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;QAYD;;WAEG;QACI,4BAAW,GAAlB,UAAmB,MAAW;YAC3B,EAAE,CAAC,CAAC,MAAM,YAAY,aAAK,CAAC,CAAC,CAAC;gBAC3B,eAAe;gBACf,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC;4BAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;wBAC3B,CAAC;oBACJ,CAAC;gBACJ,CAAC;YACJ,CAAC;YAED,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC9B,eAAe;gBACf,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAC9B,CAAC;QACJ,CAAC;QAqCM,oBAAG,GAAV,UAAW,MAAW;YACnB,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBACrC,MAAM,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,cAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAC1B,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,aAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACzB,CAAC;YAED,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YAC3B,CAAC;YAED,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,QAAQ,CAAU,SAAS,CAAC,CAAC,CAAE,EAAU,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC;YAChE,CAAC;QACJ,CAAC;QAkCM,uBAAM,GAAb,UAAc,MAAW;YACtB,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBACxC,MAAM,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,cAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAC7B,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,aAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAC5B,CAAC;YAED,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC9B,CAAC;YAED,EAAE,CAAC,CAAC,MAAM,YAAY,aAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAC5B,CAAC;YAED,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC9B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAC5B,CAAC;QACJ,CAAC;QAED;;;;;;;;WAQG;QACO,0BAAS,GAAnB,UAAoB,KAAY;YAC7B,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QAED;;;;;;WAMG;QACO,6BAAY,GAAtB,UAAuB,KAAY;YAChC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;QAED;;;;WAIG;QACI,0BAAS,GAAhB,UAAiB,GAAW;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;gBACjC,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAEhC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;gBAE3C,mCAAmC;gBACnC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;oBACnC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBACvD,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,wBAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC1G,CAAC;gBAED,+BAA+B;gBAC/B,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;gBAE7B,uDAAuD;gBACvD,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAEpC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBACrD,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,sBAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACtG,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,EAAE,iBAAiB,CAAC,CAAC;YACvD,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,6BAAY,GAAnB;YACG,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjD,MAAM,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YAChE,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;QAC3B,CAAC;QAED;;WAEG;QACI,8BAAa,GAApB;YACG,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjD,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;YACjE,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;QAC5B,CAAC;QAED;;;WAGG;QACI,yCAAwB,GAA/B,UAAgC,KAAa;YAE1C,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YACnB,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YAEnB,gCAAgC;YAChC,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YAC9D,IAAI,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAGhE,0BAA0B;YAC1B,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YACtC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;YAEvC,iBAAiB;YACjB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjD,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBAChD,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;gBAChB,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;YACnB,CAAC;YAED,MAAM,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;QACzD,CAAC;QAED;;;WAGG;QACI,yCAAwB,GAA/B,UAAgC,KAAa;YAE1C,IAAI,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;YACtB,IAAI,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;YAEtB,iBAAiB;YACjB,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjD,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBAChD,OAAO,IAAI,KAAK,CAAC,CAAC,CAAC;gBACnB,OAAO,IAAI,KAAK,CAAC,CAAC,CAAC;YACtB,CAAC;YAED,yBAAyB;YACzB,OAAO,GAAG,OAAO,GAAG,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;YAC5C,OAAO,GAAG,OAAO,GAAG,IAAI,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;YAE7C,iCAAiC;YACjC,OAAO,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YACpE,OAAO,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAEtE,MAAM,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAC/D,CAAC;QAED;;WAEG;QACK,wCAAuB,GAA/B,UAAgC,MAA4B;YACzD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC9C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAiB,MAAO,CAAC,WAAW,CAAC;gBACzE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAiB,MAAO,CAAC,YAAY,CAAC;YAC/E,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC/C,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACnC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;gBACxC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAY,MAAO,CAAC,UAAU,CAAC;gBACnE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAY,MAAO,CAAC,WAAW,CAAC;YACzE,CAAC;QACJ,CAAC;QAED;;WAEG;QACK,4BAAW,GAAnB,UAAoB,OAAwB;YAA5C,iBAyDC;YAxDE,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC,UAAU,IAAI,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC;gBAG7F,IAAI,MAAM,GAAQ,CAAC,IAAI,CAAC,WAAW,KAAK,WAAW,CAAC,SAAS;oBACrD,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAQ,MAAM,CAAC,CAAC;gBAEpE,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;gBAErC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE;oBAC/B,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;oBACxC,KAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;oBACrC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,sBAAsB,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;oBAChE,KAAI,CAAC,eAAe,CAAC,KAAI,CAAC,mBAAmB,CAAC,CAAC;gBAClD,CAAC,CAAC,CAAC;YACN,CAAC;YAED,oBAAoB;YACpB,IAAI,CAAC,KAAK,GAAG;gBACV,QAAQ,EAAE,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC;gBAClC,QAAQ,EAAE,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC;gBAClC,QAAQ,EAAE,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC;aACpC,CAAC;YACF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YAC3B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YACvF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YAE3B,4CAA4C;YAC5C,mGAAmG;YAEnG,IAAI,MAA0B,EAAE,gBAAwB,CAAC;YACzD,EAAE,CAAC,CAAC,OAAO,QAAQ,CAAC,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;gBAC1C,MAAM,GAAG,QAAQ,CAAC;gBAClB,gBAAgB,GAAG,kBAAkB,CAAC;YACzC,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,UAAU,IAAI,QAAQ,CAAC,CAAC,CAAC;gBACjC,MAAM,GAAuB,UAAU,CAAC;gBACxC,gBAAgB,GAAG,oBAAoB,CAAC;YAC3C,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,IAAI,QAAQ,CAAC,CAAC,CAAC;gBACrC,MAAM,GAAuB,cAAc,CAAC;gBAC5C,gBAAgB,GAAG,wBAAwB,CAAC;YAC/C,CAAC;YAED,QAAQ,CAAC,gBAAgB,CAAC,gBAAgB,EAAE;gBACzC,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBACpB,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,oBAAW,CAAC,KAAI,CAAC,CAAC,CAAC;oBAC3D,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;gBACvC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,qBAAY,CAAC,KAAI,CAAC,CAAC,CAAC;oBAC7D,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;gBACxC,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,GAAG,GAA6B,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAClE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACzB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1C,CAAC;QAEJ,CAAC;QAED;;;;;WAKG;QACI,gCAAe,GAAtB,UAAuB,QAAiB;YACrC,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC;YAEpC,IAAI,GAAG,GAAQ,IAAI,CAAC,GAAG,CAAC;YACxB,GAAG,CAAC,qBAAqB,GAAG,QAAQ,CAAC;YACrC,GAAG,CAAC,CAAkB,UAAsF,EAAtF,MAAC,6BAA6B,EAAE,0BAA0B,EAAE,yBAAyB,CAAC,EAAtF,cAAsF,EAAtF,IAAsF;gBAAvG,IAAI,SAAS,SAAA;gBACf,EAAE,CAAC,CAAC,SAAS,IAAI,GAAG,CAAC,CAAC,CAAC;oBACpB,GAAG,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC;gBAC7B,CAAC;aACH;YAAA,CAAC;QACL,CAAC;QAED;;WAEG;QACI,gCAAe,GAAtB;YACG,MAAM,CAAO,IAAI,CAAC,GAAI,CAAC,qBAAqB;gBACnC,IAAI,CAAC,GAAI,CAAC,2BAA2B;gBACrC,IAAI,CAAC,GAAI,CAAC,wBAAwB;gBAClC,IAAI,CAAC,GAAI,CAAC,uBAAuB,CAAC;QAC9C,CAAC;QAGD;;;WAGG;QACK,wBAAO,GAAf,UAAgB,KAAa;YAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACnB,6CAA6C;gBAC7C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBACjC,yBAAyB;gBACzB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC7B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC7B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC7B,MAAM,CAAC;YACV,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,uBAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAC9D,8BAA8B;YAC9B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAEtC,oBAAoB;YACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,UAAU,CAAC;gBACnD,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;YAChC,CAAC,CAAC,CAAC;YAEH,yBAAyB;YACzB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAC7B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAC7B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAE7B,uBAAuB;YACvB,0CAA0C;YAC1C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,wBAAe,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAC5E,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,wBAAe,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QACnE,CAAC;QAED;;;WAGG;QACK,sBAAK,GAAb,UAAc,KAAa;YACxB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,qBAAY,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YACzD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;gBAC9B,qCAAqC;gBACrC,MAAM,CAAC;YACV,CAAC;YAED,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACzD,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;YAChD,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAExD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAExC,8CAA8C;YAC9C,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACzC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACzF,CAAC;YAED,yBAAyB;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBAEhB,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,UAAU,CAAC;gBAC3B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;gBAChD,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;gBACzC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,YAAY,CAAC,EAAE,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;gBAChI,CAAC;gBAED,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YACtF,CAAC;YAED,kBAAkB;YAClB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnD,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;YAC9G,CAAC;YAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,sBAAa,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QAC9D,CAAC;QAED;;;;;WAKG;QACI,sBAAK,GAAZ,UAAa,MAAgB;YAA7B,iBAgCC;YA/BE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACrB,IAAI,OAAO,GAAG,IAAI,kBAAO,EAAE,CAAC;gBAC5B,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,6CAA6C,CAAC,CAAC;YACxE,CAAC;YAED,IAAI,eAA6B,CAAC;YAClC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACV,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;gBACtB,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBAC9B,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC7C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,eAAe,GAAG,kBAAO,CAAC,OAAO,EAAE,CAAC;YACvC,CAAC;YAED,eAAe,CAAC,IAAI,CAAC;gBAClB,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,uBAAc,CAAC,KAAI,CAAC,CAAC,CAAC;YAChD,CAAC,CAAC,CAAC;YAEH,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;gBAEvC,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,qBAAqB,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;gBAEtE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;YAEtC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,wBAAwB;YAC3B,CAAC;YACD,MAAM,CAAC,eAAe,CAAC;QAE1B,CAAC;QAEa,qBAAc,GAA5B,UAA6B,IAAY,EAAE,GAA+B,EAAE,KAAmB;YAC5F,IAAI,QAAQ,GAAG,KAAK,EAAE,CAAC;YAEvB,MAAM,CAAC;gBACJ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBACrB,MAAM,CAAC;gBACV,CAAC;gBACD,IAAI,CAAC;oBACF,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAChC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,sBAAa,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;oBAErE,yCAAyC;oBACzC,IAAI,GAAG,GAAG,KAAK,EAAE,CAAC;oBAClB,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC9C,mEAAmE;oBACnE,oFAAoF;oBACpF,iEAAiE;oBACjE,aAAa;oBACb,EAAE,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC;wBACjB,OAAO,GAAG,CAAC,CAAC;oBACf,CAAC;oBACD,IAAI,KAAK,GAAG,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;oBAErC,+CAA+C;oBAC/C,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,GAAG,CAAC,CAAC;oBAC1C,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;oBACjD,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;oBAC7B,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,GAAG,OAAO,CAAC;oBAClC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;oBACnC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;oBAEhD,IAAI,YAAY,GAAG,KAAK,EAAE,CAAC;oBAC3B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;oBACpB,IAAI,WAAW,GAAG,KAAK,EAAE,CAAC;oBAC1B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAClB,IAAI,SAAS,GAAG,KAAK,EAAE,CAAC;oBAExB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,GAAG,WAAW,GAAG,YAAY,CAAC;oBAClE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,GAAG,SAAS,GAAG,WAAW,CAAC;oBAE7D,QAAQ,GAAG,GAAG,CAAC;oBAEf,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,uBAAc,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC1E,CAAC;gBAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACV,MAAM,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAC7C,IAAI,CAAC,IAAI,EAAE,CAAC;oBACZ,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;gBAC5B,CAAC;YACJ,CAAC,CAAC;QACL,CAAC;QAED;;WAEG;QACI,qBAAI,GAAX;YACG,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;gBACpB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,sBAAa,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gBACzB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;YACtC,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,yBAAQ,GAAf;YACG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9B,CAAC;QAED;;;WAGG;QACI,2BAAU,GAAjB;YACG,IAAI,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;YACzB,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YAC7C,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;YACjB,MAAM,CAAC,MAAM,CAAC;QACjB,CAAC;QAED;;;;;WAKG;QACI,qBAAI,GAAX,UAAY,MAAiB;YAA7B,iBAaC;YAZE,IAAI,QAAQ,GAAG,IAAI,kBAAO,EAAO,CAAC;YAElC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YAEvB,MAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;gBAChB,UAAU,CAAC;oBACR,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,QAAQ,CAAC,OAAO,EAAE,CAAC;gBACtB,CAAC,EAAE,GAAG,CAAC,CAAC;YACX,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,QAAQ,CAAC;QACnB,CAAC;QAEJ,aAAC;IAAD,CA17BA,AA07BC,CA17B2B,aAAK;IAyI9B;;OAEG;IACY,4BAAqB,GAAmB;QACpD,KAAK,EAAE,CAAC;QACR,MAAM,EAAE,CAAC;QACT,eAAe,EAAE,EAAE;QACnB,YAAY,EAAE,KAAK,CAAC,YAAY,CAAC,QAAQ;QACzC,0BAA0B,EAAE,IAAI;QAChC,sCAAsC,EAAE,IAAI;KAC9C,CAAC;IA5GF;QADC,qBAAQ,CAAC,EAAE,eAAe,EAAE,+BAA+B,EAAE,CAAC;qCAG9D;IAzCS,wBAAM;IA47BnB;;OAEG;IACH;QACG,uBAAmB,SAAoB,EAAS,CAAS,EAAS,CAAS;YAAxD,cAAS,GAAT,SAAS,CAAW;YAAS,MAAC,GAAD,CAAC,CAAQ;YAAS,MAAC,GAAD,CAAC,CAAQ;QAAI,CAAC;QACnF,oBAAC;IAAD,CAFA,AAEC,IAAA;;;;;IC5hCD;;;OAGG;IACH;QAA6B,2BAAK;QAG/B;;;;;WAKG;QACH,iBAAY,CAAU,EAAE,CAAU,EAAE,KAAc,EAAE,MAAe;YAAnE,YACG,kBAAM,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,SAM5B;YALE,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC;YAC9C,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACxB,KAAI,CAAC,aAAa,GAAG,sBAAa,CAAC,gBAAgB,CAAC;YACpD,KAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;;QACpC,CAAC;QAEM,8BAAY,GAAnB,UAAoB,MAAc;YAC/B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACzB,CAAC;QAEM,0BAAQ,GAAf,UAAgB,CAAS,EAAE,CAAS,EAAE,QAAwB;YAAxB,yBAAA,EAAA,eAAwB;YAC3D,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAAC,MAAM,CAAC,iBAAM,QAAQ,YAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAAC,CAAC;YAE9C,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACrE,MAAM,CAAC,iBAAM,QAAQ,YAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;QAC7C,CAAC;QACJ,cAAC;IAAD,CA5BA,AA4BC,CA5B4B,cAAK,GA4BjC;IA5BY,0BAAO;;;;;ICJpB,wBAA+B,KAAY;QACxC,MAAM,CAAC,CAAC,CAAC,KAAK,YAAY,iBAAO,CAAC;YAC3B,CAAC,CAAC,KAAK,YAAY,iBAAO,CAAC;YAC3B,CAAC,CAAC,KAAK,YAAY,aAAK,CAAC,CAAC;IACpC,CAAC;IAJD,wCAIC;IAED,mBAA0B,KAAY;QACnC,MAAM,CAAC,KAAK,YAAY,iBAAO,CAAC;IACnC,CAAC;IAFD,8BAEC;;;;;ICMD;;;;;;;;OAQG;IACH;QAA2B,yBAAK;QAiD7B,eAAY,MAAe;YAA3B,YACG,iBAAO,SAMT;YA5CD;;eAEG;YACI,cAAQ,GAAY,EAAE,CAAC;YAE9B;;eAEG;YACI,cAAQ,GAAc,EAAE,CAAC;YAEhC;;eAEG;YACI,YAAM,GAA6B,EAAE,CAAC;YAO7C;;eAEG;YACI,cAAQ,GAAY,EAAE,CAAC;YAGtB,oBAAc,GAAY,KAAK,CAAC;YAEhC,wBAAkB,GAAsB,IAAI,uBAAU,CAAQ,cAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAEzF,iBAAW,GAAyB,IAAI,+DAA8B,EAAE,CAAC;YAEzE,gBAAU,GAAY,EAAE,CAAC;YACzB,aAAO,GAAY,EAAE,CAAC;YACtB,kBAAY,GAAY,EAAE,CAAC;YAC3B,aAAO,GAAW,aAAM,CAAC,WAAW,EAAE,CAAC;YAI5C,KAAI,CAAC,MAAM,GAAG,IAAI,mBAAU,EAAE,CAAC;YAC/B,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACV,KAAI,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC;gBACvC,KAAI,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC;YAC3C,CAAC;;QACJ,CAAC;QAYM,kBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,iBAAM,EAAE,YAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChC,CAAC;QAGD;;;WAGG;QACI,4BAAY,GAAnB,UAAoB,MAAc;YAC/B,qBAAqB;YACrB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC;gBACvC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC;YAC3C,CAAC;YACD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;QAC1D,CAAC;QAED;;;WAGG;QACI,0BAAU,GAAjB;YACG,qBAAqB;YACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAChD,CAAC;QAED;;;WAGG;QACI,4BAAY,GAAnB;YACG,qBAAqB;YACrB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QAClD,CAAC;QAED;;WAEG;QACK,mCAAmB,GAA3B;YACG,GAAG,CAAC,CAAc,UAAa,EAAb,KAAA,IAAI,CAAC,QAAQ,EAAb,cAAa,EAAb,IAAa;gBAA1B,IAAI,KAAK,SAAA;gBACX,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACjC;QACJ,CAAC;QAKD,sBAAW,gCAAa;YAHxB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;YAC9B,CAAC;;;WAAA;QAED;;;;WAIG;QACI,2BAAW,GAAlB,UAAmB,MAAc;YAC9B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBACrC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,yBAAe,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;gBAC3E,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC9B,CAAC;QACJ,CAAC;QAED;;;;WAIG;QACI,sBAAM,GAAb,UAAc,MAAc,EAAE,KAAa;YACxC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,wBAAc,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAChE,IAAI,CAAS,EAAE,GAAW,CAAC;YAE3B,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACrC,CAAC;YAED,yDAAyD;YACzD,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACxD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1C,CAAC;YACD,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;YAE7B,uCAAuC;YACvC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAA,KAAK;gBACrC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBACpB,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC;YAC1B,CAAC,CAAC,CAAC;YAEH,0CAA0C;YAC1C,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC1C,CAAC;YAED,0CAA0C;YAC1C,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC1C,CAAC;YAED,uCAAuC;YACvC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC1C,CAAC;YAED,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;YAEhC,qCAAqC;YACrC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,kBAAO,CAAC,OAAO,CAAC,CAAC,CAAC;gBACvC,IAAI,gBAAgB,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBAClC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;gBAC9C,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;gBACtF,IAAI,eAAe,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBAEjC,IAAI,iBAAiB,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBACnC,IAAI,IAAI,GAAW,kBAAO,CAAC,eAAe,CAAC;gBAC3C,IAAI,cAAc,GAAG,KAAK,GAAG,IAAI,CAAC;gBAClC,OAAO,IAAI,GAAG,CAAC,EAAE,CAAC;oBACf,sBAAsB;oBACtB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;oBAC5D,oCAAoC;oBACpC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,EAAE,kBAAO,CAAC,2BAA2B,CAAC,CAAC;oBAC9E,IAAI,EAAE,CAAC;gBACV,CAAC;gBACD,IAAI,gBAAgB,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBAClC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,GAAG,eAAe,GAAG,gBAAgB,CAAC;gBAC/E,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,GAAG,gBAAgB,GAAG,iBAAiB,CAAC;YACrF,CAAC;YAED,oDAAoD;YACpD,IAAI,UAAkB,CAAC;YAEvB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACtD,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBACvD,EAAE,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACnB,IAAI,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/D,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACvC,CAAC;YACJ,CAAC;YACD,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAC9D,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;YAE3B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,yBAAe,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QACrE,CAAC;QAED;;;;WAIG;QACI,oBAAI,GAAX,UAAY,GAA6B,EAAE,KAAa;YACrD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,sBAAY,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YACzD,GAAG,CAAC,IAAI,EAAE,CAAC;YAEX,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACf,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACzB,CAAC;YAED,IAAI,CAAS,EAAE,GAAW,CAAC;YAE3B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YACrC,CAAC;YAED,IAAI,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC;YACpD,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBAErD,kDAAkD;gBAClD,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC/D,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;gBACtC,CAAC;YACJ,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBACtC,GAAG,CAAC,WAAW,GAAG,QAAQ,CAAC;gBAC3B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACvB,CAAC;YAED,GAAG,CAAC,OAAO,EAAE,CAAC;YAEd,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,qDAAqD;gBACrD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;gBACrC,CAAC;YACJ,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;gBACtC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;gBACnC,CAAC;YACJ,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,uBAAa,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QAC9D,CAAC;QAED;;;WAGG;QACH,0BAA0B;QACnB,yBAAS,GAAhB,UAAiB,GAA6B;YAC3C,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,2BAAiB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;YAE5D,IAAI,CAAS,EAAE,GAAW,CAAC;YAE3B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnC,CAAC;YAED,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpD,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnC,CAAC;YAED,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;YAEpC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,4BAAkB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;QACjE,CAAC;QAED;;WAEG;QACI,wBAAQ,GAAf,UAAgB,KAAY;YACzB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QAC5C,CAAC;QAwBM,mBAAG,GAAV,UAAW,MAAW;YACnB,EAAE,CAAC,CAAC,MAAM,YAAY,cAAK,CAAC,CAAC,CAAC;gBACnB,MAAO,CAAC,MAAM,EAAE,CAAC;YAC5B,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;oBACzC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC3B,CAAC;gBACD,MAAM,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,cAAK,CAAC,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;oBACzC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;oBACvB,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACvC,CAAC;gBACD,MAAM,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,aAAK,CAAC,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;oBACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACzB,CAAC;gBACD,MAAM,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;oBACzC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC3B,CAAC;YACJ,CAAC;QACJ,CAAC;QAyBM,sBAAM,GAAb,UAAc,MAAW;YACtB,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC3B,MAAM,CAAC;YACV,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,cAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACtC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAC7B,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,YAAY,aAAK,CAAC,CAAC,CAAC;gBAC3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YAC5B,CAAC;YAED,EAAE,CAAC,CAAC,MAAM,YAAY,iBAAO,CAAC,CAAC,CAAC;gBAC7B,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC9B,CAAC;QAEJ,CAAC;QAED;;;;WAIG;QACI,0BAAU,GAAjB,UAAkB,KAAY;YAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1B,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;QACtB,CAAC;QAED;;WAEG;QACI,6BAAa,GAApB,UAAqB,KAAY;YAC9B,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACzC,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAClC,CAAC;QACJ,CAAC;QAED;;WAEG;QACO,yBAAS,GAAnB,UAAoB,KAAY;YAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACnC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1B,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;QAC7B,CAAC;QAED;;WAEG;QACI,0BAAU,GAAjB,UAAkB,OAAgB;YAC/B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC/B,CAAC;QAED;;WAEG;QACI,6BAAa,GAApB,UAAqB,OAAgB;YAClC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YAC3C,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAClC,CAAC;QACJ,CAAC;QAED;;WAEG;QACO,4BAAY,GAAtB,UAAuB,KAAY;YAChC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;QAED;;;WAGG;QACI,wBAAQ,GAAf,UAAgB,KAAY;YACzB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACzB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC;YACnB,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAED;;;;WAIG;QACI,2BAAW,GAAlB,UAAmB,KAAY;YAC5B,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACZ,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7B,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAED;;;WAGG;QACI,2BAAW,GAAlB,UAAmB,KAAY;YAC5B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC9B,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QAED;;WAEG;QACI,6BAAa,GAApB,UAAqB,KAAY;YAC9B,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7C,CAAC;QAED;;WAEG;QACI,2BAAW,GAAlB,UAAmB,IAAY;YAC5B,MAAM,CAAC,IAAI,aAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAChC,CAAC;QAED;;WAEG;QACI,wBAAQ,GAAf,UAAgB,IAAY;YACzB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC5B,CAAC;QAWM,2BAAW,GAAlB,UAAmB,KAAU;YAC1B,EAAE,CAAC,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC7B,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC7B,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,YAAY,aAAK,CAAC,CAAC,CAAC;gBACjC,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAClC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC;YACjE,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,+BAAe,GAAtB,UAAuB,KAAY;YAChC,IAAI,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACrD,CAAC;QAED;;WAEG;QACI,8BAAc,GAArB,UAAsB,KAAY;YAC/B,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACtC,CAAC;QAEO,kCAAkB,GAA1B,UAA2B,MAAc;YACtC,GAAG,CAAC,CAAY,UAAa,EAAb,KAAA,IAAI,CAAC,QAAQ,EAAb,cAAa,EAAb,IAAa;gBAAxB,IAAI,GAAG,SAAA;gBACT,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC;aACrC;YAED,GAAG,CAAC,CAAc,UAAa,EAAb,KAAA,IAAI,CAAC,QAAQ,EAAb,cAAa,EAAb,IAAa;gBAA1B,IAAI,KAAK,SAAA;gBACX,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;gBACtC,GAAG,CAAC,CAAc,UAAc,EAAd,KAAA,KAAK,CAAC,QAAQ,EAAd,cAAc,EAAd,IAAc;oBAA3B,IAAI,KAAK,SAAA;oBACX,EAAE,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBAC/B,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACL,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;oBACzC,CAAC;iBACH;aACH;QACJ,CAAC;QACJ,YAAC;IAAD,CApiBA,AAoiBC,CApiB0B,cAAK,GAoiB/B;IApiBY,sBAAK;;;;;ICiClB;;;;OAIG;IACH;QAAA;QAKA,CAAC;QAAD,gBAAC;IAAD,CALA,AAKC,IAAA;IALY,8BAAS;IAOtB;;OAEG;IACH;QAA+B,6BAAgB;QAC5C,mBAAmB,MAAa;YAAhC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAO;;QAEhC,CAAC;QACJ,gBAAC;IAAD,CAJA,AAIC,CAJ8B,SAAS,GAIvC;IAJY,8BAAS;IAMtB;;OAEG;IACH;QAAoC,kCAAiB;QAClD,wBAAmB,MAAc;YAAjC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;;QAEjC,CAAC;QACJ,qBAAC;IAAD,CAJA,AAIC,CAJmC,SAAS,GAI5C;IAJY,wCAAc;IAM3B;;OAEG;IACH;QAAmC,iCAAiB;QACjD,uBAAmB,MAAc;YAAjC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;;QAEjC,CAAC;QACJ,oBAAC;IAAD,CAJA,AAIC,CAJkC,SAAS,GAI3C;IAJY,sCAAa;IAM1B;;;;OAIG;IACH;QAAkC,gCAA2C;QAC1E,sBAAmB,GAA6B,EAAS,KAAa,EAAS,MAAwC;YAAvH,YACG,iBAAO,SACT;YAFkB,SAAG,GAAH,GAAG,CAA0B;YAAS,WAAK,GAAL,KAAK,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAkC;;QAEvH,CAAC;QACJ,mBAAC;IAAD,CAJA,AAIC,CAJiC,SAAS,GAI1C;IAJY,oCAAY;IAMzB;;;;OAIG;IACH;QAAmC,iCAA2C;QAC3E,uBAAmB,GAA6B,EAAS,KAAa,EAAS,MAAwC;YAAvH,YACG,iBAAO,SACT;YAFkB,SAAG,GAAH,GAAG,CAA0B;YAAS,WAAK,GAAL,KAAK,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAkC;;QAEvH,CAAC;QACJ,oBAAC;IAAD,CAJA,AAIC,CAJkC,SAAS,GAI3C;IAJY,sCAAa;IAM1B;;OAEG;IACH;QAAuC,qCAAiC;QACrE,2BAAmB,GAA6B,EAAS,MAA8B;YAAvF,YACG,iBAAO,SACT;YAFkB,SAAG,GAAH,GAAG,CAA0B;YAAS,YAAM,GAAN,MAAM,CAAwB;;QAEvF,CAAC;QACJ,wBAAC;IAAD,CAJA,AAIC,CAJsC,SAAS,GAI/C;IAJY,8CAAiB;IAM9B;;OAEG;IACH;QAAwC,sCAAiC;QACtE,4BAAmB,GAA6B,EAAS,MAA8B;YAAvF,YACG,iBAAO,SACT;YAFkB,SAAG,GAAH,GAAG,CAA0B;YAAS,YAAM,GAAN,MAAM,CAAwB;;QAEvF,CAAC;QACJ,yBAAC;IAAD,CAJA,AAIC,CAJuC,SAAS,GAIhD;IAJY,gDAAkB;IAM/B;;OAEG;IACH;QAAoC,kCAA2C;QAC5E,wBAAmB,MAAc,EAAS,KAAa,EAAS,MAAwC;YAAxG,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;YAAS,WAAK,GAAL,KAAK,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAkC;;QAExG,CAAC;QACJ,qBAAC;IAAD,CAJA,AAIC,CAJmC,SAAS,GAI5C;IAJY,wCAAc;IAM3B;;;OAGG;IACH;QAAqC,mCAA2C;QAC7E,yBAAmB,MAAc,EAAS,KAAa,EAAS,MAAwC;YAAxG,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;YAAS,WAAK,GAAL,KAAK,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAkC;;QAExG,CAAC;QACJ,sBAAC;IAAD,CAJA,AAIC,CAJoC,SAAS,GAI7C;IAJY,0CAAe;IAM5B;;OAEG;IACH;QAAmC,iCAAiB;QACjD,uBAAmB,MAAc,EAAS,SAAqB;YAA/D,YACG,iBAAO,SAET;YAHkB,YAAM,GAAN,MAAM,CAAQ;YAAS,eAAS,GAAT,SAAS,CAAY;YAE5D,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;QACxB,CAAC;QACJ,oBAAC;IAAD,CALA,AAKC,CALkC,SAAS,GAK3C;IALY,sCAAa;IAO1B;;OAEG;IACH;QAAoC,kCAAiB;QAClD,wBAAmB,MAAc,EAAS,KAAiB;YAA3D,YACG,iBAAO,SAET;YAHkB,YAAM,GAAN,MAAM,CAAQ;YAAS,WAAK,GAAL,KAAK,CAAY;YAExD,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;QACxB,CAAC;QACJ,qBAAC;IAAD,CALA,AAKC,CALmC,SAAS,GAK5C;IALY,wCAAc;IAO3B;;OAEG;IACH;QAAyC,uCAAwB;QAC9D,6BAAmB,KAAa,EAAS,OAAsB;YAA/D,YACG,iBAAO,SAET;YAHkB,WAAK,GAAL,KAAK,CAAQ;YAAS,aAAO,GAAP,OAAO,CAAe;YAE5D,KAAI,CAAC,MAAM,GAAG,OAAO,CAAC;;QACzB,CAAC;QACJ,0BAAC;IAAD,CALA,AAKC,CALwC,SAAS,GAKjD;IALY,kDAAmB;IAOhC;;OAEG;IACH;QAA4C,0CAAwB;QACjE,gCAAmB,KAAa,EAAS,OAAsB;YAA/D,YACG,iBAAO,SAET;YAHkB,WAAK,GAAL,KAAK,CAAQ;YAAS,aAAO,GAAP,OAAO,CAAe;YAE5D,KAAI,CAAC,MAAM,GAAG,OAAO,CAAC;;QACzB,CAAC;QACJ,6BAAC;IAAD,CALA,AAKC,CAL2C,SAAS,GAKpD;IALY,wDAAsB;IAOnC;;OAEG;IACH;QAAwC,sCAAwB;QAE7D;;;WAGG;QACH,4BAAmB,MAAqB,EAAS,KAAa,EAAS,MAAqB;YAA5F,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAe;YAAS,WAAK,GAAL,KAAK,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAe;;QAE5F,CAAC;QACJ,yBAAC;IAAD,CATA,AASC,CATuC,SAAS,GAShD;IATY,gDAAkB;IAW/B;;OAEG;IACH;QAAsC,oCAAwB;QAE3D;;;WAGG;QACH,0BAAmB,IAAgB,EAAS,KAAa,EAAS,MAAqB;YAAvF,YACG,iBAAO,SACT;YAFkB,UAAI,GAAJ,IAAI,CAAY;YAAS,WAAK,GAAL,KAAK,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAe;;QAEvF,CAAC;QACJ,uBAAC;IAAD,CATA,AASC,CATqC,SAAS,GAS9C;IATY,4CAAgB;IAW7B;;;OAGG;IACH;QAAuC,kCAAY;QAChD,wBAAmB,KAAa,EAAS,OAAuC;YAAhF,YACG,iBAAO,SACT;YAFkB,WAAK,GAAL,KAAK,CAAQ;YAAS,aAAO,GAAP,OAAO,CAAgC;;QAEhF,CAAC;QACJ,qBAAC;IAAD,CAJA,AAIC,CAJsC,SAAS,GAI/C;IAJY,wCAAc;IAM3B;;;OAGG;IACH;QAAyC,oCAAY;QAClD,0BAAmB,KAAa,EAAS,OAAuC;YAAhF,YACG,iBAAO,SACT;YAFkB,WAAK,GAAL,KAAK,CAAQ;YAAS,aAAO,GAAP,OAAO,CAAgC;;QAEhF,CAAC;QACJ,uBAAC;IAAD,CAJA,AAIC,CAJwC,SAAS,GAIjD;IAJY,4CAAgB;IAM7B;;OAEG;IACH;QAAkC,gCAAiB;QAChD,sBAAmB,MAAc;YAAjC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;;QAEjC,CAAC;QACJ,mBAAC;IAAD,CAJA,AAIC,CAJiC,SAAS,GAI1C;IAJY,oCAAY;IAMzB;;OAEG;IACH;QAAiC,+BAAiB;QAC/C,qBAAmB,MAAc;YAAjC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;;QAEjC,CAAC;QACJ,kBAAC;IAAD,CAJA,AAIC,CAJgC,SAAS,GAIzC;IAJY,kCAAW;IAMxB;;OAEG;IACH;QAAoC,kCAAgB;QAEjD;;;;;WAKG;QACH,wBAAmB,KAAY,EAAS,KAAY,EAAS,IAAU,EAAS,YAAoB;YAApG,YACG,iBAAO,SAET;YAHkB,WAAK,GAAL,KAAK,CAAO;YAAS,WAAK,GAAL,KAAK,CAAO;YAAS,UAAI,GAAJ,IAAI,CAAM;YAAS,kBAAY,GAAZ,YAAY,CAAQ;YAEjG,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;QACvB,CAAC;QACJ,qBAAC;IAAD,CAZA,AAYC,CAZmC,SAAS,GAY5C;IAZY,wCAAc;IAc3B;;OAEG;IACH;QAAqC,mCAAwB;QAE1D;;WAEG;QACH,yBAAmB,MAAc,EAAS,MAAqB;YAA/D,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAQ;YAAS,YAAM,GAAN,MAAM,CAAe;;QAE/D,CAAC;QACJ,sBAAC;IAAD,CARA,AAQC,CARoC,SAAS,GAQ7C;IARY,0CAAe;IAU5B;;OAEG;IACH;QAAmC,iCAAgB;QAEhD;;WAEG;QACH,uBAAmB,QAAe,EAAS,MAAa;YAAxD,YACG,iBAAO,SACT;YAFkB,cAAQ,GAAR,QAAQ,CAAO;YAAS,YAAM,GAAN,MAAM,CAAO;;QAExD,CAAC;QACJ,oBAAC;IAAD,CARA,AAQC,CARkC,SAAS,GAQ3C;IARY,sCAAa;IAU1B;;OAEG;IACH;QAAqC,mCAAgB;QAElD;;WAEG;QACH,yBAAmB,QAAe,EAAS,MAAa;YAAxD,YACG,iBAAO,SACT;YAFkB,cAAQ,GAAR,QAAQ,CAAO;YAAS,YAAM,GAAN,MAAM,CAAO;;QAExD,CAAC;QACJ,sBAAC;IAAD,CARA,AAQC,CARoC,SAAS,GAQ7C;IARY,0CAAe;IAW5B;;OAEG;IACH;QAAuC,qCAAgB;QACpD,2BAAmB,MAAa;YAAhC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAO;;QAEhC,CAAC;QACJ,wBAAC;IAAD,CAJA,AAIC,CAJsC,SAAS,GAI/C;IAJY,8CAAiB;IAM9B;;OAEG;IACH;QAAwC,sCAAgB;QACrD,4BAAmB,MAAa;YAAhC,YACG,iBAAO,SACT;YAFkB,YAAM,GAAN,MAAM,CAAO;;QAEhC,CAAC;QACJ,yBAAC;IAAD,CAJA,AAIC,CAJuC,SAAS,GAIhD;IAJY,gDAAkB;;;;;IC1U/B;;;OAGG;IACH;QAOG;YACG,IAAI,CAAC,eAAe,GAAG,IAAI,iCAAe,CAAC,IAAI,CAAC,CAAC;QACpD,CAAC;QAED;;;;;WAKG;QACI,kBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC/C,CAAC;QAED;;;;;;;WAOG;QACI,mBAAG,GAAV,UAAW,SAAiB,EAAE,OAA0C;YACrE,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChD,CAAC;QAED;;;;WAIG;QACI,oBAAI,GAAX,UAAY,SAAiB,EAAE,WAA4B;YACxD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QACrD,CAAC;QAGD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA8BG;QACW,YAAM,GAApB,UAAqB,OAAY;YAC9B,IAAI,MAAM,GAAQ,IAAI,CAAC;YACvB,IAAI,KAAU,CAAC;YAEf,EAAE,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBACpD,KAAK,GAAG,OAAO,CAAC,WAAW,CAAC;YAC/B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,KAAK,GAAG,cAAuB,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1E,CAAC;YAED,kEAAkE;YAClE,IAAI,KAAK,GAAQ,cAAuB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACpE,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;YACnC,KAAK,CAAC,SAAS,GAAG,IAAI,KAAK,CAAC;YAE5B,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACX,GAAG,CAAC,CAAC,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC,CAAC;oBACxB,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBAChC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;oBACzC,CAAC;gBACJ,CAAC;YACJ,CAAC;YAED,6BAA6B;YAC7B,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;YAE5B,MAAM,CAAC,KAAK,CAAC;QAChB,CAAC;QACJ,YAAC;IAAD,CAtGA,AAsGC,IAAA;IAtGY,sBAAK;;;;;ICoBlB;;;;;;;;OAQG;IACH;QAA2B,yBAAK;QA+V7B;;;;;;;WAOG;QACH,eAAY,CAAU,EAAE,CAAU,EAAE,KAAc,EAAE,MAAe,EAAE,KAAa;YAAlF,YACG,iBAAO,SA0BT;YA7XD;;eAEG;YACI,QAAE,GAAW,KAAK,CAAC,KAAK,EAAE,CAAC;YAElC;;;eAGG;YACI,UAAI,GAAS,IAAI,WAAI,CAAC,KAAI,CAAC,CAAC;YAsO3B,aAAO,GAAW,CAAC,CAAC;YACpB,YAAM,GAAW,CAAC,CAAC;YAE3B;;eAEG;YACI,WAAK,GAAW,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACxC;;eAEG;YACI,QAAE,GAAW,CAAC,CAAC,CAAC,WAAW;YAClC;;eAEG;YACI,QAAE,GAAW,CAAC,CAAC,CAAC,WAAW;YAElC;;eAEG;YACI,iBAAW,GAAG,KAAK,CAAC;YAC3B;;eAEG;YACI,aAAO,GAAY,IAAI,CAAC;YAC/B;;;eAGG;YACI,aAAO,GAAW,CAAC,CAAC;YACpB,qBAAe,GAAW,CAAC,CAAC;YAWnC;;eAEG;YACI,YAAM,GAAW,aAAM,CAAC,WAAW,EAAE,CAAC;YAC7C;;eAEG;YACI,WAAK,GAAU,IAAI,CAAC;YAC3B;;eAEG;YACI,YAAM,GAAU,IAAI,CAAC;YAC5B,4EAA4E;YAC5E;;eAEG;YACI,cAAQ,GAAY,EAAE,CAAC;YAC9B;;;eAGG;YACI,mBAAa,GAAkB,aAAa,CAAC,gBAAgB,CAAC;YAC9D,qBAAe,GAAa,EAAE,CAAC;YAG9B,wBAAkB,GAAmD,EAAE,CAAC;YACxE,oBAAc,GAAY,KAAK,CAAC;YACjC,YAAM,GAAkC,EAAE,CAAC;YAC1C,mBAAa,GAAY,KAAK,CAAC;YAEvC;;;;eAIG;YACI,oBAAc,GAAc,IAAI,CAAC;YAExC;;eAEG;YACI,YAAM,GAAkB,EAAE,CAAC;YAUlC;;;eAGG;YACI,0BAAoB,GAAY,KAAK,CAAC;YAE7C;;eAEG;YACI,oBAAc,GAAiC;gBACnD,iBAAiB,EAAE,KAAK;aAC1B,CAAC;YAEM,aAAO,GAAW,CAAC,CAAC;YACpB,eAAS,GAAY,KAAK,CAAC;YAC3B,gBAAU,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAYpD,KAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,KAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,KAAI,CAAC,MAAM,GAAG,KAAK,IAAI,CAAC,CAAC;YACzB,KAAI,CAAC,OAAO,GAAG,MAAM,IAAI,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;gBAC3B,+CAA+C;gBAC/C,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;YAC1B,CAAC;YACD,yBAAyB;YACzB,kDAAkD;YAClD,yDAAyD;YACzD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,yBAAyB,EAAE,CAAC,CAAC;YACzD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC;YAChD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC;YAE9C,yBAAyB;YACzB,KAAI,CAAC,WAAW,GAAG,IAAI,oBAAW,CAAC,KAAI,CAAC,CAAC;YACzC,KAAI,CAAC,OAAO,GAAG,IAAI,6BAAa,CAAC,KAAI,CAAC,CAAC;YAEvC,kCAAkC;YAClC,KAAI,CAAC,MAAM,GAAG,IAAI,iBAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;YAEjC,8CAA8C;YAC9C,KAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;;QAC/B,CAAC;QA9WD,sBAAW,gCAAa;YAJxB;;;eAGG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YAClC,CAAC;YAED;;;eAGG;iBACH,UAAyB,IAAoB;gBAC1C,IAAI,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAClC,CAAC;;;WARA;QAaD,sBAAW,oBAAC;YAHZ;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC1B,CAAC;YAED;;eAEG;iBACH,UAAa,IAAY;gBACtB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAC1B,CAAC;;;WAPA;QAYD,sBAAW,oBAAC;YAHZ;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YAC1B,CAAC;YAED;;eAEG;iBACH,UAAa,IAAY;gBACtB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;YAC1B,CAAC;;;WAPA;QAYD,sBAAW,sBAAG;YAHd;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACxB,CAAC;YAED;;eAEG;iBACH,UAAe,MAAc;gBAC1B,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC;YAC1B,CAAC;;;WAPA;QAYD,sBAAW,yBAAM;YAHjB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3B,CAAC;YAED;;eAEG;iBACH,UAAkB,MAAc;gBAC7B,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YAC7B,CAAC;;;WAPA;QAYD,sBAAW,sBAAG;YAHd;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACxB,CAAC;YAED;;eAEG;iBACH,UAAe,MAAc;gBAC1B,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC;YAC1B,CAAC;;;WAPA;QAYD,sBAAW,yBAAM;YAHjB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3B,CAAC;YAED;;eAEG;iBACH,UAAkB,MAAc;gBAC7B,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YAC7B,CAAC;;;WAPA;QAaD,sBAAW,sBAAG;YAJd;;;eAGG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACxB,CAAC;YAED;;eAEG;iBACH,UAAe,MAAc;gBAC1B,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC;YAC1B,CAAC;;;WAPA;QAYD,sBAAW,2BAAQ;YAHnB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC7B,CAAC;YAED;;eAEG;iBACH,UAAoB,QAAgB;gBACjC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACjC,CAAC;;;WAPA;QAYD,sBAAW,qBAAE;YAHb;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YACvB,CAAC;YAED;;eAEG;iBACH,UAAc,eAAuB;gBAClC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,eAAe,CAAC;YAClC,CAAC;;;WAPA;QAYD,sBAAW,yBAAM;YAHjB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC3B,CAAC;YAED;;eAEG;iBACH,UAAkB,SAAiB;gBAChC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;YAChC,CAAC;;;WAPA;QAYD,sBAAW,uBAAI;YAHf;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YACzB,CAAC;YAED;;eAEG;iBACH,UAAgB,OAAe;gBAC5B,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;YAC5B,CAAC;;;WAPA;QAYD,sBAAW,sBAAG;YAHd;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;YACxB,CAAC;YAED;;eAEG;iBACH,UAAe,MAAc;gBAC1B,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC;YAC1B,CAAC;;;WAPA;QAYD,sBAAW,2BAAQ;YAHnB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC7B,CAAC;YAED;;eAEG;iBACH,UAAoB,WAAmB;gBACpC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;YACpC,CAAC;;;WAPA;QAaD,sBAAW,8BAAW;YAJtB;;;eAGG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;YAChC,CAAC;YAED;;;eAGG;iBACH,UAAuB,cAAsB;gBAC1C,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC;YAC1C,CAAC;;;WARA;QAuKD;;;WAGG;QACI,4BAAY,GAAnB,UAAoB,OAAe;YAChC,cAAc;QACjB,CAAC;QAKD,sBAAW,gCAAa;YAHxB;;eAEG;iBACH;gBACG,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;YAC9B,CAAC;;;WAAA;QAED;;;WAGG;QACI,2BAAW,GAAlB,UAAmB,MAAc;YAC9B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAC1B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,yBAAe,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;gBAC3E,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC9B,CAAC;YACD,GAAG,CAAC,CAAc,UAAa,EAAb,KAAA,IAAI,CAAC,QAAQ,EAAb,cAAa,EAAb,IAAa;gBAA1B,IAAI,KAAK,SAAA;gBACX,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;aAC5B;QACJ,CAAC;QAEO,qCAAqB,GAA7B,UAA8B,SAAiB;YAC5C,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACb,IAAM,UAAU,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC;gBAC3C,EAAE,CAAC,CAAC,UAAU,KAAK,WAAW,IAAI,UAAU,KAAK,aAAa,IAAI,UAAU,KAAK,aAAa,CAAC,CAAC,CAAC;oBAC9F,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;oBACjC,EAAE,CAAC,CAAC,UAAU,KAAK,aAAa,CAAC,CAAC,CAAC;wBAChC,IAAI,CAAC,cAAc,CAAC,iBAAiB,GAAG,IAAI,CAAC;oBAChD,CAAC;gBACJ,CAAC;YACJ,CAAC;QACJ,CAAC;QAeM,kBAAE,GAAT,UAAU,SAAiB,EAAE,OAAyC;YACnE,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC;YACtC,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC/C,CAAC;QAED;;;WAGG;QACI,oBAAI,GAAX;YACG,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,mBAAS,CAAC,IAAI,CAAC,CAAC,CAAC;gBACvC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACzB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,oDAAoD,CAAC,CAAC;YAC1E,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,sBAAM,GAAb;YACG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAC1B,CAAC;QAED;;WAEG;QACI,wBAAQ,GAAf;YACG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;QACzB,CAAC;QAED;;;;;WAKG;QACI,mBAAG,GAAV,UAAW,KAAY;YACpB,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC,gBAAgB,CAAC;YACrD,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC7C,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;YACvB,CAAC;QACJ,CAAC;QACD;;;WAGG;QACI,sBAAM,GAAb,UAAc,KAAY;YACvB,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAChD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;YACvB,CAAC;QACJ,CAAC;QAaM,0BAAU,GAAjB,UAAkB,GAAQ;YACvB,GAAG,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;YACrB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,MAAM,CAAS,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;oBACzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBAC1C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,8BAA8B,GAAG,GAAG,GAAG,mBAAmB,CAAC,CAAC;gBAC1F,CAAC;YACJ,CAAC;QACJ,CAAC;QAgBM,0BAAU,GAAjB;YACG,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC1B,IAAI,CAAC,MAAM,CAAS,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBACjD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;oBACxB,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;gBACtC,CAAC;gBACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC7B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,eAAM,CAAC,CAAC,CAAC;oBAClC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,CAAC;gBACD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,iBAAO,CAAC,CAAC,CAAC;oBACnC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;gBACvD,CAAC;YACJ,CAAC;QACJ,CAAC;QAGD,sBAAW,oBAAC;iBAAZ;gBACG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YAC3B,CAAC;iBAED,UAAa,IAAY;gBACtB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACxB,CAAC;;;WAJA;QAMD;;;WAGG;QACI,yBAAS,GAAhB;YACG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACvB,CAAC;QAED;;;;;WAKG;QACI,yBAAS,GAAhB,UAAiB,QAAgB;YAC9B,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACjC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;YACxB,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC;QAED;;;;;;;;WAQG;QACI,iCAAiB,GAAxB,UAAyB,IAAY;YAClC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC;QACD;;;WAGG;QACI,oCAAoB,GAA3B,UAA4B,IAAY;YACrC,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC/C,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBAChB,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACzC,CAAC;QACJ,CAAC;QAED;;WAEG;QACI,yBAAS,GAAhB;YACG,MAAM,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,EACjF,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QAC5E,CAAC;QACD;;WAEG;QACI,wBAAQ,GAAf;YACG,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QAChD,CAAC;QACD;;WAEG;QACI,wBAAQ,GAAf,UAAgB,KAAa;YAC1B,IAAI,CAAC,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACtC,CAAC;QACD;;WAEG;QACI,yBAAS,GAAhB;YACG,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QACjD,CAAC;QACD;;WAEG;QACI,yBAAS,GAAhB,UAAiB,MAAc;YAC5B,IAAI,CAAC,OAAO,GAAG,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACxC,CAAC;QACD;;WAEG;QACI,uBAAO,GAAd;YACG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC;QAChC,CAAC;QACD;;WAEG;QACI,wBAAQ,GAAf;YACG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC;QACjC,CAAC;QACD;;WAEG;QACI,sBAAM,GAAb;YACG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;QAC/B,CAAC;QACD;;WAEG;QACI,yBAAS,GAAhB;YACG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,MAAM,CAAC;QAClC,CAAC;QAED;;;;WAIG;QACI,gCAAgB,GAAvB;YACG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YACxB,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC;QACzD,CAAC;QAED;;;;WAIG;QACI,2BAAW,GAAlB;YACG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;YAC3B,CAAC;YAED,oCAAoC;YACpC,IAAI,OAAO,GAAY,EAAE,CAAC;YAC1B,IAAI,IAAI,GAAU,IAAI,CAAC;YAEvB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAEnB,eAAe;YACf,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;gBAClB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;gBACnB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACtB,CAAC;YAED,4BAA4B;YAC5B,IAAI,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC,UAAC,EAAE,EAAE,CAAC;gBAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACZ,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;gBAChD,CAAC;gBACD,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACvB,CAAC,EAAE,CAAC,CAAC,CAAC;YAEN,IAAI,CAAC,GAAG,OAAO,CAAC,WAAW,CAAC,UAAC,EAAE,EAAE,CAAC;gBAC/B,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACZ,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;gBAChD,CAAC;gBACD,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACvB,CAAC,EAAE,CAAC,CAAC,CAAC;YAEN,4BAA4B;YAC5B,IAAI,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,SAAS;YACtC,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAEhC,MAAM,CAAC,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACzC,CAAC;QAED;;WAEG;QACI,8BAAc,GAArB;YACG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjD,CAAC;YAED,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;YAC/C,MAAM,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QACjF,CAAC;QACD;;WAEG;QACI,yBAAS,GAAhB;YACG,0BAA0B;YAC1B,IAAI,MAAM,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACzC,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YAE7B,MAAM,CAAC,IAAI,yBAAW,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EACpC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAChB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,MAAM,CAAC,CAAC,EAClC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QACtE,CAAC;QAED;;WAEG;QACI,iCAAiB,GAAxB;YACG,0BAA0B;YAC1B,IAAI,MAAM,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;YACzC,MAAM,CAAC,IAAI,yBAAW,CAAC,CAAC,MAAM,CAAC,CAAC,EAC7B,CAAC,MAAM,CAAC,CAAC,EACT,IAAI,CAAC,QAAQ,EAAE,GAAG,MAAM,CAAC,CAAC,EAC1B,IAAI,CAAC,SAAS,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACzD,CAAC;QAGD;;;;;WAKG;QACI,wBAAQ,GAAf,UAAgB,CAAS,EAAE,CAAS,EAAE,OAAwB;YAAxB,wBAAA,EAAA,eAAwB;YAC3D,IAAI,WAAW,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAE9D,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBAEX,MAAM,CAAC,WAAW,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAC,KAAY;oBACnD,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;gBACrC,CAAC,CAAC,CAAC;YACN,CAAC;YAED,MAAM,CAAC,WAAW,CAAC;QACtB,CAAC;QAED;;;WAGG;QACI,oCAAoB,GAA3B,UAA4B,SAAiB;YAC1C,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBACb,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACjD,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBACnB,MAAM,CAAC,WAAI,CAAC,KAAK,CAAC;oBACrB,CAAC;oBACD,MAAM,CAAC,WAAI,CAAC,IAAI,CAAC;gBACpB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBACnB,MAAM,CAAC,WAAI,CAAC,MAAM,CAAC;oBACtB,CAAC;oBACD,MAAM,CAAC,WAAI,CAAC,GAAG,CAAC;gBACnB,CAAC;YACJ,CAAC;YACD,MAAM,CAAC,WAAI,CAAC,IAAI,CAAC;QACpB,CAAC;QACD;;;WAGG;QACI,gCAAgB,GAAvB,UAAwB,KAAY;YACjC,IAAI,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,WAAI,CAAC,IAAI,CAAC;YACpB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/D,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5B,MAAM,CAAC,WAAI,CAAC,KAAK,CAAC;gBACrB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,MAAM,CAAC,WAAI,CAAC,IAAI,CAAC;gBACpB,CAAC;YACJ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5B,MAAM,CAAC,WAAI,CAAC,MAAM,CAAC;gBACtB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,MAAM,CAAC,WAAI,CAAC,GAAG,CAAC;gBACnB,CAAC;YACJ,CAAC;QACJ,CAAC;QACD;;;;WAIG;QACI,wBAAQ,GAAf,UAAgB,KAAY;YACzB,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAC9B,IAAI,WAAW,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;YACpC,IAAI,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC7C,MAAM,CAAC,SAAS,CAAC;QACpB,CAAC;QACD;;;;WAIG;QACI,8BAAc,GAArB,UAAsB,KAAa,EAAE,IAA4B;YAC9D,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;YACvC,CAAC;YACD,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,CAAC;QACM,oCAAoB,GAA3B;YACG,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAClC,CAAC;QACD;;;WAGG;QACI,kCAAkB,GAAzB,UAA0B,KAAa;YACpC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;QACvC,CAAC;QACD;;;;WAIG;QACI,sBAAM,GAAb,UAAc,KAAY,EAAE,QAAgB;YACzC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC;QAC/G,CAAC;QAEO,oCAAoB,GAA5B;YACG,MAAM,CAAC,IAAI,iBAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACxF,CAAC;QAES,+BAAe,GAAzB,UAA0B,OAAkB;YACzC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACtC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACtC,CAAC;QAED;;WAEG;QACI,yBAAS,GAAhB,UAAiB,KAAa;YAC3B,4CAA4C;YAC5C,IAAI,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC;YAE3B,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;YAChC,iEAAiE;YACjE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,KAAK,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC/C,QAAQ,CAAC,QAAQ,CAAC,kBAAO,CAAC,GAAG,CAAC,CAAC;YAClC,CAAC;YAED,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;YAC3C,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC;YAE7F,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;YACpD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC;YAEnC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,EAAE,GAAG,KAAK,GAAG,IAAI,CAAC;YACvC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,EAAE,GAAG,KAAK,GAAG,IAAI,CAAC;YAEvC,sBAAsB;YACtB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACtB,CAAC;QAED;;;;WAIG;QACI,sBAAM,GAAb,UAAc,MAAc,EAAE,KAAa;YACxC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;YACzB,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,wBAAc,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAEhE,sBAAsB;YACtB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAE/B,4BAA4B;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;gBACd,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;YAC/B,CAAC;YAED,6BAA6B;YAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACzC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC;gBACpC,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;gBACvC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;YAC7B,CAAC;YAED,0DAA0D;YAC1D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAE1C,wBAAwB;YACxB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAEtB,8FAA8F;YAC9F,GAAG,CAAC,CAAc,UAAW,EAAX,KAAA,IAAI,CAAC,MAAM,EAAX,cAAW,EAAX,IAAW;gBAAxB,IAAI,KAAK,SAAA;gBACX,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;aACpC;YAED,sBAAsB;YACtB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC7C,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC1C,CAAC;YAED,yCAAyC;YACzC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,yBAAe,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAC9E,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,yBAAe,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QACrE,CAAC;QACD;;;;WAIG;QACI,oBAAI,GAAX,UAAY,GAA6B,EAAE,KAAa;YACrD,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1B,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAEtC,oCAAoC;YACpC,GAAG,CAAC,IAAI,EAAE,CAAC;YACX,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAE/E,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,sBAAY,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAEzD,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBACvB,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC;gBAClC,iGAAiG;gBACjG,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACrF,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBAEvF,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBAC1C,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC9B,CAAC;gBAED,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;YACnD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;oBACd,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;oBACtC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBACjD,CAAC;YACJ,CAAC;YACD,GAAG,CAAC,OAAO,EAAE,CAAC;YAEd,oBAAoB;YACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;gBACrC,CAAC;YACJ,CAAC;YAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,uBAAa,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YAC3D,GAAG,CAAC,OAAO,EAAE,CAAC;QACjB,CAAC;QAED;;;WAGG;QACH,0BAA0B;QACnB,yBAAS,GAAhB,UAAiB,GAA6B;YAC3C,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,2BAAiB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;YAE5D,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAEzB,0BAA0B;YAC1B,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;YAC1B,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAGlB,gBAAgB;YAChB,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;YAEzD,2BAA2B;YAC3B,GAAG,CAAC,SAAS,GAAG,cAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YACxC,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;YACvE,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,IAAI,EAAE,CAAC;YAEX,yBAAyB;YACzB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC3C,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;oBAC3B,IAAI,CAAC,MAAM,CAAC,CAAC,CAAE,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;gBACvE,CAAC;YACJ,CAAC;YAED,yBAAyB;YACzB,GAAG,CAAC,WAAW,GAAG,cAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;YAC1C,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;YACzD,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;YAC5E,GAAG,CAAC,SAAS,EAAE,CAAC;YAChB,GAAG,CAAC,MAAM,EAAE,CAAC;YACb,IAAI,KAAK,GAA8B;gBACpC,MAAM,EAAE,CAAC;gBACT,MAAM,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC;gBACnB,IAAI,EAAE,IAAI,CAAC,EAAE;gBACb,QAAQ,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;aAC3B,CAAC;YAEF,IAAI,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC;YACvB,GAAG,CAAC,CAAC,IAAI,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;gBACtB,GAAG,CAAC,SAAS,GAAG,cAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;gBACxC,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC;gBAClB,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;gBACzB,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC,EAC5E,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC;YACpE,CAAC;YAED,GAAG,CAAC,IAAI,GAAG,OAAO,CAAC;YAEnB,oBAAoB;YACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC7C,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnC,CAAC;YAED,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,4BAAkB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;QACjE,CAAC;QACJ,YAAC;IAAD,CA1hCA,AA0hCC,CA1hC0B,cAAK;IAC7B;;OAEG;IACW,WAAK,GAAG,CAAC,CAAC;IAJd,sBAAK;IA4hClB;;OAEG;IACH,IAAY,aAiCX;IAjCD,WAAY,aAAa;QACtB;;;WAGG;QACH,yEAAgB,CAAA;QAChB;;;WAGG;QACH,uDAAO,CAAA;QACP;;;;WAIG;QACH,qDAAM,CAAA;QACN;;;;;WAKG;QACH,uDAAO,CAAA;QACP;;;;;;;WAOG;QACH,mDAAK,CAAA;IACR,CAAC,EAjCW,aAAa,GAAb,qBAAa,KAAb,qBAAa,QAiCxB;;;;;ICplCD;QAQG,gBAAmB,KAAY,EACnB,CAAS,EACT,CAAS,EACT,QAAgB,EACT,SAAkG;YAJlG,UAAK,GAAL,KAAK,CAAO;YAIZ,cAAS,GAAT,SAAS,CAAyF;YAX7G,qBAAgB,GAAW,CAAC,CAAC;YAC7B,kBAAa,GAAW,CAAC,GAAG,IAAI,CAAC,CAAC,WAAW;YAC7C,eAAU,GAAW,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACtC,aAAQ,GAAW,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACpC,iBAAY,GAAY,KAAK,CAAC;YAC9B,aAAQ,GAAY,KAAK,CAAC;YAC1B,cAAS,GAAW,CAAC,CAAC;YAM3B,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;YAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpC,CAAC;QACO,4BAAW,GAAnB;YACG,IAAI,CAAC,UAAU,GAAG,IAAI,iBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;YAC1B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5D,CAAC;QAEM,uBAAM,GAAb,UAAc,KAAa;YACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACtB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAC5B,CAAC;YAED,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YAC5B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBAE9C,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,EACnB,IAAI,CAAC,QAAQ,CAAC,CAAC,EACf,IAAI,CAAC,UAAU,CAAC,CAAC,EACjB,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACvF,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;gBACxG,CAAC;gBAED,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;oBACvC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,EACnB,IAAI,CAAC,QAAQ,CAAC,CAAC,EACf,IAAI,CAAC,UAAU,CAAC,CAAC,EACjB,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACvF,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;gBACxG,CAAC;gBACD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;gBAExB,IAAI,CAAC,gBAAgB,IAAI,KAAK,CAAC;YAElC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACnC,yBAAyB;gBACzB,uBAAuB;gBACvB,4BAA4B;YAC/B,CAAC;QAEJ,CAAC;QACM,2BAAU,GAAjB,UAAkB,KAAY;YAC3B,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,iBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;QAC9G,CAAC;QAEM,sBAAK,GAAZ;YACG,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC7B,CAAC;QACM,qBAAI,GAAX;YACG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QACJ,aAAC;IAAD,CAzEA,AAyEC,IAAA;IAzEY,wBAAM;IA2EnB;QAWG,gBAAY,KAAY,EAAE,KAAa,EAAE,KAAa,EAAE,KAAa;YAF7D,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,IAAI,iBAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QAEM,uBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,IAAI,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC/D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACjD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,CAAC;YACtD,CAAC;YACD,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAExB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACnC,CAAC;QACJ,CAAC;QAEM,2BAAU,GAAjB,UAAkB,KAAY;YAC3B,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,iBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;QAC1G,CAAC;QAEM,qBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,sBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,aAAC;IAAD,CA/CA,AA+CC,IAAA;IA/CY,wBAAM;IAiDnB;QAaG,gBAAY,KAAY,EAAE,KAAa,EAAE,KAAa,EAAE,IAAY;YAF5D,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,IAAI,iBAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YACrC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;gBACb,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,wDAAwD,GAAG,IAAI,CAAC,CAAC;gBAC5F,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;YAC/C,CAAC;YACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAErB,CAAC;QAEM,uBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,IAAI,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC/D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACjD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,CAAC;gBACnD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;YACtD,CAAC;YAED,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAGxB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACzB,CAAC;QACJ,CAAC;QAEM,2BAAU,GAAjB,UAAkB,KAAY;YAC3B,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,iBAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC;QAC1G,CAAC;QAEM,qBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,sBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,aAAC;IAAD,CA3DA,AA2DC,IAAA;IA3DY,wBAAM;IA6DnB;QAcG,gBAAY,KAAY,EAAE,aAAqB,EAAE,cAAwB;YAHjE,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAGtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,IAAI,GAAG,IAAI,iBAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,EAAE,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,gBAAgB,GAAG,CAAC,cAAc,KAAK,SAAS,CAAC,GAAG,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5G,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QACnB,CAAC;QAEM,uBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE,CAAC;YACxD,CAAC;YAED,IAAI,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACpH,EAAE,CAAC,CAAC,kBAAkB,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,MAAM,GAAG,kBAAkB,CAAC;YACpC,CAAC;YACD,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAEpC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE,CAAC;YAErD,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBAClD,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACrC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACzB,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,+BAA+B;gBAC/B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACzB,CAAC;QACJ,CAAC;QAEM,qBAAI,GAAX;YACM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC3B,CAAC;QAEM,2BAAU,GAAjB;YACG,kEAAkE;YAClE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACxB,CAAC;QAEM,sBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,aAAC;IAAD,CA1EA,AA0EC,IAAA;IA1EY,wBAAM;IA4EnB;QAcG,cAAY,KAAY,EAAE,WAAmB,EAAE,KAAe;YAJtD,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YACjB,uBAAkB,GAAG,KAAK,CAAC;YAGhC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;YAChC,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,IAAI,GAAG,IAAI,iBAAM,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAC7D,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,CAAC,CAAC;YAEzB,EAAE,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;YAClC,CAAC;QACJ,CAAC;QAEM,qBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE,CAAC;YACxD,CAAC;YAED,IAAI,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC9G,EAAE,CAAC,CAAC,CAAC,gBAAgB,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;gBAC1D,IAAI,CAAC,MAAM,GAAG,gBAAgB,CAAC;YAClC,CAAC;YACD,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAEpC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE,CAAC;YAErD,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAExB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBAErB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACzB,CAAC;QACJ,CAAC;QAEM,yBAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,CAAC,CAAC;QACxD,CAAC;QAEM,mBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,oBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,WAAC;IAAD,CAvEA,AAuEC,IAAA;IAvEY,oBAAI;IAyEjB;QAeG,kBAAY,KAAY,EAAE,YAAoB,EAAE,KAAa,EAAE,YAA2B;YAFlF,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC;YACzB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,aAAa,GAAG,YAAY,IAAI,2BAAY,CAAC,YAAY,CAAC;QAClE,CAAC;QAEM,yBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACnC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClD,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;gBACvC,EAAE,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC;oBACzB,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;oBAChC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;gBAClC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;oBAChC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;gBAClC,CAAC;gBAED,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,EAAE,CAAC;gBAE9F,MAAM,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;oBAC1B,KAAK,2BAAY,CAAC,YAAY;wBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;wBACrC,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BAChC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;wBACvB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;wBACxB,CAAC;wBACD,KAAK,CAAC;oBACT,KAAK,2BAAY,CAAC,WAAW;wBAC1B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;wBACpC,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BAChC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;wBACxB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;wBACvB,CAAC;wBACD,KAAK,CAAC;oBACT,KAAK,2BAAY,CAAC,SAAS;wBACxB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;wBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BAChC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;wBACxC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;wBACvC,CAAC;wBACD,KAAK,CAAC;oBACT,KAAK,2BAAY,CAAC,gBAAgB;wBAC/B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;wBACrB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BACjC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;wBACxC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;wBACvC,CAAC;wBACD,KAAK,CAAC;gBACZ,CAAC;YACJ,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC;YAE/C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxB,CAAC;QACJ,CAAC;QAEM,6BAAU,GAAjB;YACG,IAAI,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YACrE,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC3E,CAAC;QAEM,uBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,wBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,eAAC;IAAD,CAhGA,AAgGC,IAAA;IAhGY,4BAAQ;IAkGrB;QAgBG,kBAAY,KAAY,EAAE,YAAoB,EAAE,IAAY,EAAE,YAA2B;YAFjF,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC;YACzB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,aAAa,GAAG,YAAY,IAAI,2BAAY,CAAC,YAAY,CAAC;QAClE,CAAC;QAEM,yBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACnC,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClD,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;gBACvC,EAAE,CAAC,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC;oBACzB,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;oBAChC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;gBAClC,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;oBAChC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;gBAClC,CAAC;gBAED,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,EAAE,CAAC;gBAE9F,MAAM,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;oBAC1B,KAAK,2BAAY,CAAC,YAAY;wBAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;wBACrC,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BAChC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;wBACvB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;wBACxB,CAAC;wBACD,KAAK,CAAC;oBACT,KAAK,2BAAY,CAAC,WAAW;wBAC1B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;wBACpC,EAAE,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;4BAChC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;wBACxB,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;wBACvB,CAAC;wBACD,KAAK,CAAC;oBACT,KAAK,2BAAY,CAAC,SAAS;wBACxB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;wBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC,CAAC;4BAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;wBACxC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;wBACvC,CAAC;wBACD,KAAK,CAAC;oBACT,KAAK,2BAAY,CAAC,gBAAgB;wBAC/B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;wBACrB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,CAAC,CAAC,CAAC;4BAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;wBACxC,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC;wBACvC,CAAC;wBACD,KAAK,CAAC;gBACZ,CAAC;gBACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;YAC9D,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC;YAG/C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxB,CAAC;QACJ,CAAC;QAEM,6BAAU,GAAjB;YACG,IAAI,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YACrE,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC3E,CAAC;QAEM,uBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,wBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,eAAC;IAAD,CAnGA,AAmGC,IAAA;IAnGY,4BAAQ;IAqGrB;QAcG,iBAAY,KAAY,EAAE,MAAc,EAAE,MAAc,EAAE,MAAc,EAAE,MAAc;YAFhF,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QAEzB,CAAC;QAEM,wBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;gBACtD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YACzD,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACtE,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACpD,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;YAC9C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACtB,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;gBACtE,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;gBACpD,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;YAC9C,CAAC;YAAC,IAAI,CAAC,CAAC;gBACL,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACtB,CAAC;YAGD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACtB,CAAC;QACJ,CAAC;QAEM,4BAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC;gBAC/D,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QACjG,CAAC;QAEM,sBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,uBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,cAAC;IAAD,CArEA,AAqEC,IAAA;IArEY,0BAAO;IAuEpB;QAeG,iBAAY,KAAY,EAAE,MAAc,EAAE,MAAc,EAAE,IAAY;YAJ9D,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAItB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC;YAChE,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC;QACnE,CAAC;QAEM,wBAAM,GAAb,UAAc,MAAc;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;gBACtD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YACzD,CAAC;YACD,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACpD,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACpD,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;YAC3C,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;YAG3C,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;gBACjC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACtB,CAAC;QACJ,CAAC;QAEM,4BAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC;gBAC/D,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QACjG,CAAC;QAEM,sBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,uBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,cAAC;IAAD,CA5DA,AA4DC,IAAA;IA5DY,0BAAO;IA8DpB;QAQG,eAAY,KAAY,EAAE,KAAa;YAJ/B,iBAAY,GAAW,CAAC,CAAC;YAEzB,aAAQ,GAAY,KAAK,CAAC;YAC1B,aAAQ,GAAG,KAAK,CAAC;YAEtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QAEM,sBAAM,GAAb,UAAc,KAAa;YACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxB,CAAC;YAED,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAE3B,IAAI,CAAC,YAAY,IAAI,KAAK,CAAC;QAC9B,CAAC;QAED,0BAAU,GAAV;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9D,CAAC;QAEM,oBAAI,GAAX;YACG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAED,qBAAK,GAAL;YACG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,YAAC;IAAD,CApCA,AAoCC,IAAA;IApCY,sBAAK;IAsClB;QASG,eAAY,KAAY,EAAE,WAAmB,EAAE,cAAsB,EAAE,SAAqB;YAArB,0BAAA,EAAA,aAAqB;YARpF,iBAAY,GAAW,CAAC,CAAC;YACzB,oBAAe,GAAW,CAAC,CAAC;YAC5B,iBAAY,GAAW,CAAC,CAAC;YACzB,eAAU,GAAW,CAAC,CAAC;YAGvB,aAAQ,GAAY,KAAK,CAAC;YAC1B,aAAQ,GAAY,KAAK,CAAC;YAE/B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;YAChC,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;YACtC,IAAI,CAAC,SAAS,GAAG,CAAC,WAAW,GAAG,cAAc,CAAC,GAAG,SAAS,CAAC;QAC/D,CAAC;QAEM,sBAAM,GAAb,UAAc,KAAa;YACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxB,CAAC;YAED,IAAI,CAAC,YAAY,IAAI,KAAK,CAAC;YAC3B,IAAI,CAAC,UAAU,IAAI,KAAK,CAAC;YACzB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjE,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACzB,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;gBACrE,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACzB,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;YAC9B,CAAC;QAEJ,CAAC;QAEM,0BAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC;QAC/D,CAAC;QAEM,oBAAI,GAAX;YACG,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,qBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACvB,CAAC;QACJ,YAAC;IAAD,CArDA,AAqDC,IAAA;IArDY,sBAAK;IAuDlB;QAWG,cAAY,KAAY,EAAE,UAAkB,EAAE,KAAa;YAJnD,gBAAW,GAAW,CAAC,CAAC;YACxB,aAAQ,GAAG,KAAK,CAAC;YACjB,aAAQ,GAAG,KAAK,CAAC;YAGtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;YAC9B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QAEM,qBAAM,GAAb,UAAc,KAAa;YACxB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAErB,oCAAoC;gBACpC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC1C,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;gBACzB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACL,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;gBACxB,CAAC;YACJ,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACnB,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;YACtH,CAAC;YAED,IAAI,CAAC,MAAM,IAAI,KAAK,CAAC;YAErB,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;gBACrB,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;YAC1C,CAAC;YAED,aAAM,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,8BAA8B,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACnF,CAAC;QAEM,yBAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,CAAC;QACrF,CAAC;QAEM,mBAAI,GAAX;YACG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,oBAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACzB,CAAC;QACJ,WAAC;IAAD,CArDA,AAqDC,IAAA;IArDY,oBAAI;IAuDjB;QAOG,aAAY,KAAY;YAFhB,aAAQ,GAAG,KAAK,CAAC;YAGtB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QAEM,oBAAM,GAAb,UAAc,MAAc;YACzB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,wBAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACxB,CAAC;QAEM,kBAAI,GAAX,cAAsB,MAAM,CAAC,CAAC,CAAC;QAExB,mBAAK,GAAZ,cAAuB,MAAM,CAAC,CAAC,CAAC;QACnC,UAAC;IAAD,CAxBA,AAwBC,IAAA;IAxBY,kBAAG;IA0BhB;QAMG,oBAAY,KAAY,EAAE,MAAiB;YAHnC,YAAO,GAAc,IAAI,CAAC;YAC1B,WAAM,GAAU,IAAI,CAAC;YACrB,mBAAc,GAAY,KAAK,CAAC;YAErC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACzB,CAAC;QAEM,2BAAM,GAAb,UAAc,MAAc;YACzB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC9B,CAAC;QACM,+BAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;QAC9B,CAAC;QACM,0BAAK,GAAZ;YACG,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC/B,CAAC;QACM,yBAAI,GAAX;YACG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC9B,CAAC;QACJ,iBAAC;IAAD,CAxBA,AAwBC,IAAA;IAxBY,gCAAU;IA0BvB;QAQG,gBAAY,KAAY,EAAE,MAAc,EAAE,OAAkB;YADpD,aAAQ,GAAY,KAAK,CAAC;YAE/B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,eAAe,GAAG,MAAM,CAAC;YAE9B,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC;YAChC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;gBACnB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,CAAC;YAAA,CAAC;QACL,CAAC;QAEM,uBAAM,GAAb,UAAc,KAAa;YACxB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,CAAC;YACD,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;QAEM,2BAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC;QAC/C,CAAC;QAEM,qBAAI,GAAX;YACG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACxB,CAAC;QAEM,sBAAK,GAAZ;YACG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC;QACvC,CAAC;QACJ,aAAC;IAAD,CA1CA,AA0CC,IAAA;IA1CY,wBAAM;IA4CnB;QAMG,uBAAY,KAAY,EAAE,OAAkB;YADpC,aAAQ,GAAY,KAAK,CAAC;YAE/B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,CAAC,YAAY,GAAG,IAAI,WAAW,CAAC,KAAK,CAAC,CAAC;YAE3C,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC;YAChC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;gBACnB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,CAAC;YAAA,CAAC;QACL,CAAC;QAEM,8BAAM,GAAb,UAAc,KAAa;YACxB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC;YACV,CAAC;YAGD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;gBAChC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;YAC7B,CAAC;YAED,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAEnC,CAAC;QAEM,kCAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACxB,CAAC;QAEM,4BAAI,GAAX;YACG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;QACpC,CAAC;QAEM,6BAAK,GAAZ,cAAuB,MAAM,CAAC,CAAC,CAAC;QACnC,oBAAC;IAAD,CA3CA,AA2CC,IAAA;IA3CY,sCAAa;IA6C1B;;;;;;;;;OASG;IACH;QAKG,qBAAY,KAAY;YAHhB,aAAQ,GAAc,EAAE,CAAC;YAEzB,sBAAiB,GAAc,EAAE,CAAC;YAEvC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvB,CAAC;QAEM,yBAAG,GAAV,UAAW,MAAe;YACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,CAAC;QAEM,4BAAM,GAAb,UAAc,MAAe;YAC1B,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAC1C,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAClC,CAAC;QAEM,kCAAY,GAAnB;YACG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;YACzB,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;gBACvB,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;YAC9B,CAAC;QACJ,CAAC;QAEM,gCAAU,GAAjB;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACvD,CAAC;QAEM,6BAAO,GAAd;YACG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;QACnC,CAAC;QAEM,2BAAK,GAAZ;YACG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAElC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;YACtC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;gBACpB,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;YAC5B,CAAC;YACD,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC/B,CAAC;QAEM,4BAAM,GAAb,UAAc,KAAa;YACxB,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;gBACvC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBAElC,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBAC/C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;gBACtD,CAAC;YACJ,CAAC;QACJ,CAAC;QACJ,kBAAC;IAAD,CAtDA,AAsDC,IAAA;IAtDY,kCAAW;;ACt9BxB,0BAA0B;AAC1B,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC;IACjC,MAAM,GAAS,EAAE,YAAY,EAAE,cAAc,MAAM,CAAC,CAAC,CAAC,EAAG,CAAC;AAC7D,CAAC;AACD,0BAA0B;AAC1B,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC;IAC5D,MAAO,CAAC,qBAAqB;QAC7B,MAAO,CAAC,2BAA2B;YACnC,MAAO,CAAC,wBAAwB;YACtC,UAAU,QAAkB,IAAI,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9E,CAAC;AACD,0BAA0B;AAC1B,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC;IAC3D,MAAO,CAAC,oBAAoB;QAC5B,MAAO,CAAC,0BAA0B;YAClC,MAAO,CAAC,uBAAuB;YACrC,cAAc,MAAM,CAAC,CAAC,CAAC,CAAC;AAC3B,CAAC;AACD,0BAA0B;AAC1B,EAAE,CAAC,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,CAAO,MAAO,CAAC,YAAY,CAAC,CAAC,CAAC;IAC1D,MAAO,CAAC,YAAY,GAAS,MAAO,CAAC,YAAY;QACpB,MAAO,CAAC,kBAAkB;QAC1B,MAAO,CAAC,eAAe;QACvB,MAAO,CAAC,cAAc;QACtB,MAAO,CAAC,aAAa,CAAC;AAC5D,CAAC;AAED,+GAA+G;AAC/G,qDAAqD;AACrD,8CAA8C;AAC9C,0BAA0B;AAC1B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;IAE5B,KAAK,CAAC,SAAS,CAAC,OAAO,GAAG,UAA4B,QAAQ,EAAE,OAAO;QAEpE,IAAI,CAAC,EAAE,CAAC,CAAC;QAET,EAAE,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;YAChB,MAAM,IAAI,SAAS,CAAC,6BAA6B,CAAC,CAAC;QACtD,CAAC;QAED,wFAAwF;QACxF,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;QAErB,oGAAoG;QACpG,oCAAoC;QACpC,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;QAEzB,oEAAoE;QACpE,oCAAoC;QACpC,EAAE,CAAC,CAAC,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAC;YAClC,MAAM,IAAI,SAAS,CAAC,QAAQ,GAAG,oBAAoB,CAAC,CAAC;QACxD,CAAC;QAED,yEAAyE;QACzE,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACxB,CAAC,GAAG,OAAO,CAAC;QACf,CAAC;QAED,gBAAgB;QAChB,CAAC,GAAG,CAAC,CAAC;QAEN,2BAA2B;QAC3B,OAAO,CAAC,GAAG,GAAG,EAAE,CAAC;YAEd,IAAI,MAAM,CAAC;YAEX,4BAA4B;YAC5B,yDAAyD;YACzD,kGAAkG;YAClG,qCAAqC;YACrC,+BAA+B;YAC/B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAEV,wFAAwF;gBACxF,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEd,6EAA6E;gBAC7E,6CAA6C;gBAC7C,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,CAAC;YACD,sBAAsB;YACtB,CAAC,EAAE,CAAC;QACP,CAAC;QACD,sBAAsB;IACzB,CAAC,CAAC;AACL,CAAC;AAED,4GAA4G;AAC5G,0BAA0B;AAC1B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1B,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,UAA2B,GAAG,CAAC,cAAc;QAClE,YAAY,CAAC;QAEb,EAAE,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;YACrC,MAAM,IAAI,SAAS,EAAE,CAAC;QACxB,CAAC;QAED,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;QACrB,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;QACzB,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,UAAU,CAAC,CAAC,CAAC;YAC9B,MAAM,IAAI,SAAS,EAAE,CAAC;QACxB,CAAC;QAED,IAAI,OAAO,GAAG,SAAS,CAAC,MAAM,IAAI,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QAC5D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;QACH,CAAC;QAED,MAAM,CAAC,KAAK,CAAC;IACf,CAAC,CAAC;AACJ,CAAC;AAED,yHAAyH;AACzH,0BAA0B;AAC1B,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IAC5B,QAAQ,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,KAAK;QACtC,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC;YAC9B,6CAA6C;YAC7C,+BAA+B;YAC/B,MAAM,IAAI,SAAS,CAAC,sEAAsE,CAAC,CAAC;QAC/F,CAAC;QAED,IAAI,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,EACjD,OAAO,GAAG,IAAI,EACd,IAAI,GAAQ,cAAc,MAAM,CAAC,CAAC,CAAC,EACnC,MAAM,GAAG;YACN,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,YAAY,IAAI,IAAI,KAAK;kBAC7C,IAAI;kBACJ,KAAK,EACP,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAC3D,CAAC,CAAC;QAEL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,MAAM,CAAC,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;QAE9B,MAAM,CAAC,MAAM,CAAC;IACjB,CAAC,CAAC;AACL,CAAC","file":"excalibur.amd.js","sourcesContent":["\r\n/**\r\n * An enum that describes the strategies that rotation actions can use\r\n */\r\nexport enum RotationType {\r\n   /**\r\n    * Rotation via `ShortestPath` will use the smallest angle\r\n    * between the starting and ending points. This strategy is the default behavior.\r\n    */\r\n   ShortestPath = 0,\r\n   /**\r\n    * Rotation via `LongestPath` will use the largest angle\r\n    * between the starting and ending points.\r\n    */\r\n   LongestPath = 1,\r\n   /**\r\n    * Rotation via `Clockwise` will travel in a clockwise direction,\r\n    * regardless of the starting and ending points.\r\n    */\r\n   Clockwise = 2,\r\n   /**\r\n    * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\r\n    * regardless of the starting and ending points.\r\n    */\r\n   CounterClockwise = 3\r\n}","\r\n\r\n/**\r\n * A 2D vector on a plane. \r\n */\r\nexport class Vector {\r\n\r\n   /**\r\n    * A (0, 0) vector\r\n    */\r\n   public static Zero = new Vector(0, 0);\r\n\r\n   /**\r\n    * A (1, 1) vector\r\n    */\r\n   public static One = new Vector(1, 1);\r\n\r\n   /**\r\n    * A (0.5, 0.5) vector\r\n    */\r\n   public static Half = new Vector(0.5, 0.5);\r\n\r\n   /**\r\n    * A unit vector pointing up (0, -1)\r\n    */\r\n   public static Up = new Vector(0, -1);\r\n\r\n   /**\r\n    * A unit vector pointing down (0, 1)\r\n    */\r\n   public static Down = new Vector(0, 1);\r\n\r\n   /**\r\n    * A unit vector pointing left (-1, 0)\r\n    */\r\n   public static Left = new Vector(-1, 0);\r\n   /**\r\n    * A unit vector pointing right (1, 0)\r\n    */\r\n   public static Right = new Vector(1, 0);\r\n\r\n   /**\r\n    * Returns a vector of unit length in the direction of the specified angle in Radians.\r\n    * @param angle The angle to generate the vector\r\n    */\r\n   public static fromAngle(angle: number) {\r\n      return new Vector(Math.cos(angle), Math.sin(angle));\r\n   }\r\n\r\n   /**\r\n    * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\r\n    */\r\n   public static isValid(vec: Vector) {\r\n      if (vec === null || vec === undefined) {\r\n         return false;\r\n      }\r\n      if (isNaN(vec.x) || isNaN(vec.y)) {\r\n         return false;\r\n      }\r\n\r\n      if (vec.x === Infinity ||\r\n         vec.y === Infinity ||\r\n         vec.x === -Infinity ||\r\n         vec.y === Infinity) {\r\n         return false;\r\n      }\r\n\r\n      return true;\r\n   }\r\n\r\n   /**\r\n    * @param x  X component of the Vector\r\n    * @param y  Y component of the Vector\r\n    */\r\n   constructor(public x: number, public y: number) { }\r\n\r\n   /**\r\n    * Sets the x and y components at once\r\n    */\r\n   public setTo(x: number, y: number) {\r\n      this.x = x;\r\n      this.y = y;\r\n   }\r\n\r\n   /**\r\n    * Compares this point against another and tests for equality\r\n    * @param point  The other point to compare to\r\n    */\r\n   public equals(vector: Vector, tolerance: number = .001): boolean {\r\n      return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\r\n   }\r\n\r\n   /**\r\n    * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\r\n    * @param v  The other vector. Leave blank to use origin vector.\r\n    */\r\n   public distance(v?: Vector): number {\r\n      if (!v) {\r\n         v = Vector.Zero;\r\n      }\r\n      return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\r\n   }\r\n\r\n   /**\r\n    * The magnitude (size) of the Vector\r\n    */\r\n   public magnitude(): number {\r\n      return this.distance();\r\n   }\r\n\r\n   /**\r\n    * Normalizes a vector to have a magnitude of 1.\r\n    */\r\n   public normalize(): Vector {\r\n      var d = this.distance();\r\n      if (d > 0) {\r\n         return new Vector(this.x / d, this.y / d);\r\n      } else {\r\n         return new Vector(0, 1);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns the average (midpoint) between the current point and the specified\r\n    */\r\n   public average(vec: Vector): Vector {\r\n      return this.add(vec).scale(.5);\r\n   }\r\n\r\n   /**\r\n    * Scales a vector's by a factor of size\r\n    * @param size  The factor to scale the magnitude by\r\n    */\r\n   public scale(size: number): Vector {\r\n      return new Vector(this.x * size, this.y * size);\r\n   }\r\n\r\n   /**\r\n    * Adds one vector to another\r\n    * @param v The vector to add\r\n    */\r\n   public add(v: Vector): Vector {\r\n      return new Vector(this.x + v.x, this.y + v.y);\r\n   }\r\n\r\n   /**\r\n    * Subtracts a vector from another, if you subract vector `B.sub(A)` the resulting vector points from A -> B\r\n    * @param v The vector to subtract\r\n    */\r\n   public sub(v: Vector): Vector {\r\n      return new Vector(this.x - v.x, this.y - v.y);\r\n   }\r\n\r\n   /**\r\n    * Adds one vector to this one modifying the original\r\n    * @param v The vector to add\r\n    */\r\n   public addEqual(v: Vector): Vector {\r\n      this.x += v.x;\r\n      this.y += v.y;\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Subtracts a vector from this one modifying the original\r\n    * @parallel v The vector to subtract\r\n    */\r\n   public subEqual(v: Vector): Vector {\r\n      this.x -= v.x;\r\n      this.y -= v.y;\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Scales this vector by a factor of size and modifies the original\r\n    */\r\n   public scaleEqual(size: number): Vector {\r\n      this.x *= size;\r\n      this.y *= size;\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Performs a dot product with another vector\r\n    * @param v  The vector to dot\r\n    */\r\n   public dot(v: Vector): number {\r\n      return this.x * v.x + this.y * v.y;\r\n   }\r\n\r\n   /**\r\n    * Performs a 2D cross product with scalar. 2D cross products with a scalar return a vector.\r\n    * @param v  The vector to cross\r\n    */\r\n   public cross(v: number): Vector;\r\n   /**\r\n    * Performs a 2D cross product with another vector. 2D cross products return a scalar value not a vector.\r\n    * @param v  The vector to cross\r\n    */\r\n   public cross(v: Vector): number;\r\n   public cross(v: any): any {\r\n      if (v instanceof Vector) {\r\n         return this.x * v.y - this.y * v.x;\r\n      } else if (typeof v === 'number') {\r\n         return new Vector(v * this.y, -v * this.x);\r\n      }\r\n   }\r\n\r\n\r\n\r\n   /**\r\n    * Returns the perpendicular vector to this one\r\n    */\r\n   public perpendicular(): Vector {\r\n      return new Vector(this.y, -this.x);\r\n   }\r\n\r\n   /**\r\n    * Returns the normal vector to this one, same as the perpendicular of length 1\r\n    */\r\n   public normal(): Vector {\r\n      return this.perpendicular().normalize();\r\n   }\r\n\r\n   /**\r\n    * Negate the current vector\r\n    */\r\n   public negate(): Vector {\r\n      return this.scale(-1);\r\n   }\r\n\r\n   /**\r\n    * Returns the angle of this vector.\r\n    */\r\n   public toAngle(): number {\r\n      return Math.atan2(this.y, this.x);\r\n   }\r\n\r\n   /**\r\n    * Rotates the current vector around a point by a certain number of\r\n    * degrees in radians\r\n    */\r\n   public rotate(angle: number, anchor?: Vector): Vector {\r\n      if (!anchor) {\r\n         anchor = new Vector(0, 0);\r\n      }\r\n      var sinAngle = Math.sin(angle);\r\n      var cosAngle = Math.cos(angle);\r\n      var x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\r\n      var y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\r\n      return new Vector(x, y);\r\n   }\r\n\r\n   /**\r\n    * Creates new vector that has the same values as the previous.\r\n    */\r\n   public clone(): Vector {\r\n      return new Vector(this.x, this.y);\r\n   }\r\n\r\n   /**\r\n    * Returns a string repesentation of the vector.\r\n    */\r\n   public toString(): string {\r\n      return `(${this.x}, ${this.y})`;\r\n   }\r\n}\r\n\r\n\r\n/**\r\n * A 2D ray that can be cast into the scene to do collision detection\r\n */\r\nexport class Ray {\r\n   public pos: Vector;\r\n   public dir: Vector;\r\n\r\n   /**\r\n    * @param pos The starting position for the ray\r\n    * @param dir The vector indicating the direction of the ray\r\n    */\r\n   constructor(pos: Vector, dir: Vector) {\r\n      this.pos = pos;\r\n      this.dir = dir.normalize();\r\n   }\r\n\r\n   /**\r\n    * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success. \r\n    * This number indicates the mathematical intersection time.\r\n    * @param line  The line to test\r\n    */\r\n   public intersect(line: Line): number {\r\n      var numerator = line.begin.sub(this.pos);\r\n\r\n      // Test is line and ray are parallel and non intersecting\r\n      if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\r\n         return -1;\r\n      }\r\n\r\n      // Lines are parallel\r\n      var divisor = (this.dir.cross(line.getSlope()));\r\n      if (divisor === 0) {\r\n         return -1;\r\n      }\r\n\r\n      var t = numerator.cross(line.getSlope()) / divisor;\r\n\r\n      if (t >= 0) {\r\n         var u = (numerator.cross(this.dir) / divisor) / line.getLength();\r\n         if (u >= 0 && u <= 1) {\r\n            return t;\r\n         }\r\n      }\r\n      return -1;\r\n   }\r\n\r\n   /**\r\n    * Returns the point of intersection given the intersection time\r\n    */\r\n   public getPoint(time: number): Vector {\r\n      return this.pos.add(this.dir.scale(time));\r\n   }\r\n}\r\n\r\n/**\r\n * A 2D line segment \r\n */\r\nexport class Line {\r\n\r\n   /**\r\n    * @param begin  The starting point of the line segment\r\n    * @param end  The ending point of the line segment\r\n    */\r\n   constructor(public begin: Vector, public end: Vector) {\r\n   }\r\n\r\n   /**\r\n    * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\r\n    */\r\n   public get slope() {\r\n      return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\r\n   }\r\n\r\n   /**\r\n    * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\r\n    */\r\n   public get intercept() {\r\n      return this.begin.y - (this.slope * this.begin.x);\r\n   }\r\n\r\n   /** \r\n    * Returns the slope of the line in the form of a vector\r\n    */\r\n   public getSlope(): Vector {\r\n      var begin = this.begin;\r\n      var end = this.end;\r\n      var distance = begin.distance(end);\r\n      return end.sub(begin).scale(1 / distance);\r\n   }\r\n\r\n   /**\r\n    * Returns the length of the line segment in pixels\r\n    */\r\n   public getLength(): number {\r\n      var begin = this.begin;\r\n      var end = this.end;\r\n      var distance = begin.distance(end);\r\n      return distance;\r\n   }\r\n\r\n   /**\r\n    * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\r\n    * a new point with the calculated Y value and vice-versa.\r\n    * \r\n    * @param x The known X value of the target point \r\n    * @param y The known Y value of the target point\r\n    * @returns A new point with the other calculated axis value       \r\n    */\r\n   public findPoint(x: number = null, y: number = null): Vector {\r\n      var m = this.slope;\r\n      var b = this.intercept;\r\n\r\n      if (x !== null) {\r\n         return new Vector(x, (m * x) + b);\r\n      } else if (y !== null) {\r\n         return new Vector((y - b) / m, y);\r\n      } else {\r\n        throw new Error('You must provide an X or a Y value');\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Whether or not the given point lies on this line. This method is precise by default\r\n    * meaning the point must lie exactly on the line. Adjust threshold to \r\n    * loosen the strictness of the check for floating-point calculations.\r\n    */\r\n   public hasPoint(x: number, y: number, threshold?: number): boolean;\r\n\r\n   /**\r\n    * Whether or not the given point lies on this line. This method is precise by default\r\n    * meaning the point must lie exactly on the line. Adjust threshold to \r\n    * loosen the strictness of the check for floating-point calculations.\r\n    */\r\n   public hasPoint(v: Vector, threshold?: number): boolean;\r\n\r\n   /**\r\n    * @see http://stackoverflow.com/a/11908158/109458\r\n    */\r\n   public hasPoint(): boolean {\r\n      var currPoint: Vector;\r\n      var threshold = 0;\r\n\r\n      if (typeof arguments[0] === 'number' &&\r\n         typeof arguments[1] === 'number') {\r\n         currPoint = new Vector(arguments[0], arguments[1]);\r\n         threshold = arguments[2] || 0;\r\n      } else if (arguments[0] instanceof Vector) {\r\n         currPoint = arguments[0];\r\n         threshold = arguments[1] || 0;\r\n      } else {\r\n         throw 'Could not determine the arguments for Vector.hasPoint';\r\n      }\r\n\r\n      var dxc = currPoint.x - this.begin.x;\r\n      var dyc = currPoint.y - this.begin.y;\r\n\r\n      var dx1 = this.end.x - this.begin.x;\r\n      var dy1 = this.end.y - this.begin.y;\r\n\r\n      var cross = dxc * dy1 - dyc * dx1;\r\n\r\n      // check whether point lines on the line\r\n      if (Math.abs(cross) > threshold) {\r\n         return false;\r\n      }\r\n\r\n      // check whether point lies in-between start and end\r\n      if (Math.abs(dx1) >= Math.abs(dy1)) {\r\n         return dx1 > 0\r\n            ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x\r\n            : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\r\n      } else {\r\n         return dy1 > 0\r\n            ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y\r\n            : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * A 1 dimensional projection on an axis, used to test overlaps\r\n */\r\nexport class Projection {\r\n   constructor(public min: number, public max: number) { }\r\n   public overlaps(projection: Projection): boolean {\r\n      return this.max > projection.min && projection.max > this.min;\r\n   }\r\n\r\n   public getOverlap(projection: Projection): number {\r\n      if (this.overlaps(projection)) {\r\n         if (this.max > projection.max) {\r\n            return projection.max - this.min;\r\n         } else {\r\n            return this.max - projection.min;\r\n         }\r\n      }\r\n      return 0;\r\n   }\r\n}","import { Vector } from './Algebra';\r\n\r\n/**\r\n * Possible collision resolution strategies\r\n *\r\n * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\r\n * \r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nexport enum CollisionResolutionStrategy {\r\n   Box,\r\n   RigidBody\r\n}\r\n\r\n/**\r\n * Possible broadphase collision pair identification strategies\r\n * \r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy \r\n * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\r\n */\r\nexport enum BroadphaseStrategy {\r\n   Naive,\r\n   DynamicAABBTree\r\n}\r\n\r\n/**\r\n * Possible numerical integrators for position and velocity\r\n */\r\nexport enum Integrator {\r\n   Euler\r\n}\r\n\r\n/**\r\n * The [[Physics]] object is the global configuration object for all Excalibur physics. \r\n *\r\n * [[include:Physics.md]]\r\n */\r\n/* istanbul ignore next */\r\nexport class Physics {\r\n   /**\r\n    * Global acceleration that is applied to all vanilla actors (it wont effect [[Label|labels]], [[UIActor|ui actors]], or \r\n    * [[Trigger|triggers]] in Excalibur that have an [[CollisionType.Active|active]] collision type).\r\n    * \r\n    * \r\n    * This is a great way to globally simulate effects like gravity.\r\n    */\r\n   public static acc = new Vector(0, 0);\r\n\r\n   /**\r\n    * Globally switches all Excalibur physics behavior on or off.\r\n    */\r\n   public static enabled = true;\r\n\r\n   /**\r\n    * Gets or sets the number of collision passes for Excalibur to perform on physics bodies. \r\n    *   \r\n    * Reducing collision passes may cause things not to collide as expected in your game, but may increase performance.\r\n    * \r\n    * More passes can improve the visual quality of collisions when many objects are on the screen. This can reduce jitter, improve the\r\n    * collision resolution of fast move objects, or the stability of large numbers of objects stacked together.\r\n    * \r\n    * Fewer passes will improve the performance of the game at the cost of collision quality, more passes will improve quality at the \r\n    * cost of performance. \r\n    * \r\n    * The default is set to 5 passes which is a good start.\r\n    */\r\n   public static collisionPasses = 5;\r\n\r\n   /**\r\n    * Gets or sets the broadphase pair identification strategy.\r\n    * \r\n    * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n    * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy \r\n    * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\r\n    */\r\n   public static broadphaseStrategy: BroadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\r\n\r\n   /**\r\n    * Globally switches the debug information for the broadphase strategy\r\n    */\r\n   public static broadphaseDebug: boolean = false;\r\n   /**\r\n    * Show the normals as a result of collision on the screen.\r\n    */\r\n   public static showCollisionNormals: boolean = false;\r\n   /**\r\n    * Show the position, velocity, and acceleration as graphical vectors.\r\n    */\r\n   public static showMotionVectors: boolean = false;\r\n   /**\r\n    * Show the axis-aligned bounding boxes of the collision bodies on the screen.\r\n    */\r\n   public static showBounds: boolean = false;\r\n   /**\r\n    * Show the bounding collision area shapes\r\n    */\r\n   public static showArea: boolean = false;\r\n   /**\r\n    * Show points of collision interpreted by excalibur as a result of collision.\r\n    */\r\n   public static showContacts: boolean = false;\r\n   /**\r\n    * Show the surface normals of the collision areas.\r\n    */\r\n   public static showNormals: boolean = false;\r\n   /**\r\n    * Gets or sets the global collision resolution strategy (narrowphase).\r\n    * \r\n    * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\r\n    * \r\n    * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\r\n    * simulated physical interactions.\r\n    */\r\n   public static collisionResolutionStrategy: CollisionResolutionStrategy = CollisionResolutionStrategy.Box;\r\n   /**\r\n    * The default mass to use if none is specified\r\n    */\r\n   public static defaultMass: number = 10;\r\n   /**\r\n    * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\r\n    */\r\n   public static integrator: Integrator = Integrator.Euler;\r\n   /**\r\n    * Number of steps to use in integration. A higher number improves the positional accuracy over time. This can be useful to increase\r\n    * if you have fast moving objects in your simulation or you have a large number of objects and need to increase stability.\r\n    */\r\n   public static integrationSteps = 1;\r\n   /**\r\n    * Gets or sets whether rotation is allowed in a RigidBody collision resolution \r\n    */\r\n   public static allowRigidBodyRotation = true;\r\n\r\n   /**\r\n    * Configures Excalibur to use box physics. Box physics which performs simple axis aligned arcade style physics.\r\n    */\r\n   public static useBoxPhysics(): void {\r\n      Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\r\n   }\r\n\r\n   /**\r\n    * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\r\n    * simulated physical interactions.\r\n    */\r\n   public static useRigidBodyPhysics(): void {\r\n      Physics.collisionResolutionStrategy = CollisionResolutionStrategy.RigidBody;\r\n   }\r\n\r\n   /**\r\n    * Small value to help collision passes settle themselves after the narrowphase. \r\n    */\r\n   public static collisionShift = .001;\r\n\r\n   /**\r\n    * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplyer); \r\n    */\r\n   public static dynamicTreeVelocityMultiplyer = 2;\r\n\r\n   /**\r\n    * Pad RigidBody BoundingBox by a constant amount\r\n    */\r\n   public static boundsPadding = 5;\r\n\r\n   /**\r\n    * Surface epsilon is used to help deal with surface penatration\r\n    */\r\n   public static surfaceEpsilon = .1;\r\n\r\n   /**\r\n    * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\r\n    * bodies from tunneling through one another.\r\n    */\r\n   public static checkForFastBodies = true;\r\n\r\n   /**\r\n    * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the \r\n    * body is moving at least half of its minimum diminension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\r\n    * Excalibur will always perform the fast body raycast regardless of speed. \r\n    */\r\n   public static disableMinimumSpeedForFastBody = false;\r\n}","/**\r\n * A definition of an EasingFunction. See [[EasingFunctions]].    \r\n */\r\nexport interface EasingFunction { // tslint:disable-line\r\n   (currentTime: number, startValue: number, endValue: number, duration: number): number;\r\n}\r\n\r\n/**\r\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\r\n * Given a time, the function will return a value from positive startValue to positive endValue.\r\n *\r\n * ```js\r\n * function Linear (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInQuad (t) { \r\n *    return t * t; \r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutQuad (t) {\r\n *    return t * (2 - t); \r\n * }\r\n * \r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutQuad (t) { \r\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; \r\n * }\r\n *\r\n * // accelerating from zero velocity \r\n * function EaseInCubic (t) { \r\n *    return t * t * t; \r\n * }\r\n *\r\n * // decelerating to zero velocity \r\n * function EaseOutCubic (t) { \r\n *    return (--t) * t * t + 1; \r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration \r\n * function EaseInOutCubic (t) { \r\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; \r\n * }\r\n * ```\r\n */\r\nexport class EasingFunctions {\r\n\r\n   public static Linear: EasingFunction = (currentTime: number, startValue: number, endValue: number, duration: number)  => {\r\n      endValue = (endValue - startValue);\r\n      return endValue * currentTime / duration + startValue;\r\n   };\r\n\r\n   public static EaseInQuad = (currentTime: number, startValue: number, endValue: number, duration: number) => {\r\n      endValue = (endValue - startValue);\r\n      currentTime /= duration;\r\n\r\n      return endValue * currentTime * currentTime + startValue;\r\n   };\r\n   \r\n   public static EaseOutQuad: EasingFunction = (currentTime: number, startValue: number, endValue: number, duration: number) => {\r\n      endValue = (endValue - startValue);\r\n      currentTime /= duration;\r\n      return -endValue * currentTime * (currentTime - 2) + startValue;\r\n   };\r\n\r\n   public static EaseInOutQuad: EasingFunction = (currentTime: number, startValue: number, endValue: number, duration: number) => {\r\n      endValue = (endValue - startValue);\r\n      currentTime /= duration / 2;\r\n\r\n      if (currentTime < 1) { return endValue / 2 * currentTime * currentTime + startValue; }\r\n      currentTime--;\r\n\r\n      return -endValue / 2 * (currentTime * (currentTime - 2) - 1) + startValue;\r\n   };\r\n\r\n   public static EaseInCubic: EasingFunction = (currentTime: number, startValue: number, endValue: number, duration: number) => {\r\n      endValue = (endValue - startValue);\r\n      currentTime /= duration;\r\n      return endValue * currentTime * currentTime * currentTime + startValue;\r\n   };\r\n\r\n   public static EaseOutCubic: EasingFunction = (currentTime: number, startValue: number, endValue: number, duration: number) => {\r\n      endValue = (endValue - startValue);\r\n      currentTime /= duration;\r\n      currentTime--;\r\n      return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\r\n   };\r\n\r\n   public static EaseInOutCubic: EasingFunction = (currentTime: number, startValue: number, endValue: number, duration: number) => {\r\n      endValue = (endValue - startValue);\r\n      currentTime /= duration / 2;\r\n      if (currentTime < 1) { return endValue / 2 * currentTime * currentTime * currentTime + startValue; }\r\n      currentTime -= 2;\r\n      return endValue / 2 * (currentTime * currentTime * currentTime + 2) + startValue;\r\n   };\r\n   \r\n}","\r\n/**\r\n * Logging level that Excalibur will tag\r\n */\r\nexport enum LogLevel {\r\n   Debug,\r\n   Info,\r\n   Warn,\r\n   Error,\r\n   Fatal\r\n}\r\n\r\n/**\r\n * Static singleton that represents the logging facility for Excalibur.\r\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\r\n * Derive from [[IAppender]] to create your own logging appenders.\r\n *\r\n * [[include:Logger.md]]\r\n */\r\nexport class Logger {\r\n   private static _instance: Logger = null;\r\n   private _appenders: IAppender[] = [];\r\n\r\n   constructor() {\r\n      if (Logger._instance) {\r\n         throw new Error('Logger is a singleton');\r\n      }\r\n      Logger._instance = this;\r\n      // Default console appender\r\n      Logger._instance.addAppender(new ConsoleAppender());\r\n      return Logger._instance;\r\n   }\r\n\r\n   /**\r\n    * Gets or sets the default logging level. Excalibur will only log \r\n    * messages if equal to or above this level. Default: [[LogLevel.Info]]\r\n    */\r\n   public defaultLevel: LogLevel = LogLevel.Info;\r\n\r\n   /**\r\n    * Gets the current static instance of Logger\r\n    */\r\n   public static getInstance(): Logger {\r\n      if (Logger._instance == null) {\r\n         Logger._instance = new Logger();\r\n      }\r\n      return Logger._instance;\r\n   }\r\n\r\n   /**\r\n    * Adds a new [[IAppender]] to the list of appenders to write to\r\n    */\r\n   public addAppender(appender: IAppender): void {\r\n      this._appenders.push(appender);\r\n   }\r\n\r\n   /**\r\n    * Clears all appenders from the logger\r\n    */\r\n   public clearAppenders(): void {\r\n      this._appenders.length = 0;\r\n   }\r\n\r\n   /**\r\n    * Logs a message at a given LogLevel\r\n    * @param level  The LogLevel`to log the message at\r\n    * @param args   An array of arguments to write to an appender\r\n    */\r\n   private _log(level: LogLevel, args: any[]): void {\r\n      if (level == null) {\r\n         level = this.defaultLevel;\r\n      }\r\n\r\n      var i = 0, len = this._appenders.length;\r\n\r\n      for (i; i < len; i++) {\r\n         if (level >= this.defaultLevel) {\r\n            this._appenders[i].log(level, args);\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Writes a log message at the [[LogLevel.Debug]] level\r\n    * @param args  Accepts any number of arguments\r\n    */\r\n   public debug(...args: any[]): void {\r\n      this._log(LogLevel.Debug, args);\r\n   }\r\n\r\n   /**\r\n    * Writes a log message at the [[LogLevel.Info]] level\r\n    * @param args  Accepts any number of arguments\r\n    */\r\n   public info(...args: any[]): void {\r\n      this._log(LogLevel.Info, args);\r\n   }\r\n\r\n   /**\r\n    * Writes a log message at the [[LogLevel.Warn]] level\r\n    * @param args  Accepts any number of arguments\r\n    */\r\n   public warn(...args: any[]): void {\r\n      this._log(LogLevel.Warn, args);\r\n   }\r\n\r\n   /**\r\n    * Writes a log message at the [[LogLevel.Error]] level\r\n    * @param args  Accepts any number of arguments\r\n    */\r\n   public error(...args: any[]): void {\r\n      this._log(LogLevel.Error, args);\r\n   }\r\n\r\n   /**\r\n    * Writes a log message at the [[LogLevel.Fatal]] level\r\n    * @param args  Accepts any number of arguments\r\n    */\r\n   public fatal(...args: any[]): void {\r\n      this._log(LogLevel.Fatal, args);\r\n   }\r\n}\r\n\r\n/**\r\n * Contract for any log appender (such as console/screen)\r\n */\r\nexport interface IAppender {\r\n\r\n   /**\r\n    * Logs a message at the given [[LogLevel]]\r\n    * @param level  Level to log at\r\n    * @param args   Arguments to log\r\n    */\r\n   log(level: LogLevel, args: any[]): void;\r\n}\r\n\r\n/**\r\n * Console appender for browsers (i.e. `console.log`)\r\n */\r\nexport class ConsoleAppender implements IAppender {\r\n\r\n   /**\r\n    * Logs a message at the given [[LogLevel]]\r\n    * @param level  Level to log at\r\n    * @param args   Arguments to log\r\n    */\r\n   public log(level: LogLevel, args: any[]): void {\r\n      // Check for console support\r\n      if (!console && !console.log && console.warn && console.error) {\r\n         // todo maybe do something better than nothing\r\n         return;\r\n      }\r\n\r\n      // Create a new console args array\r\n      var consoleArgs: any[] = [];\r\n      consoleArgs.unshift.apply(consoleArgs, args);\r\n      consoleArgs.unshift('[' + LogLevel[level] + '] : ');\r\n\r\n      if (level < LogLevel.Warn) {\r\n\r\n         // Call .log for Debug/Info\r\n         if (console.log.apply) {\r\n            // this is required on some older browsers that don't support apply on console.log :(\r\n            console.log.apply(console, consoleArgs);\r\n         } else {\r\n            console.log(consoleArgs.join(' '));\r\n         }\r\n      } else if (level < LogLevel.Error) {\r\n\r\n         // Call .warn for Warn\r\n         if (console.warn.apply) {\r\n            console.warn.apply(console, consoleArgs);\r\n         } else {\r\n            console.warn(consoleArgs.join(' '));\r\n         }\r\n      } else {\r\n\r\n         // Call .error for Error/Fatal\r\n         if (console.error.apply) {\r\n            console.error.apply(console, consoleArgs);\r\n         } else {\r\n            console.error(consoleArgs.join(' '));\r\n         }\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * On-screen (canvas) appender    \r\n */\r\nexport class ScreenAppender implements IAppender {\r\n   // @todo Clean this up\r\n\r\n   private _messages: string[] = [];\r\n   private _canvas: HTMLCanvasElement;\r\n   private _ctx: CanvasRenderingContext2D;\r\n\r\n   /**\r\n    * @param width   Width of the screen appender in pixels\r\n    * @param height  Height of the screen appender in pixels\r\n    */\r\n   constructor(width?: number, height?: number) {\r\n      this._canvas = <HTMLCanvasElement>document.createElement('canvas');\r\n      this._canvas.width = width || window.innerWidth;\r\n      this._canvas.height = height || window.innerHeight;\r\n      this._canvas.style.position = 'absolute';\r\n      this._ctx = <CanvasRenderingContext2D>this._canvas.getContext('2d');\r\n      document.body.appendChild(this._canvas);\r\n   }\r\n\r\n   /**\r\n    * Logs a message at the given [[LogLevel]]\r\n    * @param level  Level to log at\r\n    * @param args   Arguments to log\r\n    */\r\n   public log(level: LogLevel, args: any[]): void {\r\n      var message = args.join(',');\r\n\r\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\r\n      this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\r\n\r\n      var pos = 10;\r\n      var opacity = 1.0;\r\n      for (var i = 0; i < this._messages.length; i++) {\r\n         this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\r\n         this._ctx.fillText(this._messages[i], 200, pos);\r\n         pos += 10;\r\n         opacity = opacity > 0 ? opacity - .05 : 0;\r\n      }\r\n   }\r\n}","\r\n/**\r\n * An enum that describes the sides of an Actor for collision\r\n */\r\nexport enum Side {\r\n   None,\r\n   Top,\r\n   Bottom,\r\n   Left,\r\n   Right\r\n}","import { Vector } from '../Algebra';\r\nimport { Side } from '../Collision/Side';\r\n\r\n/**\r\n * Two PI constant\r\n */\r\nexport const TwoPI: number = Math.PI * 2;\r\n\r\n/**\r\n * Merges one or more objects into a single target object\r\n * \r\n * @param deep Whether or not to do a deep clone\r\n * @param target The target object to attach properties on\r\n * @param objects The objects whose properties to merge\r\n * @returns Merged object with properties from other objects\r\n */\r\nexport function extend(deep: boolean, target: any, ...objects: any[]): any;\r\n\r\n/**\r\n * Merges one or more objects into a single target object\r\n * \r\n * @param target The target object to attach properties on\r\n * @param object2 The second object whose properties to merge\r\n * @returns Merged object with properties from other objects\r\n */\r\nexport function extend<T1, T2>(target: T1, object2: T2): T1 & T2;\r\n\r\n/**\r\n * Merges one or more objects into a single target object\r\n * \r\n * @param target The target object to attach properties on\r\n * @param object2 The second object whose properties to merge\r\n * @param object3 The third object whose properties to merge\r\n * @returns Merged object with properties from other objects\r\n */\r\nexport function extend<T1, T2, T3>(target: T1, object2: T2, object3: T3): T1 & T2 & T3;\r\n\r\n/**\r\n * Merges one or more objects into a single target object\r\n * \r\n * @param target The target object to attach properties on\r\n * @param objects The objects whose properties to merge\r\n * @returns Merged object with properties from other objects\r\n */\r\nexport function extend(target: any, ...objects: any[]): any;\r\n\r\n/**\r\n * Merges one or more objects into a single target object\r\n * \r\n * @returns Merged object with properties from other objects\r\n * @credit https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\r\n */\r\nexport function extend() {\r\n   var extended: { [key: string]: any } = {};\r\n   var deep = false;\r\n   var i = 0;\r\n   var length = arguments.length;\r\n\r\n   // Check if a deep merge\r\n   if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\r\n      deep = arguments[0];\r\n      i++;\r\n   }\r\n\r\n   // Merge the object into the extended object\r\n   var assignExists = typeof (<any>Object).assign === 'function';\r\n   var merge = null;\r\n   if (!assignExists) {\r\n      merge = function (obj: any) {\r\n         for (var prop in obj) {\r\n            if (Object.prototype.hasOwnProperty.call(obj, prop)) {\r\n               // If deep merge and property is an object, merge properties\r\n               if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\r\n                  extended[prop] = extend(true, extended[prop], obj[prop]);\r\n               } else {\r\n                  extended[prop] = obj[prop];\r\n               }\r\n            }\r\n         }\r\n      };\r\n   } else {\r\n      merge = (<any>Object).assign;\r\n   }\r\n\r\n   // Loop through each object and conduct a merge\r\n   for (; i < length; i++) {\r\n      var obj = arguments[i];\r\n      if (!assignExists) {\r\n         merge(obj);\r\n      } else {\r\n         merge(extended, obj);\r\n      }\r\n   }\r\n\r\n   return extended;\r\n}\r\n\r\nexport function base64Encode(inputStr: string) {\r\n   var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n   var outputStr = '';\r\n   var i = 0;\r\n\r\n   while (i < inputStr.length) {\r\n      //all three \"& 0xff\" added below are there to fix a known bug \r\n      //with bytes returned by xhr.responseText\r\n      var byte1 = inputStr.charCodeAt(i++) & 0xff;\r\n      var byte2 = inputStr.charCodeAt(i++) & 0xff;\r\n      var byte3 = inputStr.charCodeAt(i++) & 0xff;\r\n\r\n      var enc1 = byte1 >> 2;\r\n      var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\r\n\r\n      var enc3, enc4;\r\n      if (isNaN(byte2)) {\r\n         enc3 = enc4 = 64;\r\n      } else {\r\n         enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\r\n         if (isNaN(byte3)) {\r\n            enc4 = 64;\r\n         } else {\r\n            enc4 = byte3 & 63;\r\n         }\r\n      }\r\n\r\n      outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\r\n   }\r\n\r\n   return outputStr;\r\n}\r\n\r\n/**\r\n * Clamps a value between a min and max inclusive\r\n */\r\nexport function clamp(val: number, min: number, max: number) {\r\n   return Math.min(Math.max(min, val), max);\r\n}\r\n\r\nexport function randomInRange(min: number, max: number): number {\r\n   return min + Math.random() * (max - min);\r\n}\r\n\r\nexport function randomIntInRange(min: number, max: number): number {\r\n   return Math.round(randomInRange(min, max));\r\n}\r\n\r\nexport function canonicalizeAngle(angle: number): number {\r\n   var tmpAngle = angle;\r\n   if (angle > TwoPI) {\r\n      while (tmpAngle > TwoPI) {\r\n         tmpAngle -= TwoPI;\r\n      }\r\n   }\r\n\r\n   if (angle < 0) {\r\n      while (tmpAngle < 0) {\r\n         tmpAngle += TwoPI;\r\n      }\r\n   }\r\n   return tmpAngle;\r\n}\r\n\r\nexport function toDegrees(radians: number): number {\r\n   return 180 / Math.PI * radians;\r\n}\r\n\r\nexport function toRadians(degrees: number): number {\r\n   return degrees / 180 * Math.PI;\r\n}\r\n\r\nexport function getPosition(el: HTMLElement): Vector {\r\n   var oLeft: number = 0,\r\n      oTop: number = 0;\r\n\r\n   var calcOffsetLeft = (parent: HTMLElement) => {\r\n      oLeft += parent.offsetLeft;\r\n\r\n      if (parent.offsetParent) {\r\n         calcOffsetLeft(<HTMLElement>parent.offsetParent);\r\n      }\r\n   };\r\n   var calcOffsetTop = (parent: HTMLElement) => {\r\n      oTop += parent.offsetTop;\r\n      if (parent.offsetParent) {\r\n         calcOffsetTop(<HTMLElement>parent.offsetParent);\r\n      }\r\n   };\r\n\r\n   calcOffsetLeft(el);\r\n   calcOffsetTop(el);\r\n\r\n   return new Vector(oLeft, oTop);\r\n}\r\n\r\nexport function addItemToArray<T>(item: T, array: T[]): boolean {\r\n   if (array.indexOf(item) === -1) {\r\n      array.push(item);\r\n      return true;\r\n   }\r\n   return false;\r\n}\r\n\r\nexport function removeItemToArray<T>(item: T, array: T[]): boolean {\r\n   var index = -1;\r\n   if ((index = array.indexOf(item)) > -1) {\r\n      array.splice(index, 1);\r\n      return true;\r\n   }\r\n\r\n   return false;\r\n}\r\n\r\nexport function contains(array: Array<any>, obj: any): boolean {\r\n   for (var i = 0; i < array.length; i++) {\r\n      if (array[i] === obj) {\r\n         return true;\r\n      }\r\n   }\r\n   return false;\r\n}\r\n\r\nexport function getOppositeSide(side: Side) {\r\n   if (side === Side.Top) { return Side.Bottom; }\r\n   if (side === Side.Bottom) { return Side.Top; }\r\n   if (side === Side.Left) { return Side.Right; }\r\n   if (side === Side.Right) { return Side.Left; }\r\n\r\n   return Side.None;\r\n}\r\n\r\nexport function getSideFromVector(direction: Vector) {\r\n   var directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\r\n   var directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\r\n\r\n   var max = -Number.MAX_VALUE;\r\n   var maxIndex = -1;\r\n   for (var i = 0; i < directions.length; i++) {\r\n      if (directions[i].dot(direction) > max) {\r\n         max = directions[i].dot(direction);\r\n         maxIndex = i;\r\n      }\r\n   }\r\n   return directionEnum[maxIndex];\r\n}\r\n\r\n/**\r\n * Excalibur's dynamically resizing collection\r\n */\r\nexport class Collection<T> {\r\n   /**\r\n    * Default collection size\r\n    */\r\n   public static DefaultSize = 200;\r\n   private _internalArray: T[] = null;\r\n   private _endPointer: number = 0;\r\n\r\n   /**\r\n    * @param initialSize  Initial size of the internal backing array\r\n    */\r\n   constructor(initialSize: number = Collection.DefaultSize) {\r\n      this._internalArray = new Array<T>(initialSize);\r\n   }\r\n\r\n   private _resize() {\r\n      var newSize = this._internalArray.length * 2;\r\n      var newArray = new Array<T>(newSize);\r\n      var count = this.count();\r\n      for (var i = 0; i < count; i++) {\r\n         newArray[i] = this._internalArray[i];\r\n      }\r\n\r\n      delete this._internalArray;\r\n      this._internalArray = newArray;\r\n   }\r\n\r\n   /**\r\n    * Push elements to the end of the collection\r\n    */\r\n   public push(element: T): T {\r\n      if (this._endPointer === this._internalArray.length) {\r\n         this._resize();\r\n      }\r\n      return this._internalArray[this._endPointer++] = element;\r\n   }\r\n\r\n   /**\r\n    * Removes elements from the end of the collection\r\n    */\r\n   public pop(): T {\r\n      this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\r\n      return this._internalArray[this._endPointer];\r\n   }\r\n\r\n   /**\r\n    * Returns the count of the collection\r\n    */\r\n   public count(): number {\r\n      return this._endPointer;\r\n   }\r\n\r\n   /**\r\n    * Empties the collection\r\n    */\r\n   public clear() {\r\n      this._endPointer = 0;\r\n   }\r\n\r\n   /**\r\n    * Returns the size of the internal backing array\r\n    */\r\n   public internalSize(): number {\r\n      return this._internalArray.length;\r\n   }\r\n\r\n   /**\r\n    * Returns an element at a specific index\r\n    * @param index  Index of element to retrieve\r\n    */\r\n   public elementAt(index: number): T {\r\n      if (index >= this.count()) {\r\n         //Logger.getInstance().error('Invalid parameter: ' + index);\r\n         throw new Error('Invalid index ' + index);\r\n      }\r\n      return this._internalArray[index];\r\n   }\r\n\r\n   /**\r\n    * Inserts an element at a specific index\r\n    * @param index  Index to insert the element\r\n    * @param value  Element to insert\r\n    */\r\n   public insert(index: number, value: T): T {\r\n      if (index >= this.count()) {\r\n         this._resize();\r\n      }\r\n      return this._internalArray[index] = value;\r\n   }\r\n\r\n   /**\r\n    * Removes an element at a specific index\r\n    * @param index  Index of element to remove\r\n    */\r\n   public remove(index: number): T {\r\n      var count = this.count();\r\n      if (count === 0) {\r\n        //Logger.getInstance().error('Invalid parameter: ' + index);\r\n         throw new Error('Invalid parameter ' + index); \r\n       }\r\n      // O(n) Shift \r\n      var removed = this._internalArray[index];\r\n      for (var i = index; i < count; i++) {\r\n         this._internalArray[i] = this._internalArray[i + 1];\r\n      }\r\n      this._endPointer--;\r\n      return removed;\r\n   }\r\n\r\n   /**\r\n    * Removes an element by reference\r\n    * @param element  Element to retrieve\r\n    */\r\n   public removeElement(element: T) {\r\n      var index = this._internalArray.indexOf(element);\r\n      this.remove(index);\r\n   }\r\n\r\n   /**\r\n    * Returns a array representing the collection\r\n    */\r\n   public toArray(): T[] {\r\n      return this._internalArray.slice(0, this._endPointer);\r\n   }\r\n\r\n   /**\r\n    * Iterate over every element in the collection\r\n    * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\r\n    */\r\n   public forEach(func: (element: T, index: number) => any) {\r\n      var i = 0, count = this.count();\r\n      for (i; i < count; i++) {\r\n         func.call(this, this._internalArray[i], i);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Mutate every element in the collection\r\n    * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate \r\n    * the collection\r\n    */\r\n   public map(func: (element: T, index: number) => any) {\r\n      var count = this.count();\r\n      for (var i = 0; i < count; i++) {\r\n         this._internalArray[i] = func.call(this, this._internalArray[i], i);\r\n      }\r\n   }\r\n}","import { Logger } from './Log';\r\nimport * as Util from './Util';\r\n\r\n/**\r\n * Obsolete decorator options\r\n */\r\nexport interface IObsoleteOptions {\r\n   // Optionally specify a custom message\r\n   message?: string;\r\n   // Optionally indicate that an alternate method to the obsolete one exists\r\n   alternateMethod?: string;\r\n} \r\n\r\n/**\r\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\r\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\r\n */\r\nexport function obsolete(options?: IObsoleteOptions) {\r\n\r\n   options = Util.extend({}, {message: 'This method will be removed in future versions of Excalibur.', alternateMethod: null}, options);\r\n\r\n   return function (target: any, property: string, descriptor: PropertyDescriptor): any {\r\n      if (!(typeof descriptor.value === 'function' || \r\n            typeof descriptor.get   === 'function' ||\r\n            typeof descriptor.set   === 'function')) {\r\n         throw new SyntaxError('Only functions/getters/setters can be marked as obsolete');\r\n      }\r\n      const methodSignature = `${target.name || ''}${target.name ? '.' : ''}${property}`;\r\n\r\n      var message = `${methodSignature} is marked obsolete: ${options.message}` + \r\n                     (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\r\n      \r\n      let method = Util.extend({}, descriptor);\r\n\r\n      if (descriptor.value) {\r\n         method.value = function(this: any) {\r\n            Logger.getInstance().warn(message);\r\n            return descriptor.value.apply(this, arguments);\r\n         };             \r\n         return method;\r\n      }\r\n\r\n      if (descriptor.get) {\r\n         method.get = function(this: any) {\r\n            Logger.getInstance().warn(message);\r\n            return descriptor.get.apply(this, arguments);\r\n         };\r\n      }\r\n\r\n      if (descriptor.set) {\r\n         method.set = function(this: any) {\r\n            Logger.getInstance().warn(message);\r\n            return descriptor.set.apply(this, arguments);\r\n         };            \r\n      }\r\n      return method;\r\n   };\r\n}","import { obsolete } from './Util/Decorators';\r\n\r\n// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\r\n\r\n/**\r\n * Valid states for a promise to be in\r\n */\r\nexport enum PromiseState {\r\n   Resolved,\r\n   Rejected,\r\n   Pending,\r\n}\r\n\r\nexport interface IPromise<T> {\r\n   then(successCallback?: (value?: T) => any, rejectCallback?: (value?: T) => any): IPromise<T>;\r\n   error(rejectCallback?: (value?: any) => any): IPromise<T>;\r\n\r\n   //Cannot define static methods on interfaces\r\n   //wrap<T>(value?: T): IPromise<T>;\r\n\r\n   resolve(value?: T): IPromise<T>;\r\n   reject(value?: any): IPromise<T>;\r\n\r\n   state(): PromiseState;\r\n}\r\n\r\n/**\r\n * Promises are used to do asynchronous work and they are useful for\r\n * creating a chain of actions. In Excalibur they are used for loading,\r\n * sounds, animation, actions, and more.\r\n *\r\n * [[include:Promises.md]]\r\n */\r\nexport class Promise<T> implements IPromise<T> {\r\n   private _state: PromiseState = PromiseState.Pending;\r\n   private _value: T;\r\n   private _successCallbacks: { (value?: T): any }[] = [];\r\n   private _rejectCallback: (value?: any) => any = () => { return; };\r\n   private _errorCallback: (value?: any) => any;\r\n\r\n   /**\r\n    * Wrap a value in a resolved promise\r\n    * @param value  An optional value to wrap in a resolved promise\r\n    * @obsolete Use [[resolve]] instead. This will be deprecated in future versions.\r\n    */\r\n   @obsolete({ alternateMethod: 'ex.Promise.resolve/reject' })\r\n   public static wrap<T>(value?: T): Promise<T> {\r\n      return Promise.resolve(value);\r\n   }\r\n\r\n   /**\r\n    * Create and resolve a Promise with an optional value\r\n    * @param value  An optional value to wrap in a resolved promise\r\n    */\r\n   public static resolve<T>(value?: T): Promise<T> {\r\n      var promise = (new Promise<T>()).resolve(value);\r\n\r\n      return promise;\r\n   }\r\n\r\n   /**\r\n    * Create and reject a Promise with an optional value\r\n    * @param value  An optional value to wrap in a rejected promise\r\n    */\r\n   public static reject<T>(value?: T): Promise<T> {\r\n      var promise = (new Promise<T>()).reject(value);\r\n\r\n      return promise;\r\n   }\r\n\r\n   /**\r\n    * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\r\n    * when at least 1 promise rejects.\r\n    */\r\n   public static join<T>(promises: Promise<T>[]): Promise<T>;\r\n\r\n   /**\r\n    * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\r\n    * when at least 1 promise rejects.\r\n    */\r\n   public static join<T>(...promises: Promise<T>[]): Promise<T>;\r\n\r\n   public static join<T>() {\r\n      var promises: Promise<T>[] = [];\r\n\r\n      if (arguments.length > 0 && !Array.isArray(arguments[0])) {\r\n         for (var _i = 0; _i < arguments.length; _i++) {\r\n            promises[_i - 0] = arguments[_i];\r\n         }\r\n      } else if (arguments.length === 1 && Array.isArray(arguments[0])) {\r\n         promises = arguments[0];\r\n      }\r\n\r\n      var joinedPromise = new Promise<T>();\r\n      if (!promises || !promises.length) {\r\n         return joinedPromise.resolve();\r\n      }\r\n\r\n      var total = promises.length;\r\n      var successes = 0;\r\n      var rejects = 0;\r\n      var errors: any = [];\r\n\r\n      promises.forEach((p) => {\r\n         p.then(\r\n            () => {\r\n               successes += 1;\r\n               if (successes === total) {\r\n                  joinedPromise.resolve();\r\n               } else if (successes + rejects + errors.length === total) {\r\n                  joinedPromise.reject(errors);\r\n               }\r\n            },\r\n            () => {\r\n               rejects += 1;\r\n               if (successes + rejects + errors.length === total) {\r\n                  joinedPromise.reject(errors);\r\n               }\r\n            }\r\n         ).error((e) => {\r\n            errors.push(e);\r\n            if ((errors.length + successes + rejects) === total) {\r\n               joinedPromise.reject(errors);\r\n            }\r\n         });\r\n      });\r\n\r\n\r\n      return joinedPromise;\r\n   }\r\n\r\n   /**\r\n    * Chain success and reject callbacks after the promise is resolved\r\n    * @param successCallback  Call on resolution of promise\r\n    * @param rejectCallback   Call on rejection of promise\r\n    */\r\n   public then(successCallback?: (value?: T) => any, rejectCallback?: (value?: any) => any) {\r\n      if (successCallback) {\r\n         this._successCallbacks.push(successCallback);\r\n\r\n         // If the promise is already resovled call immediately\r\n         if (this.state() === PromiseState.Resolved) {\r\n            try {\r\n               successCallback.call(this, this._value);\r\n            } catch (e) {\r\n               this._handleError(e);\r\n            }\r\n         }\r\n      }\r\n      if (rejectCallback) {\r\n         this._rejectCallback = rejectCallback;\r\n\r\n         // If the promise is already rejected call immediately\r\n         if (this.state() === PromiseState.Rejected) {\r\n            try {\r\n               rejectCallback.call(this, this._value);\r\n            } catch (e) {\r\n               this._handleError(e);\r\n            }\r\n         }\r\n      }\r\n\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Add an error callback to the promise \r\n    * @param errorCallback  Call if there was an error in a callback\r\n    */\r\n   public error(errorCallback?: (value?: any) => any) {\r\n      if (errorCallback) {\r\n         this._errorCallback = errorCallback;\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Resolve the promise and pass an option value to the success callbacks\r\n    * @param value  Value to pass to the success callbacks\r\n    */\r\n   public resolve(value?: T): Promise<T> {\r\n      if (this._state === PromiseState.Pending) {\r\n         this._value = value;\r\n         try {\r\n            this._state = PromiseState.Resolved;\r\n            this._successCallbacks.forEach((cb) => {\r\n               cb.call(this, this._value);\r\n            });\r\n\r\n         } catch (e) {\r\n            this._handleError(e);\r\n         }\r\n      } else {\r\n         throw new Error('Cannot resolve a promise that is not in a pending state!');\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Reject the promise and pass an option value to the reject callbacks\r\n    * @param value  Value to pass to the reject callbacks\r\n    */\r\n   public reject(value?: any) {\r\n      if (this._state === PromiseState.Pending) {\r\n         this._value = value;\r\n         try {\r\n            this._state = PromiseState.Rejected;\r\n            this._rejectCallback.call(this, this._value);\r\n         } catch (e) {\r\n            this._handleError(e);\r\n         }\r\n      } else {\r\n         throw new Error('Cannot reject a promise that is not in a pending state!');\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * Inspect the current state of a promise\r\n    */\r\n   public state(): PromiseState {\r\n      return this._state;\r\n   }\r\n\r\n   private _handleError(e: any) {\r\n      if (this._errorCallback) {\r\n         this._errorCallback.call(this, e);\r\n      } else {\r\n         // rethrow error\r\n         throw e;\r\n      }\r\n   }\r\n}","import { Engine } from './Engine';\r\nimport { EasingFunction, EasingFunctions } from './Util/EasingFunctions';\r\nimport { IPromise, Promise, PromiseState } from './Promises';\r\nimport { Vector } from './Algebra';\r\nimport { Actor } from './Actor';\r\n\r\n\r\n/**\r\n * Cameras\r\n *\r\n * [[BaseCamera]] is the base class for all Excalibur cameras. Cameras are used\r\n * to move around your game and set focus. They are used to determine\r\n * what is \"off screen\" and can be used to scale the game.\r\n *\r\n * [[include:Cameras.md]]\r\n */\r\nexport class BaseCamera {\r\n   protected _follow: Actor;\r\n\r\n   // camera physical quantities\r\n   public z: number = 1;\r\n\r\n   public dx: number = 0;\r\n   public dy: number = 0;\r\n   public dz: number = 0;\r\n\r\n   public ax: number = 0;\r\n   public ay: number = 0;\r\n   public az: number = 0;\r\n\r\n   public rotation: number = 0;\r\n   public rx: number = 0;\r\n\r\n   private _x: number = 0;\r\n   private _y: number = 0;\r\n   private _cameraMoving: boolean = false;\r\n   private _currentLerpTime: number = 0;\r\n   private _lerpDuration: number = 1000; // 1 second   \r\n   private _lerpStart: Vector = null;\r\n   private _lerpEnd: Vector = null;\r\n   private _lerpPromise: IPromise<Vector>;\r\n\r\n   //camera effects\r\n   protected _isShaking: boolean = false;\r\n   private _shakeMagnitudeX: number = 0;\r\n   private _shakeMagnitudeY: number = 0;\r\n   private _shakeDuration: number = 0;\r\n   private _elapsedShakeTime: number = 0;\r\n   private _xShake: number = 0;\r\n   private _yShake: number = 0;\r\n\r\n   protected _isZooming: boolean = false;\r\n   private _maxZoomScale: number = 1;\r\n   private _zoomDuration: number = 0;\r\n   private _zoomPromise: Promise<boolean>;\r\n   private _zoomIncrement: number = 0.01;\r\n   private _easing: EasingFunction = EasingFunctions.EaseInOutCubic;\r\n\r\n   /**\r\n    * Get the camera's x position\r\n    */\r\n   public get x() {\r\n      return this._x;\r\n   }\r\n\r\n   /**\r\n    * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\r\n    */\r\n   public set x(value: number) {\r\n      if (!this._follow && !this._cameraMoving) {\r\n         this._x = value;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Get the camera's y position \r\n    */\r\n   public get y() {\r\n      return this._y;\r\n   }\r\n\r\n   /**\r\n    * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\r\n    */\r\n   public set y(value: number) {\r\n      if (!this._follow && !this._cameraMoving) {\r\n         this._y = value;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Sets the [[Actor]] to follow with the camera\r\n    * @param actor  The actor to follow\r\n    */\r\n   public setActorToFollow(actor: Actor) {\r\n      this._follow = actor;\r\n   }\r\n\r\n   /**\r\n    * Returns the focal point of the camera, a new point giving the x and y position of the camera\r\n    */\r\n   public getFocus() {\r\n      return new Vector(this.x, this.y);\r\n   }\r\n\r\n   /**\r\n    * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\r\n    * \r\n    * @param pos The target position to move to\r\n    * @param duration The duration in milliseconds the move should last\r\n    * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\r\n    * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted. \r\n    *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\r\n    */\r\n   public move(pos: Vector, duration: number, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): IPromise<Vector> {\r\n\r\n      if (typeof easingFn !== 'function') {\r\n         throw 'Please specify an EasingFunction';\r\n      }\r\n\r\n      // cannot move when following an actor\r\n      if (this._follow) {\r\n         return new Promise<Vector>().reject(pos);\r\n      }\r\n\r\n      // resolve existing promise, if any\r\n      if (this._lerpPromise && this._lerpPromise.state() === PromiseState.Pending) {\r\n         this._lerpPromise.resolve(pos);\r\n      }\r\n\r\n      this._lerpPromise = new Promise<Vector>();\r\n      this._lerpStart = this.getFocus().clone();\r\n      this._lerpDuration = duration;\r\n      this._lerpEnd = pos;\r\n      this._currentLerpTime = 0;\r\n      this._cameraMoving = true;\r\n      this._easing = easingFn;\r\n\r\n      return this._lerpPromise;\r\n   }\r\n\r\n   /**\r\n    * Sets the camera to shake at the specified magnitudes for the specified duration\r\n    * @param magnitudeX  The x magnitude of the shake\r\n    * @param magnitudeY  The y magnitude of the shake\r\n    * @param duration    The duration of the shake in milliseconds\r\n    */\r\n   public shake(magnitudeX: number, magnitudeY: number, duration: number) {\r\n      this._isShaking = true;\r\n      this._shakeMagnitudeX = magnitudeX;\r\n      this._shakeMagnitudeY = magnitudeY;\r\n      this._shakeDuration = duration;\r\n   }\r\n\r\n   /**\r\n    * Zooms the camera in or out by the specified scale over the specified duration. \r\n    * If no duration is specified, it take effect immediately.\r\n    * @param scale    The scale of the zoom\r\n    * @param duration The duration of the zoom in milliseconds\r\n    */\r\n   public zoom(scale: number, duration: number = 0): Promise<boolean> {\r\n      this._zoomPromise = new Promise<boolean>();\r\n      \r\n      if (duration) {\r\n         this._isZooming = true;\r\n         this._maxZoomScale = scale;\r\n         this._zoomDuration = duration;\r\n         this._zoomIncrement = (scale - this.z) / duration;\r\n      } else {\r\n         this._isZooming = false;\r\n         this.z = scale;\r\n         this._zoomPromise.resolve(true);\r\n         \r\n      }\r\n\r\n      return this._zoomPromise;\r\n   }\r\n\r\n   /**\r\n    * Gets the current zoom scale\r\n    */\r\n   public getZoom() {\r\n      return this.z;\r\n   }\r\n\r\n   public update(_engine: Engine, delta: number) {\r\n      // Update placements based on linear algebra\r\n      this._x += this.dx * delta / 1000;\r\n      this._y += this.dy * delta / 1000;\r\n      this.z += this.dz * delta / 1000;\r\n\r\n      this.dx += this.ax * delta / 1000;\r\n      this.dy += this.ay * delta / 1000;\r\n      this.dz += this.az * delta / 1000;\r\n\r\n      this.rotation += this.rx * delta / 1000;\r\n\r\n      if (this._isZooming) {\r\n         var newZoom = this.z + this._zoomIncrement * delta;      \r\n         this.z = newZoom;\r\n         if (this._zoomIncrement > 0) {\r\n               \r\n            if (newZoom >= this._maxZoomScale) {\r\n               this._isZooming = false;\r\n               this.z = this._maxZoomScale;\r\n               this._zoomPromise.resolve(true);\r\n            }\r\n         } else {\r\n            if (newZoom <= this._maxZoomScale) {\r\n               this._isZooming = false;\r\n               this.z = this._maxZoomScale;\r\n               this._zoomPromise.resolve(true);\r\n            }\r\n         }         \r\n      }\r\n\r\n      if (this._cameraMoving) {\r\n         if (this._currentLerpTime < this._lerpDuration) {\r\n\r\n            if (this._lerpEnd.x < this._lerpStart.x) {\r\n               this._x = this._lerpStart.x - (this._easing(this._currentLerpTime,\r\n                  this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\r\n            } else {\r\n               this._x = this._easing(this._currentLerpTime,\r\n                  this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n            }\r\n\r\n            if (this._lerpEnd.y < this._lerpStart.y) {\r\n               this._y = this._lerpStart.y - (this._easing(this._currentLerpTime,\r\n                  this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\r\n            } else {\r\n               this._y = this._easing(this._currentLerpTime,\r\n                  this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n            }\r\n            this._currentLerpTime += delta;\r\n         } else {\r\n            this._x = this._lerpEnd.x;\r\n            this._y = this._lerpEnd.y;\r\n            this._lerpPromise.resolve(this._lerpEnd);\r\n            this._lerpStart = null;\r\n            this._lerpEnd = null;\r\n            this._currentLerpTime = 0;\r\n            this._cameraMoving = false;\r\n         }\r\n      }\r\n\r\n      if (this._isDoneShaking()) {\r\n         this._isShaking = false;\r\n         this._elapsedShakeTime = 0;\r\n         this._shakeMagnitudeX = 0;\r\n         this._shakeMagnitudeY = 0;\r\n         this._shakeDuration = 0;\r\n         this._xShake = 0;\r\n         this._yShake = 0;\r\n      } else {\r\n         this._elapsedShakeTime += delta;\r\n         this._xShake = (Math.random() * this._shakeMagnitudeX | 0) + 1;\r\n         this._yShake = (Math.random() * this._shakeMagnitudeY | 0) + 1;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\r\n    * @param ctx    Canvas context to apply transformations\r\n    * @param delta  The number of milliseconds since the last update\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D) {\r\n      var focus = this.getFocus();\r\n      var canvasWidth = ctx.canvas.width;\r\n      var canvasHeight = ctx.canvas.height;\r\n\r\n      // if zoom is 2x then canvas is 1/2 as high\r\n      // if zoom is .5x then canvas is 2x as high\r\n      var newCanvasWidth = canvasWidth / this.getZoom();\r\n      var newCanvasHeight = canvasHeight / this.getZoom();\r\n\r\n      /*if (this._isDoneZooming()) {\r\n         this._isZooming = false;\r\n         this._elapsedZoomTime = 0;\r\n         this._zoomDuration = 0;\r\n         this._setCurrentZoomScale(this._maxZoomScale);\r\n\r\n      } else {\r\n         this._elapsedZoomTime += delta;\r\n\r\n         this._setCurrentZoomScale(this.getZoom() + this._zoomIncrement * delta / 1000);\r\n      }*/\r\n\r\n      ctx.scale(this.getZoom(), this.getZoom());\r\n      ctx.translate(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      var focus = this.getFocus();\r\n      ctx.fillStyle = 'red';\r\n      ctx.strokeStyle = 'white';\r\n      ctx.lineWidth = 3;\r\n      ctx.beginPath();\r\n      ctx.arc(focus.x, focus.y, 15, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(focus.x, focus.y, 5, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n   }\r\n\r\n   private _isDoneShaking(): boolean {\r\n      return !(this._isShaking) || (this._elapsedShakeTime >= this._shakeDuration);\r\n   }\r\n}\r\n\r\n/**\r\n * An extension of [[BaseCamera]] that is locked vertically; it will only move side to side.\r\n * \r\n * Common usages: platformers.\r\n */\r\nexport class SideCamera extends BaseCamera {\r\n\r\n   public getFocus() {\r\n      if (this._follow) {\r\n         return new Vector(this._follow.pos.x + this._follow.getWidth() / 2, super.getFocus().y);\r\n      } else {\r\n         return super.getFocus();\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * An extension of [[BaseCamera]] that is locked to an [[Actor]] or \r\n * [[LockedCamera.getFocus|focal point]]; the actor will appear in the \r\n * center of the screen.\r\n *\r\n * Common usages: RPGs, adventure games, top-down games.\r\n */\r\nexport class LockedCamera extends BaseCamera {\r\n\r\n   public getFocus() {\r\n      if (this._follow) {\r\n         return new Vector(this._follow.pos.x + this._follow.getWidth() / 2, this._follow.pos.y + this._follow.getHeight() / 2);\r\n      } else {\r\n         return super.getFocus();\r\n      }\r\n   }\r\n}","import { IDebugFlags } from './DebugFlags';\r\n\r\n/**\r\n * Debug stats containing current and previous frame statistics\r\n */\r\nexport interface IDebugStats {\r\n   currFrame: FrameStats;\r\n   prevFrame: FrameStats;\r\n}\r\n\r\n/**\r\n * Represents a frame's individual statistics\r\n */\r\nexport interface IFrameStats {\r\n\r\n   /**\r\n    * The number of the frame\r\n    */\r\n   id: number;\r\n\r\n   /**\r\n    * Gets the frame's delta (time since last frame scaled by [[Engine.timescale]]) (in ms)\r\n    */\r\n   delta: number;\r\n\r\n   /**\r\n    * Gets the frame's frames-per-second (FPS)\r\n    */\r\n   fps: number;\r\n\r\n   /**\r\n    * Duration statistics (in ms)\r\n    */\r\n   duration: IFrameDurationStats;\r\n\r\n   /**\r\n    * Actor statistics\r\n    */\r\n   actors: IFrameActorStats;\r\n\r\n   /**\r\n    * Physics statistics\r\n    */\r\n   physics: IPhysicsStats;\r\n}\r\n\r\n/**\r\n * Represents actor stats for a frame\r\n */\r\nexport interface IFrameActorStats {\r\n\r\n   /**\r\n    * Gets the frame's number of actors (alive)\r\n    */\r\n   alive: number;\r\n\r\n   /**\r\n    * Gets the frame's number of actors (killed)\r\n    */\r\n   killed: number;\r\n\r\n   /**\r\n    * Gets the frame's number of remaining actors (alive - killed)\r\n    */\r\n   remaining: number;\r\n\r\n   /**\r\n    * Gets the frame's number of UI actors\r\n    */\r\n   ui: number;\r\n\r\n   /**\r\n    * Gets the frame's number of total actors (remaining + UI)\r\n    */\r\n   total: number;\r\n}\r\n\r\n/**\r\n * Represents duration stats for a frame\r\n */\r\nexport interface IFrameDurationStats {\r\n\r\n   /**\r\n    * Gets the frame's total time to run the update function (in ms)\r\n    */\r\n   update: number;\r\n\r\n   /**\r\n    * Gets the frame's total time to run the draw function (in ms)\r\n    */\r\n   draw: number;\r\n\r\n   /**\r\n    * Gets the frame's total render duration (update + draw duration) (in ms)\r\n    */\r\n   total: number;\r\n}\r\n\r\n/**\r\n * Represents physics stats for the current frame\r\n */\r\nexport interface IPhysicsStats {\r\n   /**\r\n    * Gets the number of broadphase collision pairs which \r\n    */\r\n   pairs: number;\r\n\r\n   /**\r\n    * Gets the number of actural collisons \r\n    */\r\n   collisions: number;\r\n\r\n   /**\r\n    * Gets the number of fast moving bodies using raycast continuous collisions in the scene \r\n    */\r\n   fastBodies: number;\r\n\r\n   /**\r\n    * Gets the number of bodies that had a fast body collision resolution\r\n    */\r\n   fastBodyCollisions: number;\r\n\r\n   /**\r\n    * Gets the time it took to calculate the broadphase pairs\r\n    */\r\n   broadphase: number;\r\n\r\n   /**\r\n    * Gets the time it took to calculate the narrowphase \r\n    */\r\n   narrowphase: number;\r\n}\r\n\r\n/**\r\n * Debug statistics and flags for Excalibur. If polling these values, it would be\r\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\r\n * updated during a frame.\r\n */\r\nexport class Debug implements IDebugFlags {\r\n\r\n   /**\r\n    * Performance statistics\r\n    */\r\n   public stats: IDebugStats = {\r\n\r\n      /**\r\n       * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats. \r\n       * Best accessed on [[postframe]] event. See [[IFrameStats]]\r\n       */\r\n      currFrame: new FrameStats(),\r\n\r\n      /**\r\n       * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats. \r\n       * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[IFrameStats]]\r\n       */\r\n      prevFrame: new FrameStats()\r\n\r\n   };\r\n\r\n}\r\n\r\n/**\r\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\r\n * creating instances of this every frame.\r\n */\r\nexport class FrameStats implements IFrameStats {\r\n   private _id: number = 0;\r\n   private _delta: number = 0;\r\n   private _fps: number = 0;\r\n   private _actorStats: IFrameActorStats = {\r\n      alive: 0,\r\n      killed: 0,\r\n      ui: 0,\r\n      get remaining(this: IFrameActorStats) {\r\n         return this.alive - this.killed;\r\n      },\r\n      get total(this: IFrameActorStats) {\r\n         return this.remaining + this.ui;\r\n      }\r\n   };\r\n   private _durationStats: IFrameDurationStats = {\r\n      update: 0,\r\n      draw: 0,\r\n      get total(this: IFrameDurationStats) {\r\n         return this.update + this.draw;\r\n      }\r\n   };\r\n\r\n   private _physicsStats: PhysicsStats = new PhysicsStats();\r\n\r\n   /**\r\n    * Zero out values or clone other IFrameStat stats. Allows instance reuse.\r\n    *  \r\n    * @param [otherStats] Optional stats to clone\r\n    */\r\n   public reset(otherStats?: IFrameStats) {\r\n      if (otherStats) {\r\n         this.id = otherStats.id;\r\n         this.delta = otherStats.delta;\r\n         this.fps = otherStats.fps;\r\n         this.actors.alive = otherStats.actors.alive;\r\n         this.actors.killed = otherStats.actors.killed;\r\n         this.actors.ui = otherStats.actors.ui;\r\n         this.duration.update = otherStats.duration.update;\r\n         this.duration.draw = otherStats.duration.draw;\r\n         this._physicsStats.reset(otherStats.physics);\r\n      } else {\r\n         this.id = this.delta = this.fps = 0;\r\n         this.actors.alive = this.actors.killed = this.actors.ui = 0;\r\n         this.duration.update = this.duration.draw = 0;\r\n         this._physicsStats.reset();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Provides a clone of this instance.\r\n    */\r\n   public clone(): FrameStats {\r\n      var fs = new FrameStats();\r\n\r\n      fs.reset(this);\r\n\r\n      return fs;\r\n   }\r\n\r\n   /**\r\n    * Gets the frame's id\r\n    */\r\n   public get id() {\r\n      return this._id;\r\n   }\r\n\r\n   /**\r\n    * Sets the frame's id\r\n    */\r\n   public set id(value: number) {\r\n      this._id = value;\r\n   }\r\n\r\n   /**\r\n    * Gets the frame's delta (time since last frame)\r\n    */\r\n   public get delta() {\r\n      return this._delta;\r\n   }\r\n\r\n   /**\r\n    * Sets the frame's delta (time since last frame). Internal use only.\r\n    * @internal\r\n    */\r\n   public set delta(value: number) {\r\n      this._delta = value;\r\n   }\r\n\r\n   /**\r\n    * Gets the frame's frames-per-second (FPS)\r\n    */\r\n   public get fps() {\r\n      return this._fps;\r\n   }\r\n\r\n   /**\r\n    * Sets the frame's frames-per-second (FPS). Internal use only.\r\n    * @internal\r\n    */\r\n   public set fps(value: number) {\r\n      this._fps = value;\r\n   }\r\n\r\n   /**\r\n    * Gets the frame's actor statistics\r\n    */\r\n   public get actors() {\r\n      return this._actorStats;\r\n   }\r\n\r\n   /**\r\n    * Gets the frame's duration statistics\r\n    */\r\n   public get duration() {\r\n      return this._durationStats;\r\n   }\r\n\r\n   /**\r\n    * Gets the frame's physics statistics\r\n    */\r\n   public get physics() {\r\n      return this._physicsStats;\r\n   }\r\n}\r\n\r\nexport class PhysicsStats implements IPhysicsStats {\r\n   private _pairs: number = 0;\r\n   private _collisions: number = 0;\r\n   private _fastBodies: number = 0;\r\n   private _fastBodyCollisions: number = 0;\r\n   private _broadphase: number = 0;\r\n   private _narrowphase: number = 0;\r\n\r\n   /**\r\n    * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\r\n    *  \r\n    * @param [otherStats] Optional stats to clone\r\n    */\r\n   public reset(otherStats?: IPhysicsStats) {\r\n      if (otherStats) {\r\n         this.pairs = otherStats.pairs;\r\n         this.collisions = otherStats.collisions;\r\n         this.fastBodies = otherStats.fastBodies;\r\n         this.fastBodyCollisions = otherStats.fastBodyCollisions;\r\n         this.broadphase = otherStats.broadphase;\r\n         this.narrowphase = otherStats.narrowphase;\r\n      } else {\r\n         this.pairs = this.collisions = this.fastBodies = 0;\r\n         this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Provides a clone of this instance.\r\n    */\r\n   public clone(): IPhysicsStats {\r\n      var ps = new PhysicsStats();\r\n\r\n      ps.reset(this);\r\n\r\n      return ps;\r\n   }\r\n\r\n   public get pairs(): number {\r\n      return this._pairs;\r\n   }\r\n\r\n   public set pairs(value: number) {\r\n      this._pairs = value;\r\n   }\r\n\r\n   public get collisions(): number {\r\n      return this._collisions;\r\n   }\r\n\r\n   public set collisions(value: number) {\r\n      this._collisions = value;\r\n   }\r\n\r\n   public get fastBodies(): number {\r\n      return this._fastBodies;\r\n   }\r\n\r\n   public set fastBodies(value: number) {\r\n      this._fastBodies = value;\r\n   }\r\n\r\n   public get fastBodyCollisions(): number {\r\n      return this._fastBodyCollisions;\r\n   }\r\n\r\n   public set fastBodyCollisions(value: number) {\r\n      this._fastBodyCollisions = value;\r\n   }\r\n\r\n   public get broadphase(): number {\r\n      return this._broadphase;\r\n   }\r\n\r\n   public set broadphase(value: number) {\r\n      this._broadphase = value;\r\n   }\r\n\r\n   public get narrowphase(): number {\r\n      return this._narrowphase;\r\n   }\r\n\r\n   public set narrowphase(value: number) {\r\n      this._narrowphase = value;\r\n   }\r\n}","import { GameEvent, SubscribeEvent, UnsubscribeEvent } from './Events';\r\nimport { IEvented } from './Interfaces/IEvented';\r\n\r\n\r\n/**\r\n * Excalibur's internal event dispatcher implementation. \r\n * Callbacks are fired immediately after an event is published.\r\n * Typically you will use [[Class.eventDispatcher]] since most classes in\r\n * Excalibur inherit from [[Class]]. You will rarely create an `EventDispatcher`\r\n * yourself.\r\n *\r\n * [[include:Events.md]]\r\n */\r\nexport class EventDispatcher implements IEvented {\r\n   private _handlers: { [key: string]: { (event?: GameEvent<any>): void }[]; } = {};\r\n   private _wiredEventDispatchers: EventDispatcher[] = [];\r\n\r\n   private _target: any;\r\n\r\n   /**\r\n    * @param target  The object that will be the recipient of events from this event dispatcher\r\n    */\r\n   constructor(target: any) {\r\n      this._target = target;\r\n   }\r\n\r\n   /**\r\n    * Emits an event for target\r\n    * @param eventName  The name of the event to publish\r\n    * @param event      Optionally pass an event data object to the handler\r\n    */\r\n   public emit(eventName: string, event?: GameEvent<any>) {\r\n      if (!eventName) {\r\n         // key not mapped\r\n         return;\r\n      }\r\n      eventName = eventName.toLowerCase();\r\n      var target = this._target;\r\n      if (!event) {\r\n         event = new GameEvent();\r\n      }\r\n      event.target = target;\r\n\r\n      var i: number, len: number;\r\n\r\n      if (this._handlers[eventName]) {\r\n         i = 0;\r\n         len = this._handlers[eventName].length;\r\n\r\n         for (i; i < len; i++) {\r\n            this._handlers[eventName][i].call(target, event);\r\n         }\r\n      }\r\n\r\n      i = 0;\r\n      len = this._wiredEventDispatchers.length;\r\n\r\n      for (i; i < len; i++) {\r\n         this._wiredEventDispatchers[i].emit(eventName, event);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\r\n    * @param eventName  The name of the event to subscribe to\r\n    * @param handler    The handler callback to fire on this event\r\n    */\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void) {\r\n      eventName = eventName.toLowerCase();\r\n      if (!this._handlers[eventName]) {\r\n         this._handlers[eventName] = [];\r\n      }\r\n      this._handlers[eventName].push(handler);\r\n\r\n      // meta event handlers\r\n      if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n         this.emit('subscribe', new SubscribeEvent(eventName, handler));\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Unsubscribe an event handler(s) from an event. If a specific handler\r\n    * is specified for an event, only that handler will be unsubscribed. \r\n    * Otherwise all handlers will be unsubscribed for that event.\r\n    *\r\n    * @param eventName  The name of the event to unsubscribe\r\n    * @param handler    Optionally the specific handler to unsubscribe\r\n    *\r\n    */\r\n   public off(eventName: string, handler?: (event?: GameEvent<any>) => void) {\r\n      eventName = eventName.toLowerCase();\r\n      var eventHandlers = this._handlers[eventName];\r\n\r\n      if (eventHandlers) {\r\n         // if no explicit handler is give with the event name clear all handlers\r\n         if (!handler) {\r\n            this._handlers[eventName].length = 0;\r\n         } else {\r\n            var index = eventHandlers.indexOf(handler);\r\n            this._handlers[eventName].splice(index, 1);\r\n         }\r\n      }\r\n      // meta event handlers\r\n      if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n         this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Wires this event dispatcher to also recieve events from another\r\n    */\r\n   public wire(eventDispatcher: EventDispatcher): void {\r\n      eventDispatcher._wiredEventDispatchers.push(this);\r\n   }\r\n\r\n   /**\r\n    * Unwires this event dispatcher from another\r\n    */\r\n   public unwire(eventDispatcher: EventDispatcher): void {\r\n      var index = eventDispatcher._wiredEventDispatchers.indexOf(this);\r\n      if (index > -1) {\r\n         eventDispatcher._wiredEventDispatchers.splice(index, 1);\r\n      }\r\n\r\n   }\r\n\r\n}","/**\r\n * Provides standard colors (e.g. [[Color.Black]])\r\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\r\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\r\n *\r\n * [[include:Colors.md]]\r\n */\r\nexport class Color {\r\n   /**\r\n    * Red channel\r\n    */\r\n   public r: number;\r\n   /**\r\n    * Green channel\r\n    */\r\n   public g: number;\r\n   /**\r\n    * Blue channel\r\n    */\r\n   public b: number;\r\n   /**\r\n    * Alpha channel (between 0 and 1)\r\n    */\r\n   public a: number;\r\n\r\n   /**\r\n    * Hue\r\n    */\r\n   public h: number;\r\n   /**\r\n    * Saturation\r\n    */\r\n   public s: number;\r\n   /**\r\n    * Lightness\r\n    */\r\n   public l: number;\r\n\r\n   /**\r\n    * Creates a new instance of Color from an r, g, b, a\r\n    *\r\n    * @param r  The red component of color (0-255)\r\n    * @param g  The green component of color (0-255)\r\n    * @param b  The blue component of color (0-255)\r\n    * @param a  The alpha component of color (0-1.0)\r\n    */\r\n   constructor(r: number, g: number, b: number, a?: number) {\r\n      this.r = r;\r\n      this.g = g;\r\n      this.b = b;\r\n      this.a = (a != null ? a : 1);\r\n   }\r\n\r\n   /**\r\n    * Creates a new instance of Color from an r, g, b, a\r\n    *\r\n    * @param r  The red component of color (0-255)\r\n    * @param g  The green component of color (0-255)\r\n    * @param b  The blue component of color (0-255)\r\n    * @param a  The alpha component of color (0-1.0)\r\n    */\r\n   public static fromRGB(r: number, g: number, b: number, a?: number): Color {\r\n      return new Color(r, g, b, a);\r\n   }\r\n\r\n   /**\r\n    * Creates a new inscance of Color from a hex string\r\n    * \r\n    * @param hex  CSS color string of the form #ffffff, the alpha component is optional\r\n    */\r\n   public static fromHex(hex: string): Color {\r\n      var hexRegEx: RegExp = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\r\n      var match = null;\r\n      if (match = hex.match(hexRegEx)) {\r\n         var r = parseInt(match[1], 16);\r\n         var g = parseInt(match[2], 16);\r\n         var b = parseInt(match[3], 16);\r\n         var a = 1;\r\n         if (match[4]) {\r\n            a = parseInt(match[4], 16) / 255;\r\n         }\r\n         return new Color(r, g, b, a);\r\n      } else {\r\n         throw new Error('Invalid hex string: ' + hex);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Creats a new instance of Color from hsla values\r\n    *\r\n    * @param h  Hue is represented [0-1]\r\n    * @param s  Saturation is represented [0-1]\r\n    * @param l  Luminance is represented [0-1]\r\n    * @param a  Alpha is represented [0-1]\r\n    */\r\n   public static fromHSL(h: number, s: number, l: number, a: number = 1.0): Color {\r\n      var temp = new HSLColor(h, s, l, a);\r\n      return temp.toRGBA();\r\n   }\r\n\r\n   /**\r\n    * Lightens the current color by a specified amount \r\n    *\r\n    * @param factor  The amount to lighten by [0-1]\r\n    */\r\n   public lighten(factor: number = 0.1): Color {\r\n      var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n      temp.l += (temp.l * factor);\r\n      return temp.toRGBA();\r\n   }\r\n\r\n   /**\r\n    * Darkens the current color by a specified amount \r\n    *\r\n    * @param factor  The amount to darken by [0-1]\r\n    */\r\n   public darken(factor: number = 0.1): Color {\r\n      var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n      temp.l -= (temp.l * factor);\r\n      return temp.toRGBA();\r\n   }\r\n\r\n   /**\r\n    * Saturates the current color by a specified amount \r\n    *\r\n    * @param factor  The amount to saturate by [0-1]\r\n    */\r\n   public saturate(factor: number = 0.1): Color {\r\n      var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n      temp.s += (temp.s * factor);\r\n      return temp.toRGBA();\r\n   }\r\n\r\n   /**\r\n    * Desaturates the current color by a specified amount \r\n    *\r\n    * @param factor  The amount to desaturate by [0-1]\r\n    */\r\n   public desaturate(factor: number = 0.1): Color {\r\n      var temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n      temp.s -= (temp.s * factor);\r\n      return temp.toRGBA();\r\n   }\r\n\r\n   /**\r\n    * Multiplies a color by another, results in a darker color\r\n    *\r\n    * @param color  The other color\r\n    */\r\n   public mulitiply(color: Color): Color {\r\n      var newR = ((color.r / 255 * this.r / 255) * 255);\r\n      var newG = ((color.g / 255 * this.g / 255) * 255);\r\n      var newB = ((color.b / 255 * this.b / 255) * 255);\r\n      var newA = (color.a * this.a);\r\n      return new Color(newR, newG, newB, newA);\r\n   }\r\n\r\n   /**\r\n    * Screens a color by another, results in a lighter color\r\n    *\r\n    * @param color  The other color\r\n    */\r\n   public screen(color: Color): Color {\r\n      var color1 = color.invert();\r\n      var color2 = color.invert();\r\n      return color1.mulitiply(color2).invert();\r\n   }\r\n\r\n   /**\r\n    * Inverts the current color\r\n    */\r\n   public invert(): Color {\r\n      return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\r\n   }\r\n\r\n   /**\r\n    * Averages the current color with another\r\n    *\r\n    * @param color  The other color\r\n    */\r\n   public average(color: Color): Color {\r\n      var newR = (color.r + this.r) / 2;\r\n      var newG = (color.g + this.g) / 2;\r\n      var newB = (color.b + this.b) / 2;\r\n      var newA = (color.a + this.a) / 2;\r\n      return new Color(newR, newG, newB, newA);\r\n   }\r\n\r\n   /**\r\n    * Returns a CSS string representation of a color. \r\n    */\r\n   public toString() {\r\n      var result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\r\n      if (this.a !== undefined || this.a !== null) {\r\n         return 'rgba(' + result + ', ' + String(this.a) + ')';\r\n      }\r\n      return 'rgb(' + result + ')';\r\n   }\r\n\r\n   /**\r\n    * Returns a CSS string representation of a color.\r\n    */\r\n   public fillStyle() {\r\n      return this.toString();\r\n   }\r\n\r\n   /**\r\n    * Returns a clone of the current color.\r\n    */\r\n   public clone(): Color {\r\n      return new Color(this.r, this.g, this.b, this.a);\r\n   }\r\n\r\n   /**\r\n    * Black (#000000)\r\n    */\r\n   public static Black: Color = Color.fromHex('#000000');\r\n\r\n   /**\r\n    * White (#FFFFFF)\r\n    */\r\n   public static White: Color = Color.fromHex('#FFFFFF');\r\n\r\n   /**\r\n    * Gray (#808080)\r\n    */\r\n   public static Gray: Color = Color.fromHex('#808080');\r\n\r\n   /**\r\n    * Light gray (#D3D3D3)\r\n    */\r\n   public static LightGray: Color = Color.fromHex('#D3D3D3');\r\n\r\n   /**\r\n    * Dark gray (#A9A9A9)\r\n    */\r\n   public static DarkGray: Color = Color.fromHex('#A9A9A9');\r\n\r\n   /**\r\n    * Yellow (#FFFF00)\r\n    */\r\n   public static Yellow: Color = Color.fromHex('#FFFF00');\r\n\r\n   /**\r\n    * Orange (#FFA500)\r\n    */\r\n   public static Orange: Color = Color.fromHex('#FFA500');\r\n\r\n   /**\r\n    * Red (#FF0000)\r\n    */\r\n   public static Red: Color = Color.fromHex('#FF0000');\r\n\r\n   /**\r\n    * Vermillion (#FF5B31)\r\n    */\r\n   public static Vermillion: Color = Color.fromHex('#FF5B31');\r\n\r\n   /**\r\n    * Rose (#FF007F)\r\n    */\r\n   public static Rose: Color = Color.fromHex('#FF007F');\r\n\r\n   /**\r\n    * Magenta (#FF00FF)\r\n    */\r\n   public static Magenta: Color = Color.fromHex('#FF00FF');\r\n\r\n   /**\r\n    * Violet (#7F00FF)\r\n    */\r\n   public static Violet: Color = Color.fromHex('#7F00FF');\r\n\r\n   /**\r\n    * Blue (#0000FF)\r\n    */\r\n   public static Blue: Color = Color.fromHex('#0000FF');\r\n\r\n   /**\r\n    * Azure (#007FFF)\r\n    */\r\n   public static Azure: Color = Color.fromHex('#007FFF');\r\n\r\n   /**\r\n    * Cyan (#00FFFF)\r\n    */\r\n   public static Cyan: Color = Color.fromHex('#00FFFF');\r\n\r\n   /**\r\n    * Viridian (#59978F)\r\n    */\r\n   public static Viridian: Color = Color.fromHex('#59978F');\r\n\r\n   /**\r\n    * Green (#00FF00)\r\n    */\r\n   public static Green: Color = Color.fromHex('#00FF00');\r\n\r\n   /**\r\n    * Chartreuse (#7FFF00)\r\n    */\r\n   public static Chartreuse: Color = Color.fromHex('#7FFF00');\r\n\r\n   /**\r\n    * Transparent (#FFFFFF00)\r\n    */\r\n   public static Transparent: Color = Color.fromHex('#FFFFFF00');\r\n\r\n   \r\n}\r\n\r\n/**\r\n * Internal HSL Color representation\r\n *\r\n * http://en.wikipedia.org/wiki/HSL_and_HSV\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n */\r\nclass HSLColor {\r\n   constructor(public h: number, public s: number, public l: number, public a: number) { }\r\n\r\n   public static hue2rgb(p: number, q: number, t: number): number {\r\n      if (t < 0) { t += 1; }\r\n      if (t > 1) { t -= 1; }\r\n      if (t < 1 / 6) { return p + (q - p) * 6 * t; }\r\n      if (t < 1 / 2) { return q; }\r\n      if (t < 2 / 3) { return p + (q - p) * (2 / 3 - t) * 6; }\r\n      return p;\r\n   }\r\n\r\n   public static fromRGBA(r: number, g: number, b: number, a: number): HSLColor {\r\n      r /= 255;\r\n      g /= 255;\r\n      b /= 255;\r\n      var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n      var h, s, l = (max + min) / 2;\r\n\r\n      if (max === min) {\r\n         h = s = 0; // achromatic\r\n      } else {\r\n         var d = max - min;\r\n         s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n         switch (max) {\r\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n            case g: h = (b - r) / d + 2; break;\r\n            case b: h = (r - g) / d + 4; break;\r\n         }\r\n         h /= 6;\r\n      }\r\n\r\n      return new HSLColor(h, s, l, a);\r\n   }\r\n\r\n   public toRGBA(): Color {\r\n      var r: number, g: number, b: number;\r\n\r\n      if (this.s === 0) {\r\n         r = g = b = this.l; // achromatic\r\n      } else {\r\n         \r\n         var q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\r\n         var p = 2 * this.l - q;\r\n         r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\r\n         g = HSLColor.hue2rgb(p, q, this.h);\r\n         b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\r\n      }\r\n\r\n      return new Color(r * 255, g * 255, b * 255, this.a);\r\n   }\r\n}   ","import { ICollisionArea } from './ICollisionArea';\r\nimport { Side } from './Side';\r\nimport { Body } from './Body';\r\n\r\nimport { Actor, CollisionType } from '../Actor';\r\nimport { Vector } from '../Algebra';\r\nimport { Physics, CollisionResolutionStrategy } from '../Physics';\r\nimport { CollisionEvent } from '../Events';\r\nimport * as Util from '../Util/Util';\r\n\r\n/**\r\n * Collision contacts are used internally by Excalibur to resolve collision between actors. This\r\n * Pair prevents collisions from being evaluated more than one time\r\n */\r\nexport class CollisionContact {\r\n   /**\r\n    * The id of this collision contact\r\n    */\r\n   id: string;\r\n   /**\r\n    * The first rigid body in the collision\r\n    */\r\n   bodyA: ICollisionArea;\r\n   /**\r\n    * The second rigid body in the collision\r\n    */\r\n   bodyB: ICollisionArea;\r\n   /**\r\n    * The minimum translation vector to resolve penetration, pointing away from bodyA\r\n    */\r\n   mtv: Vector;\r\n   /**\r\n    * The point of collision shared between bodyA and bodyB\r\n    */\r\n   point: Vector;\r\n   /**\r\n    * The collision normal, pointing away from bodyA\r\n    */\r\n   normal: Vector;\r\n\r\n\r\n   constructor(bodyA: ICollisionArea, bodyB: ICollisionArea, mtv: Vector, point: Vector, normal: Vector) {\r\n      this.bodyA = bodyA;\r\n      this.bodyB = bodyB;\r\n      this.mtv = mtv;\r\n      this.point = point;\r\n      this.normal = normal;\r\n   }\r\n\r\n   resolve(strategy: CollisionResolutionStrategy) {\r\n      if (strategy === CollisionResolutionStrategy.RigidBody) {\r\n         this._resolveRigidBodyCollision();\r\n      } else if (strategy === CollisionResolutionStrategy.Box) {\r\n         this._resolveBoxCollision();\r\n      } else {\r\n         throw new Error('Unknown collision resolution strategy');\r\n      }\r\n   }\r\n\r\n   private _applyBoxImpluse(bodyA: Actor, bodyB: Actor, mtv: Vector, side: Side) {\r\n      if ((bodyA.collisionType === CollisionType.Active ||\r\n         bodyA.collisionType === CollisionType.Elastic) &&\r\n         bodyB.collisionType !== CollisionType.Passive) {\r\n\r\n         // Resolve overlaps\r\n         if (bodyA.collisionType === CollisionType.Active &&\r\n            bodyB.collisionType === CollisionType.Active) {\r\n            // split overlaps if both are Active\r\n            mtv = mtv.scale(.5);\r\n         }\r\n         // Apply mtv\r\n         bodyA.pos.y += mtv.y;\r\n         bodyA.pos.x += mtv.x;\r\n\r\n         // Naive elastic bounce\r\n         if (bodyA.collisionType === CollisionType.Elastic) {\r\n            if (side === Side.Left) {\r\n               bodyA.vel.x = Math.abs(bodyA.vel.x);\r\n            } else if (side === Side.Right) {\r\n               bodyA.vel.x = -Math.abs(bodyA.vel.x);\r\n            } else if (side === Side.Top) {\r\n               bodyA.vel.y = Math.abs(bodyA.vel.y);\r\n            } else if (side === Side.Bottom) {\r\n               bodyA.vel.y = -Math.abs(bodyA.vel.y);\r\n            }\r\n         } else {\r\n\r\n\r\n            // non-zero intersection on the y axis\r\n            if (this.mtv.x !== 0) {\r\n               var velX = 0;\r\n               // both bodies are traveling in the same direction (negative or positive)\r\n               if (bodyA.vel.x < 0 && bodyB.vel.x < 0) {\r\n                  velX = Math.min(bodyA.vel.x, bodyB.vel.x);\r\n               } else if (bodyA.vel.x > 0 && bodyB.vel.x > 0) {\r\n                  velX = Math.max(bodyA.vel.x, bodyB.vel.x);\r\n               } else if (bodyB.collisionType === CollisionType.Fixed) {\r\n                  // bodies are traveling in opposite directions\r\n                  if (bodyA.pos.sub(bodyB.pos).dot(bodyA.vel) > 0) {\r\n                     velX = bodyA.vel.x;\r\n                  } else {\r\n                     // bodyA is heading towards b\r\n                     velX = bodyB.vel.x;\r\n                  }\r\n               }\r\n               bodyA.vel.x = velX;\r\n            }\r\n\r\n\r\n            if (this.mtv.y !== 0) {\r\n               var velY = 0;\r\n\r\n               // both bodies are traveling in the same direction (negative or positive)\r\n               if (bodyA.vel.y < 0 && bodyB.vel.y < 0) {\r\n                  velY = Math.min(bodyA.vel.y, bodyB.vel.y);\r\n               } else if (bodyA.vel.y > 0 && bodyB.vel.y > 0) {\r\n                  velY = Math.max(bodyA.vel.y, bodyB.vel.y);\r\n               } else if (bodyB.collisionType === CollisionType.Fixed) {\r\n                  // bodies are traveling in opposite directions\r\n                  if (bodyA.pos.sub(bodyB.pos).dot(bodyA.vel) > 0) {\r\n                     velY = bodyA.vel.y;\r\n                  } else {\r\n                     // bodyA is heading towards b\r\n                     velY = bodyB.vel.y;\r\n                  }\r\n               }\r\n\r\n               bodyA.vel.y = velY;\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   private _resolveBoxCollision() {\r\n      var bodyA = this.bodyA.body.actor;\r\n      var bodyB = this.bodyB.body.actor;\r\n      var side = Util.getSideFromVector(this.mtv);\r\n      var mtv = this.mtv.negate();\r\n      // Publish collision events on both participants\r\n      bodyA.emit('collision', new CollisionEvent(bodyA, bodyB, side, mtv));\r\n      bodyB.emit('collision',\r\n         new CollisionEvent(bodyB, bodyA, Util.getOppositeSide(side), mtv.negate()));\r\n\r\n      this._applyBoxImpluse(bodyA, bodyB, mtv, side);\r\n      this._applyBoxImpluse(bodyB, bodyA, mtv.negate(), Util.getOppositeSide(side));\r\n   }\r\n\r\n   private _resolveRigidBodyCollision() {\r\n\r\n      // perform collison on bounding areas\r\n      var bodyA: Body = this.bodyA.body;\r\n      var bodyB: Body = this.bodyB.body;\r\n      var mtv = this.mtv; // normal pointing away from bodyA\r\n      var normal = this.normal; // normal pointing away from bodyA\r\n      if (bodyA.actor === bodyB.actor) { // sanity check for existing pairs\r\n         return;\r\n      }\r\n\r\n      var invMassA = bodyA.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyA.mass;\r\n      var invMassB = bodyB.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyB.mass;\r\n\r\n      var invMoiA = bodyA.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyA.moi;\r\n      var invMoiB = bodyB.actor.collisionType === CollisionType.Fixed ? 0 : 1 / bodyB.moi;\r\n\r\n      // average restitution more relistic\r\n      var coefRestitution = Math.min(bodyA.restitution, bodyB.restitution);\r\n\r\n      var coefFriction = Math.min(bodyA.friction, bodyB.friction);\r\n\r\n      normal = normal.normalize();\r\n      var tangent = normal.normal().normalize();\r\n\r\n      var ra = this.point.sub(this.bodyA.getCenter()); // point relative to bodyA position\r\n      var rb = this.point.sub(this.bodyB.getCenter()); /// point relative to bodyB\r\n\r\n      // Relative velocity in linear terms\r\n      // Angular to linear velocity formula -> omega = v/r\r\n      var rv = bodyB.vel.add(rb.cross(-bodyB.rx)).sub(bodyA.vel.sub(ra.cross(bodyA.rx)));\r\n      var rvNormal = rv.dot(normal);\r\n      var rvTangent = rv.dot(tangent);\r\n\r\n      var raTangent = ra.dot(tangent);\r\n      var raNormal = ra.dot(normal);\r\n\r\n      var rbTangent = rb.dot(tangent);\r\n      var rbNormal = rb.dot(normal);\r\n\r\n\r\n      // If objects are moving away ignore\r\n      if (rvNormal > 0) {\r\n         return;\r\n      }\r\n\r\n      // Publish collision events on both participants\r\n      var side = Util.getSideFromVector(this.mtv);\r\n      bodyA.actor.emit('collision', new CollisionEvent(this.bodyA.body.actor,\r\n         this.bodyB.body.actor,\r\n         side,\r\n         this.mtv));\r\n      bodyB.actor.emit('collision', new CollisionEvent(this.bodyB.body.actor,\r\n         this.bodyA.body.actor,\r\n         Util.getOppositeSide(side),\r\n         this.mtv.negate()));\r\n\r\n      // Collision impulse formula from Chris Hecker\r\n      // https://en.wikipedia.org/wiki/Collision_response\r\n      var impulse = - ((1 + coefRestitution) * rvNormal) /\r\n         ((invMassA + invMassB) + invMoiA * raTangent * raTangent + invMoiB * rbTangent * rbTangent);\r\n\r\n\r\n      if (bodyA.actor.collisionType === CollisionType.Fixed) {\r\n         bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\r\n         if (Physics.allowRigidBodyRotation) {\r\n            bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\r\n         }\r\n         bodyB.addMtv(mtv);\r\n      } else if (bodyB.actor.collisionType === CollisionType.Fixed) {\r\n         bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\r\n         if (Physics.allowRigidBodyRotation) {\r\n            bodyA.rx += impulse * invMoiA * -ra.cross(normal);\r\n         }\r\n         bodyA.addMtv(mtv.negate());\r\n      } else {\r\n         bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\r\n         bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\r\n\r\n         if (Physics.allowRigidBodyRotation) {\r\n            bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\r\n            bodyA.rx += impulse * invMoiA * -ra.cross(normal);\r\n         }\r\n\r\n\r\n         // Split the mtv in half for the two bodies, potentially we could do something smarter here\r\n         bodyB.addMtv(mtv.scale(.5));\r\n         bodyA.addMtv(mtv.scale(-.5));\r\n      }\r\n\r\n      // Friction portion of impulse\r\n      if (coefFriction && rvTangent) {\r\n         // Columb model of friction, formula for impulse due to friction from  \r\n         // https://en.wikipedia.org/wiki/Collision_response\r\n\r\n         // tangent force exerted by body on another in contact\r\n         var t = rv.sub(normal.scale(rv.dot(normal))).normalize();\r\n\r\n         // impulse in the direction of tangent force\r\n         var jt = rv.dot(t) / (invMassA + invMassB + raNormal * raNormal * invMoiA + rbNormal * rbNormal * invMoiB);\r\n\r\n         var frictionImpulse = new Vector(0, 0);\r\n         if (Math.abs(jt) <= impulse * coefFriction) {\r\n            frictionImpulse = t.scale(jt).negate();\r\n         } else {\r\n            frictionImpulse = t.scale(-impulse * coefFriction);\r\n         }\r\n\r\n         if (bodyA.actor.collisionType === CollisionType.Fixed) {\r\n            // apply frictional impulse\r\n            bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\r\n            if (Physics.allowRigidBodyRotation) {\r\n               bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\r\n            }\r\n         } else if (bodyB.actor.collisionType === CollisionType.Fixed) {\r\n            // apply frictional impulse\r\n            bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\r\n            if (Physics.allowRigidBodyRotation) {\r\n               bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\r\n            }\r\n         } else {\r\n            // apply frictional impulse\r\n            bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\r\n            bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\r\n\r\n            // apply frictional impulse\r\n            if (Physics.allowRigidBodyRotation) {\r\n               bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\r\n               bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\r\n            }\r\n         }\r\n      }\r\n   }\r\n}","import { CircleArea } from './CircleArea';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { EdgeArea } from './EdgeArea';\r\n\r\nimport { Vector } from '../Algebra';\r\n\r\nexport var CollisionJumpTable = {\r\n\r\n   CollideCircleCircle(circleA: CircleArea, circleB: CircleArea): CollisionContact {\r\n\r\n      var radius = circleA.radius + circleB.radius;\r\n      var circleAPos = circleA.body.pos.add(circleA.pos);\r\n      var circleBPos = circleB.body.pos.add(circleB.pos);\r\n      if (circleAPos.distance(circleBPos) > radius) {\r\n         return null;\r\n      }\r\n\r\n      var axisOfCollision = circleBPos.sub(circleAPos).normalize();\r\n      var mvt = axisOfCollision.scale(radius - circleBPos.distance(circleAPos));\r\n\r\n      var pointOfCollision = circleA.getFurthestPoint(axisOfCollision);\r\n\r\n      return new CollisionContact(circleA, circleB, mvt, pointOfCollision, axisOfCollision);\r\n   },\r\n\r\n   CollideCirclePolygon(circle: CircleArea, polygon: PolygonArea): CollisionContact {\r\n\r\n      var minAxis = circle.testSeparatingAxisTheorem(polygon);\r\n      if (!minAxis) {\r\n         return null;\r\n      }\r\n\r\n      // make sure that the minAxis is pointing away from circle\r\n      var samedir = minAxis.dot(polygon.getCenter().sub(circle.getCenter()));\r\n      minAxis = samedir < 0 ? minAxis.negate() : minAxis;\r\n\r\n      var verts: Vector[] = [];\r\n\r\n      var point1 = polygon.getFurthestPoint(minAxis.negate());\r\n      var point2 = circle.getFurthestPoint(minAxis); //.add(cc);\r\n      if (circle.contains(point1)) {\r\n         verts.push(point1);\r\n      }\r\n      if (polygon.contains(point2)) {\r\n         verts.push(point2);\r\n      }\r\n      if (verts.length === 0) {\r\n         verts.push(point2);\r\n      }\r\n\r\n      return new CollisionContact(circle, polygon, minAxis,\r\n         verts.length === 2 ? verts[0].average(verts[1]) : verts[0], minAxis.normalize());\r\n   },\r\n\r\n   CollideCircleEdge(circle: CircleArea, edge: EdgeArea): CollisionContact {\r\n      // center of the circle\r\n      var cc = circle.getCenter();\r\n      // vector in the direction of the edge\r\n      var e = edge.end.sub(edge.begin);\r\n\r\n      // amount of overlap with the circle's center along the edge direction\r\n      var u = e.dot(edge.end.sub(cc));\r\n      var v = e.dot(cc.sub(edge.begin));\r\n\r\n      // Potential region A collision (circle is on the left side of the edge, before the beginning)\r\n      if (v <= 0) {\r\n         var da = edge.begin.sub(cc);\r\n         var dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\r\n         // save some sqrts\r\n         if (dda > circle.radius * circle.radius) {\r\n            return null; // no collision\r\n         }\r\n         return new CollisionContact(circle, edge, da.normalize().scale(circle.radius - Math.sqrt(dda)), edge.begin, da.normalize());\r\n      }\r\n\r\n      // Potential region B collision (circle is on the right side of the edge, after the end)\r\n      if (u <= 0) {\r\n         var db = edge.end.sub(cc);\r\n         var ddb = db.dot(db);\r\n         if (ddb > circle.radius * circle.radius) {\r\n            return null;\r\n         }\r\n         return new CollisionContact(circle, edge, db.normalize().scale(circle.radius - Math.sqrt(ddb)), edge.end, db.normalize());\r\n      }\r\n\r\n      // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\r\n      var den = e.dot(e);\r\n      var pointOnEdge = (edge.begin.scale(u).add(edge.end.scale(v))).scale(1 / den);\r\n      var d = cc.sub(pointOnEdge);\r\n\r\n      var dd = d.dot(d);\r\n      if (dd > circle.radius * circle.radius) {\r\n         return null; // no collision\r\n      }\r\n\r\n      var n = e.perpendicular();\r\n      // flip correct direction\r\n      if (n.dot(cc.sub(edge.begin)) < 0) {\r\n         n.x = -n.x;\r\n         n.y = -n.y;\r\n      }\r\n\r\n      n = n.normalize();\r\n\r\n      var mvt = n.scale(Math.abs(circle.radius - Math.sqrt(dd)));\r\n      return new CollisionContact(circle, edge, mvt.negate(), pointOnEdge, n.negate());\r\n\r\n   },\r\n\r\n   CollideEdgeEdge(): CollisionContact {\r\n      // Edge-edge collision doesn't make sense\r\n      return null;\r\n   },\r\n\r\n   CollidePolygonEdge(polygon: PolygonArea, edge: EdgeArea): CollisionContact {\r\n      var e = edge.end.sub(edge.begin);\r\n      var edgeNormal = e.normal();\r\n\r\n      // build a temporary polygon from the edge to use SAT\r\n      var linePoly = new PolygonArea({\r\n         points: [\r\n            edge.begin,\r\n            edge.end,\r\n            edge.end.sub(edgeNormal.scale(10)),\r\n            edge.begin.sub(edgeNormal.scale(10))]\r\n      });\r\n\r\n      var minAxis = polygon.testSeparatingAxisTheorem(linePoly);\r\n\r\n      // no minAxis, no overlap, no collision\r\n      if (!minAxis) {\r\n         return null;\r\n      }\r\n\r\n      return new CollisionContact(polygon, edge, minAxis, polygon.getFurthestPoint(edgeNormal.negate()), edgeNormal.negate());\r\n   },\r\n\r\n   CollidePolygonPolygon(polyA: PolygonArea, polyB: PolygonArea): CollisionContact {      \r\n      // do a SAT test to find a min axis if it exists\r\n      var minAxis = polyA.testSeparatingAxisTheorem(polyB);\r\n\r\n      // no overlap, no collision return null\r\n      if (!minAxis) {\r\n         return null;\r\n      }\r\n\r\n      // make sure that minAxis is pointing from A -> B\r\n      var sameDir = minAxis.dot(polyB.getCenter().sub(polyA.getCenter()));\r\n      minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\r\n\r\n      // find rough point of collision\r\n      // todo this could be better\r\n      var verts: Vector[] = [];\r\n      var pointA = polyA.getFurthestPoint(minAxis);\r\n      var pointB = polyB.getFurthestPoint(minAxis.negate());\r\n\r\n      if (polyB.contains(pointA)) {\r\n         verts.push(pointA);\r\n      }\r\n\r\n      if (polyA.contains(pointB)) {\r\n         verts.push(pointB);\r\n      }\r\n      // no candidates, pick something\r\n      if (verts.length === 0) {\r\n         verts.push(pointB);\r\n      }\r\n\r\n      var contact = verts.length === 2 ? verts[0].add(verts[1]).scale(.5) : verts[0];\r\n\r\n      return new CollisionContact(polyA, polyB, minAxis, contact, minAxis.normalize());\r\n   }\r\n};","import { Body } from './Body';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { ICollisionArea } from './ICollisionArea';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { EdgeArea } from './EdgeArea'; \r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { CollisionContact } from './CollisionContact';\r\n\r\nimport { Vector, Ray, Projection } from '../Algebra';\r\nimport { Physics } from '../Physics';\r\nimport { Color } from '../Drawing/Color';\r\n\r\nexport interface ICircleAreaOptions {\r\n   pos?: Vector;\r\n   radius?: number;\r\n   body?: Body;\r\n}\r\n\r\n/**\r\n * This is a circle collision area for the excalibur rigid body physics simulation\r\n */\r\nexport class CircleArea implements ICollisionArea {\r\n   /**\r\n    * This is the center position of the circle, relative to the body position\r\n    */\r\n   public pos: Vector = Vector.Zero.clone();\r\n   /**\r\n    * This is the radius of the circle\r\n    */\r\n   public radius: number;\r\n   /**\r\n    * The actor associated with this collision area\r\n    */\r\n   public body: Body;\r\n\r\n   constructor(options: ICircleAreaOptions) {\r\n      this.pos = options.pos || Vector.Zero.clone();\r\n      this.radius = options.radius || 0;\r\n      this.body = options.body || null;\r\n   }\r\n\r\n   /**\r\n    * Get the center of the collision area in world coordinates\r\n    */\r\n   public getCenter(): Vector {\r\n      if (this.body) {\r\n         return this.pos.add(this.body.pos);\r\n      }\r\n      return this.pos;\r\n   }\r\n\r\n   /**\r\n    * Tests if a point is contained in this collision area\r\n    */\r\n   public contains(point: Vector): boolean {\r\n      var distance = this.body.pos.distance(point);\r\n      if (distance <= this.radius) {\r\n         return true;\r\n      }\r\n      return false;\r\n   }\r\n\r\n   /**\r\n    * Casts a ray at the CircleArea and returns the nearest point of collision\r\n    * @param ray \r\n    */\r\n   public rayCast(ray: Ray, max: number = Infinity): Vector {\r\n      //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\r\n      var c = this.getCenter();\r\n      var dir = ray.dir;\r\n      var orig = ray.pos;\r\n\r\n      var discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) -\r\n         Math.pow(orig.sub(c).distance(), 2) +\r\n         Math.pow(this.radius, 2));\r\n\r\n      if (discriminant < 0) {\r\n         // no intersection\r\n         return null;\r\n      } else {\r\n         var toi = 0;\r\n         if (discriminant === 0) {\r\n            toi = -dir.dot(orig.sub(c));\r\n            if (toi > 0 && toi < max) {\r\n               return ray.getPoint(toi);\r\n            }\r\n            return null;\r\n         } else {\r\n            var toi1 = -dir.dot(orig.sub(c)) + discriminant;\r\n            var toi2 = -dir.dot(orig.sub(c)) - discriminant;\r\n\r\n            var mintoi = Math.min(toi1, toi2);\r\n            if (mintoi <= max) {\r\n               return ray.getPoint(mintoi);\r\n            }\r\n            return null;\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * @inheritdoc\r\n    */\r\n   public collide(area: ICollisionArea): CollisionContact {\r\n      if (area instanceof CircleArea) {\r\n         return CollisionJumpTable.CollideCircleCircle(this, area);\r\n      } else if (area instanceof PolygonArea) {\r\n         return CollisionJumpTable.CollideCirclePolygon(this, area);\r\n      } else if (area instanceof EdgeArea) {\r\n         return CollisionJumpTable.CollideCircleEdge(this, area);\r\n      } else {\r\n         throw new Error(`Circle could not collide with unknown ICollisionArea ${typeof area}`);\r\n      }\r\n   }\r\n\r\n\r\n   /**\r\n    * Find the point on the shape furthest in the direction specified\r\n    */\r\n   public getFurthestPoint(direction: Vector): Vector {\r\n      return this.getCenter().add(direction.normalize().scale(this.radius));\r\n   }\r\n\r\n   /**\r\n    * Get the axis aligned bounding box for the circle area\r\n    */\r\n   public getBounds(): BoundingBox {\r\n      return new BoundingBox(this.pos.x + this.body.pos.x - this.radius,\r\n         this.pos.y + this.body.pos.y - this.radius,\r\n         this.pos.x + this.body.pos.x + this.radius,\r\n         this.pos.y + this.body.pos.y + this.radius);\r\n   }\r\n\r\n   /**\r\n    * Get axis not implemented on circles, since there are infinite axis in a circle\r\n    */\r\n   public getAxes(): Vector[] {\r\n      return null;\r\n   }\r\n\r\n   /**\r\n    * Returns the moment of inertia of a circle given it's mass\r\n    * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n    */\r\n   public getMomentOfInertia(): number {\r\n      var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n      return (mass * this.radius * this.radius) / 2;\r\n   }\r\n\r\n   /**\r\n    * Tests the separating axis theorem for circles against polygons\r\n    */\r\n   public testSeparatingAxisTheorem(polygon: PolygonArea): Vector {\r\n\r\n      var axes = polygon.getAxes();\r\n      var pc = polygon.getCenter();\r\n      // Special SAT with circles\r\n      var closestPointOnPoly = polygon.getFurthestPoint(this.pos.sub(pc));\r\n      axes.push(this.pos.sub(closestPointOnPoly).normalize());\r\n\r\n      var minOverlap = Number.MAX_VALUE;\r\n      var minAxis = null;\r\n      var minIndex = -1;\r\n      for (var i = 0; i < axes.length; i++) {\r\n         var proj1 = polygon.project(axes[i]);\r\n         var proj2 = this.project(axes[i]);\r\n         var overlap = proj1.getOverlap(proj2);\r\n         if (overlap <= 0) {\r\n            return null;\r\n         } else {\r\n            if (overlap < minOverlap) {\r\n               minOverlap = overlap;\r\n               minAxis = axes[i];\r\n               minIndex = i;\r\n            }\r\n         }\r\n      }\r\n      if (minIndex < 0) {\r\n         return null;\r\n      }\r\n      return minAxis.normalize().scale(minOverlap);\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public recalc(): void {\r\n      // circles don't cache\r\n   }\r\n\r\n   /**\r\n    * Project the circle along a specified axis\r\n    */\r\n   public project(axis: Vector): Projection {\r\n      var scalars = [];\r\n      var point = this.getCenter();\r\n      var dotProduct = point.dot(axis);\r\n      scalars.push(dotProduct);\r\n      scalars.push(dotProduct + this.radius);\r\n      scalars.push(dotProduct - this.radius);\r\n      return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Green.clone()) {\r\n      var pos = this.body ? this.body.pos.add(this.pos) : this.pos;\r\n      var rotation = this.body ? this.body.rotation : 0;\r\n\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = color.toString();\r\n      ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n      ctx.beginPath();\r\n      ctx.moveTo(pos.x, pos.y);\r\n      ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n   }\r\n}","import { Color } from '../Drawing/Color';\r\nimport { Vector } from '../Algebra';\r\n\r\n/**\r\n * A canvas linecap style. \"butt\" is the default flush style, \"round\" is a semi-circle cap with a radius half the width of\r\n * the line, and \"square\" is a rectangle that is an equal width and half height cap.\r\n */\r\nexport type LineCapStyle = 'butt'|'round'|'square';\r\n\r\n/**\r\n * Draw a line on canvas context\r\n * \r\n * @param ctx The canvas context\r\n * @param color The color of the line\r\n * @param x1 The start x coordinate\r\n * @param y1 The start y coordinate\r\n * @param x2 The ending x coordinate\r\n * @param y2 The ending y coordinate\r\n * @param thickness The line thickness\r\n * @param cap The [[LineCapStyle]] (butt, round, or square)\r\n */\r\n/* istanbul ignore next */\r\nexport function line(ctx: CanvasRenderingContext2D, color: Color = Color.Red.clone(), \r\n                     x1: number, y1: number, x2: number, y2: number, thickness: number = 1, cap: LineCapStyle = 'butt') {\r\n   ctx.beginPath();\r\n   ctx.lineWidth = thickness;\r\n   ctx.lineCap = cap;   \r\n   ctx.strokeStyle = color.toString();\r\n   ctx.moveTo(x1, y1);\r\n   ctx.lineTo(x2, y2);\r\n   ctx.closePath();\r\n   ctx.stroke();  \r\n}\r\n\r\n/**\r\n * Draw the vector as a point onto the canvas.\r\n */\r\n/* istanbul ignore next */\r\nexport function point(ctx: CanvasRenderingContext2D, color: Color = Color.Red.clone(), point: Vector): void {\r\n   ctx.beginPath();\r\n   ctx.strokeStyle = color.toString();\r\n   ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\r\n   ctx.closePath();    \r\n   ctx.stroke();\r\n}\r\n\r\n/**\r\n * Draw the vector as a line onto the canvas starting a origin point.\r\n */\r\n/* istanbul ignore next */\r\nexport function vector(ctx: CanvasRenderingContext2D, color: Color, origin: Vector, vector: Vector, scale: number = 1.0): void {\r\n   var c = color ? color.toString() : 'blue';\r\n   var v = vector.scale(scale); \r\n   ctx.beginPath();\r\n   ctx.strokeStyle = c;\r\n   ctx.moveTo(origin.x, origin.y);\r\n   ctx.lineTo(origin.x + v.x, origin.y + v.y);\r\n   ctx.closePath();\r\n   ctx.stroke(); \r\n}\r\n\r\n\r\n/**\r\n * Represents border radius values\r\n */\r\nexport interface IBorderRadius {\r\n\r\n   /**\r\n    * Top-left\r\n    */\r\n   tl: number;\r\n   /**\r\n    * Top-right\r\n    */\r\n   tr: number;\r\n   /**\r\n    * Bottom-right\r\n    */\r\n   br: number;\r\n   /**\r\n    * Bottom-left\r\n    */\r\n   bl: number;\r\n}\r\n\r\n/**\r\n * Draw a round rectangle on a canvas context\r\n * \r\n * @param ctx The canvas context\r\n * @param x The top-left x coordinate\r\n * @param y The top-left y coordinate\r\n * @param width The width of the rectangle\r\n * @param height The height of the rectangle\r\n * @param radius The border radius of the rectangle\r\n * @param fill The [[Color]] to fill rectangle with\r\n * @param stroke The [[Color]] to stroke rectangle with\r\n */\r\nexport function roundRect(ctx: CanvasRenderingContext2D, \r\n   x: number, y: number, width: number, height: number, \r\n   radius: number|IBorderRadius = 5, stroke: Color = Color.White, fill: Color = null) {\r\n   var br: IBorderRadius;\r\n\r\n   if (typeof radius === 'number') {\r\n      br = {tl: radius, tr: radius, br: radius, bl: radius};\r\n   } else {\r\n      var defaultRadius: IBorderRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\r\n      \r\n      for (var prop in defaultRadius) {\r\n         if (defaultRadius.hasOwnProperty(prop)) {\r\n            let side = <keyof IBorderRadius>prop;\r\n            br[side] = radius[side] || defaultRadius[side];\r\n         }\r\n      }\r\n   }\r\n\r\n   ctx.beginPath();\r\n   ctx.moveTo(x + br.tl, y);\r\n   ctx.lineTo(x + width - br.tr, y);\r\n   ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\r\n   ctx.lineTo(x + width, y + height - br.br);\r\n   ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\r\n   ctx.lineTo(x + br.bl, y + height);\r\n   ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\r\n   ctx.lineTo(x, y + br.tl);\r\n   ctx.quadraticCurveTo(x, y, x + br.tl, y);\r\n   ctx.closePath();\r\n\r\n   if (fill) {\r\n      ctx.fillStyle = fill.toString();\r\n      ctx.fill();\r\n   }\r\n\r\n   if (stroke) {\r\n      ctx.strokeStyle = stroke.toString();\r\n      ctx.stroke();\r\n   }\r\n}\r\n\r\nexport function circle(ctx: CanvasRenderingContext2D, \r\n                        x: number, \r\n                        y: number, \r\n                        radius: number, \r\n                        stroke: Color = Color.White, \r\n                        fill: Color = null) {\r\n   ctx.beginPath();\r\n   ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n   ctx.closePath();\r\n\r\n   if (fill) {\r\n      ctx.fillStyle = fill.toString();\r\n      ctx.fill();\r\n   }\r\n\r\n   if (stroke) {\r\n      ctx.strokeStyle = stroke.toString();\r\n      ctx.stroke();\r\n   }\r\n\r\n}","import { Physics, CollisionResolutionStrategy } from './../Physics';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CircleArea } from './CircleArea';\r\nimport { ICollisionArea } from './ICollisionArea';\r\nimport { PolygonArea } from './PolygonArea';\r\nimport { BoundingBox } from './BoundingBox';\r\n\r\nimport { Vector } from '../Algebra';\r\nimport { Actor } from '../Actor';\r\nimport { Color } from '../Drawing/Color';\r\nimport * as DrawUtil from '../Util/DrawUtil';\r\n\r\nexport class Body {\r\n\r\n   /**\r\n    * Constructs a new physics body associated with an actor\r\n    */\r\n   constructor(public actor: Actor) { }\r\n\r\n   /**\r\n    * [ICollisionArea|Collision area] of this physics body, defines the shape for rigid body collision\r\n    */\r\n   public collisionArea: ICollisionArea = null;\r\n\r\n   /**\r\n    * The (x, y) position of the actor this will be in the middle of the actor if the \r\n    * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\r\n    * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0). \r\n    */\r\n   public pos: Vector = new Vector(0, 0);\r\n\r\n   /**\r\n    * The position of the actor last frame (x, y) in pixels\r\n    */\r\n   public oldPos: Vector = new Vector(0, 0);\r\n\r\n   /**\r\n    * The current velocity vector (vx, vy) of the actor in pixels/second\r\n    */\r\n   public vel: Vector = new Vector(0, 0);\r\n\r\n   /**\r\n    * The velocity of the actor last frame (vx, vy) in pixels/second\r\n    */\r\n   public oldVel: Vector = new Vector(0, 0);\r\n\r\n   /**\r\n    * The curret acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may \r\n    * be useful to simulate a gravitational effect.  \r\n    */\r\n   public acc: Vector = new Vector(0, 0);\r\n\r\n   /**\r\n    * The current torque applied to the actor\r\n    */\r\n   public torque: number = 0;\r\n\r\n   /**\r\n    * The current mass of the actor, mass can be thought of as the resistance to acceleration.\r\n    */\r\n   public mass: number = 1.0;\r\n\r\n   /**\r\n    * The current moment of inertia, moi can be thought of as the resistance to rotation.\r\n    */\r\n   public moi: number = 1000;\r\n\r\n   /**\r\n    * The current \"motion\" of the actor, used to calculated sleep in the physics simulation\r\n    */\r\n   public motion: number = 10;\r\n\r\n   /**\r\n    * The coefficient of friction on this actor\r\n    */\r\n   public friction: number = .99;\r\n\r\n   /**\r\n    * The coefficient of restitution of this actor, represents the amount of energy preserved after collision\r\n    */\r\n   public restitution: number = .2;\r\n\r\n   /** \r\n    * The rotation of the actor in radians\r\n    */\r\n   public rotation: number = 0; // radians\r\n\r\n   /** \r\n    * The rotational velocity of the actor in radians/second\r\n    */\r\n   public rx: number = 0; //radians/sec\r\n\r\n\r\n   private _totalMtv: Vector = Vector.Zero.clone();\r\n\r\n   /**\r\n    * Add minimum translation vectors accumulated during the current frame to resolve collisions.\r\n    */\r\n   public addMtv(mtv: Vector) {\r\n      this._totalMtv.addEqual(mtv);\r\n   }\r\n\r\n   /**\r\n    * Applies the accumulated translation vectors to the actors position\r\n    */\r\n   public applyMtv(): void {\r\n      this.pos.addEqual(this._totalMtv);\r\n      this._totalMtv.setTo(0, 0);\r\n   }\r\n\r\n\r\n   /**\r\n    * Returns the body's [[BoundingBox]] calculated for this instant in world space.\r\n    */\r\n   public getBounds(): BoundingBox {\r\n      if (Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Box) {\r\n         return this.actor.getBounds();\r\n      } else {\r\n         return this.collisionArea.getBounds();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns the actor's [[BoundingBox]] relative to the actors position.\r\n    */\r\n   public getRelativeBounds(): BoundingBox {\r\n      if (Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Box) {\r\n         return this.actor.getRelativeBounds();\r\n      } else {\r\n         return this.actor.getRelativeBounds();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Updates the collision area geometry and internal caches\r\n    */\r\n   public update() {\r\n      if (this.collisionArea) {\r\n         this.collisionArea.recalc();\r\n      }\r\n   }\r\n\r\n\r\n   /**\r\n    * Sets up a box collision area based on the current bounds of the associated actor of this physics body.\r\n    * \r\n    * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n    */\r\n   public useBoxCollision(center: Vector = Vector.Zero.clone()) {\r\n\r\n      this.collisionArea = new PolygonArea({\r\n         body: this,\r\n         points: this.actor.getRelativeBounds().getPoints(),\r\n         pos: center // position relative to actor\r\n      });\r\n\r\n      // in case of a nan moi, coalesce to a safe default\r\n      this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n\r\n   }\r\n\r\n   /**\r\n    * Sets up a polygon collision area based on a list of of points relative to the anchor of the associated actor of this physics body.\r\n    * \r\n    * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported. \r\n    * \r\n    * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n    */\r\n   public usePolygonCollision(points: Vector[], center: Vector = Vector.Zero.clone()) {\r\n      this.collisionArea = new PolygonArea({\r\n         body: this,\r\n         points: points,\r\n         pos: center // position relative to actor\r\n      });\r\n\r\n      // in case of a nan moi, collesce to a safe default\r\n      this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n   }\r\n\r\n   /**\r\n    * Sets up a [[CircleArea|circle collision area]] with a specified radius in pixels.\r\n    * \r\n    * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n    */\r\n   public useCircleCollision(radius?: number, center: Vector = Vector.Zero.clone()) {\r\n      if (!radius) {\r\n         radius = this.actor.getWidth() / 2;\r\n      }\r\n      this.collisionArea = new CircleArea({\r\n         body: this,\r\n         radius: radius,\r\n         pos: center\r\n      });\r\n      this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n   }\r\n\r\n   /**\r\n    * Sets up an [[EdgeArea|edge collision]] with a start point and an end point relative to the anchor of the associated actor \r\n    * of this physics body. \r\n    * \r\n    * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n    */\r\n   public useEdgeCollision(begin: Vector, end: Vector) {\r\n      this.collisionArea = new EdgeArea({\r\n         begin: begin,\r\n         end: end,\r\n         body: this\r\n      });\r\n\r\n      this.moi = this.collisionArea.getMomentOfInertia() || this.moi;\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n\r\n      // Draw motion vectors\r\n      if (Physics.showMotionVectors) {\r\n         DrawUtil.vector(ctx, Color.Yellow, this.pos, (this.acc.add(Physics.acc)));\r\n         DrawUtil.vector(ctx, Color.Red, this.pos, (this.vel));\r\n         DrawUtil.point(ctx, Color.Red, this.pos);\r\n      }\r\n\r\n      if (Physics.showBounds) {\r\n         this.getBounds().debugDraw(ctx, Color.Yellow);\r\n      }\r\n\r\n      if (Physics.showArea) {\r\n         this.collisionArea.debugDraw(ctx, Color.Green);\r\n      }\r\n   }\r\n}   ","import { Body } from './Body';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { ICollisionArea } from './ICollisionArea';\r\nimport { CircleArea } from './CircleArea';\r\nimport { PolygonArea } from './PolygonArea';\r\n\r\nimport { Vector, Ray, Projection } from '../Algebra';\r\nimport { Physics } from '../Physics';\r\nimport { Color } from '../Drawing/Color';\r\n\r\nexport interface IEdgeAreaOptions {\r\n   begin?: Vector;\r\n   end?: Vector;\r\n   body?: Body;\r\n}\r\n\r\nexport class EdgeArea implements ICollisionArea {\r\n   body: Body;\r\n   pos: Vector;\r\n   begin: Vector;\r\n   end: Vector;\r\n\r\n   constructor(options: IEdgeAreaOptions) {\r\n      this.begin = options.begin || Vector.Zero.clone();\r\n      this.end = options.end || Vector.Zero.clone();\r\n      this.body = options.body || null;\r\n\r\n      this.pos = this.getCenter();\r\n   }\r\n\r\n   /**\r\n    * Get the center of the collision area in world coordinates\r\n    */\r\n   public getCenter(): Vector {\r\n      var pos = this.begin.average(this.end).add(this._getBodyPos());\r\n      return pos;\r\n   }\r\n\r\n   private _getBodyPos(): Vector {\r\n      var bodyPos = Vector.Zero.clone();\r\n      if (this.body.pos) {\r\n         bodyPos = this.body.pos;\r\n      }\r\n      return bodyPos;\r\n   }\r\n\r\n   private _getTransformedBegin(): Vector {\r\n      var angle = this.body ? this.body.rotation : 0;\r\n      return this.begin.rotate(angle).add(this._getBodyPos());\r\n   }\r\n\r\n   private _getTransformedEnd(): Vector {\r\n      var angle = this.body ? this.body.rotation : 0;\r\n      return this.end.rotate(angle).add(this._getBodyPos());\r\n   }\r\n\r\n   /** \r\n    * Returns the slope of the line in the form of a vector\r\n    */\r\n   public getSlope(): Vector {\r\n      var begin = this._getTransformedBegin();\r\n      var end = this._getTransformedEnd();\r\n      var distance = begin.distance(end);\r\n      return end.sub(begin).scale(1 / distance);\r\n   }\r\n\r\n   /**\r\n    * Returns the length of the line segment in pixels\r\n    */\r\n   public getLength(): number {\r\n      var begin = this._getTransformedBegin();\r\n      var end = this._getTransformedEnd();\r\n      var distance = begin.distance(end);\r\n      return distance;\r\n   }\r\n\r\n   /**\r\n    * Tests if a point is contained in this collision area\r\n    */\r\n   public contains(): boolean {\r\n      return false;\r\n   }\r\n\r\n\r\n   /**\r\n    * @inheritdoc\r\n    */\r\n   public rayCast(ray: Ray, max: number = Infinity): Vector {\r\n      var numerator = this._getTransformedBegin().sub(ray.pos);\r\n\r\n      // Test is line and ray are parallel and non intersecting\r\n      if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\r\n         return null;\r\n      }\r\n\r\n      // Lines are parallel\r\n      var divisor = (ray.dir.cross(this.getSlope()));\r\n      if (divisor === 0) {\r\n         return null;\r\n      }\r\n\r\n      var t = numerator.cross(this.getSlope()) / divisor;\r\n\r\n      if (t >= 0 && t <= max) {\r\n         var u = (numerator.cross(ray.dir) / divisor) / this.getLength();\r\n         if (u >= 0 && u <= 1) {\r\n            return ray.getPoint(t);\r\n         }\r\n      }\r\n\r\n      return null;\r\n   }\r\n\r\n   /**\r\n    * @inheritdoc\r\n    */\r\n   public collide(area: ICollisionArea): CollisionContact {\r\n      if (area instanceof CircleArea) {\r\n         return CollisionJumpTable.CollideCircleEdge(area, this);\r\n      } else if (area instanceof PolygonArea) {\r\n         return CollisionJumpTable.CollidePolygonEdge(area, this);\r\n      } else if (area instanceof EdgeArea) {\r\n         return CollisionJumpTable.CollideEdgeEdge();\r\n      } else {\r\n         throw new Error(`Edge could not collide with unknown ICollisionArea ${typeof area}`);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Find the point on the shape furthest in the direction specified\r\n    */\r\n   public getFurthestPoint(direction: Vector): Vector {\r\n      var transformedBegin = this._getTransformedBegin();\r\n      var transformedEnd = this._getTransformedEnd();\r\n      if (direction.dot(transformedBegin) > 0) {\r\n         return transformedBegin;\r\n      } else {\r\n         return transformedEnd;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Get the axis aligned bounding box for the circle area\r\n    */\r\n   public getBounds(): BoundingBox {\r\n      var transformedBegin = this._getTransformedBegin();\r\n      var transformedEnd = this._getTransformedEnd();\r\n      return new BoundingBox(Math.min(transformedBegin.x, transformedEnd.x),\r\n         Math.min(transformedBegin.y, transformedEnd.y),\r\n         Math.max(transformedBegin.x, transformedEnd.x),\r\n         Math.max(transformedBegin.y, transformedEnd.y));\r\n   }\r\n\r\n   /**\r\n    * Get the axis associated with the edge\r\n    */\r\n   public getAxes(): Vector[] {\r\n      var e = this._getTransformedEnd().sub(this._getTransformedBegin());\r\n      var edgeNormal = e.normal();\r\n\r\n      var axes = [];\r\n      axes.push(edgeNormal);\r\n      axes.push(edgeNormal.negate());\r\n      axes.push(edgeNormal.normal());\r\n      axes.push(edgeNormal.normal().negate());\r\n      return axes;\r\n   }\r\n\r\n   /**\r\n    * Get the moment of inertia for an edge\r\n    * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n    */\r\n   public getMomentOfInertia(): number {\r\n      var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n      var length = this.end.sub(this.begin).distance() / 2;\r\n      return mass * length * length;\r\n   }\r\n\r\n   /**\r\n    * @inheritdoc\r\n    */\r\n   public recalc(): void {\r\n      // edges don't have any cached data\r\n   }\r\n\r\n   /**\r\n    * Project the edge along a specified axis\r\n    */\r\n   public project(axis: Vector): Projection {\r\n      var scalars = [];\r\n\r\n      var points = [this._getTransformedBegin(), this._getTransformedEnd()];\r\n      var len = points.length;\r\n      for (var i = 0; i < len; i++) {\r\n         scalars.push(points[i].dot(axis));\r\n      }\r\n\r\n      return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red.clone()) {\r\n      ctx.strokeStyle = color.toString();\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.begin.x, this.begin.y);\r\n      ctx.lineTo(this.end.x, this.end.y);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n   }\r\n}","import { Color } from './../Drawing/Color';\r\nimport { Physics } from './../Physics';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { EdgeArea } from './EdgeArea';\r\nimport { CollisionJumpTable } from './CollisionJumpTable';\r\nimport { CircleArea } from './CircleArea';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { ICollisionArea } from './ICollisionArea';\r\nimport { Body } from './Body';\r\nimport { Vector, Line, Ray, Projection } from './../Algebra';\r\n\r\nexport interface IPolygonAreaOptions {\r\n   pos?: Vector;\r\n   points?: Vector[];\r\n   clockwiseWinding?: boolean;\r\n   body?: Body;\r\n}\r\n\r\n/**\r\n * Polygon collision area for detecting collisions for actors, or independently\r\n */\r\nexport class PolygonArea implements ICollisionArea {\r\n   public pos: Vector;\r\n   public points: Vector[];\r\n   public body: Body;\r\n\r\n   private _transformedPoints: Vector[] = [];\r\n   private _axes: Vector[] = [];\r\n   private _sides: Line[] = [];\r\n\r\n   constructor(options: IPolygonAreaOptions) {\r\n      this.pos = options.pos || Vector.Zero.clone();\r\n      var winding = !!options.clockwiseWinding;\r\n      this.points = (winding ? options.points.reverse() : options.points) || [];\r\n      this.body = options.body || null;\r\n\r\n      // calculate initial transformation\r\n      this._calculateTransformation();\r\n   }\r\n\r\n   /**\r\n    * Get the center of the collision area in world coordinates\r\n    */\r\n   public getCenter(): Vector {\r\n      if (this.body) {\r\n         return this.body.pos.add(this.pos);\r\n      }\r\n      return this.pos;\r\n   }\r\n\r\n   /**\r\n    * Calculates the underlying transformation from the body relative space to world space\r\n    */\r\n   private _calculateTransformation() {\r\n      var pos = this.body ? this.body.pos.add(this.pos) : this.pos;\r\n      var angle = this.body ? this.body.rotation : 0;\r\n\r\n      var len = this.points.length;\r\n      this._transformedPoints.length = 0; // clear out old transform\r\n      for (var i = 0; i < len; i++) {\r\n         this._transformedPoints[i] = this.points[i].rotate(angle).add(pos);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Gets the points that make up the polygon in world space, from actor relative space (if specified)\r\n    */\r\n   public getTransformedPoints(): Vector[] {\r\n      if (!this._transformedPoints.length) { this._calculateTransformation(); };\r\n      return this._transformedPoints;\r\n   }\r\n\r\n   /**\r\n    * Gets the sides of the polygon in world space\r\n    */\r\n   public getSides(): Line[] {\r\n      if (this._sides.length) {\r\n         return this._sides;\r\n      }\r\n      var lines = [];\r\n      var points = this.getTransformedPoints();\r\n      var len = points.length;\r\n      for (var i = 0; i < len; i++) {\r\n         lines.push(new Line(points[i], points[(i - 1 + len) % len]));\r\n      }\r\n      this._sides = lines;\r\n      return this._sides;\r\n   }\r\n\r\n   public recalc(): void {\r\n      this._sides.length = 0;\r\n      this._axes.length = 0;\r\n      this._transformedPoints.length = 0;\r\n      this.getTransformedPoints();\r\n      this.getAxes();\r\n      this.getSides();\r\n   }\r\n\r\n   /**\r\n    * Tests if a point is contained in this collision area in world space\r\n    */\r\n   public contains(point: Vector): boolean {\r\n      // Always cast to the right, as long as we cast in a consitent fixed direction we\r\n      // will be fine\r\n      var testRay = new Ray(point, new Vector(1, 0));\r\n      var intersectCount = this.getSides().reduce(function (accum, side) {\r\n         if (testRay.intersect(side) >= 0) {\r\n            return accum + 1;\r\n         }\r\n         return accum;\r\n      }, 0);\r\n\r\n\r\n      if (intersectCount % 2 === 0) {\r\n         return false;\r\n      }\r\n      return true;\r\n   }\r\n\r\n   /**\r\n    * Returns a collision contact if the 2 collision areas collide, otherwise collide will\r\n    * return null.\r\n    * @param area\r\n    */\r\n   public collide(area: ICollisionArea): CollisionContact {\r\n      if (area instanceof CircleArea) {\r\n         return CollisionJumpTable.CollideCirclePolygon(area, this);\r\n      } else if (area instanceof PolygonArea) {\r\n         return CollisionJumpTable.CollidePolygonPolygon(this, area);\r\n      } else if (area instanceof EdgeArea) {\r\n         return CollisionJumpTable.CollidePolygonEdge(this, area);\r\n      } else {\r\n         throw new Error(`Polygon could not collide with unknown ICollisionArea ${typeof area}`);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Find the point on the shape furthest in the direction specified\r\n    */\r\n   public getFurthestPoint(direction: Vector): Vector {\r\n      var pts = this.getTransformedPoints();\r\n      var furthestPoint = null;\r\n      var maxDistance = -Number.MAX_VALUE;\r\n      for (var i = 0; i < pts.length; i++) {\r\n         var distance = direction.dot(pts[i]);\r\n         if (distance > maxDistance) {\r\n            maxDistance = distance;\r\n            furthestPoint = pts[i];\r\n         }\r\n      }\r\n      return furthestPoint;\r\n   }\r\n\r\n   /**\r\n    * Get the axis aligned bounding box for the polygon area\r\n    */\r\n   public getBounds(): BoundingBox {\r\n      // todo there is a faster way to do this\r\n      var points = this.getTransformedPoints();\r\n\r\n      var minX = points.reduce(function (prev, curr) {\r\n         return Math.min(prev, curr.x);\r\n      }, 999999999);\r\n      var maxX = points.reduce(function (prev, curr) {\r\n         return Math.max(prev, curr.x);\r\n      }, -99999999);\r\n\r\n      var minY = points.reduce(function (prev, curr) {\r\n         return Math.min(prev, curr.y);\r\n      }, 9999999999);\r\n      var maxY = points.reduce(function (prev, curr) {\r\n         return Math.max(prev, curr.y);\r\n      }, -9999999999);\r\n\r\n      return new BoundingBox(minX, minY, maxX, maxY);\r\n   }\r\n\r\n   /**\r\n    * Get the moment of inertia for an arbitrary polygon\r\n    * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n    */\r\n   public getMomentOfInertia(): number {\r\n      var mass = this.body ? this.body.mass : Physics.defaultMass;\r\n      var numerator = 0;\r\n      var denominator = 0;\r\n      for (var i = 0; i < this.points.length; i++) {\r\n         var iplusone = (i + 1) % this.points.length;\r\n         var crossTerm = this.points[iplusone].cross(this.points[i]);\r\n         numerator += crossTerm * (this.points[i].dot(this.points[i]) +\r\n            this.points[i].dot(this.points[iplusone]) +\r\n            this.points[iplusone].dot(this.points[iplusone]));\r\n         denominator += crossTerm;\r\n      }\r\n      return (mass / 6) * (numerator / denominator);\r\n   }\r\n\r\n   /**\r\n    * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\r\n    */\r\n   public rayCast(ray: Ray, max: number = Infinity) {\r\n      // find the minimum contact time greater than 0\r\n      // contact times less than 0 are behind the ray and we don't want those\r\n      var sides = this.getSides();\r\n      var len = sides.length;\r\n      var minContactTime = Number.MAX_VALUE;\r\n      var contactIndex = -1;\r\n      for (var i = 0; i < len; i++) {\r\n         var contactTime = ray.intersect(sides[i]);\r\n         if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\r\n            minContactTime = contactTime;\r\n            contactIndex = i;\r\n         }\r\n      }\r\n\r\n      // contact was found\r\n      if (contactIndex >= 0) {\r\n         return ray.getPoint(minContactTime);\r\n      }\r\n\r\n      // no contact found\r\n      return null;\r\n   }\r\n\r\n   /**\r\n    * Get the axis associated with the edge\r\n    */\r\n   public getAxes(): Vector[] {\r\n      if (this._axes.length) { return this._axes; }\r\n\r\n      var axes = [];\r\n      var points = this.getTransformedPoints();\r\n      var len = points.length;\r\n      for (var i = 0; i < len; i++) {\r\n         axes.push(points[i].sub(points[(i + 1) % len]).normal());\r\n      }\r\n      this._axes = axes;\r\n      return this._axes;\r\n   }\r\n\r\n   /**\r\n    * Perform Separating Axis test against another polygon, returns null if no overlap in polys\r\n    * Reference http://www.dyn4j.org/2010/01/sat/\r\n    */\r\n   public testSeparatingAxisTheorem(other: PolygonArea): Vector {\r\n      var poly1 = this;\r\n      var poly2 = other;\r\n      var axes = poly1.getAxes().concat(poly2.getAxes());\r\n\r\n      var minOverlap = Number.MAX_VALUE;\r\n      var minAxis = null;\r\n      var minIndex = -1;\r\n      for (var i = 0; i < axes.length; i++) {\r\n         var proj1 = poly1.project(axes[i]);\r\n         var proj2 = poly2.project(axes[i]);\r\n         var overlap = proj1.getOverlap(proj2);\r\n         if (overlap <= 0) {\r\n            return null;\r\n         } else {\r\n            if (overlap < minOverlap) {\r\n               minOverlap = overlap;\r\n               minAxis = axes[i];\r\n               minIndex = i;\r\n            }\r\n         }\r\n      }\r\n\r\n      // Sanity check\r\n      if (minIndex === -1) {\r\n         return null;\r\n      }\r\n\r\n      return minAxis.normalize().scale(minOverlap);\r\n   }\r\n\r\n   /**\r\n    * Project the edges of the polygon along a specified axis\r\n    */\r\n   public project(axis: Vector): Projection {\r\n      var points = this.getTransformedPoints();\r\n      var len = points.length;\r\n      var min = Number.MAX_VALUE;\r\n      var max = -Number.MAX_VALUE;\r\n      for (var i = 0; i < len; i++) {\r\n         var scalar = points[i].dot(axis);\r\n         min = Math.min(min, scalar);\r\n         max = Math.max(max, scalar);\r\n      }\r\n\r\n      return new Projection(min, max);\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red.clone()) {\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = color.toString();\r\n      // Iterate through the supplied points and construct a 'polygon'\r\n      var firstPoint = this.getTransformedPoints()[0];\r\n      ctx.moveTo(firstPoint.x, firstPoint.y);\r\n      this.getTransformedPoints().forEach(function (point) {\r\n         ctx.lineTo(point.x, point.y);\r\n      });\r\n      ctx.lineTo(firstPoint.x, firstPoint.y);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n   }\r\n}","import { PolygonArea } from './PolygonArea';\r\n\r\nimport { Actor } from '../Actor';\r\nimport { Vector, Ray } from '../Algebra';\r\nimport { Color } from '../Drawing/Color';\r\n\r\n/**\r\n * Interface all collidable objects must implement\r\n */\r\nexport interface ICollidable {\r\n   /** \r\n    * Test whether this bounding box collides with another one.\r\n    *\r\n    * @param collidable  Other collidable to test\r\n    * @returns Vector The intersection vector that can be used to resolve the collision. \r\n    * If there is no collision, `null` is returned.\r\n    */\r\n   collides(collidable: ICollidable): Vector;\r\n   /**\r\n    * Tests wether a point is contained within the collidable\r\n    * @param point  The point to test\r\n    */\r\n   contains(point: Vector): boolean;\r\n\r\n   debugDraw(ctx: CanvasRenderingContext2D): void;\r\n\r\n}\r\n\r\n/**\r\n * Axis Aligned collision primitive for Excalibur. \r\n */\r\nexport class BoundingBox implements ICollidable {\r\n\r\n   /**\r\n    * @param left    x coordinate of the left edge\r\n    * @param top     y coordinate of the top edge\r\n    * @param right   x coordinate of the right edge\r\n    * @param bottom  y coordinate of the bottom edge\r\n    */\r\n   constructor(public left: number = 0, public top: number = 0, public right: number = 0, public bottom: number = 0) { }\r\n\r\n   public static fromPoints(points: Vector[]): BoundingBox {\r\n      var minX = Infinity;\r\n      var minY = Infinity;\r\n      var maxX = -Infinity;\r\n      var maxY = -Infinity;\r\n      for (var i = 0; i < points.length; i++) {\r\n         if (points[i].x < minX) {\r\n            minX = points[i].x;\r\n         }\r\n         if (points[i].x > maxX) {\r\n            maxX = points[i].x;\r\n         }\r\n         if (points[i].y < minY) {\r\n            minY = points[i].y;\r\n         }\r\n         if (points[i].y > maxY) {\r\n            maxY = points[i].y;\r\n         }\r\n      }\r\n      return new BoundingBox(minX, minY, maxX, maxY);\r\n   }\r\n\r\n   /**\r\n    * Returns the calculated width of the bounding box\r\n    */\r\n   public getWidth() {\r\n      return this.right - this.left;\r\n   }\r\n\r\n   /**\r\n    * Returns the calculated height of the bounding box\r\n    */\r\n   public getHeight() {\r\n      return this.bottom - this.top;\r\n   }\r\n\r\n   /**\r\n    * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default\r\n    */\r\n   public rotate(angle: number, point: Vector = Vector.Zero.clone()): BoundingBox {\r\n      var points = this.getPoints().map((p) => p.rotate(angle, point));\r\n      return BoundingBox.fromPoints(points);\r\n   }\r\n\r\n   /**\r\n    * Returns the perimeter of the bounding box\r\n    */\r\n   public getPerimeter(): number {\r\n      var wx = this.getWidth();\r\n      var wy = this.getHeight();\r\n      return 2 * (wx + wy);\r\n   }\r\n\r\n   public getPoints(): Vector[] {\r\n      var results = [];\r\n      results.push(new Vector(this.left, this.top));\r\n      results.push(new Vector(this.right, this.top));\r\n      results.push(new Vector(this.right, this.bottom));\r\n      results.push(new Vector(this.left, this.bottom));\r\n      return results;\r\n   }\r\n\r\n   /**\r\n    * Creates a Polygon collision area from the points of the bounding box\r\n    */\r\n   public toPolygon(actor?: Actor): PolygonArea {\r\n      return new PolygonArea({\r\n         body: actor ? actor.body : null,\r\n         points: this.getPoints(),\r\n         pos: Vector.Zero.clone()\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Determines whether a ray intersects with a bounding box\r\n    */\r\n   public rayCast(ray: Ray, farClipDistance = Infinity): boolean {\r\n      // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/ \r\n      var tmin = -Infinity;\r\n      var tmax = +Infinity;\r\n\r\n      var xinv = ray.dir.x === 0 ? 999999999999 : (1 / ray.dir.x);\r\n      var yinv = ray.dir.y === 0 ? 999999999999 : (1 / ray.dir.y);\r\n      \r\n      var tx1 = (this.left - ray.pos.x) * xinv;\r\n      var tx2 = (this.right - ray.pos.x) * xinv;\r\n      tmin = Math.min(tx1, tx2);\r\n      tmax = Math.max(tx1, tx2);\r\n            \r\n      var ty1 = (this.top - ray.pos.y) * yinv; \r\n      var ty2 = (this.bottom - ray.pos.y) * yinv;\r\n      tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n      tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n      \r\n      return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\r\n   }\r\n\r\n   public rayCastTime(ray: Ray, farClipDistance = Infinity): number {\r\n       // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/ \r\n      var tmin = -Infinity;\r\n      var tmax = +Infinity;\r\n\r\n      var xinv = ray.dir.x === 0 ? 999999999999 : (1 / ray.dir.x);\r\n      var yinv = ray.dir.y === 0 ? 999999999999 : (1 / ray.dir.y);\r\n      \r\n      var tx1 = (this.left - ray.pos.x) * xinv;\r\n      var tx2 = (this.right - ray.pos.x) * xinv;\r\n      tmin = Math.min(tx1, tx2);\r\n      tmax = Math.max(tx1, tx2);\r\n            \r\n      var ty1 = (this.top - ray.pos.y) * yinv; \r\n      var ty2 = (this.bottom - ray.pos.y) * yinv;\r\n      tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n      tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n\r\n      if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\r\n         return tmin;\r\n      }\r\n      return -1;\r\n   }\r\n\r\n   /**\r\n    * Tests whether a point is contained within the bounding box\r\n    * @param p  The point to test\r\n    */\r\n   public contains(p: Vector): boolean;\r\n\r\n   /**\r\n    * Tests whether another bounding box is totally contained in this one\r\n    * @param bb  The bounding box to test\r\n    */\r\n   public contains(bb: BoundingBox): boolean;\r\n   public contains(val: any): boolean {\r\n      if (val instanceof Vector) {\r\n         return (this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x);\r\n      } else if (val instanceof BoundingBox) {\r\n         if (this.left < val.left &&\r\n            this.top < val.top &&\r\n            val.bottom < this.bottom &&\r\n            val.right < this.right) {\r\n            return true;\r\n         }\r\n         return false;\r\n      }\r\n      return false;\r\n   }\r\n\r\n   /**\r\n    * Combines this bounding box and another together returning a new bounding box\r\n    * @param other  The bounding box to combine\r\n    */\r\n   public combine(other: BoundingBox): BoundingBox {\r\n      var compositeBB = new BoundingBox(Math.min(this.left, other.left),\r\n         Math.min(this.top, other.top),\r\n         Math.max(this.right, other.right),\r\n         Math.max(this.bottom, other.bottom));\r\n      return compositeBB;\r\n   }\r\n\r\n   /** \r\n    * Test wether this bounding box collides with another returning,\r\n    * the intersection vector that can be used to resolve the collision. If there\r\n    * is no collision null is returned.\r\n    * @param collidable  Other collidable to test\r\n    */\r\n   public collides(collidable: ICollidable): Vector {\r\n      if (collidable instanceof BoundingBox) {\r\n         var other: BoundingBox = <BoundingBox>collidable;\r\n         var totalBoundingBox = this.combine(other);\r\n\r\n         // If the total bounding box is less than the sum of the 2 bounds then there is collision\r\n         if (totalBoundingBox.getWidth() < other.getWidth() + this.getWidth() &&\r\n            totalBoundingBox.getHeight() < other.getHeight() + this.getHeight()) {\r\n            // collision\r\n            var overlapX = 0;\r\n            if (this.right >= other.left && this.right <= other.right) {\r\n               overlapX = other.left - this.right;\r\n            } else {\r\n               overlapX = other.right - this.left;\r\n            }\r\n\r\n            var overlapY = 0;\r\n            if (this.top <= other.bottom && this.top >= other.top) {\r\n               overlapY = other.bottom - this.top;\r\n            } else {\r\n               overlapY = other.top - this.bottom;\r\n            }\r\n\r\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n               return new Vector(overlapX, 0);\r\n            } else {\r\n               return new Vector(0, overlapY);\r\n            }\r\n         } else {\r\n            return null;\r\n         }\r\n\r\n      }\r\n\r\n      return null;\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Yellow) {\r\n      ctx.strokeStyle = color.toString();\r\n      ctx.strokeRect(this.left, this.top, this.getWidth(), this.getHeight());\r\n   }\r\n}\r\n","import * as Actions from './Action';\r\nimport { RotationType } from './RotationType';\r\n\r\nimport { Actor } from '../Actor';\r\nimport { Promise } from '../Promises';\r\nimport { EasingFunction, EasingFunctions } from '../Util/EasingFunctions';\r\n\r\n/**\r\n * The fluent Action API allows you to perform \"actions\" on\r\n * [[Actor|Actors]] such as following, moving, rotating, and\r\n * more. You can implement your own actions by implementing\r\n * the [[IAction]] interface.\r\n *\r\n * [[include:Actions.md]]\r\n */\r\nexport class ActionContext {\r\n   private _actors: Actor[] = [];\r\n   private _queues: Actions.ActionQueue[] = [];\r\n\r\n   constructor();\r\n   constructor(actor: Actor);\r\n   constructor(actors: Actor[]);\r\n   constructor() {\r\n      if (arguments !== null) {\r\n         this._actors = Array.prototype.slice.call(arguments, 0);\r\n         this._queues = this._actors.map((a) => {\r\n            return a.actionQueue;\r\n         });\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Clears all queued actions from the Actor\r\n    */\r\n   public clearActions(): void {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].clearActions();\r\n      }\r\n   }\r\n\r\n   public addActorToContext(actor: Actor) {\r\n      this._actors.push(actor);\r\n      // if we run into problems replace the line below with:\r\n      this._queues.push(actor.actionQueue);\r\n   }\r\n\r\n   public removeActorFromContext(actor: Actor) {\r\n      var index = this._actors.indexOf(actor);\r\n      if (index > -1) {\r\n         this._actors.splice(index, 1);\r\n         this._queues.splice(index, 1);\r\n      }\r\n   }\r\n   \r\n      /**\r\n       * This method will move an actor to the specified `x` and `y` position over the \r\n       * specified duration using a given [[EasingFunctions]] and return back the actor. This \r\n       * method is part of the actor 'Action' fluent API allowing action chaining.\r\n       * @param x         The x location to move the actor to\r\n       * @param y         The y location to move the actor to\r\n       * @param duration  The time it should take the actor to move to the new location in milliseconds\r\n       * @param easingFcn Use [[EasingFunctions]] or a custom function to use to calculate position\r\n       */\r\n   public easeTo(x: number,\r\n                  y: number,\r\n                  duration: number,\r\n                  easingFcn: EasingFunction = EasingFunctions.Linear) {\r\n\r\n      var i = 0, len = this._queues.length;\r\n      \r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.EaseTo(this._actors[i], x, y, duration, easingFcn));\r\n      }\r\n      \r\n      return this;       \r\n   }\r\n\r\n   /**\r\n    * This method will move an actor to the specified x and y position at the \r\n    * speed specified (in pixels per second) and return back the actor. This \r\n    * method is part of the actor 'Action' fluent API allowing action chaining.\r\n    * @param x      The x location to move the actor to\r\n    * @param y      The y location to move the actor to\r\n    * @param speed  The speed in pixels per second to move\r\n    */\r\n   public moveTo(x: number, y: number, speed: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.MoveTo(this._actors[i], x, y, speed));\r\n      }\r\n\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will move an actor to the specified x and y position by a \r\n    * certain time (in milliseconds). This method is part of the actor \r\n    * 'Action' fluent API allowing action chaining.\r\n    * @param x     The x location to move the actor to\r\n    * @param y     The y location to move the actor to\r\n    * @param time  The time it should take the actor to move to the new location in milliseconds\r\n    */\r\n   public moveBy(x: number, y: number, time: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.MoveBy(this._actors[i], x, y, time));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will rotate an actor to the specified angle at the speed\r\n    * specified (in radians per second) and return back the actor. This \r\n    * method is part of the actor 'Action' fluent API allowing action chaining.\r\n    * @param angleRadians  The angle to rotate to in radians\r\n    * @param speed         The angular velocity of the rotation specified in radians per second\r\n    * @param rotationType  The [[RotationType]] to use for this rotation\r\n    */\r\n   public rotateTo(angleRadians: number, speed: number, rotationType?: RotationType): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RotateTo(this._actors[i], angleRadians, speed, rotationType));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will rotate an actor to the specified angle by a certain\r\n    * time (in milliseconds) and return back the actor. This method is part\r\n    * of the actor 'Action' fluent API allowing action chaining.\r\n    * @param angleRadians  The angle to rotate to in radians\r\n    * @param time          The time it should take the actor to complete the rotation in milliseconds\r\n    * @param rotationType  The [[RotationType]] to use for this rotation\r\n    */\r\n   public rotateBy(angleRadians: number, time: number, rotationType?: RotationType): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n            this._queues[i].add(new Actions.RotateBy(this._actors[i], angleRadians, time, rotationType));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will scale an actor to the specified size at the speed\r\n    * specified (in magnitude increase per second) and return back the \r\n    * actor. This method is part of the actor 'Action' fluent API allowing \r\n    * action chaining.\r\n    * @param sizeX   The scaling factor to apply on X axis\r\n    * @param sizeY   The scaling factor to apply on Y axis\r\n    * @param speedX  The speed of scaling specified in magnitude increase per second on X axis\r\n    * @param speedY  The speed of scaling specified in magnitude increase per second on Y axis\r\n    */\r\n   public scaleTo(sizeX: number, sizeY: number, speedX: number, speedY: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.ScaleTo(this._actors[i], sizeX, sizeY, speedX, speedY));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will scale an actor to the specified size by a certain time\r\n    * (in milliseconds) and return back the actor. This method is part of the\r\n    * actor 'Action' fluent API allowing action chaining.\r\n    * @param sizeX   The scaling factor to apply on X axis\r\n    * @param sizeY   The scaling factor to apply on Y axis\r\n    * @param time    The time it should take to complete the scaling in milliseconds\r\n    */\r\n   public scaleBy(sizeX: number, sizeY: number, time: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.ScaleBy(this._actors[i], sizeX, sizeY, time));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will cause an actor to blink (become visible and not \r\n    * visible). Optionally, you may specify the number of blinks. Specify the amount of time \r\n    * the actor should be visible per blink, and the amount of time not visible.\r\n    * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n    * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n    * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n    * @param numBlinks       The number of times to blink\r\n    */\r\n   public blink(timeVisible: number, timeNotVisible: number, numBlinks: number = 1): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.Blink(this._actors[i], timeVisible, timeNotVisible, numBlinks));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will cause an actor's opacity to change from its current value\r\n    * to the provided value by a specified time (in milliseconds). This method is\r\n    * part of the actor 'Action' fluent API allowing action chaining.\r\n    * @param opacity  The ending opacity\r\n    * @param time     The time it should take to fade the actor (in milliseconds)\r\n    */\r\n   public fade(opacity: number, time: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.Fade(this._actors[i], opacity, time));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will delay the next action from executing for a certain \r\n    * amount of time (in milliseconds). This method is part of the actor \r\n    * 'Action' fluent API allowing action chaining.\r\n    * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n    */\r\n   public delay(time: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.Delay(this._actors[i], time));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will add an action to the queue that will remove the actor from the \r\n    * scene once it has completed its previous actions. Any actions on the\r\n    * action queue after this action will not be executed.\r\n    */\r\n   public die(): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.Die(this._actors[i]));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method allows you to call an arbitrary method as the next action in the\r\n    * action queue. This is useful if you want to execute code in after a specific\r\n    * action, i.e An actor arrives at a destination after traversing a path\r\n    */\r\n   public callMethod(method: () => any): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.CallMethod(this._actors[i], method));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will cause the actor to repeat all of the previously \r\n    * called actions a certain number of times. If the number of repeats \r\n    * is not specified it will repeat forever. This method is part of \r\n    * the actor 'Action' fluent API allowing action chaining\r\n    * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions \r\n    * will repeat forever\r\n    */\r\n   public repeat(times?: number): ActionContext {\r\n      if (!times) {\r\n         this.repeatForever();\r\n         return this;\r\n      }\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.Repeat(this._actors[i], times, this._actors[i].actionQueue.getActions()));\r\n      }\r\n\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will cause the actor to repeat all of the previously \r\n    * called actions forever. This method is part of the actor 'Action'\r\n    * fluent API allowing action chaining.\r\n    */\r\n   public repeatForever(): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         this._queues[i].add(new Actions.RepeatForever(this._actors[i], this._actors[i].actionQueue.getActions()));\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will cause the actor to follow another at a specified distance\r\n    * @param actor           The actor to follow\r\n    * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n    */\r\n   public follow(actor: Actor, followDistance?: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         if (followDistance === undefined) {\r\n            this._queues[i].add(new Actions.Follow(this._actors[i], actor));\r\n         } else {\r\n            this._queues[i].add(new Actions.Follow(this._actors[i], actor, followDistance));\r\n         }\r\n      }\r\n      return this;\r\n   }\r\n\r\n   /**\r\n    * This method will cause the actor to move towards another until they \r\n    * collide \"meet\" at a specified speed.\r\n    * @param actor  The actor to meet\r\n    * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n    */\r\n   public meet(actor: Actor, speed?: number): ActionContext {\r\n      var i = 0, len = this._queues.length;\r\n      for (i; i < len; i++) {\r\n         if (speed === undefined) {\r\n            this._queues[i].add(new Actions.Meet(this._actors[i], actor));\r\n         } else {\r\n            this._queues[i].add(new Actions.Meet(this._actors[i], actor, speed));\r\n         }\r\n      }\r\n      return this;\r\n   }\r\n\r\n\r\n   /**\r\n    * Returns a promise that resolves when the current action queue up to now\r\n    * is finished.\r\n    */\r\n   public asPromise<T>(): Promise<T> {\r\n      var promises = this._queues.map((q, i) => {\r\n         var temp = new Promise<T>();\r\n         q.add(new Actions.CallMethod(this._actors[i], () => {\r\n            temp.resolve();\r\n         }));\r\n         return temp;\r\n      });\r\n      return Promise.join.apply(this, promises);\r\n   }\r\n\r\n}","import { BoundingBox } from './Collision/BoundingBox';\r\nimport { GameEvent } from './Events';\r\nimport { Vector } from './Algebra';\r\nimport { Scene } from './Scene';\r\nimport { ActionContext } from './Actions/ActionContext';\r\nimport { Actor } from './Actor';\r\nimport { Logger } from './Util/Log';\r\nimport { IEvented } from './Interfaces/IEvented';\r\nimport { IActionable } from './Actions/IActionable';\r\nimport { Class } from './Class';\r\n\r\n\r\n/**\r\n * Groups are used for logically grouping Actors so they can be acted upon\r\n * in bulk.\r\n *\r\n * [[include:Groups.md]]\r\n */\r\nexport class Group extends Class implements IActionable, IEvented {\r\n\r\n   private _logger: Logger = Logger.getInstance();\r\n   private _members: Actor[] = [];\r\n\r\n   public actions: ActionContext = new ActionContext();\r\n\r\n\r\n   constructor(public name: string, public scene: Scene) {\r\n      super();\r\n      if (scene == null) {\r\n         this._logger.error('Invalid constructor arguments passed to Group: ', name, ', scene must not be null!');\r\n      } else {\r\n         var existingGroup = scene.groups[name];\r\n         if (existingGroup) {\r\n            this._logger.warn('Group with name', name, 'already exists. This new group will replace it.');\r\n         }\r\n         scene.groups[name] = this;\r\n      }\r\n   }\r\n\r\n   public add(actor: Actor): void;\r\n   public add(actors: Actor[]): void;\r\n   public add(actorOrActors: any): void {\r\n      if (actorOrActors instanceof Actor) {\r\n         actorOrActors = [].concat(actorOrActors);\r\n      }\r\n\r\n      var i = 0, len = actorOrActors.length, groupIdx: number;\r\n\r\n      for (i; i < len; i++) {\r\n         groupIdx = this.getMembers().indexOf(actorOrActors[i]);\r\n         if (groupIdx === -1) {\r\n            this._members.push(actorOrActors[i]);\r\n            this.scene.add(actorOrActors[i]);\r\n            this.actions.addActorToContext(actorOrActors[i]);\r\n            this.eventDispatcher.wire(actorOrActors[i].eventDispatcher);\r\n         }\r\n      }\r\n   }\r\n\r\n   public remove(actor: Actor): void {\r\n      var index = this._members.indexOf(actor);\r\n      if (index > -1) {\r\n         this._members.splice(index, 1);\r\n         this.actions.removeActorFromContext(actor);\r\n         this.eventDispatcher.unwire(actor.eventDispatcher);\r\n      }\r\n   }\r\n\r\n   public move(vector: Vector): void;\r\n   public move(dx: number, dy: number): void;\r\n   public move(args: Vector | number): void {\r\n      var i = 0, members = this.getMembers(), len = members.length;\r\n\r\n      if (arguments.length === 1 && args instanceof Vector) {\r\n         for (i; i < len; i++) {\r\n            members[i].pos.x += args.x;\r\n            members[i].pos.y += args.y;\r\n         }\r\n      } else if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n         var x = arguments[0];\r\n         var y = arguments[1];\r\n\r\n         for (i; i < len; i++) {\r\n            members[i].pos.x += x;\r\n            members[i].pos.y += y;\r\n         }\r\n      } else {\r\n         this._logger.error('Invalid arguments passed to group move', this.name, 'args:', arguments);\r\n      }\r\n\r\n   }\r\n\r\n   public rotate(angle: number): void {\r\n      if (typeof angle !== 'number') {\r\n         this._logger.error('Invalid arguments passed to group rotate', this.name, 'args:', arguments);\r\n         return;\r\n      }\r\n\r\n      for (let member of this.getMembers()) {\r\n         member.rotation += angle;\r\n      }\r\n   }\r\n\r\n\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void) {\r\n      this.eventDispatcher.on(eventName, handler);\r\n   }\r\n\r\n   public off(eventName: string, handler?: (event?: GameEvent<any>) => void) {\r\n      this.eventDispatcher.off(eventName, handler);\r\n   }\r\n\r\n   public emit(topic: string, event?: GameEvent<any>) {\r\n      this.eventDispatcher.emit(topic, event);\r\n   }\r\n\r\n   public contains(actor: Actor): boolean {\r\n      return this.getMembers().indexOf(actor) > -1;\r\n   }\r\n\r\n   public getMembers(): Actor[] {\r\n      return this._members;\r\n   }\r\n\r\n   public getRandomMember(): Actor {\r\n      return this._members[Math.floor(Math.random() * this._members.length)];\r\n   }\r\n\r\n   public getBounds(): BoundingBox {\r\n      return this.getMembers().map(a => a.getBounds()).reduce((prev: BoundingBox, curr: BoundingBox) => {\r\n         return prev.combine(curr);\r\n      });\r\n   }\r\n\r\n}","/**\r\n * These effects can be applied to any bitmap image but are mainly used\r\n * for [[Sprite]] effects or [[Animation]] effects.\r\n *\r\n * [[include:SpriteEffects.md]]\r\n */\r\n\r\n/**\r\n * @typedoc\r\n */\r\n\r\nimport { Color } from './Color';\r\n\r\n/**\r\n * The interface that all sprite effects must implement\r\n */\r\nexport interface ISpriteEffect {\r\n   /**\r\n    * Should update individual pixels values\r\n    * @param x          The pixel's x coordinate\r\n    * @param y          The pixel's y coordinate\r\n    * @param imageData  The sprite's raw pixel data\r\n    */\r\n   updatePixel(x: number, y: number, imageData: ImageData): void;\r\n}\r\n\r\n/**\r\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\r\n */\r\nexport class Grayscale implements ISpriteEffect {\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      var avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\r\n      pixel[firstPixel + 0] = avg;\r\n      pixel[firstPixel + 1] = avg;\r\n      pixel[firstPixel + 2] = avg;\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\r\n */\r\nexport class Invert implements ISpriteEffect {\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\r\n      pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\r\n      pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\r\n */\r\nexport class Opacity implements ISpriteEffect {\r\n\r\n   /**\r\n    * @param opacity  The new opacity of the sprite from 0-1.0 \r\n    */\r\n   constructor(public opacity: number) {}\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      if (pixel[firstPixel + 3] !== 0) {\r\n         pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an \r\n * average of the original color and the provided color\r\n */\r\nexport class Colorize implements ISpriteEffect {\r\n   /**\r\n    * @param color  The color to apply to the sprite\r\n    */\r\n   constructor(public color: Color) {}\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      if (pixel[firstPixel + 3] !== 0) {\r\n         pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\r\n         pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\r\n         pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\r\n      }\r\n   }\r\n}\r\n\r\n\r\n/**\r\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\r\n */\r\nexport class Lighten implements ISpriteEffect {\r\n   /**\r\n    * @param factor  The factor of the effect between 0-1\r\n    */\r\n   constructor(public factor: number = 0.1) { }\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      var color = Color.fromRGB(pixel[firstPixel + 0], \r\n                                 pixel[firstPixel + 1], \r\n                                 pixel[firstPixel + 2], \r\n                                 pixel[firstPixel + 3]).lighten(this.factor);\r\n      pixel[firstPixel + 0] = color.r;\r\n      pixel[firstPixel + 1] = color.g;\r\n      pixel[firstPixel + 2] = color.b;\r\n      pixel[firstPixel + 3] = color.a;\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\r\n */\r\nexport class Darken implements ISpriteEffect {\r\n   /**\r\n    * @param factor  The factor of the effect between 0-1\r\n    */\r\n   constructor(public factor: number = 0.1) { }\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      var color = Color.fromRGB(pixel[firstPixel + 0], \r\n                                 pixel[firstPixel + 1], \r\n                                 pixel[firstPixel + 2], \r\n                                 pixel[firstPixel + 3]).darken(this.factor);\r\n      pixel[firstPixel + 0] = color.r;\r\n      pixel[firstPixel + 1] = color.g;\r\n      pixel[firstPixel + 2] = color.b;\r\n      pixel[firstPixel + 3] = color.a;\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\r\n */\r\nexport class Saturate implements ISpriteEffect {\r\n   /**\r\n    * @param factor  The factor of the effect between 0-1\r\n    */\r\n   constructor(public factor: number = 0.1) { }\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      var color = Color.fromRGB(pixel[firstPixel + 0], \r\n                                 pixel[firstPixel + 1], \r\n                                 pixel[firstPixel + 2], \r\n                                 pixel[firstPixel + 3]).saturate(this.factor);\r\n      pixel[firstPixel + 0] = color.r;\r\n      pixel[firstPixel + 1] = color.g;\r\n      pixel[firstPixel + 2] = color.b;\r\n      pixel[firstPixel + 3] = color.a;\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\r\n */\r\nexport class Desaturate implements ISpriteEffect {\r\n   /**\r\n    * @param factor  The factor of the effect between 0-1\r\n    */\r\n   constructor(public factor: number = 0.1) { }\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      var color = Color.fromRGB(pixel[firstPixel + 0], \r\n                                 pixel[firstPixel + 1], \r\n                                 pixel[firstPixel + 2],\r\n                                 pixel[firstPixel + 3]).desaturate(this.factor);\r\n      pixel[firstPixel + 0] = color.r;\r\n      pixel[firstPixel + 1] = color.g;\r\n      pixel[firstPixel + 2] = color.b;\r\n      pixel[firstPixel + 3] = color.a;\r\n   }\r\n}\r\n\r\n/**\r\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\r\n * a given color\r\n */\r\nexport class Fill implements ISpriteEffect {\r\n\r\n   /**\r\n    * @param color  The color to apply to the sprite\r\n    */\r\n   constructor(public color: Color) {}\r\n   updatePixel(x: number, y: number, imageData: ImageData): void {\r\n      var firstPixel = (x + y * imageData.width) * 4;\r\n      var pixel = imageData.data;\r\n      if (pixel[firstPixel + 3] !== 0) {\r\n         pixel[firstPixel + 0] = this.color.r;\r\n         pixel[firstPixel + 1] = this.color.g;\r\n         pixel[firstPixel + 2] = this.color.b;\r\n      }\r\n   }\r\n}\r\n   ","import { ILoadable } from '../Interfaces/ILoadable';\r\nimport { Class } from '../Class';\r\nimport { Engine } from '../Engine';\r\nimport { Promise } from '../Promises';\r\nimport { Logger } from '../Util/Log';\r\n\r\n/**\r\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\r\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\r\n *\r\n * [[include:Resources.md]]\r\n */\r\nexport class Resource<T> extends Class implements ILoadable {\r\n   public data: T = null;\r\n   public logger: Logger = Logger.getInstance();\r\n   private _engine: Engine;\r\n\r\n   /**\r\n    * @param path          Path to the remote resource\r\n    * @param responseType  The Content-Type to expect (e.g. `application/json`)\r\n    * @param bustCache     Whether or not to cache-bust requests\r\n    */\r\n   constructor(public path: string, public responseType: string, public bustCache: boolean = true) {\r\n         super();\r\n   }\r\n\r\n   /**\r\n    * Returns true if the Resource is completely loaded and is ready\r\n    * to be drawn.\r\n    */\r\n   public isLoaded(): boolean {\r\n      return this.data !== null;\r\n   }\r\n\r\n   public wireEngine(engine: Engine) {\r\n      this._engine = engine;\r\n   }\r\n\r\n   private _cacheBust(uri: string): string {\r\n      var query: RegExp = /\\?\\w*=\\w*/;\r\n      if (query.test(uri)) {\r\n         uri += ('&__=' + Date.now());\r\n      } else {\r\n         uri += ('?__=' + Date.now());\r\n      }\r\n      return uri;\r\n   }\r\n\r\n   private _start() {\r\n      this.logger.debug('Started loading resource ' + this.path);\r\n   }\r\n\r\n   /**\r\n    * Begin loading the resource and returns a promise to be resolved on completion\r\n    */\r\n   public load(): Promise<T> {\r\n      var complete = new Promise<T>();\r\n      \r\n      // Exit early if we already have data\r\n      if (this.data !== null) {\r\n         this.logger.debug('Already have data for resource', this.path);\r\n         complete.resolve(this.data);\r\n         this.oncomplete();\r\n         return complete;\r\n      }\r\n      \r\n      var request = new XMLHttpRequest();\r\n      request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\r\n      request.responseType = this.responseType;\r\n      request.onloadstart = () => { this._start(); };\r\n      request.onprogress = this.onprogress;\r\n      request.onerror = this.onerror;\r\n      request.onload = () => {\r\n\r\n         // XHR on file:// success status is 0, such as with PhantomJS\r\n         if (request.status !== 0 && request.status !== 200) {\r\n            this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\r\n            this.onerror(request.response);\r\n            complete.resolve(request.response);\r\n            return;\r\n         }\r\n\r\n         this.data = this.processData(request.response);\r\n\r\n         this.oncomplete();\r\n         this.logger.debug('Completed loading resource', this.path);\r\n         complete.resolve(this.data);\r\n      };\r\n      request.send();\r\n\r\n      return complete;\r\n   }\r\n\r\n\r\n   /**\r\n    * Returns the loaded data once the resource is loaded\r\n    */\r\n   public getData(): any {\r\n      return this.data;\r\n   }\r\n   \r\n   /**\r\n    * Sets the data for this resource directly\r\n    */\r\n   public setData(data: any) {\r\n      this.data = this.processData(data);         \r\n   }\r\n\r\n   /**\r\n    * This method is meant to be overriden to handle any additional\r\n    * processing. Such as decoding downloaded audio bits.\r\n    */\r\n   public processData(data: T): any {\r\n      // Handle any additional loading after the xhr has completed.\r\n      return URL.createObjectURL(data);\r\n   }\r\n\r\n   public onprogress: (e: any) => void = () => { return; };\r\n\r\n   public oncomplete: () => void = () => { return; };\r\n\r\n   public onerror: (e: any) => void = () => { return; };\r\n}","import { Resource } from './Resource';\r\nimport { Promise } from '../Promises';\r\nimport { Sprite } from '../Drawing/Sprite';\r\n\r\n/**\r\n * The [[Texture]] object allows games built in Excalibur to load image resources.\r\n * [[Texture]] is an [[ILoadable]] which means it can be passed to a [[Loader]]\r\n * to pre-load before starting a level or game.\r\n *\r\n * [[include:Textures.md]]\r\n */\r\nexport class Texture extends Resource<HTMLImageElement> {\r\n\r\n   /**\r\n    * The width of the texture in pixels\r\n    */\r\n   public width: number;\r\n\r\n   /**\r\n    * The height of the texture in pixels\r\n    */\r\n   public height: number;\r\n\r\n   /**\r\n    * A [[Promise]] that resolves when the Texture is loaded.\r\n    */\r\n   public loaded: Promise<any> = new Promise<any>();\r\n\r\n   private _isLoaded: boolean = false;\r\n   private _sprite: Sprite = null;\r\n\r\n   /**\r\n    * Populated once loading is complete\r\n    */\r\n   public image: HTMLImageElement;\r\n\r\n   /**\r\n    * @param path       Path to the image resource\r\n    * @param bustCache  Optionally load texture with cache busting\r\n    */\r\n   constructor(public path: string, public bustCache = true) {\r\n      super(path, 'blob', bustCache);\r\n      this._sprite = new Sprite(this, 0, 0, 0, 0);\r\n   }\r\n   \r\n\r\n   /**\r\n    * Returns true if the Texture is completely loaded and is ready\r\n    * to be drawn.\r\n    */\r\n   public isLoaded(): boolean {\r\n      return this._isLoaded;\r\n   }\r\n\r\n   /**\r\n    * Begins loading the texture and returns a promise to be resolved on completion\r\n    */\r\n   public load(): Promise<HTMLImageElement> {\r\n      var complete = new Promise<HTMLImageElement>();\r\n\r\n      var loaded = super.load();\r\n      loaded.then(() => {\r\n         this.image = new Image();\r\n         this.image.addEventListener('load', () => {\r\n            this._isLoaded = true;\r\n            this.width = this._sprite.swidth = this._sprite.naturalWidth = this._sprite.width = this.image.naturalWidth;\r\n            this.height = this._sprite.sheight = this._sprite.naturalHeight = this._sprite.height = this.image.naturalHeight;\r\n            this.loaded.resolve(this.image);\r\n            complete.resolve(this.image);\r\n         });\r\n         this.image.src = super.getData();            \r\n         \r\n\r\n      }, () => {\r\n         complete.reject('Error loading texture.');\r\n      });\r\n      return complete;\r\n   }\r\n\r\n   public asSprite(): Sprite {\r\n      return this._sprite;\r\n   }\r\n\r\n}","import * as Effects from './SpriteEffects';\r\nimport { Color } from './Color';\r\n\r\nimport { IDrawable } from '../Interfaces/IDrawable';\r\nimport { Texture } from '../Resources/Texture';\r\nimport { Vector } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\nimport { clamp } from '../Util/Util';\r\n\r\n/**\r\n * A [[Sprite]] is one of the main drawing primitives. It is responsible for drawing\r\n * images or parts of images from a [[Texture]] resource to the screen.\r\n *\r\n * [[include:Sprites.md]]\r\n */\r\nexport class Sprite implements IDrawable {\r\n   private _texture: Texture;\r\n\r\n   public rotation: number = 0.0;\r\n   public anchor: Vector = new Vector(0.0, 0.0);\r\n   public scale: Vector = new Vector(1, 1);\r\n\r\n   public logger: Logger = Logger.getInstance();\r\n\r\n   /**\r\n    * Draws the sprite flipped vertically\r\n    */\r\n   public flipVertical: boolean = false;\r\n\r\n   /**\r\n    * Draws the sprite flipped horizontally\r\n    */\r\n   public flipHorizontal: boolean = false;\r\n\r\n   public width: number = 0;\r\n   public height: number = 0;\r\n   public effects: Effects.ISpriteEffect[] = [];\r\n\r\n   public naturalWidth: number = 0;\r\n   public naturalHeight: number = 0;\r\n\r\n   private _spriteCanvas: HTMLCanvasElement = null;\r\n   private _spriteCtx: CanvasRenderingContext2D = null;\r\n   private _pixelData: ImageData = null;\r\n   private _pixelsLoaded: boolean = false;\r\n   private _dirtyEffect: boolean = false;\r\n\r\n   /**\r\n    * @param image   The backing image texture to build the Sprite\r\n    * @param sx      The x position of the sprite\r\n    * @param sy      The y position of the sprite\r\n    * @param swidth  The width of the sprite in pixels\r\n    * @param sheight The height of the sprite in pixels\r\n    */\r\n   constructor(image: Texture, public sx: number, public sy: number, public swidth: number, public sheight: number) {\r\n      if (sx < 0 || sy < 0 || swidth < 0 || sheight < 0) {\r\n         this.logger.error('Sprite cannot have any negative dimensions x:', \r\n                              sx, 'y:', sy, 'width:', swidth, 'height:', sheight);            \r\n      }\r\n\r\n      this._texture = image;\r\n      this._spriteCanvas = document.createElement('canvas');\r\n      this._spriteCanvas.width = swidth;\r\n      this._spriteCanvas.height = sheight;\r\n      this._spriteCtx = <CanvasRenderingContext2D>this._spriteCanvas.getContext('2d');\r\n      this._texture.loaded.then(() => {\r\n         this._spriteCanvas.width = this._spriteCanvas.width || this._texture.image.naturalWidth;\r\n         this._spriteCanvas.height = this._spriteCanvas.height || this._texture.image.naturalHeight;\r\n         this._loadPixels();            \r\n         this._dirtyEffect = true;\r\n      }).error((e) => {\r\n         this.logger.error('Error loading texture ', this._texture.path, e);\r\n      });\r\n      \r\n      this.width = swidth;\r\n      this.height = sheight;\r\n      this.naturalWidth = swidth;\r\n      this.naturalHeight = sheight;\r\n   }\r\n\r\n   private _loadPixels() {\r\n      if (this._texture.isLoaded() && !this._pixelsLoaded) {\r\n         var naturalWidth = this._texture.image.naturalWidth || 0;\r\n         var naturalHeight = this._texture.image.naturalHeight || 0;\r\n\r\n         if (this.swidth > naturalWidth) {\r\n            this.logger.warn('The sprite width', this.swidth, 'exceeds the width', \r\n                              naturalWidth, 'of the backing texture', this._texture.path);\r\n         }            \r\n         if (this.sheight > naturalHeight) {\r\n            this.logger.warn('The sprite height', this.sheight, 'exceeds the height', \r\n                              naturalHeight, 'of the backing texture', this._texture.path);\r\n         }\r\n         this._spriteCtx.drawImage(this._texture.image, \r\n            clamp(this.sx, 0, naturalWidth), \r\n            clamp(this.sy, 0, naturalHeight),\r\n            clamp(this.swidth, 0, naturalWidth),\r\n            clamp(this.sheight, 0, naturalHeight),\r\n            0, 0, this.swidth, this.sheight);\r\n\r\n         this._pixelsLoaded = true;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\r\n    */\r\n   public opacity(value: number) {\r\n      this.addEffect(new Effects.Opacity(value));\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Grayscale]] effect to a sprite, removing color information.\r\n    */\r\n   public grayscale() {\r\n      this.addEffect(new Effects.Grayscale());\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\r\n    */\r\n   public invert() {\r\n      this.addEffect(new Effects.Invert());\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n    */\r\n   public fill(color: Color) {\r\n      this.addEffect(new Effects.Fill(color));\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\r\n    * and the provided color.\r\n    */\r\n   public colorize(color: Color) {\r\n      this.addEffect(new Effects.Colorize(color));\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\r\n    */\r\n   public lighten(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Lighten(factor));\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\r\n    */\r\n   public darken(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Darken(factor));\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\r\n    */\r\n   public saturate(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Saturate(factor));\r\n   }\r\n\r\n   /**\r\n    * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\r\n    */\r\n   public desaturate(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Desaturate(factor));\r\n   }\r\n\r\n   /**\r\n    * Adds a new [[ISpriteEffect]] to this drawing.\r\n    * @param effect  Effect to add to the this drawing\r\n    */\r\n   public addEffect(effect: Effects.ISpriteEffect) {\r\n      this.effects.push(effect);\r\n      // We must check if the texture and the backing sprite pixels are loaded as well before \r\n      // an effect can be applied\r\n      if (!this._texture.isLoaded() || !this._pixelsLoaded) {\r\n         this._dirtyEffect = true;\r\n      } else {\r\n         this._applyEffects();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes a [[ISpriteEffect]] from this sprite.\r\n    * @param effect  Effect to remove from this sprite\r\n    */\r\n   public removeEffect(effect: Effects.ISpriteEffect): void;\r\n   \r\n   /**\r\n    * Removes an effect given the index from this sprite.\r\n    * @param index  Index of the effect to remove from this sprite\r\n    */\r\n   public removeEffect(index: number): void;\r\n   public removeEffect(param: any) {\r\n      var indexToRemove = -1;\r\n      if (typeof param === 'number') {\r\n         indexToRemove = param;\r\n      } else {\r\n         indexToRemove = this.effects.indexOf(param);\r\n      }\r\n\r\n      // bounds check\r\n      if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\r\n         return;\r\n      }\r\n\r\n      this.effects.splice(indexToRemove, 1);\r\n\r\n      // We must check if the texture and the backing sprite pixels are loaded as well before \r\n      // an effect can be applied\r\n      if (!this._texture.isLoaded() || !this._pixelsLoaded) {\r\n         this._dirtyEffect = true;\r\n      } else {\r\n         this._applyEffects();\r\n      }\r\n   }\r\n\r\n   private _applyEffects() {\r\n      var naturalWidth = this._texture.image.naturalWidth || 0;\r\n      var naturalHeight = this._texture.image.naturalHeight || 0;\r\n\r\n      this._spriteCtx.clearRect(0, 0, this.swidth, this.sheight);\r\n      this._spriteCtx.drawImage(this._texture.image, clamp(this.sx, 0, naturalWidth),\r\n         clamp(this.sy, 0, naturalHeight),\r\n         clamp(this.swidth, 0, naturalWidth),\r\n         clamp(this.sheight, 0, naturalHeight),\r\n         0, 0, this.swidth, this.sheight);\r\n      this._pixelData = this._spriteCtx.getImageData(0, 0, this.swidth, this.sheight);\r\n\r\n      var i = 0, x = 0, y = 0, len = this.effects.length;\r\n      for (i; i < len; i++) {\r\n         y = 0;\r\n         for (y; y < this.sheight; y++) {\r\n            x = 0;\r\n            for (x; x < this.swidth; x++) {\r\n               this.effects[i].updatePixel(x, y, this._pixelData);\r\n            }\r\n         }\r\n      }\r\n      this._spriteCtx.clearRect(0, 0, this.swidth, this.sheight);\r\n      this._spriteCtx.putImageData(this._pixelData, 0, 0);\r\n      \r\n      this._dirtyEffect = false;\r\n   }\r\n\r\n   /**\r\n    * Clears all effects from the drawing and return it to its original state.\r\n    */\r\n   public clearEffects() {\r\n      this.effects.length = 0;\r\n      this._applyEffects();\r\n   }\r\n   \r\n   /**\r\n    * Resets the internal state of the drawing (if any)\r\n    */\r\n   public reset() {\r\n      // do nothing\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n      ctx.save();\r\n      ctx.translate(x, y);\r\n      ctx.rotate(this.rotation);\r\n      const scaledSWidth = this.width * this.scale.x;\r\n      const scaledSHeight = this.height * this.scale.y;\r\n      var xpoint = (scaledSWidth) * this.anchor.x;\r\n      var ypoint = (scaledSHeight) * this.anchor.y;\r\n\r\n      ctx.strokeStyle = Color.Black.toString();\r\n      ctx.strokeRect(-xpoint, -ypoint, scaledSWidth, scaledSHeight);\r\n      ctx.restore();\r\n   }\r\n\r\n   /**\r\n    * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\r\n    * @param ctx  The 2D rendering context\r\n    * @param x    The x coordinate of where to draw\r\n    * @param y    The y coordinate of where to draw\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n      if (this._dirtyEffect) {\r\n         this._applyEffects();\r\n      }\r\n      \r\n      // calculating current dimensions\r\n      this.width = this.naturalWidth * this.scale.x;\r\n      this.height = this.naturalHeight * this.scale.y;\r\n      \r\n      ctx.save();\r\n      var xpoint = this.width * this.anchor.x;\r\n      var ypoint = this.height * this.anchor.y;\r\n      ctx.translate(x, y);\r\n      ctx.rotate(this.rotation);\r\n\r\n      var scaledSWidth = this.swidth * this.scale.x;\r\n      var scaledSHeight = this.sheight * this.scale.y;\r\n      \r\n      // todo cache flipped sprites\r\n      if (this.flipHorizontal) {\r\n         ctx.translate(scaledSWidth, 0);\r\n         ctx.scale(-1, 1);\r\n      }\r\n\r\n      if (this.flipVertical) {\r\n         ctx.translate(0, scaledSHeight);\r\n         ctx.scale(1, -1);\r\n      }\r\n\r\n      ctx.drawImage(this._spriteCanvas, 0, 0, this.swidth, this.sheight, \r\n         -xpoint, \r\n         -ypoint, \r\n         scaledSWidth,\r\n         scaledSHeight);\r\n      \r\n      ctx.restore();\r\n   }\r\n\r\n   /**\r\n    * Produces a copy of the current sprite\r\n    */\r\n   public clone(): Sprite {\r\n      var result = new Sprite(this._texture, this.sx, this.sy, this.swidth, this.sheight);\r\n      result.scale = this.scale.clone();\r\n      result.rotation = this.rotation;\r\n      result.flipHorizontal = this.flipHorizontal;\r\n      result.flipVertical = this.flipVertical;\r\n\r\n      var i = 0, len = this.effects.length;\r\n      for (i; i < len; i++) {\r\n         result.addEffect(this.effects[i]);\r\n      }\r\n      return result;\r\n   }\r\n\r\n}","import { Sprite } from './Sprite';\r\nimport * as Effects from './SpriteEffects';\r\nimport { Color } from './Color';\r\n\r\nimport { IDrawable } from '../Interfaces/IDrawable';\r\nimport { Vector } from '../Algebra';\r\nimport { Engine } from '../Engine';\r\nimport * as Util from '../Util/Util';\r\n\r\n/**\r\n * Animations allow you to display a series of images one after another,\r\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\r\n *\r\n * [[include:Animations.md]]\r\n */\r\nexport class Animation implements IDrawable {\r\n\r\n   /**\r\n    * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\r\n    * generate an [[Animation]].\r\n    */\r\n   public sprites: Sprite[];\r\n\r\n   /**\r\n    * Duration to show each frame (in milliseconds)\r\n    */\r\n   public speed: number;\r\n\r\n   /**\r\n    * Current frame index being shown\r\n    */\r\n   public currentFrame: number = 0;\r\n\r\n   private _oldTime: number = Date.now();\r\n   \r\n   public anchor = new Vector(0.0, 0.0);\r\n   public rotation: number = 0.0;\r\n   public scale = new Vector(1, 1);\r\n\r\n   /**\r\n    * Indicates whether the animation should loop after it is completed\r\n    */\r\n   public loop: boolean = false;\r\n\r\n   /**\r\n    * Indicates the frame index the animation should freeze on for a non-looping\r\n    * animation. By default it is the last frame.\r\n    */\r\n   public freezeFrame: number = -1;\r\n\r\n   private _engine: Engine;\r\n\r\n   /**\r\n    * Flip each frame vertically. Sets [[Sprite.flipVertical]].\r\n    */\r\n   public flipVertical: boolean = false;\r\n\r\n   /**\r\n    * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\r\n    */\r\n   public flipHorizontal: boolean = false;\r\n   \r\n   public width: number = 0;\r\n   public height: number = 0;\r\n   public naturalWidth: number = 0;\r\n   public naturalHeight: number = 0;\r\n\r\n   /**\r\n    * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\r\n    *\r\n    * @param engine  Reference to the current game engine\r\n    * @param images  An array of sprites to create the frames for the animation\r\n    * @param speed   The number in milliseconds to display each frame in the animation\r\n    * @param loop    Indicates whether the animation should loop after it is completed\r\n    */\r\n   constructor(engine: Engine, images: Sprite[], speed: number, loop?: boolean) {\r\n      this.sprites = images;\r\n      this.speed = speed;\r\n      this._engine = engine;\r\n      \r\n      if (loop != null) {\r\n         this.loop = loop;\r\n      }\r\n      \r\n      if (images && images[0]) {\r\n         this.height = images[0] ? images[0].height : 0;\r\n         this.width = images[0] ? images[0].width : 0;\r\n         \r\n         this.naturalWidth = images[0] ? images[0].naturalWidth : 0;\r\n         this.naturalHeight = images[0] ? images[0].naturalHeight : 0;\r\n\r\n         this.freezeFrame = images.length - 1;\r\n      }\r\n\r\n   }\r\n\r\n   /**\r\n    * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\r\n    */\r\n   public opacity(value: number) {\r\n      this.addEffect(new Effects.Opacity(value));\r\n   }\r\n\r\n   /**\r\n    * Applies the grayscale effect to a sprite, removing color information.\r\n    */\r\n   public grayscale() {\r\n      this.addEffect(new Effects.Grayscale());\r\n   }\r\n\r\n   /**\r\n    * Applies the invert effect to a sprite, inverting the pixel colors.\r\n    */\r\n   public invert() {\r\n      this.addEffect(new Effects.Invert());\r\n   }\r\n\r\n   /**\r\n    * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n    */\r\n   public fill(color: Color) {\r\n      this.addEffect(new Effects.Fill(color));\r\n   }\r\n\r\n   /**\r\n    * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\r\n    * provided color.\r\n    */\r\n   public colorize(color: Color) {\r\n      this.addEffect(new Effects.Colorize(color));\r\n   }\r\n\r\n   /**\r\n    * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\r\n    */\r\n   public lighten(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Lighten(factor));\r\n   }\r\n\r\n   /**\r\n    * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\r\n    */\r\n   public darken(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Darken(factor));\r\n   }\r\n\r\n   /**\r\n    * Applies the saturate effect to a sprite, saturates the color according to hsl\r\n    */\r\n   public saturate(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Saturate(factor));\r\n   }\r\n\r\n   /**\r\n    * Applies the desaturate effect to a sprite, desaturates the color according to hsl\r\n    */\r\n   public desaturate(factor: number = 0.1) {\r\n      this.addEffect(new Effects.Desaturate(factor));\r\n   }\r\n\r\n   /**\r\n    * Add a [[ISpriteEffect]] manually\r\n    */\r\n   public addEffect(effect: Effects.ISpriteEffect) {\r\n      for (var i in this.sprites) {\r\n         this.sprites[i].addEffect(effect);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes an [[ISpriteEffect]] from this animation.\r\n    * @param effect Effect to remove from this animation\r\n    */\r\n   public removeEffect(effect: Effects.ISpriteEffect): void;\r\n   \r\n   /**\r\n    * Removes an effect given the index from this animation.\r\n    * @param index  Index of the effect to remove from this animation\r\n    */\r\n   public removeEffect(index: number): void;\r\n   public removeEffect(param: any) {\r\n      for (var i in this.sprites) {\r\n         this.sprites[i].removeEffect(param);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Clear all sprite effects\r\n    */\r\n   public clearEffects() {\r\n      for (var i in this.sprites) {\r\n         this.sprites[i].clearEffects();\r\n      }  \r\n   }\r\n\r\n   private _setAnchor(point: Vector) {\r\n      //if (!this.anchor.equals(point)) {\r\n         for (var i in this.sprites) {\r\n            this.sprites[i].anchor.setTo(point.x, point.y);\r\n         }\r\n      //}\r\n   }\r\n\r\n   private _setRotation(radians: number) {\r\n      //if (this.rotation !== radians) {\r\n         for (var i in this.sprites) {\r\n            this.sprites[i].rotation = radians;\r\n         }\r\n      //}\r\n   }\r\n   \r\n   private _setScale(scale: Vector) {\r\n      //if (!this.scale.equals(scale)) {\r\n         for (var i in this.sprites) {\r\n            this.sprites[i].scale = scale;\r\n         }\r\n      //}\r\n   }\r\n   \r\n   /**\r\n    * Resets the animation to first frame.\r\n    */\r\n   public reset() {\r\n      this.currentFrame = 0;\r\n   }\r\n\r\n   /**\r\n    * Indicates whether the animation is complete, animations that loop are never complete.\r\n    */\r\n   public isDone() {\r\n      return (!this.loop && this.currentFrame >= this.sprites.length);\r\n   }\r\n\r\n   /**\r\n    * Not meant to be called by game developers. Ticks the animation forward internally and\r\n    * calculates whether to change to the frame.\r\n    * @internal\r\n    */\r\n   public tick() {\r\n      var time = Date.now();\r\n      if ((time - this._oldTime) > this.speed) {\r\n         this.currentFrame = (this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1);\r\n         this._oldTime = time;\r\n      }\r\n   }\r\n\r\n   private _updateValues(): void {\r\n      this._setAnchor(this.anchor);\r\n      this._setRotation(this.rotation);\r\n      this._setScale(this.scale);\r\n   }\r\n\r\n   /**\r\n    * Skips ahead a specified number of frames in the animation\r\n    * @param frames  Frames to skip ahead\r\n    */\r\n   public skip(frames: number) {\r\n      this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\r\n   }\r\n\r\n   public draw(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n      this.tick();\r\n      this._updateValues();\r\n      var currSprite: Sprite;\r\n      if (this.currentFrame < this.sprites.length) {\r\n         currSprite = this.sprites[this.currentFrame];\r\n         if (this.flipVertical) {\r\n            currSprite.flipVertical = this.flipVertical;\r\n         }\r\n         if (this.flipHorizontal) {\r\n            currSprite.flipHorizontal = this.flipHorizontal;\r\n         }\r\n         currSprite.draw(ctx, x, y);\r\n      }\r\n\r\n      if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\r\n         currSprite = this.sprites[Util.clamp(this.freezeFrame, 0, this.sprites.length - 1)];\r\n         currSprite.draw(ctx, x, y);\r\n      }\r\n      \r\n      // add the calculated width\r\n      if (currSprite) {\r\n         this.width = currSprite.width;\r\n         this.height = currSprite.height;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Plays an animation at an arbitrary location in the game.\r\n    * @param x  The x position in the game to play\r\n    * @param y  The y position in the game to play\r\n    */\r\n   public play(x: number, y: number) {\r\n      this.reset();\r\n      this._engine.playAnimation(this, x, y);\r\n   }\r\n   }","import { Sprite } from './Sprite';\r\nimport { Animation } from './Animation';\r\nimport { Color } from './Color';\r\nimport * as Effects from './SpriteEffects';\r\n\r\nimport { Texture } from '../Resources/Texture';\r\nimport { Engine } from '../Engine';\r\nimport { Logger } from '../Util/Log';\r\nimport { TextAlign, BaseAlign } from '../Label';\r\n\r\n/**\r\n * Sprite sheets are a useful mechanism for slicing up image resources into\r\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\r\n * in row major order in the [[SpriteSheet]].\r\n *\r\n * [[include:SpriteSheets.md]]\r\n */\r\nexport class SpriteSheet {\r\n   public sprites: Sprite[] = [];\r\n   private _internalImage: HTMLImageElement;\r\n\r\n   /**\r\n    * @param image     The backing image texture to build the SpriteSheet\r\n    * @param columns   The number of columns in the image texture\r\n    * @param rows      The number of rows in the image texture\r\n    * @param spWidth   The width of each individual sprite in pixels\r\n    * @param spHeight  The height of each individual sprite in pixels\r\n    */\r\n   constructor(public image: Texture, public columns: number, public rows: number, spWidth: number, spHeight: number) {\r\n      this._internalImage = image.image;\r\n      this.sprites = new Array(columns * rows);\r\n\r\n      // TODO: Inspect actual image dimensions with preloading\r\n      /*if(spWidth * columns > this.internalImage.naturalWidth){\r\n         throw new Error(\"SpriteSheet specified is wider than image width\");\r\n      }\r\n\r\n      if(spHeight * rows > this.internalImage.naturalHeight){\r\n         throw new Error(\"SpriteSheet specified is higher than image height\");\r\n      }*/\r\n\r\n      var i = 0;\r\n      var j = 0;\r\n      for (i = 0; i < rows; i++) {\r\n         for (j = 0; j < columns; j++) {\r\n            this.sprites[j + i * columns] = new Sprite(this.image, j * spWidth, i * spHeight, spWidth, spHeight);\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Create an animation from the this SpriteSheet by listing out the\r\n    * sprite indices. Sprites are organized in row major order in the SpriteSheet.\r\n    * @param engine   Reference to the current game [[Engine]]\r\n    * @param indices  An array of sprite indices to use in the animation\r\n    * @param speed    The number in milliseconds to display each frame in the animation\r\n    */\r\n   public getAnimationByIndices(engine: Engine, indices: number[], speed: number) {\r\n      var images: Sprite[] = indices.map((index) => {\r\n         return this.sprites[index];\r\n      });\r\n\r\n      images = images.map(function(i) {\r\n         return i.clone();\r\n      });\r\n      return new Animation(engine, images, speed);\r\n   }\r\n\r\n   /**\r\n    * Create an animation from the this SpriteSheet by specifing the range of\r\n    * images with the beginning and ending index\r\n    * @param engine      Reference to the current game Engine\r\n    * @param beginIndex  The index to start taking frames\r\n    * @param endIndex    The index to stop taking frames\r\n    * @param speed       The number in milliseconds to display each frame in the animation\r\n    */\r\n   public getAnimationBetween(engine: Engine, beginIndex: number, endIndex: number, speed: number) {\r\n      var images = this.sprites.slice(beginIndex, endIndex);\r\n      images = images.map(function(i) {\r\n         return i.clone();\r\n      });\r\n      return new Animation(engine, images, speed);\r\n   }\r\n\r\n   /**\r\n    * Treat the entire SpriteSheet as one animation, organizing the frames in \r\n    * row major order.\r\n    * @param engine  Reference to the current game [[Engine]]\r\n    * @param speed   The number in milliseconds to display each frame the animation\r\n    */\r\n   public getAnimationForAll(engine: Engine, speed: number) {\r\n      var sprites = this.sprites.map(function(i) {\r\n         return i.clone();\r\n      });\r\n      return new Animation(engine, sprites, speed);\r\n   }\r\n\r\n   /**\r\n    * Retreive a specific sprite from the SpriteSheet by its index. Sprites are organized\r\n    * in row major order in the SpriteSheet.\r\n    * @param index  The index of the sprite\r\n    */\r\n   public getSprite(index: number): Sprite {\r\n      if (index >= 0 && index < this.sprites.length) {\r\n         return this.sprites[index];\r\n      } else {\r\n        throw new Error('Invalid index: ' + index);\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\r\n * a particular bitmap as a font. Note that some font features are not \r\n * supported by Sprite fonts.\r\n *\r\n * [[include:SpriteFonts.md]]\r\n */\r\nexport class SpriteFont extends SpriteSheet {\r\n   private _currentColor: Color = Color.Black.clone();\r\n   private _currentOpacity: Number = 1.0;\r\n   private _sprites: { [key: string]: Sprite; } = {};\r\n\r\n   // text shadow\r\n   private _textShadowOn: boolean = false;\r\n   private _textShadowDirty: boolean = true;\r\n   private _textShadowColor: Color = Color.Black.clone();\r\n   private _textShadowSprites: { [key: string]: Sprite; } = {};\r\n   private _shadowOffsetX: number = 5;\r\n   private _shadowOffsetY: number = 5;\r\n\r\n   \r\n\r\n   /**\r\n    * @param image           The backing image texture to build the SpriteFont\r\n    * @param alphabet        A string representing all the characters in the image, in row major order.\r\n    * @param caseInsensitive  Indicate whether this font takes case into account \r\n    * @param columns         The number of columns of characters in the image\r\n    * @param rows            The number of rows of characters in the image\r\n    * @param spWidth         The width of each character in pixels\r\n    * @param spHeight        The height of each character in pixels\r\n    */\r\n   constructor(public image: Texture,\r\n      private alphabet: string,\r\n      private caseInsensitive: boolean,\r\n      columns: number,\r\n      rows: number,\r\n      public spWidth: number,\r\n      public spHeight: number) {\r\n      super(image, columns, rows, spWidth, spHeight);\r\n      this._sprites = this.getTextSprites();\r\n   }\r\n\r\n   /**\r\n    * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\r\n    */\r\n   public getTextSprites(): { [key: string]: Sprite; } {\r\n      var lookup: { [key: string]: Sprite; } = {};\r\n      for (var i = 0; i < this.alphabet.length; i++) {\r\n         var char = this.alphabet[i];\r\n         if (this.caseInsensitive) {\r\n            char = char.toLowerCase();\r\n         }\r\n         lookup[char] = this.sprites[i].clone();\r\n      }\r\n      return lookup;\r\n   }\r\n\r\n   /**\r\n    * Sets the text shadow for sprite fonts\r\n    * @param offsetX      The x offset in pixels to place the shadow\r\n    * @param offsetY      The y offset in pixels to place the shadow\r\n    * @param shadowColor  The color of the text shadow\r\n    */\r\n   public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\r\n      this._textShadowOn = true;\r\n      this._shadowOffsetX = offsetX;\r\n      this._shadowOffsetY = offsetY;\r\n      this._textShadowColor = shadowColor.clone();\r\n      this._textShadowDirty = true;\r\n      for (var character in this._sprites) {\r\n         this._textShadowSprites[character] = this._sprites[character].clone();\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Toggles text shadows on or off\r\n    */\r\n   public useTextShadow(on: boolean) {\r\n      this._textShadowOn = on;\r\n      if (on) {\r\n         this.setTextShadow(5, 5, this._textShadowColor);\r\n      }\r\n   }\r\n   \r\n   /**\r\n    * Draws the current sprite font \r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D, text: string, x: number, y: number, options: ISpriteFontOptions) {\r\n      options = this._parseOptions(options);\r\n      \r\n      if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\r\n         this._currentOpacity = options.opacity;\r\n         this._currentColor = options.color;\r\n         for (var char in this._sprites) {\r\n            this._sprites[char].clearEffects();\r\n            this._sprites[char].fill(options.color);\r\n            this._sprites[char].opacity(options.opacity);\r\n         }\r\n      }\r\n\r\n      if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\r\n         for (var characterShadow in this._textShadowSprites) {\r\n            this._textShadowSprites[characterShadow].clearEffects();\r\n            this._textShadowSprites[characterShadow].addEffect(new Effects.Fill(this._textShadowColor.clone()));\r\n         }\r\n         this._textShadowDirty = false;\r\n      }\r\n      \r\n      \r\n      // find the current length of text in pixels\r\n      var sprite = this.sprites[0];\r\n      \r\n      // find the current height fo the text in pixels\r\n      var height = sprite.sheight;\r\n      \r\n      // calculate appropriate scale for font size\r\n      var scale = options.fontSize / height;\r\n      \r\n      var length = (text.length * sprite.swidth * scale) + (text.length * options.letterSpacing);\r\n\r\n      var currX = x;\r\n      if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\r\n         currX = x;\r\n      } else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\r\n         currX = x - length;\r\n      } else if (options.textAlign === TextAlign.Center) {\r\n         currX = x - length / 2;\r\n      }\r\n               \r\n\r\n      var currY = y - height * scale;\r\n      if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\r\n         currY = y;\r\n      } else if (options.baseAlign === BaseAlign.Ideographic || \r\n                  options.baseAlign === BaseAlign.Bottom || \r\n                  options.baseAlign === BaseAlign.Alphabetic) {\r\n         currY = y - height * scale;\r\n      } else if (options.baseAlign === BaseAlign.Middle) {\r\n         currY = y - (height * scale) / 2;\r\n      }\r\n      \r\n      \r\n      for (var i = 0; i < text.length; i++) {\r\n         var character = text[i];\r\n         if (this.caseInsensitive) {\r\n            character = character.toLowerCase();\r\n         }\r\n         try {\r\n            // if text shadow\r\n            if (this._textShadowOn) {\r\n               this._textShadowSprites[character].scale.x = scale;\r\n               this._textShadowSprites[character].scale.y = scale;\r\n               this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\r\n            }\r\n            \r\n            var charSprite = this._sprites[character];\r\n            charSprite.scale.x = scale;\r\n            charSprite.scale.y = scale;\r\n            charSprite.draw(ctx, currX, currY);\r\n            currX += (charSprite.width + options.letterSpacing);\r\n         } catch (e) {\r\n            Logger.getInstance().error(`SpriteFont Error drawing char ${character}`);\r\n         }\r\n      }\r\n      \r\n   }\r\n\r\n   private _parseOptions(options: ISpriteFontOptions): ISpriteFontOptions {\r\n      return {\r\n         fontSize: options.fontSize || 10,\r\n         letterSpacing: options.letterSpacing || 0,\r\n         color: options.color || Color.Black.clone(),\r\n         textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\r\n         baseAlign: typeof options.baseAlign === undefined ?  BaseAlign.Bottom : options.baseAlign,\r\n         maxWidth: options.maxWidth || -1,\r\n         opacity: options.opacity || 0\r\n      };\r\n   }\r\n}\r\n\r\n/**\r\n * Specify various font attributes for sprite fonts \r\n */\r\nexport interface ISpriteFontOptions {\r\n   color?: Color;\r\n   opacity?: number;\r\n   fontSize?: number;\r\n   letterSpacing?: number;\r\n   textAlign?: TextAlign;\r\n   baseAlign?: BaseAlign;\r\n   maxWidth?: number;\r\n}","import { Engine } from './Engine';\r\nimport { Color } from './Drawing/Color';\r\nimport { SpriteFont } from './Drawing/SpriteSheet';\r\nimport { Actor, CollisionType } from './Actor';\r\n\r\n\r\n/**\r\n * Enum representing the different font size units\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\r\n */\r\nexport enum FontUnit {\r\n   /**\r\n    * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\r\n    */\r\n   Em,\r\n   /**\r\n    * Rem is similar to the Em, it is a scalable unit. 1 rem is eqaul to the font size of the root element\r\n    */\r\n   Rem,\r\n   /**\r\n    * Pixel is a unit of length in screen pixels\r\n    */\r\n   Px,\r\n   /**\r\n    * Point is a physical unit length (1/72 of an inch)\r\n    */\r\n   Pt,\r\n   /**\r\n    * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\r\n    */\r\n   Percent\r\n}\r\n\r\n/**\r\n * Enum representing the different horizontal text alignments\r\n */\r\nexport enum TextAlign {\r\n   /**\r\n    * The text is left-aligned.\r\n    */\r\n   Left,\r\n   /**\r\n    * The text is right-aligned.\r\n    */\r\n   Right,\r\n   /**\r\n    * The text is centered.\r\n    */\r\n   Center,\r\n   /**\r\n    * The text is aligned at the normal start of the line (left-aligned for left-to-right locales, \r\n    * right-aligned for right-to-left locales).\r\n    */\r\n   Start,\r\n   /**\r\n    * The text is aligned at the normal end of the line (right-aligned for left-to-right locales, \r\n    * left-aligned for right-to-left locales).\r\n    */\r\n   End\r\n}\r\n\r\n/**\r\n * Enum representing the different baseline text alignments\r\n */\r\nexport enum BaseAlign {\r\n   /**\r\n    * The text baseline is the top of the em square.\r\n    */\r\n   Top,\r\n   /**\r\n    * The text baseline is the hanging baseline.  Currently unsupported; this will act like \r\n    * alphabetic.\r\n    */\r\n   Hanging,\r\n   /**\r\n    * The text baseline is the middle of the em square.\r\n    */\r\n   Middle,\r\n   /**\r\n    * The text baseline is the normal alphabetic baseline.\r\n    */\r\n   Alphabetic,\r\n   /**\r\n    * The text baseline is the ideographic baseline; this is the bottom of \r\n    * the body of the characters, if the main body of characters protrudes \r\n    * beneath the alphabetic baseline.  Currently unsupported; this will \r\n    * act like alphabetic.\r\n    */\r\n   Ideographic,\r\n   /**\r\n    * The text baseline is the bottom of the bounding box.  This differs\r\n    * from the ideographic baseline in that the ideographic baseline \r\n    * doesn't consider descenders.\r\n    */\r\n   Bottom\r\n}\r\n\r\n   /**\r\n    * Enum representing the different possible font styles\r\n    */\r\n   export enum FontStyle {\r\n      Normal,\r\n      Italic,\r\n      Oblique\r\n   }\r\n\r\n   /**\r\n    * Labels are the way to draw small amounts of text to the screen. They are\r\n    * actors and inherit all of the benefits and capabilities.\r\n    *\r\n    * [[include:Labels.md]]\r\n    */\r\n   export class Label extends Actor {\r\n\r\n   /**\r\n    * The text to draw.\r\n    */\r\n   public text: string;\r\n\r\n   /**\r\n    * Sets or gets the bold property of the label's text, by default it's false\r\n    */\r\n   public bold: boolean = false;\r\n\r\n   /**\r\n    * The [[SpriteFont]] to use, if any. Overrides [[fontFamily]] if present.\r\n    */\r\n   public spriteFont: SpriteFont;\r\n\r\n   /**\r\n    * The CSS font family string (e.g. `sans-serif`, `Droid Sans Pro`). Web fonts\r\n    * are supported, same as in CSS.\r\n    */\r\n   public fontFamily: string;\r\n\r\n   /**\r\n    * The font size in the selected units, default is 10 (default units is pixel)\r\n    */\r\n   public fontSize: number = 10;\r\n\r\n   /**\r\n    * The font style for this label, the default is [[FontStyle.Normal]]\r\n    */\r\n   public fontStyle: FontStyle = FontStyle.Normal;\r\n\r\n   /**\r\n    * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\r\n    */ \r\n   public fontUnit: FontUnit = FontUnit.Px;\r\n\r\n   /**\r\n    * Gets or sets the horizontal text alignment property for the label. \r\n    */\r\n   public textAlign: TextAlign = TextAlign.Left;\r\n\r\n   /**\r\n    * Gets or sets the baseline alignment property for the label.\r\n    */\r\n   public baseAlign: BaseAlign = BaseAlign.Bottom;\r\n\r\n   /**\r\n    * Gets or sets the maximum width (in pixels) that the label should occupy\r\n    */\r\n   public maxWidth: number;\r\n\r\n   /**\r\n    * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\r\n    */\r\n   public letterSpacing: number = 0; //px\r\n\r\n   /**\r\n    * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\r\n    */\r\n   public caseInsensitive: boolean = true;\r\n\r\n   private _textShadowOn: boolean = false;\r\n   private _shadowOffsetX: number = 0;\r\n   private _shadowOffsetY: number = 0;\r\n   private _shadowColor: Color = Color.Black.clone();\r\n\r\n   /**\r\n    * @param text        The text of the label\r\n    * @param x           The x position of the label\r\n    * @param y           The y position of the label\r\n    * @param fontFamily  Use any valid CSS font string for the label's font. Web fonts are supported. Default is `10px sans-serif`.\r\n    * @param spriteFont  Use an Excalibur sprite font for the label's font, if a SpriteFont is provided it will take precedence \r\n    * over a css font.\r\n    */\r\n   constructor(text?: string, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont) {\r\n      super(x, y);\r\n      this.text = text || '';\r\n      this.color = Color.Black.clone();\r\n      this.spriteFont = spriteFont;\r\n      this.collisionType = CollisionType.PreventCollision;\r\n      this.fontFamily = fontFamily || 'sans-serif'; // coalesce to default canvas font\r\n      if (spriteFont) {\r\n         //this._textSprites = spriteFont.getTextSprites();\r\n      }\r\n   }\r\n\r\n\r\n   /**\r\n    * Returns the width of the text in the label (in pixels);\r\n    * @param ctx  Rendering context to measure the string with\r\n    */\r\n   public getTextWidth(ctx: CanvasRenderingContext2D): number {\r\n      var oldFont = ctx.font;\r\n      ctx.font = this._fontString;\r\n      var width = ctx.measureText(this.text).width;\r\n      ctx.font = oldFont;\r\n      return width;\r\n   }\r\n\r\n   // TypeScript doesn't support string enums :(\r\n   private _lookupFontUnit(fontUnit: FontUnit): string {\r\n      switch (fontUnit) {\r\n         case FontUnit.Em:\r\n            return 'em';\r\n         case FontUnit.Rem:\r\n            return 'rem';\r\n         case FontUnit.Pt:\r\n            return 'pt';\r\n         case FontUnit.Px:\r\n            return 'px';\r\n         case FontUnit.Percent:\r\n            return '%';\r\n         default:\r\n            return 'px';\r\n      }\r\n   }\r\n\r\n   private _lookupTextAlign(textAlign: TextAlign): string {\r\n      switch (textAlign) {\r\n         case TextAlign.Left:\r\n            return 'left';\r\n         case TextAlign.Right:\r\n            return 'right';\r\n         case TextAlign.Center:\r\n            return 'center';\r\n         case TextAlign.End:\r\n            return 'end';\r\n         case TextAlign.Start:\r\n            return 'start';\r\n         default:\r\n            return 'start';\r\n      }\r\n   }\r\n\r\n   private _lookupBaseAlign(baseAlign: BaseAlign): string {\r\n      switch (baseAlign) {\r\n         case BaseAlign.Alphabetic:\r\n            return 'alphabetic';\r\n         case BaseAlign.Bottom:\r\n            return 'bottom';\r\n         case BaseAlign.Hanging:\r\n            return 'hangin';\r\n         case BaseAlign.Ideographic:\r\n            return 'ideographic';\r\n         case BaseAlign.Middle:\r\n            return 'middle';\r\n         case BaseAlign.Top:\r\n            return 'top';\r\n         default:\r\n            return 'alphabetic';\r\n      }\r\n   }\r\n\r\n   private _lookupFontStyle(fontStyle: FontStyle): string {\r\n      var boldstring = this.bold ? ' bold' : '';\r\n      switch (fontStyle) {\r\n         case FontStyle.Italic:\r\n            return 'italic' + boldstring;\r\n         case FontStyle.Normal:\r\n            return 'normal' + boldstring;\r\n         case FontStyle.Oblique:\r\n            return 'oblique' + boldstring;\r\n         default:\r\n            return 'normal' + boldstring;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Sets the text shadow for sprite fonts\r\n    * @param offsetX      The x offset in pixels to place the shadow\r\n    * @param offsetY      The y offset in pixels to place the shadow\r\n    * @param shadowColor  The color of the text shadow\r\n    */\r\n   public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\r\n      this.spriteFont.setTextShadow(offsetX, offsetY, shadowColor);\r\n   }\r\n\r\n   /**\r\n    * Toggles text shadows on or off, only applies when using sprite fonts\r\n    */\r\n   public useTextShadow(on: boolean) {\r\n      this.spriteFont.useTextShadow(on);\r\n   }\r\n\r\n   /**\r\n    * Clears the current text shadow\r\n    */\r\n   public clearTextShadow() {\r\n      this._textShadowOn = false;\r\n      this._shadowOffsetX = 0;\r\n      this._shadowOffsetY = 0;\r\n      this._shadowColor = Color.Black.clone();\r\n   }\r\n\r\n   public update(engine: Engine, delta: number) {\r\n      super.update(engine, delta);\r\n\r\n      /*\r\n     if (this.spriteFont && (this._color !== this.color || this.previousOpacity !== this.opacity)) {\r\n        for (var character in this._textSprites) {\r\n           this._textSprites[character].clearEffects();\r\n           this._textSprites[character].fill(this.color.clone());\r\n           this._textSprites[character].opacity(this.opacity);\r\n           \r\n        }\r\n        this._color = this.color;\r\n        this.previousOpacity = this.opacity;\r\n     }\r\n\r\n     if (this.spriteFont && this._textShadowOn && this._shadowColorDirty && this._shadowColor) {\r\n        for (var characterShadow in this._shadowSprites) {\r\n           this._shadowSprites[characterShadow].clearEffects();\r\n           this._shadowSprites[characterShadow].addEffect(new Effects.Fill(this._shadowColor.clone()));\r\n        }\r\n        this._shadowColorDirty = false;\r\n     }*/\r\n   }\r\n\r\n   public draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n\r\n      ctx.save();\r\n      ctx.translate(this.pos.x, this.pos.y);\r\n      ctx.scale(this.scale.x, this.scale.y);\r\n      ctx.rotate(this.rotation);\r\n\r\n      if (this._textShadowOn) {\r\n         ctx.save();\r\n         ctx.translate(this._shadowOffsetX, this._shadowOffsetY);\r\n         this._fontDraw(ctx);\r\n         ctx.restore();\r\n      }\r\n      this._fontDraw(ctx);\r\n\r\n      super.draw(ctx, delta);\r\n      ctx.restore();\r\n   }\r\n\r\n   private _fontDraw(ctx: CanvasRenderingContext2D) {\r\n\r\n         if (this.spriteFont) {\r\n            this.spriteFont.draw(ctx, this.text, 0, 0, {\r\n               color: this.color.clone(),\r\n               baseAlign: this.baseAlign,\r\n               textAlign: this.textAlign,\r\n               fontSize: this.fontSize,\r\n               letterSpacing: this.letterSpacing,\r\n               opacity: this.opacity\r\n            });\r\n         } else {\r\n            var oldAlign = ctx.textAlign;\r\n            var oldTextBaseline = ctx.textBaseline;\r\n            \r\n            ctx.textAlign = this._lookupTextAlign(this.textAlign);\r\n            ctx.textBaseline = this._lookupBaseAlign(this.baseAlign);\r\n            if (this.color) {\r\n               this.color.a = this.opacity;\r\n            }\r\n            ctx.fillStyle = this.color.toString();\r\n            ctx.font = this._fontString;\r\n            if (this.maxWidth) {\r\n               ctx.fillText(this.text, 0, 0, this.maxWidth);\r\n            } else {\r\n               ctx.fillText(this.text, 0, 0);\r\n            }\r\n\r\n         ctx.textAlign = oldAlign;\r\n         ctx.textBaseline = oldTextBaseline;\r\n      }\r\n   }\r\n\r\n   protected get _fontString() {\r\n      return `${this._lookupFontStyle(this.fontStyle)} ${this.fontSize}${this._lookupFontUnit(this.fontUnit)} ${this.fontFamily}`;\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      super.debugDraw(ctx);\r\n   }\r\n\r\n}","import { ILoadable } from '../Interfaces/ILoadable';\r\nimport { IAudioImplementation } from '../Interfaces/IAudioImplementation';\r\nimport { IAudio } from '../Interfaces/IAudio';\r\nimport { Logger } from '../Util/Log';\r\nimport * as Util from '../Util/Util';\r\nimport { Engine } from '../Engine';\r\nimport { Promise } from '../Promises';\r\n\r\n// set up audio context reference\r\n// when we introduce multi-tracking, we may need to move this to a factory method\r\nif ((<any>window).AudioContext) {\r\n   var audioContext: AudioContext = new (<any>window).AudioContext();\r\n}   \r\n\r\n/**\r\n * An audio implementation for HTML5 audio.\r\n */\r\nexport class AudioTag implements IAudioImplementation {\r\n\r\n   public responseType = 'blob';\r\n\r\n   /**\r\n    * Transforms raw Blob data into a object URL for use in audio tag\r\n    */\r\n   public processData(data: Blob): Promise<string> {        \r\n      var url = URL.createObjectURL(data);         \r\n      return Promise.resolve(url);\r\n   }\r\n\r\n   /**\r\n    * Creates a new instance of an audio tag referencing the provided audio URL\r\n    */\r\n   public createInstance(url: string): IAudio {\r\n      return new AudioTagInstance(url);\r\n   }\r\n\r\n}\r\n\r\n/**\r\n * An audio implementation for Web Audio API.\r\n */\r\nexport class WebAudio implements IAudioImplementation {\r\n   private _logger = Logger.getInstance();\r\n\r\n   public responseType = 'arraybuffer';\r\n\r\n   /**\r\n    * Processes raw arraybuffer data and decodes into WebAudio buffer (async).\r\n    */\r\n   public processData(data: ArrayBuffer): Promise<AudioBuffer> {\r\n      var complete = new Promise<AudioBuffer>();\r\n\r\n      audioContext.decodeAudioData(data,\r\n         (buffer) => {\r\n            complete.resolve(buffer);\r\n         },\r\n         () => {\r\n            this._logger.error('Unable to decode ' +\r\n               ' this browser may not fully support this format, or the file may be corrupt, ' +\r\n               'if this is an mp3 try removing id3 tags and album art from the file.');\r\n            complete.resolve(undefined);\r\n         });\r\n\r\n      return complete;\r\n   }\r\n\r\n   /**\r\n    * Creates a new WebAudio AudioBufferSourceNode to play a sound instance\r\n    */\r\n   public createInstance(buffer: AudioBuffer): IAudio {\r\n      return new WebAudioInstance(buffer);\r\n   }\r\n\r\n   private static _unlocked: boolean = false;\r\n\r\n   /**\r\n    * Play an empty sound to unlock Safari WebAudio context. Call this function\r\n    * right after a user interaction event. Typically used by [[PauseAfterLoader]]\r\n    * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\r\n    */\r\n   static unlock() {\r\n\r\n      if (WebAudio._unlocked || !audioContext) {\r\n         return;\r\n      }\r\n\r\n      // create empty buffer and play it\r\n      var buffer = audioContext.createBuffer(1, 1, 22050);\r\n      var source = audioContext.createBufferSource();\r\n      var ended = false;\r\n      source.buffer = buffer;\r\n      source.connect(audioContext.destination);\r\n      source.onended = () => ended = true;\r\n\r\n      if ((<any>source).noteOn) {\r\n         // deprecated\r\n         (<any>source).noteOn(0);\r\n      } else {\r\n         source.start(0);\r\n      }\r\n\r\n      // by checking the play state after some time, we know if we're really unlocked\r\n      setTimeout(function () {\r\n         if ((<any>source).playbackState) {\r\n            var legacySource = (<any>source);\r\n            if (legacySource.playbackState === legacySource.PLAYING_STATE ||\r\n               legacySource.playbackState === legacySource.FINISHED_STATE) {\r\n               WebAudio._unlocked = true;\r\n            }\r\n         } else {               \r\n            if (audioContext.currentTime > 0 || ended) {\r\n               WebAudio._unlocked = true;\r\n            } \r\n         }\r\n      }, 0);\r\n\r\n   }\r\n\r\n   static isUnlocked() {\r\n      return this._unlocked;\r\n   }\r\n}\r\n\r\n/**\r\n * Factory method that gets the audio implementation to use\r\n */\r\nexport function getAudioImplementation(): IAudioImplementation {\r\n   if ((<any>window).AudioContext) {            \r\n      return new WebAudio();\r\n   } else {            \r\n      return new AudioTag();\r\n   }\r\n};   \r\n\r\n/**\r\n * The [[Sound]] object allows games built in Excalibur to load audio \r\n * components, from soundtracks to sound effects. [[Sound]] is an [[ILoadable]]\r\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\r\n *\r\n * [[include:Sounds.md]]\r\n */\r\nexport class Sound implements ILoadable, IAudio {\r\n   private _logger: Logger = Logger.getInstance();\r\n   private _data: any = null;\r\n   private _tracks: IAudio[] = [];\r\n   private _isLoaded = false;\r\n   private _isPaused = false;\r\n   private _loop = false;\r\n   private _volume = 1.0;\r\n\r\n   public path: string;\r\n\r\n   public onprogress: (e: any) => void = () => { return; };\r\n   public oncomplete: () => void = () => { return; };\r\n   public onerror: (e: any) => void = () => { return; };   \r\n\r\n   private _engine: Engine;\r\n   private _wasPlayingOnHidden: boolean = false;      \r\n   \r\n   /**\r\n    * Populated once loading is complete\r\n    */\r\n   public sound: IAudioImplementation;\r\n\r\n   /**\r\n    * Whether or not the browser can play this file as HTML5 Audio\r\n    */\r\n   public static canPlayFile(file: string): boolean {\r\n      try {\r\n         var a = new Audio();\r\n         var filetype = /.*\\.([A-Za-z0-9]+)$/;\r\n         var type = file.match(filetype)[1];\r\n         if (a.canPlayType('audio/' + type)) {\r\n            return true;\r\n         } else {\r\n            return false;\r\n         }\r\n      } catch (e) {\r\n         Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\r\n         return false;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\r\n    */\r\n   constructor(...paths: string[]) {\r\n      /* Chrome : MP3, WAV, Ogg\r\n         * Firefox : WAV, Ogg, \r\n         * IE : MP3, WAV coming soon\r\n         * Safari MP3, WAV, Ogg           \r\n         */\r\n      this.path = '';\r\n\r\n      for (var path of paths) {\r\n         if (Sound.canPlayFile(path)) {\r\n            this.path = path;\r\n            break;\r\n         }               \r\n      }\r\n\r\n      if (!this.path) {\r\n         this._logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\r\n         this._logger.warn('Attempting to use', paths[0]);\r\n         this.path = paths[0]; // select the first specified\r\n      }\r\n\r\n      this.sound = getAudioImplementation();\r\n   }\r\n\r\n   public wireEngine(engine: Engine) {\r\n      if (engine) {\r\n         this._engine = engine;\r\n         this._engine.on('hidden', () => {\r\n            if (engine.pauseAudioWhenHidden && this.isPlaying()) {\r\n               this._wasPlayingOnHidden = true;\r\n               this.pause();\r\n            }\r\n         });\r\n\r\n         this._engine.on('visible', () => {\r\n            if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\r\n               this.play();\r\n               this._wasPlayingOnHidden = false;\r\n            }\r\n         });\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns how many instances of the sound are currently playing\r\n    */\r\n   public instanceCount(): number {\r\n      return this._tracks.length;\r\n   }\r\n\r\n   /**\r\n    * Sets the volume of the sound clip\r\n    * @param volume  A volume value between 0-1.0\r\n    */\r\n   public setVolume(volume: number) {\r\n      this._volume = volume;\r\n\r\n      for (var track of this._tracks) {\r\n         track.setVolume(volume);\r\n      }\r\n\r\n      this._logger.debug('Set volume for all instances of sound', this.path, 'to', volume);\r\n   }\r\n\r\n   /**\r\n    * Indicates whether the clip should loop when complete\r\n    * @param loop  Set the looping flag\r\n    */\r\n   public setLoop(loop: boolean) {\r\n      this._loop = loop;\r\n      for (var track of this._tracks) {\r\n         track.setLoop(loop);\r\n      }\r\n\r\n      this._logger.debug('Set loop for all instances of sound', this.path, 'to', loop);\r\n   }\r\n\r\n   /**\r\n    * Whether or not the sound is playing right now\r\n    */\r\n   public isPlaying(): boolean {\r\n      return this._tracks.some(t => t.isPlaying());\r\n   }\r\n\r\n   /**\r\n    * Play the sound, returns a promise that resolves when the sound is done playing\r\n    */\r\n   public play(): Promise<boolean> {\r\n      if (this._isLoaded) {\r\n         var resumed = [];\r\n\r\n         // ensure we resume *current* tracks (if paused)\r\n         for (var track of this._tracks) {\r\n            resumed.push(track.play());\r\n         }\r\n\r\n         // when paused, don't start playing new track\r\n         if (this._isPaused) {\r\n            this._isPaused = false;\r\n\r\n            this._logger.debug('Resuming paused instances for sound', this.path, this._tracks);\r\n\r\n            // resolve when resumed tracks are done\r\n            return Promise.join(resumed);\r\n         }\r\n\r\n         // push a new track\r\n         var newTrack = this.sound.createInstance(this._data);\r\n         newTrack.setLoop(this._loop);\r\n         newTrack.setVolume(this._volume);\r\n\r\n         this._tracks.push(newTrack);\r\n\r\n         this._logger.debug('Playing new instance for sound', this.path);\r\n\r\n         return newTrack.play().then(() => {\r\n\r\n            // when done, remove track\r\n            this._tracks.splice(this._tracks.indexOf(newTrack), 1);\r\n\r\n            return true;\r\n         });\r\n      } else {\r\n         return Promise.resolve(true);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Stop the sound, and do not rewind\r\n    */\r\n   public pause() {\r\n      for (var track of this._tracks) {\r\n         track.pause();\r\n      }\r\n      this._isPaused = true;\r\n      this._logger.debug('Paused all instances of sound', this.path);\r\n   }\r\n\r\n   /**\r\n    * Stop the sound and rewind\r\n    */\r\n   public stop() {\r\n      this._isPaused = false;\r\n\r\n      var tracks = this._tracks.concat([]);\r\n      for (var track of tracks) {\r\n         track.stop();\r\n      }\r\n      this._logger.debug('Stopped all instances of sound', this.path);\r\n   }\r\n\r\n   /**\r\n    * Returns true if the sound is loaded\r\n    */\r\n   public isLoaded() {\r\n      return this._isLoaded;\r\n   }\r\n\r\n   /**\r\n    * Begins loading the sound and returns a promise to be resolved on completion\r\n    */\r\n   public load(): Promise<IAudioImplementation> {\r\n      var complete = new Promise<IAudioImplementation>();\r\n      \r\n      if (!!this.getData()) {\r\n         this._logger.debug('Already have data for audio resource', this.path);\r\n         complete.resolve(this.sound);\r\n         this.oncomplete();\r\n         return complete;\r\n      }\r\n      \r\n      this._logger.debug('Started loading sound', this.path);        \r\n\r\n      try {\r\n         this._fetchResource(request => {\r\n\r\n            if (request.status !== 200) {\r\n               this._logger.error('Failed to load audio resource ', this.path, ' server responded with error code', request.status);\r\n               this.onerror(request.response);\r\n               complete.resolve(null);\r\n               return;\r\n            }\r\n\r\n            // load sound\r\n            this.setData(request.response).then(() => {                              \r\n               this.oncomplete();\r\n               this._logger.debug('Completed loading sound', this.path);\r\n               \r\n               complete.resolve(this.sound);\r\n            }, (e) => complete.resolve(e));            \r\n         });\r\n\r\n      } catch (e) {\r\n         this._logger.error('Error loading sound! If this is a cross origin error, \\\r\n            you must host your sound with your html and javascript.');\r\n\r\n         this.onerror(e);\r\n         complete.resolve(e);\r\n      }\r\n\r\n      return complete;\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   private _fetchResource(onload: (XMLHttpRequest: XMLHttpRequest) => void) {\r\n      var request = new XMLHttpRequest();\r\n\r\n      request.open('GET', this.path, true);\r\n      request.responseType = this.sound.responseType;\r\n      request.onprogress = this.onprogress;\r\n      request.onerror = this.onerror;\r\n      request.onload = () => onload(request);\r\n\r\n      request.send();\r\n   }\r\n   \r\n   /**\r\n    * Gets the raw sound data (e.g. blob URL or AudioBuffer)\r\n    */\r\n   public getData(): any {\r\n      return this._data;\r\n   }\r\n   \r\n   /**\r\n    * Sets raw sound data and returns a Promise that is resolved when sound data is processed\r\n    * \r\n    * @param data The XHR data for the sound implementation to process (Blob or ArrayBuffer)\r\n    */\r\n   public setData(data: any): Promise<any> {         \r\n      return this.sound.processData(data).then(data => {\r\n         this._isLoaded = true;\r\n         this._data = this.processData(data);\r\n         return data;\r\n      });\r\n   }\r\n\r\n   /**\r\n    * Set the raw sound data (e.g. blob URL or AudioBuffer)\r\n    */\r\n   public processData(data: any) {\r\n      return data;\r\n   }\r\n   \r\n}\r\n\r\n/**\r\n * Internal class representing a HTML5 audio instance    \r\n */\r\n/* istanbul ignore next */\r\nclass AudioTagInstance implements IAudio {\r\n   private _audioElement: HTMLAudioElement;\r\n   private _playingPromise: Promise<any>;\r\n   private _isPlaying = false;\r\n   private _isPaused = false;\r\n   private _loop = false;\r\n   private _volume = 1.0;\r\n\r\n   constructor(src: string) {\r\n\r\n      this._audioElement = new Audio(src);\r\n   }\r\n\r\n   public isPlaying() {\r\n      return this._isPlaying;\r\n   }\r\n\r\n   public get loop() {\r\n      return this._loop;\r\n   }\r\n\r\n   public setLoop(value: boolean) {\r\n      this._loop = value;\r\n      this._audioElement.loop = value;\r\n      this._wireUpOnEnded();\r\n   }\r\n\r\n   public setVolume(value: number) {\r\n      this._volume = value;\r\n      this._audioElement.volume = Util.clamp(value, 0, 1.0);\r\n   }\r\n\r\n   public play() {\r\n      if (this._isPaused) {\r\n         this._resume();\r\n      } else if (!this._isPlaying) {\r\n         this._start();\r\n      }\r\n\r\n      return this._playingPromise;\r\n   }\r\n\r\n   private _start() {\r\n      this._audioElement.load();\r\n      this._audioElement.loop = this._loop;\r\n      this._audioElement.play();\r\n\r\n      this._isPlaying = true;\r\n      this._isPaused = false;\r\n\r\n      this._playingPromise = new Promise();\r\n      this._wireUpOnEnded();\r\n   }\r\n\r\n   private _resume() {\r\n      if (!this._isPaused) {\r\n         return;\r\n      }\r\n\r\n      this._audioElement.play();\r\n\r\n      this._isPaused = false;\r\n      this._isPlaying = true;\r\n      this._wireUpOnEnded();\r\n   }\r\n\r\n   public pause() {\r\n      if (!this._isPlaying) {\r\n         return;\r\n      }\r\n\r\n      this._audioElement.pause();\r\n      this._isPaused = true;\r\n      this._isPlaying = false;\r\n   }\r\n\r\n   public stop() {\r\n      if (!this._isPlaying) {\r\n         return;\r\n      }\r\n\r\n      this._audioElement.pause();\r\n      this._audioElement.currentTime = 0;\r\n      this._handleOnEnded();\r\n   }\r\n\r\n   private _wireUpOnEnded() {\r\n      if (!this._loop) {\r\n         this._audioElement.onended = () => this._handleOnEnded();\r\n      }\r\n   }\r\n\r\n   private _handleOnEnded() {\r\n      this._isPlaying = false;\r\n      this._isPaused = false;\r\n      this._playingPromise.resolve(true);\r\n   }\r\n}  \r\n\r\n/**\r\n * Internal class representing a Web Audio AudioBufferSourceNode instance\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\r\n */\r\n/* istanbul ignore next */\r\nclass WebAudioInstance implements IAudio {\r\n   private _bufferSource: AudioBufferSourceNode;\r\n   private _volumeNode = audioContext.createGain();\r\n   private _playingPromise: Promise<any>;      \r\n   private _isPlaying = false;\r\n   private _isPaused = false;\r\n   private _startTime: number;\r\n   private _loop: boolean = false;\r\n   private _volume: number = 1.0;\r\n\r\n   /**\r\n    * Current playback offset (in seconds)\r\n    */\r\n   private _currentOffset = 0;\r\n\r\n   public isPlaying() {\r\n      return this._isPlaying;\r\n   }\r\n\r\n   constructor(private _buffer: AudioBuffer) {\r\n   }\r\n\r\n   public setVolume(value: number) {\r\n      this._volume = value;\r\n      this._volumeNode.gain.value = Util.clamp(value, 0, 1.0);\r\n   }\r\n\r\n   public setLoop(value: boolean) {\r\n      this._loop = value;\r\n\r\n      if (this._bufferSource) {\r\n         this._bufferSource.loop = value;\r\n         this._wireUpOnEnded();\r\n      }\r\n   }\r\n\r\n   public play() {\r\n      if (this._isPaused) {\r\n         this._resume();\r\n      } else if (!this._isPlaying) {\r\n         this._start();\r\n      }\r\n\r\n      return this._playingPromise;\r\n   }\r\n\r\n   private _start() {\r\n      this._volumeNode.connect(audioContext.destination);\r\n      this._createBufferSource();\r\n      this._bufferSource.start(0, 0);\r\n\r\n      this._startTime = new Date().getTime();\r\n      this._currentOffset = 0;\r\n      this._isPlaying = true;\r\n      this._isPaused = false;\r\n\r\n      this._playingPromise = new Promise();\r\n      this._wireUpOnEnded();\r\n   }\r\n\r\n   private _resume() {\r\n      if (!this._isPaused) {\r\n         return;\r\n      }\r\n\r\n      // a buffer source can only be started once\r\n      // so we need to dispose of the previous instance before\r\n      // \"resuming\" the next one\r\n\r\n      this._bufferSource.onended = null; // dispose of any previous event handler\r\n      this._createBufferSource();\r\n      var duration = (1 / this._bufferSource.playbackRate.value) * this._buffer.duration;\r\n      this._bufferSource.start(0, this._currentOffset % duration);\r\n\r\n      this._isPaused = false;\r\n      this._isPlaying = true;\r\n      this._wireUpOnEnded();\r\n   }\r\n\r\n   private _createBufferSource() {\r\n      this._bufferSource = audioContext.createBufferSource();\r\n      this._bufferSource.buffer = this._buffer;\r\n      this._bufferSource.loop = this._loop;\r\n      this._bufferSource.playbackRate.value = 1.0;\r\n      this._bufferSource.connect(this._volumeNode);\r\n   }\r\n\r\n   public pause() {\r\n      if (!this._isPlaying) {\r\n         return;\r\n      }\r\n\r\n      this._bufferSource.stop(0);\r\n      // Playback rate will be a scale factor of how fast/slow the audio is being played\r\n      // default is 1.0\r\n      // we need to invert it to get the time scale\r\n      var pbRate = 1 / (this._bufferSource.playbackRate.value || 1.0);\r\n      this._currentOffset = ((new Date().getTime() - this._startTime) * pbRate) / 1000; // in seconds\r\n      this._isPaused = true;\r\n      this._isPlaying = false;\r\n   }\r\n\r\n   public stop() {\r\n      if (!this._isPlaying) {\r\n         return;\r\n      }\r\n\r\n      this._bufferSource.stop(0);\r\n      \r\n      // handler will not be wired up if we were looping\r\n      if (!this._bufferSource.onended) {\r\n         this._handleOnEnded();\r\n      }\r\n\r\n      this._currentOffset = 0;\r\n      this._isPlaying = false;\r\n      this._isPaused = false;\r\n   }\r\n\r\n   private _wireUpOnEnded() {\r\n      if (!this._loop) {\r\n         this._bufferSource.onended = () => this._handleOnEnded();\r\n      }\r\n   }\r\n\r\n   private _handleOnEnded() {\r\n      // pausing calls stop(0) which triggers onended event\r\n      // so we don't \"resolve\" yet (when we resume we'll try again)\r\n      if (!this._isPaused) {\r\n         this._isPlaying = false;\r\n         this._playingPromise.resolve(true);\r\n      }\r\n   }\r\n}","import { Color } from './Drawing/Color';\r\nimport { WebAudio } from './Resources/Sound';\r\nimport { Logger } from './Util/Log';\r\nimport { Promise, PromiseState } from './Promises';\r\nimport { Engine } from './Engine';\r\nimport { ILoadable } from './Interfaces/ILoadable';\r\nimport { ILoader } from './Interfaces/ILoader';\r\nimport { Class } from './Class';\r\nimport * as DrawUtil from './Util/DrawUtil';\r\n\r\n/**\r\n * Pre-loading assets\r\n *\r\n * The loader provides a mechanism to preload multiple resources at \r\n * one time. The loader must be passed to the engine in order to \r\n * trigger the loading progress bar.\r\n *\r\n * The [[Loader]] itself implements [[ILoadable]] so you can load loaders.\r\n *\r\n * ## Example: Pre-loading resources for a game\r\n *\r\n * ```js\r\n * // create a loader\r\n * var loader = new ex.Loader();\r\n *\r\n * // create a resource dictionary (best practice is to keep a separate file)\r\n * var resources = {\r\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\r\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\r\n * };\r\n *\r\n * // loop through dictionary and add to loader\r\n * for (var loadable in resources) {\r\n *   if (resources.hasOwnProperty(loadable)) {\r\n *     loader.addResource(resources[loadable]);\r\n *   }\r\n * }\r\n *\r\n * // start game\r\n * game.start(loader).then(function () {\r\n *   console.log(\"Game started!\");\r\n * });\r\n * ```\r\n */\r\nexport class Loader extends Class implements ILoader {\r\n   private _resourceList: ILoadable[] = [];\r\n   private _index = 0;\r\n\r\n   private _resourceCount: number = 0;\r\n   private _numLoaded: number = 0;\r\n   private _progressCounts: { [key: string]: number; } = {};\r\n   private _totalCounts: { [key: string]: number; } = {};\r\n   private _engine: Engine;\r\n\r\n   // logo drawing stuff\r\n\r\n   /* tslint:disable:max-line-length */\r\n   // base64 string encoding of the excalibur logo (logo-white.png)\r\n   public logo = 'data:image/png;base64,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';\r\n   /* tslint:enable:max-line-length */\r\n   public logoWidth = 468;\r\n   public logoHeight = 118;\r\n   public backgroundColor = '#176BAA';\r\n\r\n   protected _imageElement: HTMLImageElement;\r\n   protected get _image() {\r\n      if (!this._imageElement) {\r\n         this._imageElement = new Image();\r\n         this._imageElement.src = this.logo;\r\n      }\r\n\r\n      return this._imageElement;\r\n   };\r\n\r\n   /**\r\n    * @param loadables  Optionally provide the list of resources you want to load at constructor time\r\n    */\r\n   constructor(loadables?: ILoadable[]) {\r\n      super();\r\n\r\n      if (loadables) {\r\n         this.addResources(loadables);\r\n      }\r\n   }\r\n\r\n   public wireEngine(engine: Engine) {\r\n      this._engine = engine;\r\n   }\r\n\r\n   /**\r\n    * Add a resource to the loader to load\r\n    * @param loadable  Resource to add\r\n    */\r\n   public addResource(loadable: ILoadable) {\r\n      var key = this._index++;\r\n      this._resourceList.push(loadable);\r\n      this._progressCounts[key] = 0;\r\n      this._totalCounts[key] = 1;\r\n      this._resourceCount++;\r\n   }\r\n\r\n   /**\r\n    * Add a list of resources to the loader to load\r\n    * @param loadables  The list of resources to load\r\n    */\r\n   public addResources(loadables: ILoadable[]) {\r\n      var i = 0, len = loadables.length;\r\n\r\n      for (i; i < len; i++) {\r\n         this.addResource(loadables[i]);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns true if the loader has completely loaded all resources\r\n    */\r\n   public isLoaded() {\r\n      return this._numLoaded === this._resourceCount;\r\n   }\r\n\r\n\r\n   /**\r\n    * Begin loading all of the supplied resources, returning a promise \r\n    * that resolves when loading of all is complete\r\n    */\r\n   public load(): Promise<any> {\r\n      var complete = new Promise<any>();\r\n      var me = this;\r\n      if (this._resourceList.length === 0) {\r\n         me.oncomplete.call(me);\r\n         return complete.resolve();\r\n      }\r\n\r\n      var progressArray = new Array<any>(this._resourceList.length);\r\n      var progressChunks = this._resourceList.length;\r\n\r\n      this._resourceList.forEach((r, i) => {\r\n         if (this._engine) {\r\n            r.wireEngine(this._engine);\r\n         }\r\n         r.onprogress = function (e) {\r\n            var total = <number>e.total;\r\n            var loaded = <number>e.loaded;\r\n            progressArray[i] = { loaded: ((loaded / total) * (100 / progressChunks)), total: 100 };\r\n\r\n            var progressResult: any = progressArray.reduce(function (accum, next) {\r\n               return { loaded: (accum.loaded + next.loaded), total: 100 };\r\n            }, { loaded: 0, total: 100 });\r\n\r\n            me.onprogress.call(me, progressResult);\r\n         };\r\n         r.oncomplete = r.onerror = function () {\r\n            me._numLoaded++;\r\n            if (me._numLoaded === me._resourceCount) {\r\n               me.oncomplete.call(me);\r\n               complete.resolve();\r\n            }\r\n         };\r\n      });\r\n\r\n      function loadNext(list: ILoadable[], index: number) {\r\n         if (!list[index]) {\r\n            return;\r\n         }\r\n         list[index].load().then(function () {\r\n            loadNext(list, index + 1);\r\n         });\r\n      }\r\n      loadNext(this._resourceList, 0);\r\n\r\n      return complete;\r\n   }\r\n\r\n   /**\r\n    * Loader draw function. Draws the default Excalibur loading screen. \r\n    * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\r\n    * to customize the drawing, or just override entire method.\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D) {\r\n      ctx.fillStyle = this.backgroundColor;\r\n      ctx.fillRect(0, 0, this._engine.canvasWidth, this._engine.canvasHeight);\r\n\r\n      var y = this._engine.canvas.height / 2;\r\n      var width = Math.min(this.logoWidth, this._engine.canvas.width * 0.75);\r\n      var x = (this._engine.canvasWidth / 2) - (width / 2);\r\n\r\n      var imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\r\n      var oldAntialias = this._engine.getAntialiasing();\r\n      this._engine.setAntialiasing(true);\r\n      ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, x, y - imageHeight - 20, width, imageHeight);\r\n\r\n      // loading box\r\n      ctx.lineWidth = 2;\r\n      DrawUtil.roundRect(ctx, x, y, width, 20, 10);\r\n\r\n      var progress = width * (this._numLoaded / this._resourceCount);\r\n      var margin = 5;\r\n      var progressWidth = progress - margin * 2;\r\n      var height = 20 - margin * 2;\r\n      DrawUtil.roundRect(ctx, x + margin, y + margin, progressWidth > 0 ? progressWidth : 0, height, 5, null, Color.White);\r\n      this._engine.setAntialiasing(oldAntialias);\r\n   }\r\n\r\n   /**\r\n    * Perform any calculations or logic in the `update` method. The default `Loader` does not\r\n    * do anything in this method so it is safe to override.\r\n    */\r\n   public update(_engine: Engine, _delta: number) {\r\n      // overridable update\r\n   }\r\n\r\n   public getData: () => any = () => { return; };\r\n\r\n   public setData: (data: any) => any = () => { return; };\r\n\r\n   public processData: (data: any) => any = () => { return; };\r\n\r\n   public onprogress: (e: any) => void = (e: any) => {\r\n\r\n      Logger.getInstance().debug('[ex.Loader] Loading ' + (100 * e.loaded / e.total).toFixed(0));\r\n\r\n      return;\r\n   };\r\n\r\n   public oncomplete: () => void = () => { return; };\r\n\r\n   public onerror: () => void = () => { return; };\r\n\r\n}\r\n\r\n/**\r\n * A [[Loader]] that pauses after loading to allow user\r\n * to proceed to play the game. Typically you will\r\n * want to use this loader for iOS to allow sounds\r\n * to play after loading (Apple Safari requires user\r\n * interaction to allow sounds, even for games)\r\n *\r\n * **Note:** Because Loader is not part of a Scene, you must\r\n * call `update` and `draw` manually on \"child\" objects.\r\n *\r\n * ## Implementing a Trigger\r\n * \r\n * The `PauseAfterLoader` requires an element to act as the trigger button\r\n * to start the game.\r\n *\r\n * For example, let's create an `<a>` tag to be our trigger and call it `tap-to-play`.\r\n *\r\n * ```html\r\n * <div id=\"wrapper\">\r\n *    <canvas id=\"game\"></canvas>\r\n *    <a id=\"tap-to-play\" href='javascript:void(0);'>Tap to Play</a>\r\n * </div>\r\n * ```\r\n *\r\n * We've put it inside a wrapper to position it properly over the game canvas.\r\n *\r\n * Now let's add some CSS to style it (insert into `<head>`):\r\n *\r\n * ```html\r\n * <style>\r\n *     #wrapper {\r\n *         position: relative;\r\n *         width: 500px;\r\n *         height: 500px;\r\n *     }\r\n *     #tap-to-play {\r\n *         display: none;\r\n *         font-size: 24px;\r\n *         font-family: sans-serif;\r\n *         text-align: center;\r\n *         border: 3px solid white;\r\n *         position: absolute;\r\n *         color: white;\r\n *         width: 200px;\r\n *         height: 50px;\r\n *         line-height: 50px;\r\n *         text-decoration: none;\r\n *         left: 147px;\r\n *         top: 80%;\r\n *     }\r\n * </style>\r\n * ```\r\n *\r\n * Now we can create a `PauseAfterLoader` with a reference to our trigger button:\r\n *\r\n * ```ts\r\n * var loader = new ex.PauseAfterLoader('tap-to-play', [...]);\r\n * ```\r\n *\r\n * ## Use PauseAfterLoader for iOS\r\n *\r\n * The primary use case for pausing before starting the game is to\r\n * pass Apple's requirement of user interaction. The Web Audio context\r\n * in Safari is disabled by default until user interaction.\r\n *\r\n * Therefore, you can use this snippet to only use PauseAfterLoader when\r\n * iOS is detected (see [this thread](http://stackoverflow.com/questions/9038625/detect-if-device-is-ios) \r\n * for more techniques).\r\n *\r\n * ```ts\r\n * var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(<any>window).MSStream;\r\n * var loader: ex.Loader = iOS ? new ex.PauseAfterLoader('tap-to-play') : new ex.Loader();\r\n *\r\n * loader.addResource(...);\r\n * ```\r\n */\r\nexport class PauseAfterLoader extends Loader {\r\n\r\n   private _loaded: boolean;\r\n   private _loadedValue: any;\r\n   private _waitPromise: Promise<any>;\r\n   private _playTrigger: HTMLElement;\r\n\r\n   constructor(triggerElementId: string, loadables?: ILoadable[]) {\r\n      super(loadables);\r\n\r\n      this._playTrigger = document.getElementById(triggerElementId);\r\n      this._playTrigger.addEventListener('click', this._handleOnTrigger);\r\n   }\r\n\r\n   public load(): Promise<any> {\r\n      this._waitPromise = new Promise<any>();\r\n\r\n      // wait until user indicates to proceed before finishing load\r\n      super.load().then((value?) => {\r\n         this._loaded = true;\r\n         this._loadedValue = value;\r\n\r\n         // show element\r\n         this._playTrigger.style.display = 'block';\r\n\r\n      }, (value?) => {\r\n         this._waitPromise.reject(value);\r\n      });\r\n\r\n      return this._waitPromise;\r\n   }\r\n\r\n   private _handleOnTrigger = () => {\r\n\r\n      if (this._waitPromise.state() !== PromiseState.Pending) {\r\n         return false;\r\n      }\r\n\r\n      // unlock Safari WebAudio context\r\n      WebAudio.unlock();\r\n\r\n      // continue to play game\r\n      this._waitPromise.resolve(this._loadedValue);\r\n\r\n      // hide DOM element\r\n      this._playTrigger.style.display = 'none';\r\n\r\n      return false;\r\n   };\r\n}  ","import { IActorTrait } from '../Interfaces/IActorTrait';\r\nimport { Actor } from '../Actor';\r\nimport { Engine } from '../Engine';\r\n\r\nexport interface ICapturePointerConfig {\r\n   \r\n   /**\r\n    * Capture PointerMove events (may be expensive!)\r\n    */\r\n   captureMoveEvents: boolean;\r\n\r\n}\r\n\r\n/**\r\n * Propogates pointer events to the actor\r\n */\r\nexport class CapturePointer implements IActorTrait {\r\n\r\n   public update(actor: Actor, engine: Engine) {\r\n      if (!actor.enableCapturePointer) { return; }\r\n      if (actor.isKilled()) { return; }\r\n      \r\n      engine.input.pointers.propogate(actor);         \r\n   }\r\n}","import { Physics } from './../Physics';\r\nimport { IActorTrait } from '../Interfaces/IActorTrait';\r\nimport { Actor, CollisionType } from '../Actor';\r\nimport { Engine } from '../Engine';\r\n\r\nexport class EulerMovement implements IActorTrait { \r\n   public update(actor: Actor, _engine: Engine, delta: number) {\r\n      \r\n      // Update placements based on linear algebra\r\n      var seconds = delta / 1000;\r\n      \r\n      var totalAcc = actor.acc.clone();\r\n      // Only active vanilla actors are affected by global acceleration\r\n      if (actor.collisionType === CollisionType.Active) {\r\n         totalAcc.addEqual(Physics.acc);\r\n      }\r\n      \r\n      actor.oldVel = actor.vel;\r\n      actor.vel.addEqual(totalAcc.scale(seconds));\r\n      \r\n      actor.pos.addEqual(actor.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n      \r\n      actor.rx += actor.torque * (1.0 / actor.moi) * seconds;\r\n      actor.rotation += actor.rx * seconds;\r\n      \r\n      actor.scale.x += actor.sx * delta / 1000;\r\n      actor.scale.y += actor.sy * delta / 1000;\r\n      \r\n   }\r\n}","import { Vector } from '../Algebra';\r\nimport { Actor } from '../Actor';\r\nimport { Engine } from '../Engine';\r\nimport { Color } from '../Drawing/Color';\r\n\r\nexport class CullingBox {\r\n   private _topLeft: Vector = new Vector(0, 0);\r\n   private _topRight: Vector = new Vector(0, 0);\r\n   private _bottomLeft: Vector = new Vector(0, 0);\r\n   private _bottomRight: Vector = new Vector(0, 0);\r\n\r\n   private _xCoords: Array<number>;\r\n   private _yCoords: Array<number>;\r\n   private _xMin: number;\r\n   private _yMin: number;\r\n   private _xMax: number;\r\n   private _yMax: number;\r\n\r\n   private _xMinWorld: number;\r\n   private _yMinWorld: number;\r\n   private _xMaxWorld: number;\r\n   private _yMaxWorld: number;\r\n\r\n   public isSpriteOffScreen(actor: Actor, engine: Engine): boolean {\r\n      var drawingWidth = actor.currentDrawing.width;\r\n      var drawingHeight = actor.currentDrawing.height;\r\n      var rotation = actor.rotation;\r\n      var anchor = actor.getCenter();\r\n      var worldPos = actor.getWorldPos();\r\n\r\n      this._topLeft.x = worldPos.x - (drawingWidth / 2);\r\n      this._topLeft.y = worldPos.y - (drawingHeight / 2);\r\n      this._topLeft = this._topLeft.rotate(rotation, anchor);\r\n\r\n      this._topRight.x = worldPos.x + (drawingWidth / 2);\r\n      this._topRight.y = worldPos.y - (drawingHeight / 2);\r\n      this._topRight = this._topRight.rotate(rotation, anchor);\r\n\r\n      this._bottomLeft.x = worldPos.x - (drawingWidth / 2);\r\n      this._bottomLeft.y = worldPos.y + (drawingHeight / 2);\r\n      this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\r\n\r\n      this._bottomRight.x = worldPos.x + (drawingWidth / 2);\r\n      this._bottomRight.y = worldPos.y + (drawingHeight / 2);\r\n      this._bottomRight = this._bottomRight.rotate(rotation, anchor);\r\n\r\n      ///\r\n\r\n      var topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\r\n      var topRightScreen = engine.worldToScreenCoordinates(this._topRight);\r\n      var bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\r\n      var bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\r\n      this._xCoords = [];\r\n      this._yCoords = [];\r\n\r\n      this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\r\n      this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\r\n\r\n      this._xMin = Math.min.apply(null, this._xCoords);\r\n      this._yMin = Math.min.apply(null, this._yCoords);\r\n      this._xMax = Math.max.apply(null, this._xCoords);\r\n      this._yMax = Math.max.apply(null, this._yCoords);\r\n\r\n      var minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\r\n      var maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\r\n      this._xMinWorld = minWorld.x;\r\n      this._yMinWorld = minWorld.y;\r\n      this._xMaxWorld = maxWorld.x;\r\n      this._yMaxWorld = maxWorld.y;\r\n\r\n      var boundingPoints = [\r\n         new Vector(this._xMin, this._yMin), // topleft\r\n         new Vector(this._xMax, this._yMin), // topright\r\n         new Vector(this._xMin, this._yMax), // bottomleft\r\n         new Vector(this._xMax, this._yMax)]; // bottomright\r\n\r\n      // sprite can be wider than canvas screen (and still visible within canvas)\r\n      // top or bottom of sprite must be within canvas\r\n      if (boundingPoints[0].x < 0 && boundingPoints[1].x > engine.canvas.clientWidth &&\r\n         (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)) {\r\n         return false;\r\n      }\r\n\r\n      // sprite can be taller than canvas screen (and still visible within canvas)\r\n      // left or right of sprite must be within canvas\r\n      if (boundingPoints[0].y < 0 && boundingPoints[2].y > engine.canvas.clientHeight &&\r\n         (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)) {\r\n         return false;\r\n      }\r\n\r\n      // otherwise if any corner is visible, we're not offscreen\r\n      for (var i = 0; i < boundingPoints.length; i++) {\r\n         if (boundingPoints[i].x > 0 &&\r\n            boundingPoints[i].y > 0 &&\r\n            boundingPoints[i].x < engine.canvas.clientWidth &&\r\n            boundingPoints[i].y < engine.canvas.clientHeight) {\r\n            return false;\r\n         }\r\n      }\r\n\r\n      return true;\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n\r\n      // bounding rectangle\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = Color.White.toString();\r\n      ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\r\n      ctx.stroke();\r\n\r\n      ctx.fillStyle = Color.Red.toString();\r\n      ctx.beginPath();\r\n      ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = Color.Green.toString();\r\n      ctx.beginPath();\r\n      ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = Color.Blue.toString();\r\n      ctx.beginPath();\r\n      ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      ctx.fillStyle = Color.Magenta.toString();\r\n      ctx.beginPath();\r\n      ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n   }\r\n}","import { CullingBox } from './../Util/CullingBox';\r\nimport { IActorTrait } from '../Interfaces/IActorTrait';\r\nimport { Actor } from '../Actor';\r\nimport { Engine } from '../Engine';\r\nimport { Vector } from '../Algebra';\r\nimport { ExitViewPortEvent, EnterViewPortEvent } from '../Events';\r\n\r\nexport class OffscreenCulling implements IActorTrait {\r\n\r\n   public cullingBox: CullingBox = new CullingBox();\r\n\r\n   public update(actor: Actor, engine: Engine) {\r\n      var eventDispatcher = actor.eventDispatcher;\r\n      var anchor = actor.anchor;\r\n      var globalScale = actor.getGlobalScale();\r\n      var width = globalScale.x * actor.getWidth() / actor.scale.x;\r\n      var height = globalScale.y * actor.getHeight() / actor.scale.y;\r\n      var worldPos = actor.getWorldPos();\r\n      var actorScreenCoords = engine.worldToScreenCoordinates(new Vector(worldPos.x - anchor.x * width, \r\n                                                                           worldPos.y - anchor.y * height));\r\n\r\n      var zoom = 1.0;\r\n      if (actor.scene && actor.scene.camera) {\r\n         zoom = Math.abs(actor.scene.camera.getZoom());   \r\n      }\r\n      \r\n      var isSpriteOffScreen = true;\r\n      if (actor.currentDrawing != null) {\r\n         isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\r\n      }\r\n      \r\n      if (!actor.isOffScreen) {\r\n         if ((actorScreenCoords.x + width * zoom < 0 || \r\n            actorScreenCoords.y + height * zoom < 0 ||\r\n            actorScreenCoords.x > engine.canvasWidth ||\r\n            actorScreenCoords.y > engine.canvasHeight) &&\r\n            isSpriteOffScreen ) {\r\n            \r\n            eventDispatcher.emit('exitviewport', new ExitViewPortEvent(actor));\r\n            actor.isOffScreen = true;\r\n         }\r\n      } else {\r\n         if ((actorScreenCoords.x + width * zoom > 0 &&\r\n            actorScreenCoords.y + height * zoom > 0 &&\r\n            actorScreenCoords.x < engine.canvasWidth &&\r\n            actorScreenCoords.y < engine.canvasHeight) ||\r\n            !isSpriteOffScreen) {\r\n            \r\n            eventDispatcher.emit('enterviewport', new EnterViewPortEvent(actor));               \r\n            actor.isOffScreen = false;\r\n         }\r\n      }\r\n   }\r\n}","import { IActorTrait } from '../Interfaces/IActorTrait';\r\nimport { Actor, CollisionType } from '../Actor';\r\nimport { Engine } from '../Engine';\r\nimport { Vector } from '../Algebra';\r\nimport { Side } from '../Collision/Side';\r\nimport { CollisionEvent } from '../Events';\r\n\r\nexport class TileMapCollisionDetection implements IActorTrait { \r\n   public update(actor: Actor, engine: Engine) {\r\n      var eventDispatcher = actor.eventDispatcher;\r\n      if (actor.collisionType !== CollisionType.PreventCollision && engine.currentScene && engine.currentScene.tileMaps) {            \r\n\r\n         for (var j = 0; j < engine.currentScene.tileMaps.length; j++) {\r\n            var map = engine.currentScene.tileMaps[j];\r\n            var intersectMap: Vector;\r\n            var side = Side.None;\r\n            var max = 2;\r\n            var hasBounced = false;\r\n            while (intersectMap = map.collides(actor)) {\r\n               if (max-- < 0) {\r\n                  break;\r\n               } \r\n               side = actor.getSideFromIntersect(intersectMap);\r\n               eventDispatcher.emit('collision', new CollisionEvent(actor, null, side, intersectMap));\r\n               if ((actor.collisionType === CollisionType.Active || actor.collisionType === CollisionType.Elastic)) {\r\n                  actor.pos.y += intersectMap.y;\r\n                  actor.pos.x += intersectMap.x;\r\n\r\n                  // Naive elastic bounce\r\n                  if (actor.collisionType === CollisionType.Elastic && !hasBounced) {\r\n                     hasBounced = true;\r\n                     if (side === Side.Left) {\r\n                        actor.vel.x = Math.abs(actor.vel.x);\r\n                     } else if (side === Side.Right) {\r\n                        actor.vel.x = -Math.abs(actor.vel.x);\r\n                     } else if (side === Side.Top) {\r\n                        actor.vel.y = Math.abs(actor.vel.y);\r\n                     } else if (side === Side.Bottom) {\r\n                        actor.vel.y = -Math.abs(actor.vel.y);\r\n                     }\r\n                  }                 \r\n               }\r\n            }\r\n         }\r\n      }\r\n   }\r\n}","export * from './CapturePointer';\r\nexport * from './EulerMovement';\r\nexport * from './OffscreenCulling';\r\nexport * from './TileMapCollisionDetection';","import { Engine } from './Engine';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport { Sprite } from './Drawing/Sprite';\r\nimport { Color } from './Drawing/Color';\r\nimport { Vector } from './Algebra';\r\nimport * as Util from './Util/Util';\r\nimport * as DrawUtil from './Util/DrawUtil';\r\nimport * as Traits from './Traits/Index';\r\n\r\n/**\r\n * An enum that represents the types of emitter nozzles\r\n */\r\nexport enum EmitterType {\r\n   /**\r\n    * Constant for the circular emitter type\r\n    */\r\n   Circle,\r\n   /**\r\n    * Constant for the rectangular emitter type\r\n    */\r\n   Rectangle\r\n}\r\n\r\n/**\r\n * Particle is used in a [[ParticleEmitter]]\r\n */\r\nexport class Particle {\r\n   public position: Vector = new Vector(0, 0);\r\n   public velocity: Vector = new Vector(0, 0);\r\n   public acceleration: Vector = new Vector(0, 0);\r\n   public particleRotationalVelocity: number = 0;\r\n   public currentRotation: number = 0;\r\n\r\n   public focus: Vector = null;\r\n   public focusAccel: number = 0;\r\n   public opacity: number = 1;\r\n   public beginColor: Color = Color.White.clone();\r\n   public endColor: Color = Color.White.clone();\r\n\r\n   // Life is counted in ms\r\n   public life: number = 300;\r\n   public fadeFlag: boolean = false;\r\n\r\n   // Color transitions\r\n   private _rRate: number = 1;\r\n   private _gRate: number = 1;\r\n   private _bRate: number = 1;\r\n   private _aRate: number = 0;\r\n   private _currentColor: Color = Color.White.clone();\r\n\r\n\r\n   public emitter: ParticleEmitter = null;\r\n   public particleSize: number = 5;\r\n   public particleSprite: Sprite = null;\r\n\r\n   public startSize: number;\r\n   public endSize: number;\r\n   public sizeRate: number = 0;\r\n   public elapsedMultiplier: number = 0;\r\n\r\n   constructor(emitter: ParticleEmitter,\r\n      life?: number,\r\n      opacity?: number,\r\n      beginColor?: Color,\r\n      endColor?: Color,\r\n      position?: Vector,\r\n      velocity?: Vector,\r\n      acceleration?: Vector,\r\n      startSize?: number,\r\n      endSize?: number) {\r\n      this.emitter = emitter;\r\n      this.life = life || this.life;\r\n      this.opacity = opacity || this.opacity;\r\n      this.endColor = endColor || this.endColor.clone();\r\n      this.beginColor = beginColor || this.beginColor.clone();\r\n      this._currentColor = this.beginColor.clone();\r\n      this.position = position || this.position;\r\n      this.velocity = velocity || this.velocity;\r\n      this.acceleration = acceleration || this.acceleration;\r\n      this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\r\n      this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\r\n      this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\r\n      this._aRate = this.opacity / this.life;\r\n\r\n      this.startSize = startSize || 0;\r\n      this.endSize = endSize || 0;\r\n\r\n      if ((this.endSize > 0) && (this.startSize > 0)) {\r\n         this.sizeRate = (this.endSize - this.startSize) / this.life;\r\n         this.particleSize = this.startSize;\r\n      }\r\n   }\r\n\r\n   public kill() {\r\n      this.emitter.removeParticle(this);\r\n   }\r\n\r\n   public update(delta: number) {\r\n      this.life = this.life - delta;\r\n      this.elapsedMultiplier = this.elapsedMultiplier + delta;\r\n\r\n      if (this.life < 0) {\r\n         this.kill();\r\n      }\r\n\r\n      if (this.fadeFlag) {\r\n         this.opacity = Util.clamp(this._aRate * this.life, 0.0001, 1);\r\n      }\r\n\r\n      if ((this.startSize > 0) && (this.endSize > 0)) {\r\n         this.particleSize = Util.clamp(this.sizeRate * delta + this.particleSize,\r\n            Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\r\n      }\r\n\r\n      this._currentColor.r = Util.clamp(this._currentColor.r + this._rRate * delta, 0, 255);\r\n      this._currentColor.g = Util.clamp(this._currentColor.g + this._gRate * delta, 0, 255);\r\n      this._currentColor.b = Util.clamp(this._currentColor.b + this._bRate * delta, 0, 255);\r\n      this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\r\n\r\n      if (this.focus) {\r\n         var accel = this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(delta / 1000);\r\n         this.velocity = this.velocity.add(accel);\r\n      } else {\r\n         this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\r\n      }\r\n      this.position = this.position.add(this.velocity.scale(delta / 1000));\r\n\r\n      if (this.particleRotationalVelocity) {\r\n         this.currentRotation = (this.currentRotation + this.particleRotationalVelocity * delta / 1000) % (2 * Math.PI);\r\n      }\r\n   }\r\n\r\n   public draw(ctx: CanvasRenderingContext2D) {\r\n\r\n      if (this.particleSprite) {\r\n         this.particleSprite.rotation = this.currentRotation;\r\n         this.particleSprite.scale.setTo(this.particleSize, this.particleSize);\r\n         this.particleSprite.draw(ctx, this.position.x, this.position.y);\r\n         return;\r\n      }\r\n\r\n      this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\r\n      ctx.fillStyle = this._currentColor.toString();\r\n      ctx.beginPath();\r\n      ctx.arc(this.position.x, this.position.y, this.particleSize, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.closePath();\r\n\r\n   }\r\n}\r\n\r\n/**\r\n * Using a particle emitter is a great way to create interesting effects \r\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\r\n * extend [[Actor]] allowing you to use all of the features that come with.\r\n *\r\n * [[include:Particles.md]]\r\n */\r\nexport class ParticleEmitter extends Actor {\r\n\r\n   private _particlesToEmit: number = 0;\r\n\r\n   public numParticles: number = 0;\r\n\r\n   /**\r\n    * Gets or sets the isEmitting flag\r\n    */\r\n   public isEmitting: boolean = true;\r\n   /**\r\n    * Gets or sets the backing particle collection\r\n    */\r\n   public particles: Util.Collection<Particle> = null;\r\n\r\n   /**\r\n    * Gets or sets the backing deadParticle collection\r\n    */\r\n   public deadParticles: Util.Collection<Particle> = null;\r\n\r\n   /**\r\n    * Gets or sets the minimum particle velocity\r\n    */\r\n   public minVel: number = 0;\r\n   /**\r\n    * Gets or sets the maximum particle velocity\r\n    */\r\n   public maxVel: number = 0;\r\n\r\n   /**\r\n    * Gets or sets the acceleration vector for all particles\r\n    */\r\n   public acceleration: Vector = new Vector(0, 0);\r\n\r\n   /**\r\n    * Gets or sets the minimum angle in radians\r\n    */\r\n   public minAngle: number = 0;\r\n   /**\r\n    * Gets or sets the maximum angle in radians\r\n    */\r\n   public maxAngle: number = 0;\r\n\r\n   /**\r\n    * Gets or sets the emission rate for particles (particles/sec)\r\n    */\r\n   public emitRate: number = 1; //particles/sec\r\n   /**\r\n    * Gets or sets the life of each particle in milliseconds\r\n    */\r\n   public particleLife: number = 2000;\r\n   /**\r\n    * Gets or sets the opacity of each particle from 0 to 1.0\r\n    */\r\n   public opacity: number = 1;\r\n   /**\r\n    * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\r\n    */\r\n   public fadeFlag: boolean = false;\r\n\r\n   /**\r\n    * Gets or sets the optional focus where all particles should accelerate towards\r\n    */\r\n   public focus: Vector = null;\r\n   /**\r\n    * Gets or sets the acceleration for focusing particles if a focus has been specified\r\n    */\r\n   public focusAccel: number = 1;\r\n   /*\r\n    * Gets or sets the optional starting size for the particles\r\n    */\r\n   public startSize: number = null;\r\n   /*\r\n    * Gets or sets the optional ending size for the particles\r\n    */\r\n   public endSize: number = null;\r\n\r\n   /**\r\n    * Gets or sets the minimum size of all particles\r\n    */\r\n   public minSize: number = 5;\r\n   /**\r\n    * Gets or sets the maximum size of all particles\r\n    */\r\n   public maxSize: number = 5;\r\n\r\n   /**\r\n    * Gets or sets the beginning color of all particles\r\n    */\r\n   public beginColor: Color = Color.White;\r\n   /**\r\n    * Gets or sets the ending color of all particles\r\n    */\r\n   public endColor: Color = Color.White;\r\n\r\n   /**\r\n    * Gets or sets the sprite that a particle should use\r\n    * @warning Performance intensive\r\n    */\r\n   public particleSprite: Sprite = null;\r\n\r\n   /**\r\n    * Gets or sets the emitter type for the particle emitter\r\n    */\r\n   public emitterType: EmitterType = EmitterType.Rectangle;\r\n\r\n   /**\r\n    * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\r\n    */\r\n   public radius: number = 0;\r\n\r\n   /**\r\n    * Gets or sets the particle rotational speed velocity \r\n    */\r\n   public particleRotationalVelocity: number = 0;\r\n\r\n   /**\r\n    * Indicates whether particles should start with a random rotation\r\n    */\r\n   public randomRotation: boolean = false;\r\n\r\n   /**\r\n    * @param x       The x position of the emitter\r\n    * @param y       The y position of the emitter\r\n    * @param width   The width of the emitter\r\n    * @param height  The height of the emitter\r\n    */\r\n   constructor(x?: number, y?: number, width?: number, height?: number) {\r\n      super(x, y, width, height, Color.White);\r\n      this.collisionType = CollisionType.PreventCollision;\r\n      this.particles = new Util.Collection<Particle>();\r\n      this.deadParticles = new Util.Collection<Particle>();\r\n\r\n      // Remove offscreen culling from particle emitters\r\n      for (let i = 0; i < this.traits.length; i++) {\r\n         if (this.traits[i] instanceof Traits.OffscreenCulling) {\r\n            this.traits.splice(i, 1);\r\n         }\r\n      }\r\n\r\n   }\r\n\r\n   public removeParticle(particle: Particle) {\r\n      this.deadParticles.push(particle);\r\n   }\r\n\r\n   /**\r\n    * Causes the emitter to emit particles\r\n    * @param particleCount  Number of particles to emit right now\r\n    */\r\n   public emitParticles(particleCount: number) {\r\n      for (var i = 0; i < particleCount; i++) {\r\n         this.particles.push(this._createParticle());\r\n      }\r\n   }\r\n\r\n   public clearParticles() {\r\n      this.particles.clear();\r\n   }\r\n\r\n   // Creates a new particle given the constraints of the emitter\r\n   private _createParticle(): Particle {\r\n      // todo implement emitter constraints;\r\n      var ranX = 0;\r\n      var ranY = 0;\r\n\r\n      var angle = Util.randomInRange(this.minAngle, this.maxAngle);\r\n      var vel = Util.randomInRange(this.minVel, this.maxVel);\r\n      var size = this.startSize || Util.randomInRange(this.minSize, this.maxSize);\r\n      var dx = vel * Math.cos(angle);\r\n      var dy = vel * Math.sin(angle);\r\n\r\n      if (this.emitterType === EmitterType.Rectangle) {\r\n         ranX = Util.randomInRange(this.pos.x, this.pos.x + this.getWidth());\r\n         ranY = Util.randomInRange(this.pos.y, this.pos.y + this.getHeight());\r\n      } else if (this.emitterType === EmitterType.Circle) {\r\n         var radius = Util.randomInRange(0, this.radius);\r\n         ranX = radius * Math.cos(angle) + this.pos.x;\r\n         ranY = radius * Math.sin(angle) + this.pos.y;\r\n      }\r\n\r\n      var p = new Particle(this,\r\n         this.particleLife,\r\n         this.opacity,\r\n         this.beginColor,\r\n         this.endColor,\r\n         new Vector(ranX, ranY),\r\n         new Vector(dx, dy),\r\n         this.acceleration,\r\n         this.startSize,\r\n         this.endSize);\r\n      p.fadeFlag = this.fadeFlag;\r\n      p.particleSize = size;\r\n      if (this.particleSprite) {\r\n         p.particleSprite = this.particleSprite;\r\n      }\r\n      p.particleRotationalVelocity = this.particleRotationalVelocity;\r\n      if (this.randomRotation) {\r\n         p.currentRotation = Util.randomInRange(0, Math.PI * 2);\r\n      }\r\n      if (this.focus) {\r\n         p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\r\n         p.focusAccel = this.focusAccel;\r\n      }\r\n      return p;\r\n   }\r\n\r\n   public update(engine: Engine, delta: number) {\r\n      super.update(engine, delta);\r\n\r\n      if (this.isEmitting) {\r\n         this._particlesToEmit += this.emitRate * (delta / 1000);\r\n         //var numParticles = Math.ceil(this.emitRate * delta / 1000);\r\n         if (this._particlesToEmit > 1.0) {\r\n            this.emitParticles(Math.floor(this._particlesToEmit));\r\n            this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\r\n         }\r\n      }\r\n\r\n      this.particles.forEach(p => p.update(delta));\r\n      this.deadParticles.forEach(p => this.particles.removeElement(p));\r\n      this.deadParticles.clear();\r\n   }\r\n\r\n   public draw(ctx: CanvasRenderingContext2D) {\r\n\r\n      // todo is there a more efficient to draw \r\n      // possibly use a webgl offscreen canvas and shaders to do particles?\r\n      this.particles.forEach(p => p.draw(ctx));\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      super.debugDraw(ctx);\r\n      ctx.fillStyle = Color.Black.toString();\r\n      ctx.fillText('Particles: ' + this.particles.count(), this.pos.x, this.pos.y + 20);\r\n\r\n      if (this.focus) {\r\n         ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\r\n         DrawUtil.line(ctx, Color.Yellow,\r\n            this.focus.x + this.pos.x,\r\n            this.focus.y + this.pos.y,\r\n            super.getCenter().x,\r\n            super.getCenter().y);\r\n         ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\r\n      }\r\n   }\r\n\r\n}","import { BoundingBox } from './Collision/BoundingBox';\r\nimport { Color } from './Drawing/Color';\r\nimport { Class } from './Class';\r\nimport { Engine } from './Engine';\r\nimport { Vector } from './Algebra';\r\nimport { Actor } from './Actor';\r\nimport { Logger } from './Util/Log';\r\nimport { SpriteSheet } from './Drawing/SpriteSheet';\r\nimport * as Events from './Events';\r\n\r\n/**\r\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\r\n * without the overhead of actors.\r\n *\r\n * [[include:TileMaps.md]]\r\n */\r\nexport class TileMap extends Class {\r\n   private _collidingX: number = -1;\r\n   private _collidingY: number = -1;\r\n   private _onScreenXStart: number = 0;\r\n   private _onScreenXEnd: number = 9999;\r\n   private _onScreenYStart: number = 0;\r\n   private _onScreenYEnd: number = 9999;\r\n   private _spriteSheets: { [key: string]: SpriteSheet } = {};\r\n   public logger: Logger = Logger.getInstance();\r\n   public data: Cell[] = [];\r\n\r\n   public on(eventName: Events.preupdate, handler: (event?: Events.PreUpdateEvent) => void): void;\r\n   public on(eventName: Events.postupdate, handler: (event?: Events.PostUpdateEvent) => void): void;\r\n   public on(eventName: Events.predraw, handler: (event?: Events.PreDrawEvent) => void): void;\r\n   public on(eventName: Events.postdraw, handler: (event?: Events.PostDrawEvent) => void): void;\r\n   public on(eventName: string, handler: (event?: Events.GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: Events.GameEvent<any>) => void): void {\r\n      super.on(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * @param x             The x coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n    * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n    * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\r\n    * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\r\n    * @param rows          The number of rows in the TileMap (should not be changed once set)\r\n    * @param cols          The number of cols in the TileMap (should not be changed once set)\r\n    */\r\n   constructor(\r\n      public x: number,\r\n      public y: number,\r\n      public cellWidth: number,\r\n      public cellHeight: number,\r\n      public rows: number,\r\n      public cols: number) {\r\n      super();\r\n      this.data = new Array<Cell>(rows * cols);\r\n      for (var i = 0; i < cols; i++) {\r\n         for (var j = 0; j < rows; j++) {\r\n            (() => {\r\n               var cd = new Cell(\r\n                  i * cellWidth + x,\r\n                  j * cellHeight + y,\r\n                  cellWidth,\r\n                  cellHeight,\r\n                  i + j * cols);\r\n               this.data[i + j * cols] = cd;\r\n            })();\r\n         }\r\n      }\r\n   }\r\n\r\n   public registerSpriteSheet(key: string, spriteSheet: SpriteSheet) {\r\n      this._spriteSheets[key] = spriteSheet;\r\n   }\r\n   /**\r\n    * Returns the intersection vector that can be used to resolve collisions with actors. If there\r\n    * is no collision null is returned.\r\n    */\r\n   public collides(actor: Actor): Vector {\r\n      var width = actor.pos.x + actor.getWidth();\r\n      var height = actor.pos.y + actor.getHeight();\r\n      var actorBounds = actor.getBounds();\r\n      var overlaps: Vector[] = [];\r\n      // trace points for overlap\r\n      for (var x = actorBounds.left; x <= width; x += Math.min(actor.getWidth() / 2, this.cellWidth / 2)) {\r\n         for (var y = actorBounds.top; y <= height; y += Math.min(actor.getHeight() / 2, this.cellHeight / 2)) {\r\n            var cell = this.getCellByPoint(x, y);\r\n            if (cell && cell.solid) {\r\n               var overlap = actorBounds.collides(cell.getBounds());\r\n               var dir = actor.getCenter().sub(cell.getCenter());\r\n               if (overlap && overlap.dot(dir) > 0) {\r\n                  overlaps.push(overlap);\r\n               }\r\n            }\r\n         }\r\n      }\r\n      if (overlaps.length === 0) {\r\n         return null;\r\n      }\r\n      // Return the smallest change other than zero\r\n      var result = overlaps.reduce((accum, next) => {\r\n         var x = accum.x;\r\n         var y = accum.y;\r\n         if (Math.abs(accum.x) < Math.abs(next.x)) {\r\n            x = next.x;\r\n         }\r\n         if (Math.abs(accum.y) < Math.abs(next.y)) {\r\n            y = next.y;\r\n         }\r\n         return new Vector(x, y);\r\n      });\r\n      return result;\r\n   }\r\n\r\n   /**\r\n    * Returns the [[Cell]] by index (row major order)\r\n    */\r\n   public getCellByIndex(index: number): Cell {\r\n      return this.data[index];\r\n   }\r\n   /**\r\n    * Returns the [[Cell]] by its x and y coordinates\r\n    */\r\n   public getCell(x: number, y: number): Cell {\r\n      if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\r\n         return null;\r\n      }\r\n      return this.data[x + y * this.cols];\r\n   }\r\n   /**\r\n    * Returns the [[Cell]] by testing a point in global coordinates, \r\n    * returns `null` if no cell was found.\r\n    */\r\n   public getCellByPoint(x: number, y: number): Cell {\r\n      x = Math.floor((x - this.x) / this.cellWidth);\r\n      y = Math.floor((y - this.y) / this.cellHeight);\r\n      var cell = this.getCell(x, y);\r\n      if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\r\n         return cell;\r\n      }\r\n      return null;\r\n   }\r\n\r\n   public update(engine: Engine, delta: number) {\r\n      this.emit('preupdate', new Events.PreUpdateEvent(engine, delta, this));\r\n\r\n      var worldCoordsUpperLeft = engine.screenToWorldCoordinates(new Vector(0, 0));\r\n      var worldCoordsLowerRight = engine.screenToWorldCoordinates(new Vector(engine.canvas.clientWidth, engine.canvas.clientHeight));\r\n\r\n      this._onScreenXStart = Math.max(Math.floor(worldCoordsUpperLeft.x / this.cellWidth) - 2, 0);\r\n      this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\r\n      this._onScreenXEnd = Math.max(Math.floor(worldCoordsLowerRight.x / this.cellWidth) + 2, 0);\r\n      this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\r\n\r\n      this.emit('postupdate', new Events.PostUpdateEvent(engine, delta, this));\r\n   }\r\n\r\n   /**\r\n    * Draws the tile map to the screen. Called by the [[Scene]].\r\n    * @param ctx    The current rendering context\r\n    * @param delta  The number of milliseconds since the last draw\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n      this.emit('predraw', new Events.PreDrawEvent(ctx, delta, this));\r\n\r\n      ctx.save();\r\n      ctx.translate(this.x, this.y);\r\n\r\n      var x = this._onScreenXStart, xEnd = Math.min(this._onScreenXEnd, this.cols);\r\n      var y = this._onScreenYStart, yEnd = Math.min(this._onScreenYEnd, this.rows);\r\n\r\n      var cs: TileSprite[], csi: number, cslen: number;\r\n\r\n      for (x; x < xEnd; x++) {\r\n         for (y; y < yEnd; y++) {\r\n\r\n            // get non-negative tile sprites\r\n            cs = this.getCell(x, y).sprites.filter((s) => {\r\n               return s.spriteId > -1;\r\n            });\r\n\r\n            for (csi = 0, cslen = cs.length; csi < cslen; csi++) {\r\n               var ss = this._spriteSheets[cs[csi].spriteSheetKey];\r\n\r\n               // draw sprite, warning if sprite doesn't exist\r\n               if (ss) {\r\n                  var sprite = ss.getSprite(cs[csi].spriteId);\r\n                  if (sprite) {\r\n                     sprite.draw(ctx, x * this.cellWidth, y * this.cellHeight);\r\n                  } else {\r\n                     this.logger.warn('Sprite does not exist for id',\r\n                        cs[csi].spriteId,\r\n                        'in sprite sheet',\r\n                        cs[csi].spriteSheetKey, sprite, ss);\r\n                  }\r\n               } else {\r\n                  this.logger.warn('Sprite sheet', cs[csi].spriteSheetKey, 'does not exist', ss);\r\n               }\r\n            }\r\n         }\r\n         y = this._onScreenYStart;\r\n      }\r\n      ctx.restore();\r\n\r\n      this.emit('postdraw', new Events.PostDrawEvent(ctx, delta, this));\r\n   }\r\n\r\n   /**\r\n    * Draws all the tile map's debug info. Called by the [[Scene]].\r\n    * @param ctx  The current rendering context\r\n    */\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      var width = this.cols * this.cellWidth;\r\n      var height = this.rows * this.cellHeight;\r\n      ctx.save();\r\n      ctx.strokeStyle = Color.Red.toString();\r\n      for (var x = 0; x < this.cols + 1; x++) {\r\n         ctx.beginPath();\r\n         ctx.moveTo(this.x + x * this.cellWidth, this.y);\r\n         ctx.lineTo(this.x + x * this.cellWidth, this.y + height);\r\n         ctx.stroke();\r\n      }\r\n      for (var y = 0; y < this.rows + 1; y++) {\r\n         ctx.beginPath();\r\n         ctx.moveTo(this.x, this.y + y * this.cellHeight);\r\n         ctx.lineTo(this.x + width, this.y + y * this.cellHeight);\r\n         ctx.stroke();\r\n      }\r\n      var solid = Color.Red.clone();\r\n      solid.a = .3;\r\n      this.data.filter(function (cell) {\r\n         return cell.solid;\r\n      }).forEach(function (cell) {\r\n         ctx.fillStyle = solid.toString();\r\n         ctx.fillRect(cell.x, cell.y, cell.width, cell.height);\r\n      });\r\n      if (this._collidingY > -1 && this._collidingX > -1) {\r\n         ctx.fillStyle = Color.Cyan.toString();\r\n         ctx.fillRect(this.x + this._collidingX * this.cellWidth,\r\n            this.y + this._collidingY * this.cellHeight,\r\n            this.cellWidth,\r\n            this.cellHeight);\r\n      }\r\n      ctx.restore();\r\n   }\r\n}\r\n\r\n/**\r\n * Tile sprites are used to render a specific sprite from a [[TileMap]]'s spritesheet(s)\r\n */\r\nexport class TileSprite {\r\n   /**\r\n    * @param spriteSheetKey  The key of the spritesheet to use\r\n    * @param spriteId        The index of the sprite in the [[SpriteSheet]]\r\n    */\r\n   constructor(public spriteSheetKey: string, public spriteId: number) { }\r\n}\r\n\r\n/**\r\n * TileMap Cell\r\n *\r\n * A light-weight object that occupies a space in a collision map. Generally\r\n * created by a [[TileMap]].\r\n *\r\n * Cells can draw multiple sprites. Note that the order of drawing is the order\r\n * of the sprites in the array so the last one will be drawn on top. You can\r\n * use transparency to create layers this way.\r\n */\r\nexport class Cell {\r\n   private _bounds: BoundingBox;\r\n\r\n   /**\r\n    * @param x       Gets or sets x coordinate of the cell in world coordinates\r\n    * @param y       Gets or sets y coordinate of the cell in world coordinates\r\n    * @param width   Gets or sets the width of the cell \r\n    * @param height  Gets or sets the height of the cell \r\n    * @param index   The index of the cell in row major order\r\n    * @param solid   Gets or sets whether this cell is solid\r\n    * @param sprites The list of tile sprites to use to draw in this cell (in order)\r\n    */\r\n   constructor(\r\n      public x: number,\r\n      public y: number,\r\n      public width: number,\r\n      public height: number,\r\n      public index: number,\r\n      public solid: boolean = false,\r\n      public sprites: TileSprite[] = []) {\r\n      this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\r\n   }\r\n\r\n   /**\r\n    * Returns the bounding box for this cell\r\n    */\r\n   public getBounds() {\r\n      return this._bounds;\r\n   }\r\n   /**\r\n    * Gets the center coordinate of this cell\r\n    */\r\n   public getCenter(): Vector {\r\n      return new Vector(this.x + this.width / 2, this.y + this.height / 2);\r\n   }\r\n   /**\r\n    * Add another [[TileSprite]] to this cell\r\n    */\r\n   public pushSprite(tileSprite: TileSprite) {\r\n      this.sprites.push(tileSprite);\r\n   }\r\n   /**\r\n    * Remove an instance of [[TileSprite]] from this cell\r\n    */\r\n   public removeSprite(tileSprite: TileSprite) {\r\n      var index = -1;\r\n      if ((index = this.sprites.indexOf(tileSprite)) > -1) {\r\n         this.sprites.splice(index, 1);\r\n      }\r\n   }\r\n   /**\r\n    * Clear all sprites from this cell\r\n    */\r\n   public clearSprites() {\r\n      this.sprites.length = 0;\r\n   }\r\n}","import { Scene } from './Scene';\r\n\r\n/**\r\n * The Excalibur timer hooks into the internal timer and fires callbacks, \r\n * after a certain interval, optionally repeating.\r\n */\r\nexport class Timer {\r\n   public static id: number = 0;\r\n   public id: number = 0;\r\n   public interval: number = 10;\r\n   public fcn: () => void = () => { return; };\r\n   public repeats: boolean = false;\r\n   private _elapsedTime: number = 0;\r\n   private _totalTimeAlive: number = 0;\r\n   public complete: boolean = false;\r\n   public scene: Scene = null;\r\n\r\n   /**\r\n    * @param fcn        The callback to be fired after the interval is complete.\r\n    * @param interval   Interval length\r\n    * @param repeats    Indicates whether this call back should be fired only once, or repeat after every interval as completed.    \r\n    */\r\n   constructor(fcn: () => void, interval: number, repeats?: boolean) {\r\n      this.id = Timer.id++;\r\n      this.interval = interval || this.interval;\r\n      this.fcn = fcn || this.fcn;\r\n      this.repeats = repeats || this.repeats;\r\n   }\r\n\r\n   /**\r\n    * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\r\n    * @param delta  Number of elapsed milliseconds since the last update.\r\n    */\r\n   public update(delta: number) {\r\n      this._totalTimeAlive += delta;\r\n      this._elapsedTime += delta;\r\n      if (this._elapsedTime > this.interval) {\r\n         this.fcn.call(this);\r\n         if (this.repeats) {\r\n            this._elapsedTime = 0;\r\n         } else {\r\n            this.complete = true;\r\n         }\r\n      }\r\n   }\r\n\r\n   public getTimeRunning(): number {\r\n      return this._totalTimeAlive;\r\n   }\r\n\r\n   /**\r\n    * Cancels the timer, preventing any further executions.\r\n    */\r\n   public cancel() {\r\n      if (this.scene) {\r\n         this.scene.cancelTimer(this);\r\n      }\r\n   }\r\n}","import { Color } from './Drawing/Color';\r\nimport { Engine } from './Engine';\r\nimport { ActionQueue } from './Actions/Action';\r\nimport { EventDispatcher } from './EventDispatcher';\r\nimport { Actor, CollisionType } from './Actor';\r\n\r\n/**\r\n * Triggers are a method of firing arbitrary code on collision. These are useful\r\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\r\n * are invisible, and can only be seen when [[Engine.isDebug]] is set to `true`.\r\n * \r\n * [[include:Triggers.md]]\r\n */\r\nexport class Trigger extends Actor {\r\n   private _action: () => void = () => { return; };\r\n   public repeats: number = 1;\r\n   public target: Actor = null;\r\n\r\n   /**\r\n    * @param x       The x position of the trigger\r\n    * @param y       The y position of the trigger\r\n    * @param width   The width of the trigger\r\n    * @param height  The height of the trigger\r\n    * @param action  Callback to fire when trigger is activated, `this` will be bound to the Trigger instance\r\n    * @param repeats The number of times that this trigger should fire, by default it is 1, if -1 is supplied it will fire indefinitely\r\n    */\r\n   constructor(x?: number, y?: number, width?: number, height?: number, action?: () => void, repeats?: number) {\r\n      super(x, y, width, height);\r\n      this.repeats = repeats || this.repeats;\r\n      this._action = action || this._action;\r\n      this.collisionType = CollisionType.PreventCollision;\r\n      this.eventDispatcher = new EventDispatcher(this);\r\n      this.actionQueue = new ActionQueue(this);\r\n   }\r\n\r\n   public update(engine: Engine, delta: number) {\r\n\r\n      // Update action queue\r\n      this.actionQueue.update(delta);\r\n\r\n      // Update placements based on linear algebra\r\n      this.pos.x += this.vel.x * delta / 1000;\r\n      this.pos.y += this.vel.y * delta / 1000;\r\n\r\n      this.rotation += this.rx * delta / 1000;\r\n\r\n      this.scale.x += this.sx * delta / 1000;\r\n      this.scale.y += this.sy * delta / 1000;\r\n\r\n      // check for trigger collisions\r\n      if (this.target) {\r\n         if (this.collides(this.target)) {\r\n            this._dispatchAction();\r\n         }\r\n      } else {\r\n         for (var i = 0; i < engine.currentScene.children.length; i++) {\r\n            var other = engine.currentScene.children[i];\r\n            if (other !== this &&\r\n               other.collisionType !== CollisionType.PreventCollision &&\r\n               this.collides(other)) {\r\n               this._dispatchAction();\r\n            }\r\n         }\r\n      }\r\n\r\n      // remove trigger if its done, -1 repeat forever\r\n      if (this.repeats === 0) {\r\n         this.kill();\r\n      }\r\n   }\r\n\r\n   private _dispatchAction() {\r\n      this._action.call(this);\r\n      this.repeats--;\r\n   }\r\n\r\n   public draw(_ctx: CanvasRenderingContext2D, _delta: number) {\r\n      // does not draw\r\n      return;\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      super.debugDraw(ctx);\r\n      // Meant to draw debug information about actors\r\n      ctx.save();\r\n      ctx.translate(this.pos.x, this.pos.y);\r\n\r\n      var bb = this.getBounds();\r\n      var wp = this.getWorldPos();\r\n      bb.left = bb.left - wp.x;\r\n      bb.right = bb.right - wp.x;\r\n      bb.top = bb.top - wp.y;\r\n      bb.bottom = bb.bottom - wp.y;\r\n\r\n      // Currently collision primitives cannot rotate \r\n      // ctx.rotate(this.rotation);\r\n      ctx.fillStyle = Color.Violet.toString();\r\n      ctx.strokeStyle = Color.Violet.toString();\r\n      ctx.fillText('Trigger', 10, 10);\r\n      bb.debugDraw(ctx);\r\n\r\n      ctx.restore();\r\n   }\r\n}\r\n","export * from './ActionContext';\r\nexport * from './IActionable';\r\nexport * from './RotationType';\r\n\r\nimport * as actions from './Action';\r\nexport { actions as Actions };\r\n// legacy Internal.Actions namespace support\r\nexport var Internal = { Actions: actions };","import { Physics } from './../Physics';\r\nimport { BoundingBox } from './BoundingBox';\r\nimport { Body } from './Body';\r\n\r\nimport { Ray } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\n\r\n/**\r\n * Dynamic Tree Node used for tracking bounds within the tree\r\n */\r\nexport class TreeNode {\r\n   public left: TreeNode;\r\n   public right: TreeNode;\r\n   public bounds: BoundingBox;\r\n   public height: number;\r\n   public body: Body;\r\n   constructor(public parent?: TreeNode) {\r\n      this.parent = parent || null;\r\n      this.body = null;\r\n      this.bounds = new BoundingBox();\r\n      this.left = null;\r\n      this.right = null;\r\n      this.height = 0;\r\n   }\r\n\r\n   public isLeaf(): boolean {\r\n      return (!this.left && !this.right);\r\n   }\r\n}\r\n\r\n/**\r\n * The DynamicTrees provides a spatial partiioning data structure for quickly querying for overlapping bounding boxes for \r\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\r\n *\r\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\r\n * Every non-leaf node is a bounding box that contains child bounding boxes. \r\n */\r\nexport class DynamicTree {\r\n\r\n   public root: TreeNode;\r\n   public nodes: { [key: number]: TreeNode };\r\n   constructor(public worldBounds: BoundingBox = new BoundingBox(-Number.MAX_VALUE,\r\n      -Number.MAX_VALUE,\r\n      Number.MAX_VALUE,\r\n      Number.MAX_VALUE)) {\r\n      this.root = null;\r\n      this.nodes = {};\r\n   }\r\n\r\n   /**\r\n    * Inserts a node into the dynamic tree\r\n    */\r\n   private _insert(leaf: TreeNode): void {\r\n\r\n      // If there are no nodes in the tree, make this the root leaf\r\n      if (this.root === null) {\r\n         this.root = leaf;\r\n         this.root.parent = null;\r\n         return;\r\n      }\r\n\r\n      // Search the tree for a node that is not a leaf and find the best place to insert\r\n      var leafAABB = leaf.bounds;\r\n      var currentRoot = this.root;\r\n      while (!currentRoot.isLeaf()) {\r\n         var left = currentRoot.left;\r\n         var right = currentRoot.right;\r\n\r\n         var area = currentRoot.bounds.getPerimeter();\r\n         var combinedAABB = currentRoot.bounds.combine(leafAABB);\r\n         var combinedArea = combinedAABB.getPerimeter();\r\n\r\n         // Calculate cost heuristic for creating a new parent and leaf\r\n         var cost = 2 * combinedArea;\r\n\r\n         // Minimum cost of pushing the leaf down the tree\r\n         var inheritanceCost = 2 * (combinedArea - area);\r\n\r\n         // Cost of descending\r\n         var leftCost = 0;\r\n         var leftCombined = leafAABB.combine(left.bounds);\r\n         var newArea;\r\n         var oldArea;\r\n         if (left.isLeaf()) {\r\n            leftCost = leftCombined.getPerimeter() + inheritanceCost;\r\n         } else {\r\n            oldArea = left.bounds.getPerimeter();\r\n            newArea = leftCombined.getPerimeter();\r\n            leftCost = (newArea - oldArea) + inheritanceCost;\r\n         }\r\n\r\n         var rightCost = 0;\r\n         var rightCombined = leafAABB.combine(right.bounds);\r\n         if (right.isLeaf()) {\r\n            rightCost = rightCombined.getPerimeter() + inheritanceCost;\r\n         } else {\r\n            oldArea = right.bounds.getPerimeter();\r\n            newArea = rightCombined.getPerimeter();\r\n            rightCost = (newArea - oldArea) + inheritanceCost;\r\n         }\r\n\r\n         // cost is acceptable\r\n         if (cost < leftCost && cost < rightCost) {\r\n            break;\r\n         }\r\n\r\n         // Descend to the depths\r\n         if (leftCost < rightCost) {\r\n            currentRoot = left;\r\n         } else {\r\n            currentRoot = right;\r\n         }\r\n      }\r\n\r\n      // Create the new parent node and insert into the tree\r\n      var oldParent = currentRoot.parent;\r\n      var newParent = new TreeNode(oldParent);\r\n      newParent.bounds = leafAABB.combine(currentRoot.bounds);\r\n      newParent.height = currentRoot.height + 1;\r\n\r\n      if (oldParent !== null) {\r\n         // The sibling node was not the root\r\n         if (oldParent.left === currentRoot) {\r\n            oldParent.left = newParent;\r\n         } else {\r\n            oldParent.right = newParent;\r\n         }\r\n\r\n         newParent.left = currentRoot;\r\n         newParent.right = leaf;\r\n\r\n         currentRoot.parent = newParent;\r\n         leaf.parent = newParent;\r\n      } else {\r\n         // The sibling node was the root\r\n         newParent.left = currentRoot;\r\n         newParent.right = leaf;\r\n\r\n         currentRoot.parent = newParent;\r\n         leaf.parent = newParent;\r\n         this.root = newParent;\r\n      }\r\n\r\n      // Walk up the tree fixing heights and AABBs\r\n      var currentNode = leaf.parent;\r\n      while (currentNode) {\r\n         currentNode = this._balance(currentNode);\r\n\r\n         if (!currentNode.left) {\r\n            throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\r\n         }\r\n         if (!currentNode.right) {\r\n            throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\r\n         }\r\n\r\n         currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n         currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n\r\n         currentNode = currentNode.parent;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes a node from the dynamic tree\r\n    */\r\n   private _remove(leaf: TreeNode) {\r\n      if (leaf === this.root) {\r\n         this.root = null;\r\n         return;\r\n      }\r\n\r\n      var parent = leaf.parent;\r\n      var grandParent = parent.parent;\r\n      var sibling: TreeNode;\r\n      if (parent.left === leaf) {\r\n         sibling = parent.right;\r\n      } else {\r\n         sibling = parent.left;\r\n      }\r\n\r\n      if (grandParent) {\r\n         if (grandParent.left === parent) {\r\n            grandParent.left = sibling;\r\n         } else {\r\n            grandParent.right = sibling;\r\n         }\r\n         sibling.parent = grandParent;\r\n\r\n         var currentNode = grandParent;\r\n         while (currentNode) {\r\n            currentNode = this._balance(currentNode);\r\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n\r\n            currentNode = currentNode.parent;\r\n         }\r\n\r\n      } else {\r\n         this.root = sibling;\r\n         sibling.parent = null;\r\n      }\r\n\r\n   }\r\n\r\n   /**\r\n    * Tracks a body in the dynamic tree\r\n    */\r\n   public trackBody(body: Body) {\r\n      var node = new TreeNode();\r\n      node.body = body;\r\n      node.bounds = body.getBounds();\r\n      node.bounds.left -= 2;\r\n      node.bounds.top -= 2;\r\n      node.bounds.right += 2;\r\n      node.bounds.bottom += 2;\r\n      this.nodes[body.actor.id] = node;\r\n      this._insert(node);\r\n   }\r\n\r\n   /**\r\n    * Updates the dynamic tree given the current bounds of each body being tracked\r\n    */\r\n   public updateBody(body: Body) {\r\n      var node = this.nodes[body.actor.id];\r\n      if (!node) { return false; }\r\n      var b = body.getBounds();\r\n\r\n      // if the body is outside the world no longer update it\r\n      if (!this.worldBounds.contains(b)) {\r\n         Logger.getInstance().warn('Actor with id ' + body.actor.id +\r\n            ' is outside the world bounds and will no longer be tracked for physics');\r\n         this.untrackBody(body);\r\n         return false;\r\n      }\r\n\r\n      if (node.bounds.contains(b)) {\r\n         return false;\r\n      }\r\n\r\n      this._remove(node);\r\n      b.left -= Physics.boundsPadding;\r\n      b.top -= Physics.boundsPadding;\r\n      b.right += Physics.boundsPadding;\r\n      b.bottom += Physics.boundsPadding;\r\n\r\n      var multdx = body.vel.x * Physics.dynamicTreeVelocityMultiplyer;\r\n      var multdy = body.vel.y * Physics.dynamicTreeVelocityMultiplyer;\r\n\r\n      if (multdx < 0) {\r\n         b.left += multdx;\r\n      } else {\r\n         b.right += multdx;\r\n      }\r\n\r\n      if (multdy < 0) {\r\n         b.top += multdy;\r\n      } else {\r\n         b.bottom += multdy;\r\n      }\r\n\r\n      node.bounds = b;\r\n      this._insert(node);\r\n      return true;\r\n   }\r\n\r\n   /**\r\n    * Untracks a body from the dynamic tree\r\n    */\r\n   public untrackBody(body: Body) {\r\n      var node = this.nodes[body.actor.id];\r\n      if (!node) { return; }\r\n      this._remove(node);\r\n      this.nodes[body.actor.id] = null;\r\n      delete this.nodes[body.actor.id];\r\n   }\r\n\r\n   /**\r\n    * Balances the tree about a node\r\n    */\r\n   private _balance(node: TreeNode) {\r\n      if (node === null) {\r\n         throw new Error('Cannot balance at null node');\r\n      }\r\n\r\n      if (node.isLeaf() || node.height < 2) {\r\n         return node;\r\n      }\r\n\r\n      var left = node.left;\r\n      var right = node.right;\r\n\r\n      var a = node;\r\n      var b = left;\r\n      var c = right;\r\n      var d = left.left;\r\n      var e = left.right;\r\n      var f = right.left;\r\n      var g = right.right;\r\n\r\n      var balance = c.height - b.height;\r\n      // Rotate c node up\r\n      if (balance > 1) {\r\n         // Swap the right node with it's parent\r\n         c.left = a;\r\n         c.parent = a.parent;\r\n         a.parent = c;\r\n\r\n         // The original node's old parent should point to the right node\r\n         // this is mega confusing\r\n         if (c.parent) {\r\n            if (c.parent.left === a) {\r\n               c.parent.left = c;\r\n            } else {\r\n               c.parent.right = c;\r\n            }\r\n         } else {\r\n            this.root = c;\r\n         }\r\n\r\n         // Rotate\r\n         if (f.height > g.height) {\r\n            c.right = f;\r\n            a.right = g;\r\n            g.parent = a;\r\n\r\n            a.bounds = b.bounds.combine(g.bounds);\r\n            c.bounds = a.bounds.combine(f.bounds);\r\n\r\n            a.height = 1 + Math.max(b.height, g.height);\r\n            c.height = 1 + Math.max(a.height, f.height);\r\n\r\n         } else {\r\n            c.right = g;\r\n            a.right = f;\r\n            f.parent = a;\r\n\r\n            a.bounds = b.bounds.combine(f.bounds);\r\n            c.bounds = a.bounds.combine(g.bounds);\r\n\r\n            a.height = 1 + Math.max(b.height, f.height);\r\n            c.height = 1 + Math.max(a.height, g.height);\r\n\r\n         }\r\n\r\n         return c;\r\n\r\n      }\r\n      // Rotate left node up\r\n      if (balance < -1) {\r\n\r\n         // swap\r\n         b.left = a;\r\n         b.parent = a.parent;\r\n         a.parent = b;\r\n\r\n         // node's old parent should point to b\r\n         if (b.parent) {\r\n            if (b.parent.left === a) {\r\n               b.parent.left = b;\r\n            } else {\r\n               if (b.parent.right !== a) { throw 'Error rotating Dynamic Tree'; }\r\n               b.parent.right = b;\r\n            }\r\n         } else {\r\n            this.root = b;\r\n         }\r\n\r\n         // rotate\r\n         if (d.height > e.height) {\r\n            b.right = d;\r\n            a.left = e;\r\n            e.parent = a;\r\n\r\n            a.bounds = c.bounds.combine(e.bounds);\r\n            b.bounds = a.bounds.combine(d.bounds);\r\n\r\n            a.height = 1 + Math.max(c.height, e.height);\r\n            b.height = 1 + Math.max(a.height, d.height);\r\n         } else {\r\n            b.right = e;\r\n            a.left = d;\r\n            d.parent = a;\r\n\r\n            a.bounds = c.bounds.combine(d.bounds);\r\n            b.bounds = a.bounds.combine(e.bounds);\r\n\r\n            a.height = 1 + Math.max(c.height, d.height);\r\n            b.height = 1 + Math.max(a.height, e.height);\r\n         }\r\n         return b;\r\n\r\n      }\r\n\r\n      return node;\r\n   }\r\n\r\n   /**\r\n    * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\r\n    */\r\n   public getHeight(): number {\r\n      if (this.root === null) {\r\n         return 0;\r\n      }\r\n      return this.root.height;\r\n   }\r\n\r\n   /**\r\n    * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body. \r\n    * \r\n    * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\r\n    * that you are complete with your query and you do not want to continue. Returning false will continue searching\r\n    * the tree until all possible colliders have been returned.\r\n    */\r\n   public query(body: Body, callback: (other: Body) => boolean): void {\r\n      var bounds = body.getBounds();\r\n      var helper = (currentNode: TreeNode): boolean => {\r\n         if (currentNode && currentNode.bounds.collides(bounds)) {\r\n            if (currentNode.isLeaf() && currentNode.body !== body) {\r\n               if (callback.call(body, currentNode.body)) {\r\n                  return true;\r\n               }\r\n            } else {\r\n               return helper(currentNode.left) || helper(currentNode.right);\r\n            }\r\n         }\r\n         return false;\r\n      };\r\n      helper(this.root);\r\n   }\r\n\r\n   /**\r\n    * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\r\n    * long ray to test the tree specified by `max`.\r\n    * \r\n    * In the query callback, it will be passed a potential body that intersects with the racast. Returning true from this\r\n    * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\r\n    * the tree until all possible bodies that would intersect with the ray have been returned. \r\n    */\r\n   public rayCastQuery(ray: Ray, max: number = Infinity, callback: (other: Body) => boolean): void {\r\n      var helper = (currentNode: TreeNode): boolean => {\r\n         if (currentNode && currentNode.bounds.rayCast(ray, max)) {\r\n            if (currentNode.isLeaf()) {\r\n               if (callback.call(ray, currentNode.body)) {\r\n                  // ray hit a leaf! return the body\r\n                  return true;\r\n               }\r\n            } else {\r\n               // ray hit but not at a leaf, recurse deeper\r\n               return helper(currentNode.left) || helper(currentNode.right);\r\n            }\r\n         }\r\n         return false; // ray missed         \r\n      };\r\n      helper(this.root);\r\n   }\r\n\r\n\r\n   public getNodes(): TreeNode[] {\r\n      var helper = (currentNode: TreeNode): TreeNode[] => {\r\n         if (currentNode) {\r\n            return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\r\n         } else {\r\n            return [];\r\n         }\r\n      };\r\n      return helper(this.root);\r\n   }\r\n\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      // draw all the nodes in the Dynamic Tree\r\n      var helper = (currentNode: TreeNode) => {\r\n\r\n         if (currentNode) {\r\n            if (currentNode.isLeaf()) {\r\n               ctx.lineWidth = 1;\r\n               ctx.strokeStyle = 'green';\r\n            } else {\r\n               ctx.lineWidth = 1;\r\n               ctx.strokeStyle = 'white';\r\n            }\r\n            currentNode.bounds.debugDraw(ctx);\r\n\r\n            if (currentNode.left) { helper(currentNode.left); }\r\n            if (currentNode.right) { helper(currentNode.right); }\r\n         }\r\n      };\r\n\r\n      helper(this.root);\r\n   }\r\n}","import { Physics } from './../Physics';\r\nimport { Color } from './../Drawing/Color';\r\nimport { Body } from './Body';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { CollisionResolutionStrategy } from '../Physics';\r\nimport * as DrawUtil from '../Util/DrawUtil';\r\n\r\n/**\r\n * Models a potential collision between 2 bodies\r\n */\r\nexport class Pair {\r\n   public id: string = null;\r\n   public collision: CollisionContact = null;\r\n\r\n   constructor(public bodyA: Body, public bodyB: Body) {\r\n      this.id = Pair.calculatePairHash(bodyA, bodyB);\r\n   }\r\n\r\n   /**\r\n    * Runs the collison intersection logic on the members of this pair\r\n    */\r\n   public collide() {\r\n      this.collision = this.bodyA.collisionArea.collide(this.bodyB.collisionArea);\r\n   }\r\n\r\n   /**\r\n    * Resovles the collision body position and velocity if a collision occured\r\n    */\r\n   public resolve(strategy: CollisionResolutionStrategy) {\r\n      if (this.collision) {\r\n         this.collision.resolve(strategy);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Calculates the unique pair hash id for this collision pair\r\n    */\r\n   public static calculatePairHash(bodyA: Body, bodyB: Body): string {\r\n      if (bodyA.actor.id < bodyB.actor.id) {\r\n         return `#${bodyA.actor.id}+${bodyB.actor.id}`;\r\n      } else {\r\n         return `#${bodyB.actor.id}+${bodyA.actor.id}`;\r\n      }\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      if (this.collision) {\r\n         if (Physics.showContacts) {\r\n            DrawUtil.point(ctx, Color.Red, this.collision.point);\r\n         }\r\n         if (Physics.showCollisionNormals) {\r\n            DrawUtil.vector(ctx, Color.Cyan, this.collision.point, this.collision.normal, 30);\r\n         }\r\n      }\r\n   }\r\n}\r\n","import { Physics } from './../Physics';\r\nimport { ICollisionBroadphase } from './ICollisionResolver';\r\nimport { DynamicTree } from './DynamicTree';\r\nimport { Pair } from './Pair';\r\nimport { Body } from './Body';\r\n\r\nimport { Vector, Ray } from '../Algebra';\r\nimport { Actor, CollisionType } from '../Actor';\r\nimport { FrameStats } from '../Debug';\r\nimport { CollisionResolutionStrategy } from '../Physics';\r\nimport { Logger } from '../Util/Log';\r\n\r\nexport class DynamicTreeCollisionBroadphase implements ICollisionBroadphase {\r\n   private _dynamicCollisionTree = new DynamicTree();\r\n   private _collisionHash: { [key: string]: boolean; } = {};\r\n   private _collisionPairCache: Pair[] = [];\r\n\r\n   /**\r\n    * Tracks a physics body for collisions\r\n    */\r\n   public track(target: Body): void {\r\n      if (!target) {\r\n         Logger.getInstance().warn('Cannot track null physics body');\r\n         return;\r\n      }\r\n      this._dynamicCollisionTree.trackBody(target);\r\n   }\r\n\r\n   /**\r\n    * Untracks a physics body\r\n    */\r\n   public untrack(target: Body): void {\r\n      if (!target) {\r\n         Logger.getInstance().warn('Cannot untrack a null physics body');\r\n         return;\r\n      }\r\n      this._dynamicCollisionTree.untrackBody(target);\r\n   }\r\n\r\n   private _canCollide(actorA: Actor, actorB: Actor) {\r\n      // if the collision pair has been calculated already short circuit\r\n      var hash = Pair.calculatePairHash(actorA.body, actorB.body);\r\n      if (this._collisionHash[hash]) {\r\n         return false; // pair exists easy exit return false\r\n      }\r\n\r\n      // if both are fixed short circuit\r\n      if (actorA.collisionType === CollisionType.Fixed && actorB.collisionType === CollisionType.Fixed) {\r\n         return false;\r\n      }\r\n\r\n      // if the other is prevent collision or is dead short circuit\r\n      if (actorB.collisionType === CollisionType.PreventCollision || actorB.isKilled()) { return false; }\r\n\r\n      // they can collide\r\n      return true;\r\n   }\r\n\r\n   /**\r\n    * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\r\n    */\r\n   public broadphase(targets: Actor[], delta: number, stats?: FrameStats): Pair[] {\r\n      var seconds = delta / 1000;\r\n      // TODO optimization use only the actors that are moving to start \r\n      // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n      var potentialColliders = targets.filter((other) => {\r\n         return !other.isKilled() && other.collisionType !== CollisionType.PreventCollision;\r\n      });\r\n\r\n      // clear old list of collision pairs\r\n      this._collisionPairCache = [];\r\n      this._collisionHash = {};\r\n\r\n      // check for normal collision pairs\r\n      var actor: Actor;\r\n      for (var j = 0, l = potentialColliders.length; j < l; j++) {\r\n         actor = potentialColliders[j];\r\n\r\n         // Query the collision tree for potential colliders\r\n         this._dynamicCollisionTree.query(actor.body, (other: Body) => {\r\n            if (this._canCollide(actor, other.actor)) {\r\n               var pair = new Pair(actor.body, other);\r\n               this._collisionHash[pair.id] = true;\r\n               this._collisionPairCache.push(pair);\r\n            }\r\n            // Always return false, to query whole tree. Returning true in the query method stops searching\r\n            return false;\r\n         });\r\n      }\r\n      if (stats) {\r\n         stats.physics.pairs = this._collisionPairCache.length;\r\n      }\r\n\r\n      // Check dynamic tree for fast moving objects\r\n      // Fast moving objects are those moving at least there smallest bound per frame\r\n      if (Physics.checkForFastBodies) {\r\n         for (var actor of potentialColliders) {\r\n            // Skip non-active objects. Does not make sense on other collison types\r\n            if (actor.collisionType !== CollisionType.Active) { continue; };\r\n\r\n            // Maximum travel distance next frame\r\n            var updateDistance = (actor.vel.magnitude() * seconds) + // velocity term \r\n               (actor.acc.magnitude() * .5 * seconds * seconds); // acc term\r\n\r\n            // Find the minimum dimension\r\n            var minDimension = Math.min(actor.body.getBounds().getHeight(), actor.body.getBounds().getWidth());\r\n            if (Physics.disableMinimumSpeedForFastBody || updateDistance > (minDimension / 2)) {\r\n               if (stats) {\r\n                  stats.physics.fastBodies++;\r\n               }\r\n\r\n               // start with the oldPos because the integration for actors has already happened\r\n               // objects resting on a surface may be slightly penatrating in the current position\r\n               var updateVec = actor.pos.sub(actor.oldPos);\r\n               var centerPoint = actor.body.collisionArea.getCenter();\r\n               var furthestPoint = actor.body.collisionArea.getFurthestPoint(actor.vel);\r\n               var origin: Vector = furthestPoint.sub(updateVec);\r\n\r\n               var ray: Ray = new Ray(origin, actor.vel);\r\n\r\n               // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface \r\n               ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\r\n               var minBody: Body;\r\n               var minTranslate: Vector = new Vector(Infinity, Infinity);\r\n               this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, (other: Body) => {\r\n                  if (actor.body !== other && other.collisionArea) {\r\n                     var hitPoint = other.collisionArea.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\r\n                     if (hitPoint) {\r\n                        var translate = hitPoint.sub(origin);\r\n                        if (translate.magnitude() < minTranslate.magnitude()) {\r\n                           minTranslate = translate;\r\n                           minBody = other;\r\n                        }\r\n                     }\r\n                  }\r\n                  return false;\r\n               });\r\n\r\n               if (minBody && Vector.isValid(minTranslate)) {\r\n                  var pair = new Pair(actor.body, minBody);\r\n                  if (!this._collisionHash[pair.id]) {\r\n                     this._collisionHash[pair.id] = true;\r\n                     this._collisionPairCache.push(pair);\r\n                  }\r\n                  // move the fast moving object to the other body\r\n                  // need to push into the surface by ex.Physics.surfaceEpsilon\r\n                  var shift = centerPoint.sub(furthestPoint);\r\n                  actor.pos = origin.add(shift).add(minTranslate).add(ray.dir.scale(2 * Physics.surfaceEpsilon));\r\n                  actor.body.collisionArea.recalc();\r\n\r\n                  if (stats) {\r\n                     stats.physics.fastBodyCollisions++;\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n      // return cache\r\n      return this._collisionPairCache;\r\n   }\r\n\r\n   /**\r\n    * Applies narrow phase on collision pairs to find actual area intersections\r\n    */\r\n   public narrowphase(pairs: Pair[], stats?: FrameStats) {\r\n      for (var i = 0; i < pairs.length; i++) {\r\n         pairs[i].collide();\r\n         if (stats && pairs[i].collision) {\r\n            stats.physics.collisions++;\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Perform collision resolution given a strategy (rigid body or box) and move objects out of intersect. \r\n    */\r\n   public resolve(delta: number, strategy: CollisionResolutionStrategy) {\r\n      // resolve collision pairs\r\n      var i = 0, len = this._collisionPairCache.length;\r\n      for (i = 0; i < len; i++) {\r\n         this._collisionPairCache[i].resolve(strategy);\r\n      }\r\n\r\n      // We must apply mtv after all pairs have been resolved for more accuracy\r\n      // apply integration of collision pairs\r\n      for (i = 0; i < len; i++) {\r\n         if (this._collisionPairCache[i].collision) {\r\n            this._collisionPairCache[i].bodyA.applyMtv();\r\n            this._collisionPairCache[i].bodyB.applyMtv();\r\n            // todo still don't like this, this is a small integration step to resolve narrowphase collisions\r\n            this._collisionPairCache[i].bodyA.actor.integrate(delta * Physics.collisionShift);\r\n            this._collisionPairCache[i].bodyB.actor.integrate(delta * Physics.collisionShift);\r\n         }\r\n      }\r\n\r\n   }\r\n\r\n   /**\r\n    * Update the dynamic tree positions\r\n    */\r\n   public update(targets: Actor[]): number {\r\n      var updated = 0, i = 0, len = targets.length;\r\n\r\n      for (i; i < len; i++) {\r\n         if (this._dynamicCollisionTree.updateBody(targets[i].body)) {\r\n            updated++;\r\n         }\r\n      }\r\n      return updated;\r\n   }\r\n\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      if (Physics.broadphaseDebug) {\r\n         this._dynamicCollisionTree.debugDraw(ctx);\r\n      }\r\n\r\n      if (Physics.showContacts || Physics.showCollisionNormals) {\r\n         for (var pair of this._collisionPairCache) {\r\n            pair.debugDraw(ctx);\r\n         }\r\n      }\r\n   }\r\n}\r\n","import { Physics } from './../Physics';\r\nimport { CollisionContact } from './CollisionContact';\r\nimport { Pair } from './Pair';\r\nimport { Actor, CollisionType } from './../Actor';\r\nimport { ICollisionBroadphase } from './ICollisionResolver';\r\n\r\nexport class NaiveCollisionBroadphase implements ICollisionBroadphase {\r\n\r\n   public track() {\r\n      // pass\r\n   }\r\n\r\n   public untrack() {\r\n      // pass\r\n   }\r\n\r\n   /**\r\n    * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\r\n    */\r\n   public broadphase(targets: Actor[]): Pair[] {\r\n\r\n      // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n      var potentialColliders = targets.filter((other) => {\r\n         return !other.isKilled() && other.collisionType !== CollisionType.PreventCollision;\r\n      });\r\n\r\n      var actor1: Actor;\r\n      var actor2: Actor;\r\n      var collisionPairs: Pair[] = [];\r\n\r\n      for (var j = 0, l = potentialColliders.length; j < l; j++) {\r\n\r\n         actor1 = potentialColliders[j];\r\n\r\n         for (var i = j + 1; i < l; i++) {\r\n\r\n            actor2 = potentialColliders[i];\r\n\r\n            var minimumTranslationVector;\r\n            if (minimumTranslationVector = actor1.collides(actor2)) {\r\n               var pair = new Pair(actor1.body, actor2.body);\r\n               pair.collision = new CollisionContact(actor1.collisionArea,\r\n                  actor2.collisionArea,\r\n                  minimumTranslationVector,\r\n                  actor1.pos,\r\n                  minimumTranslationVector);\r\n               if (!collisionPairs.some((cp) => {\r\n                  return cp.id === pair.id;\r\n               })) {\r\n                  collisionPairs.push(pair);\r\n               }\r\n            }\r\n         }\r\n\r\n      }\r\n\r\n      var k = 0, len = collisionPairs.length;\r\n      for (k; k < len; k++) {\r\n         collisionPairs[k].resolve(Physics.collisionResolutionStrategy);\r\n      }\r\n\r\n      return collisionPairs;\r\n   }\r\n\r\n   /**\r\n    * Identify actual collisions from those pairs, and calculate collision impulse\r\n    */\r\n   narrowphase() {\r\n      // pass\r\n   }\r\n\r\n   /**\r\n    * Resolve the position and velocity of the physics bodies\r\n    */\r\n   resolve() {\r\n      // pass\r\n   }\r\n\r\n   public update(): number {\r\n      return 0;\r\n   }\r\n\r\n   public debugDraw() {\r\n      return;\r\n   }\r\n}","export * from './Body';\r\nexport * from './BoundingBox';\r\nexport * from './CircleArea';\r\nexport * from './CollisionContact';\r\nexport * from './CollisionJumpTable';\r\nexport * from './DynamicTree';\r\nexport * from './DynamicTreeCollisionBroadphase';\r\nexport * from './EdgeArea';\r\nexport * from './ICollisionArea';\r\nexport * from './ICollisionResolver';\r\nexport * from './IPhysics';\r\nexport * from './NaiveCollisionBroadphase';\r\nexport * from './Pair';\r\nexport * from './PolygonArea';\r\nexport * from './Side';","import { Color } from './Color';\r\nimport * as Effects from './SpriteEffects';\r\n\r\nimport { IDrawable } from '../Interfaces/IDrawable';\r\nimport { Vector } from '../Algebra';\r\n\r\n/**\r\n * Creates a closed polygon drawing given a list of [[Vector]]s.\r\n *\r\n * @warning Use sparingly as Polygons are performance intensive\r\n */\r\nexport class Polygon implements IDrawable {\r\n   public flipVertical: boolean;\r\n   public flipHorizontal: boolean;\r\n   public width: number;\r\n   public height: number;\r\n   \r\n   public naturalWidth: number;\r\n   public naturalHeight: number;\r\n\r\n   /**\r\n    * The color to use for the lines of the polygon\r\n    */\r\n   public lineColor: Color;\r\n   /**\r\n    * The color to use for the interior of the polygon\r\n    */\r\n   public fillColor: Color;\r\n   /**\r\n    * The width of the lines of the polygon\r\n    */\r\n   public lineWidth: number = 5;\r\n   /**\r\n    * Indicates whether the polygon is filled or not.\r\n    */\r\n   public filled: boolean = false;\r\n   \r\n   private _points: Vector[] = [];\r\n   public anchor = new Vector(0, 0);\r\n   public rotation: number = 0;\r\n   public scale = new Vector(1, 1);\r\n\r\n   /**\r\n    * @param points  The vectors to use to build the polygon in order\r\n    */\r\n   constructor(points: Vector[]) {\r\n      this._points = points;\r\n\r\n      var minX = this._points.reduce((prev: number, curr: Vector) => {\r\n         return Math.min(prev, curr.x);\r\n      }, 0);\r\n      var maxX = this._points.reduce((prev: number, curr: Vector) => {\r\n         return Math.max(prev, curr.x);\r\n      }, 0);\r\n\r\n      this.width = maxX - minX;\r\n\r\n      var minY = this._points.reduce((prev: number, curr: Vector) => {\r\n         return Math.min(prev, curr.y);\r\n      }, 0);\r\n      var maxY = this._points.reduce((prev: number, curr: Vector) => {\r\n         return Math.max(prev, curr.y);\r\n      }, 0);\r\n\r\n      this.height = maxY - minY;\r\n      \r\n      this.naturalHeight = this.height;\r\n      this.naturalWidth = this.width;\r\n   }\r\n\r\n   /**\r\n    * @notimplemented Effects are not supported on `Polygon`\r\n    */\r\n   public addEffect() {\r\n      // not supported on polygons\r\n   }\r\n   /**\r\n    * @notimplemented Effects are not supported on `Polygon`\r\n    */\r\n   public removeEffect(index: number): void;\r\n   /**\r\n    * @notimplemented Effects are not supported on `Polygon`\r\n    */\r\n   public removeEffect(effect: Effects.ISpriteEffect): void;\r\n   /**\r\n    * @notimplemented Effects are not supported on `Polygon`\r\n    */\r\n   public removeEffect() {\r\n      // not supported on polygons\r\n   }\r\n\r\n   /**\r\n    * @notimplemented Effects are not supported on `Polygon`\r\n    */\r\n   public clearEffects() {\r\n      // not supported on polygons\r\n   }\r\n   \r\n   public reset() {\r\n      //pass\r\n   }\r\n\r\n   public draw(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n      ctx.save();\r\n      ctx.translate(x + this.anchor.x, y + this.anchor.y);\r\n      ctx.scale(this.scale.x, this.scale.y);\r\n      ctx.rotate(this.rotation);\r\n      ctx.beginPath();\r\n      ctx.lineWidth = this.lineWidth;\r\n\r\n      // Iterate through the supplied points and construct a 'polygon'\r\n      var firstPoint = this._points[0];\r\n      ctx.moveTo(firstPoint.x, firstPoint.y);\r\n\r\n      var i = 0, len = this._points.length;\r\n\r\n      for (i; i < len; i++) {\r\n         ctx.lineTo(this._points[i].x, this._points[i].y);\r\n      }\r\n\r\n      ctx.lineTo(firstPoint.x, firstPoint.y);\r\n      ctx.closePath();\r\n\r\n      if (this.filled) {\r\n         ctx.fillStyle = this.fillColor.toString();\r\n         ctx.fill();\r\n      }\r\n\r\n      ctx.strokeStyle = this.lineColor.toString();\r\n\r\n      if (this.flipHorizontal) {\r\n         ctx.translate(this.width, 0);\r\n         ctx.scale(-1, 1);\r\n      }\r\n\r\n      if (this.flipVertical) {\r\n         ctx.translate(0, this.height);\r\n         ctx.scale(1, -1);\r\n      }\r\n\r\n      ctx.stroke();\r\n      ctx.restore();\r\n   }\r\n}","export * from './Animation';\r\nexport * from './Color';\r\nexport * from './Polygon';\r\nexport * from './Sprite';\r\nexport * from './SpriteSheet';\r\n\r\nimport * as effects from './SpriteEffects';\r\nexport { effects as Effects }","/**\r\n * Pseudo-Random Utility\r\n * \r\n * A pseudo-random utility to add seeded random support for help in\r\n * generating things like terrain or reproducible randomness. Uses the \r\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\r\n * \r\n * [[include:Random.md]]\r\n */\r\n\r\n/**\r\n * 32-bit mask\r\n */\r\nconst BITMASK32: number = 0xFFFFFFFF;\r\n\r\n/**\r\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence \r\n * of numbers each time it is called.\r\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\r\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\r\n * \r\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\r\n */\r\nexport class Random {\r\n\r\n   // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\r\n   private _lowerMask: number = 0x7FFFFFFF; // 31 bits same as _r\r\n   private _upperMask: number = 0x80000000; // 34 high bits\r\n\r\n   // Word size, 64 bits\r\n   private _w: number = 32;\r\n\r\n   // Degree of recurrance\r\n   private _n: number = 624;\r\n\r\n   // Middle word, an offset used in the recurrance defining the series x, 1<=m<n\r\n   private _m: number = 397;\r\n   // coefficients of teh rational normal form twist matrix\r\n   private _a: number = 0x9908B0DF;\r\n\r\n   // tempering bit shifts and masks\r\n   private _u: number = 11;\r\n   private _s: number = 7;\r\n   private _b: number = 0x9d2c5680;\r\n   private _t: number = 15;\r\n   private _c: number = 0xefc60000;\r\n   private _l: number = 18;\r\n   private _f: number = 1812433253;\r\n\r\n   private _mt: number[];\r\n\r\n   private _index: number;\r\n\r\n   /**\r\n    * If no seed is specified, the Date.now() is used\r\n    */\r\n   constructor(public seed?: number) {\r\n      this._mt = new Array<number>(this._n);\r\n      // need to mask to support higher bit machines\r\n      this._mt[0] = (seed || Date.now()) >>> 0;\r\n\r\n      for (var i = 1; i < this._n; i++) {\r\n         var s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\r\n         // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits         \r\n         this._mt[i] = (((this._f * ((s & 0xFFFF0000) >>> 16)) << 16) + (this._f * (s & 0xFFFF)) + i) >>> 0;\r\n      }\r\n      this._index = this._n;\r\n   }\r\n\r\n   /**\r\n    * Apply the twist\r\n    */\r\n   private _twist(): void {\r\n\r\n      var mag01 = [0x0, this._a];\r\n      var y = 0;\r\n      for (var i = 0; i < this._n - this._m; i++) {\r\n         y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n         this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ mag01[y & 0x1] & BITMASK32;\r\n      }\r\n      for (; i < this._n - 1; i++) {\r\n         y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n         this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ mag01[y & 0x1] & BITMASK32;\r\n      }\r\n      y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\r\n      this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ mag01[y & 0x1] & BITMASK32;\r\n\r\n      this._index = 0;\r\n   }\r\n\r\n   /**\r\n    * Return next 32 bit integer number in sequence\r\n    */\r\n   public nextInt(): number {\r\n      if (this._index >= this._n) {\r\n         this._twist();\r\n      }\r\n\r\n      var y = this._mt[this._index++];\r\n\r\n      y ^= y >>> this._u;\r\n      y ^= ((y << this._s) & this._b);\r\n      y ^= ((y << this._t) & this._c);\r\n      y ^= (y >>> this._l);\r\n\r\n      return y >>> 0;\r\n   }\r\n\r\n   /**\r\n    * Return a random floating point number between [0, 1)\r\n    */\r\n   public next(): number {\r\n      return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\r\n   }\r\n\r\n   /**\r\n    * Return a random floating point in range [min, max) min is included, max is not included\r\n    */\r\n   public floating(min: number, max: number): number {\r\n      return (max - min) * this.next() + min;\r\n   }\r\n\r\n   /**\r\n    * Return a random integer in range [min, max] min is included, max is included.\r\n    * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\r\n    */\r\n   public integer(min: number, max: number): number {\r\n      return Math.floor((max - min + 1) * this.next() + min);\r\n   }\r\n\r\n   /**\r\n    * Returns true or false randomly with 50/50 odds by default. \r\n    * By default the likelihood of returning a true is .5 (50%).\r\n    * @param likelihood takes values between [0, 1]\r\n    */\r\n   public bool(likelihood: number = .5): boolean {\r\n      return this.next() <= likelihood;\r\n   }\r\n\r\n   /**\r\n    * Returns one element from an array at random\r\n    */\r\n   public pickOne<T>(array: Array<T>): T {\r\n      return array[this.integer(0, array.length - 1)];\r\n   }\r\n\r\n   /**\r\n    * Returns a new array random picking elements from the original\r\n    * @param array Original array to pick from\r\n    * @param numPicks can be any positive number\r\n    * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates \r\n    * just that it is possible)\r\n    */\r\n   public pickSet<T>(array: Array<T>, numPicks: number, allowDuplicates: boolean = false): Array<T> {\r\n      if (allowDuplicates) {\r\n         return this._pickSetWithDuplicates(array, numPicks);\r\n      } else {\r\n         return this._pickSetWithoutDuplicates(array, numPicks);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns a new array randomly picking elements in the original (not reused)\r\n    * @param numPicks must be less than or equal to the number of elements in the array.\r\n    */\r\n   private _pickSetWithoutDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\r\n      if (numPicks > array.length || numPicks < 0) {\r\n         throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\r\n      }\r\n      if (numPicks === array.length) {\r\n         return array;\r\n      }\r\n\r\n      var result: Array<T> = new Array<T>(numPicks);\r\n      var currentPick = 0;\r\n      var tempArray = array.slice(0);\r\n      while (currentPick < numPicks) {\r\n         var index = this.integer(0, tempArray.length - 1);\r\n         result[currentPick++] = tempArray[index];\r\n         tempArray.splice(index, 1);\r\n      }\r\n\r\n      return result;\r\n   }\r\n\r\n   /**\r\n    * Returns a new array random picking elements from the original allowing duplicates\r\n    * @param numPicks can be any positive number\r\n    */\r\n   private _pickSetWithDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\r\n    // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\r\n      if (numPicks < 0) {\r\n         throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\r\n      }\r\n      var result = new Array<T>(numPicks);\r\n      for (var i = 0; i < numPicks; i++) {\r\n         result.push(this.pickOne(array));\r\n      }\r\n      return result;\r\n   }\r\n\r\n   /**\r\n    * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\r\n    * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\r\n    */\r\n   public shuffle<T>(array: Array<T>): Array<T> {\r\n      var tempArray = array.slice(0);\r\n      var swap: T = null;\r\n      for (var i = 0; i < tempArray.length - 2; i++) {\r\n         var randomIndex = this.integer(i, tempArray.length - 1);\r\n         swap = tempArray[i];\r\n         tempArray[i] = tempArray[randomIndex];\r\n         tempArray[randomIndex] = swap;\r\n      }\r\n\r\n      return tempArray;\r\n   }\r\n\r\n   /**\r\n    * Generate a list of random integer numbers\r\n    * @param length the length of the final array\r\n    * @param min the minimum integer number to generate inclusive\r\n    * @param max the maximum integer number to generate inclusive\r\n    */\r\n   public range(length: number, min: number, max: number): Array<number> {\r\n      var result: Array<number> = new Array(length);\r\n      for (var i = 0; i < length; i++) {\r\n         result[i] = this.integer(min, max);\r\n      }\r\n      return result;\r\n   }\r\n\r\n   /**\r\n    * Returns the result of a d4 dice roll\r\n    */\r\n   public d4() {\r\n      return this.integer(1, 4);\r\n   }\r\n\r\n   /**\r\n    * Returns the result of a d6 dice roll\r\n    */\r\n   public d6() {\r\n      return this.integer(1, 6);\r\n   }\r\n\r\n   /**\r\n    * Returns the result of a d8 dice roll\r\n    */\r\n   public d8() {\r\n      return this.integer(1, 8);\r\n   }\r\n\r\n   /**\r\n    * Returns the result of a d10 dice roll\r\n    */\r\n   public d10() {\r\n      return this.integer(1, 10);\r\n   }\r\n\r\n   /**\r\n    * Returns the result of a d12 dice roll\r\n    */\r\n   public d12() {\r\n      return this.integer(1, 12);\r\n   }\r\n\r\n   /**\r\n    * Returns the result of a d20 dice roll\r\n    */\r\n   public d20() {\r\n      return this.integer(1, 20);\r\n   }\r\n}\r\n","import { Random } from 'Random';\r\nimport { Color } from '../Drawing/Color';\r\nimport * as Util from '../Util/Util';\r\n\r\nfunction _lerp(time: number, a: number, b: number): number {\r\n   return a + time * (b - a);\r\n}\r\n\r\nfunction _fade(t: number): number {\r\n   return t * t * t * (t * (t * 6 - 15) + 10);\r\n}\r\n\r\n/**\r\n * Options for the perlin noise generator\r\n */\r\nexport interface IPerlinGeneratorOptions {\r\n   /**\r\n    * Random number seed for the Perlin noise generator\r\n    */\r\n   seed?: number;\r\n   /**\r\n    * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\r\n    * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and \r\n    * make it look more natural.\r\n    */\r\n   octaves?: number;\r\n   /**\r\n    * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscilate. Another way\r\n    * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\r\n    */\r\n   frequency?: number;\r\n   /**\r\n    * The amplitude determines the relative height of the peaks generated in the noise.\r\n    */\r\n   amplitude?: number;\r\n   /**\r\n    * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\r\n    * a low degree of persistance generates spikey patterns.\r\n    */\r\n   persistance?: number;\r\n}\r\n\r\n/**\r\n * Generates perlin noise based on the 2002 Siggraph paper http://mrl.nyu.edu/~perlin/noise/ \r\n * Also https://flafla2.github.io/2014/08/09/perlinnoise.html \r\n */\r\nexport class PerlinGenerator {\r\n\r\n   private _perm: number[] = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, \r\n    140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190,  6, 148, 247, 120, 234, 75, 0, 26, \r\n    197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136,\r\n    171, 168,  68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60,\r\n    211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54,  65, 25, 63, 161,  1, 216, 80,\r\n    73, 209, 76, 132, 187, 208,  89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198,\r\n    173, 186,  3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206,\r\n    59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152,  2, 44, 154, 163,  70,\r\n    221, 153, 101, 155, 167,  43, 172, 9, 129, 22, 39, 253,  19, 98, 108, 110, 79, 113, 224, 232, 178, \r\n    185,  112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241,  81, \r\n    51, 145, 235, 249, 14, 239, 107, 49, 192, 214,  31, 181, 199, 106, 157, 184,  84, 204, 176, 115,\r\n    121, 50, 45, 127,  4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, \r\n    78, 66, 215, 61, 156, 180]; \r\n   private _p: Uint8Array = new Uint8Array(512);\r\n   private _random: Random;\r\n\r\n   private _defaultPerlinOptions: IPerlinGeneratorOptions = {\r\n      octaves: 1,\r\n      frequency: 1,\r\n      amplitude: 1,\r\n      persistance: .5\r\n   };\r\n\r\n   /**\r\n    * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\r\n    * a low degree of persistance generates spikey patterns.\r\n    */\r\n   public persistance: number;\r\n\r\n   /**\r\n    * The amplitude determines the relative height of the peaks generated in the noise.\r\n    */\r\n   public amplitude: number;\r\n\r\n   /**\r\n    * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscilate. Another way\r\n    * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\r\n    */\r\n   public frequency: number;\r\n   \r\n   /**\r\n    * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\r\n    * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and \r\n    * make it look more natural.\r\n    */\r\n   public octaves: number;\r\n\r\n\r\n   constructor(options?: IPerlinGeneratorOptions) {      \r\n      options = Util.extend({}, this._defaultPerlinOptions, options);\r\n\r\n      this.persistance = options.persistance;\r\n      this.amplitude = options.amplitude;\r\n      this.frequency = options.frequency;\r\n      this.octaves = options.octaves;\r\n\r\n      if (options.seed) {\r\n         this._random = new Random(options.seed);\r\n      } else {\r\n         this._random = new Random();\r\n      }\r\n      \r\n      this._perm = this._random.shuffle(this._perm);\r\n\r\n      for (var i = 0; i < 512; i++) {\r\n         this._p[i] = this._perm[i % 256] & 0xFF;\r\n      }      \r\n   }\r\n\r\n   /**\r\n    * Generates 1-Dimensional perlin noise given an x and generates noises values between [0, 1]. \r\n    */\r\n   public noise(x: number): number;\r\n   /**\r\n    * Generates 2-Dimensional perlin noise given an (x, y) and generates noise values between [0, 1]\r\n    */\r\n   public noise(x: number, y: number): number;\r\n   /**\r\n    * Generates 3-Dimensional perlin noise given an (x, y, z) and generates noise values between [0, 1]\r\n    */\r\n   public noise(x: number, y: number, z: number): number;\r\n   public noise(): number {\r\n      var amp = this.amplitude;\r\n      var freq = this.frequency;\r\n\r\n      var total = 0;\r\n      var maxValue = 0;\r\n      for (var i = 0; i < this.octaves; i++) {\r\n         switch (arguments.length) {\r\n            case 1: total += this._noise1d(arguments[0] * freq) * amp; break;\r\n            case 2: total += this._noise2d(arguments[0] * freq, \r\n                                           arguments[1] * freq) * amp; break;\r\n            case 3: total += this._noise3d(arguments[0] * freq, \r\n                                           arguments[1] * freq, \r\n                                           arguments[2] * freq) * amp; break;\r\n            /* istanbul ignore next */\r\n            default: throw new Error('Invalid arguments for perlin noise');\r\n         }\r\n         maxValue += amp;\r\n         amp *= this.persistance;\r\n         freq *= 2;\r\n      }\r\n      return total / maxValue;\r\n   }\r\n\r\n   /**\r\n    * Generates a list starting at 0 and ending at 1 of contious perlin noise, by default the step is 1/length;\r\n    *\r\n    */\r\n   public sequence(length: number, step?: number): number[] {\r\n      if (!step) {\r\n         step = 1 / length;\r\n      }\r\n      var array: number[] = new Array(length);\r\n      for (var i = 0; i < length; i++) {\r\n         array[i] = this.noise(i * step);\r\n      }\r\n      return array;\r\n   }\r\n\r\n   /**\r\n    * Generates a 2D grid of perlin noise given a step value packed into a 1D array i = (x + y*width), \r\n    * by default the step will 1/(min(dimension))\r\n    */\r\n   public grid(width: number, height: number, step?: number): number[] {\r\n      if (!step) {\r\n         step = 1 / (Math.min(width, height));\r\n      }\r\n\r\n      var array: number[] = new Array(width * height);\r\n\r\n      for (var y = 0; y < height; y++) {\r\n         for (var x = 0; x < width; x++) {\r\n            array[x + y * width] = this.noise(x * step, y * step);\r\n         }\r\n      }\r\n\r\n      return array;\r\n   }\r\n\r\n   private _gradient3d(hash: number, x: number, y: number, z: number) {\r\n      var h = hash & 0xF;\r\n      var u = h < 8 ? x : y;\r\n      var v = h < 4 ? y : ((h === 12 || h === 14) ? x : z);\r\n      return ((h & 0b1) === 0 ? u : -u) + ((h & 0b10) === 0 ? v : -v);\r\n   }\r\n\r\n   private _gradient2d(hash: number, x: number, y: number) {\r\n      var value = (hash & 0b1) === 0 ? x : y;\r\n      return (hash & 0b10) === 0 ? -value : value;\r\n   }\r\n\r\n   private _gradient1d(hash: number, x: number) {\r\n      return  (hash & 0b1) === 0 ? -x : x;\r\n   }\r\n\r\n   private _noise1d(x: number) {\r\n      var intX = Math.floor(x) & 0xFF; // force 0-255 integers to lookup in permutation\r\n      x -= Math.floor(x);\r\n      var fadeX = _fade(x);\r\n      return (_lerp(fadeX, this._gradient1d(this._p[intX], x), this._gradient1d(this._p[intX + 1], x - 1)) + 1) / 2;\r\n   }\r\n\r\n   private _noise2d(x: number, y: number) {\r\n      var intX = Math.floor(x) & 0xFF;\r\n      var intY = Math.floor(y) & 0xFF;\r\n      \r\n      x -= Math.floor(x);\r\n      y -= Math.floor(y);\r\n\r\n      var fadeX = _fade(x);\r\n      var fadeY = _fade(y);\r\n      var a = this._p[intX] + intY;\r\n      var b = this._p[intX + 1] + intY;\r\n      return (_lerp(fadeY, \r\n                  _lerp(fadeX, this._gradient2d(this._p[a] , x, y), this._gradient2d(this._p[b] , x - 1, y)),\r\n                  _lerp(fadeX, this._gradient2d(this._p[a + 1] , x, y - 1), this._gradient2d(this._p[b + 1], x - 1, y - 1))) + 1) / 2;\r\n   }\r\n\r\n   private _noise3d(x: number, y: number, z: number) {\r\n      var intX = Math.floor(x) & 0xFF;\r\n      var intY = Math.floor(y) & 0xFF;\r\n      var intZ = Math.floor(z) & 0xFF;\r\n      \r\n      x -= Math.floor(x);\r\n      y -= Math.floor(y);\r\n      z -= Math.floor(z);\r\n\r\n      var fadeX = _fade(x);\r\n      var fadeY = _fade(y);\r\n      var fadeZ = _fade(z);\r\n\r\n      var a = this._p[intX] + intY;\r\n      var b = this._p[intX + 1] + intY;\r\n\r\n      var aa = this._p[a] + intZ;\r\n      var ba = this._p[b] + intZ;\r\n\r\n      var ab = this._p[a + 1] + intZ;\r\n      var bb = this._p[b + 1] + intZ;\r\n\r\n\r\n      return (_lerp(fadeZ, \r\n                  _lerp(fadeY, \r\n                       _lerp(fadeX, this._gradient3d(this._p[aa] , x, y, z), \r\n                                    this._gradient3d(this._p[ba] , x - 1, y, z)),\r\n                       _lerp(fadeX, this._gradient3d(this._p[ab] , x, y - 1, z), \r\n                                    this._gradient3d(this._p[bb], x - 1, y - 1, z))),\r\n                  _lerp(fadeY,\r\n                        _lerp(fadeX, this._gradient3d(this._p[aa + 1] , x, y, z - 1), \r\n                                     this._gradient3d(this._p[ba + 1] , x - 1, y, z - 1)),\r\n                        _lerp(fadeX, this._gradient3d(this._p[ab + 1] , x, y - 1, z - 1), \r\n                                     this._gradient3d(this._p[bb + 1], x - 1, y - 1, z - 1)))) + 1) / 2;\r\n   }\r\n}\r\n\r\n/**\r\n * A helper to draw 2D perlin maps given a perlin generator and a function\r\n */\r\nexport class PerlinDrawer2D {\r\n   /**\r\n    * @param generator - An existing perlin generator\r\n    * @param colorFcn - A color function that takes a value between [0, 255] derived from the perlin generator, and returns a color\r\n    */\r\n   constructor(public generator: PerlinGenerator, public colorFcn?: (val: number) => Color) {\r\n      if (!colorFcn) {\r\n         this.colorFcn = (val: number) => { return val < 125 ? Color.Black : Color.White; };\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns an image of 2D perlin noise\r\n    */\r\n   public image(width: number, height: number): HTMLImageElement {\r\n      var image = document.createElement('img');\r\n      var canvas = document.createElement('canvas');\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      var ctx = canvas.getContext('2d');\r\n      this.draw(ctx, 0, 0, width, height);\r\n      image.src = canvas.toDataURL();\r\n      return image;\r\n   }\r\n\r\n   /**\r\n    * This draws a 2D perlin grid on a canvas context, not recommended to be called every frame due to performance\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number) {\r\n     var grid = this.generator.grid(width, height);\r\n     var imageData = ctx.getImageData(x, y, width, height);\r\n     for (var j = 0; j < height; j++) {\r\n         for (var i = 0; i < width; i++) {\r\n            var val = grid[i + width * j];\r\n            var c = Math.floor(val * 255) & 0xff;\r\n            var pixel = (i + j * imageData.width) * 4;\r\n            var color = this.colorFcn(c);\r\n            \r\n            imageData.data[pixel] = color.r;\r\n            imageData.data[pixel + 1] = color.g;\r\n            imageData.data[pixel + 2] = color.b;\r\n            imageData.data[pixel + 3] = Math.floor(color.a * 255);\r\n         }\r\n      }\r\n      ctx.putImageData(imageData, x, y);\r\n   }\r\n}","export * from 'PerlinNoise';\r\nexport * from 'Random';","import { Logger } from './../Util/Log';\r\nimport { IPostProcessor } from './IPostProcessor';\r\nimport { Engine } from '../Engine';\r\n\r\nexport enum ColorBlindness {\r\n   Protanope,\r\n   Deuteranope,\r\n   Tritanope\r\n}\r\n\r\n\r\n/**\r\n * This post processor can correct colors and simulate color blindness. \r\n * It is possible to use this on every game, but the game's performance\r\n * will suffer measurably. It's better to use it as a helpful tool while developing your game. \r\n * Remember, the best practice is to design with color blindness in mind.\r\n *\r\n * [[include:ColorBlind.md]] \r\n */\r\nexport class ColorBlindCorrector implements IPostProcessor {\r\n   \r\n   private _vertexShader =\r\n   'attribute vec2 a_position;' +\r\n   'attribute vec2 a_texCoord;' +\r\n\r\n   'uniform vec2 u_resolution;' +\r\n\r\n   'varying vec2 v_texCoord;' +\r\n\r\n   'void main() {' +\r\n      // convert the rectangle from pixels to 0.0 to 1.0\r\n      'vec2 zeroToOne = a_position / u_resolution;' +\r\n\r\n      // convert from 0->1 to 0->2\r\n      'vec2 zeroToTwo = zeroToOne * 2.0;' +\r\n\r\n      // convert from 0->2 to -1->+1 (clipspace)\r\n      'vec2 clipSpace = zeroToTwo - 1.0;' +\r\n\r\n      'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\r\n\r\n      // pass the texCoord to the fragment shader\r\n      // The GPU will interpolate this value between points.\r\n      'v_texCoord = a_texCoord;' +\r\n   '}';\r\n\r\n   private _fragmentShader =\r\n   'precision mediump float;' +\r\n   // our texture\r\n   'uniform sampler2D u_image;' +\r\n   // the texCoords passed in from the vertex shader.\r\n   'varying vec2 v_texCoord;' +\r\n\r\n   // Color blind conversions\r\n   /*'mat3 m[9] =' +\r\n   '{' +\r\n      'mat3(1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0  ),' + // normal\r\n      'mat3(0.567, 0.433, 0.0,  0.558, 0.442, 0.0,  0.0, 0.242, 0.758),' + // protanopia\r\n      'mat3(0.817, 0.183, 0.0,  0.333, 0.667, 0.0,  0.0, 0.125,0.875),' + // protanomaly\r\n      'mat3(0.625, 0.375, 0.0,  0.7, 0.3, 0.0,  0.0, 0.3,0.7  ),' + // deuteranopia\r\n      'mat3(0.8, 0.2, 0.0,  0.258, 0.742, 0.0,  0.0, 0.142,0.858),' + // deuteranomaly\r\n      'mat3(0.95, 0.05, 0.0,  0.0, 0.433, 0.567,  0.0, 0.475,0.525),' + // tritanopia\r\n      'mat3(0.967, 0.033, 0.0,  0.0, 0.733, 0.267,  0.0, 0.183,0.817),' + // tritanomaly\r\n      'mat3(0.299, 0.587, 0.114,  0.299, 0.587, 0.114,  0.299, 0.587,0.114),' + // achromatopsia\r\n      'mat3(0.618, 0.320, 0.062,  0.163, 0.775, 0.062,  0.163, 0.320,0.516)' +  // achromatomaly\r\n   '};' +*/\r\n\r\n\r\n   'void main() {' +\r\n   \r\n      'vec4 o =  texture2D(u_image, v_texCoord);' +\r\n      // RGB to LMS matrix conversion\r\n         'float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);' +\r\n         'float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);' +\r\n         'float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);' +\r\n\r\n      // Simulate color blindness\r\n\r\n      '//MODE CODE//' +\r\n\r\n      /* Deuteranope for testing \r\n      'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n            'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\r\n            'float s = 0.0 * L + 0.0 * M + 1.0 * S;' +*/\r\n\r\n      // LMS to RGB matrix conversion\r\n         'vec4 error;' +\r\n      'error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);' +\r\n      'error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);' +\r\n      'error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);' +\r\n      'error.a = 1.0;' +\r\n\r\n      'vec4 diff = o - error;' +\r\n      'vec4 correction;' +\r\n      'correction.r = 0.0;' +\r\n      'correction.g =  (diff.r * 0.7) + (diff.g * 1.0);' +\r\n      'correction.b =  (diff.r * 0.7) + (diff.b * 1.0);' +\r\n      'correction = o + correction;' +\r\n      'correction.a = o.a;' +   \r\n\r\n      '//SIMULATE//' +\r\n      \r\n   '}';\r\n\r\n\r\n\r\n   private _internalCanvas: HTMLCanvasElement;\r\n   private _gl: WebGLRenderingContext;\r\n   private _program: WebGLProgram;\r\n\r\n\r\n   constructor(public engine: Engine, public simulate: boolean = false, public colorMode: ColorBlindness = ColorBlindness.Protanope) {\r\n      this._internalCanvas = document.createElement('canvas');\r\n      this._internalCanvas.width = engine.getDrawWidth();\r\n      this._internalCanvas.height = engine.getDrawHeight();\r\n\r\n      this._gl = <WebGLRenderingContext>this._internalCanvas.getContext('webgl', { preserveDrawingBuffer: true });\r\n\r\n      this._program = this._gl.createProgram();\r\n      var fragmentShader = this._getShader('Fragment', this._getFragmentShaderByMode(colorMode));\r\n      var vertextShader = this._getShader('Vertex', this._vertexShader);\r\n\r\n      this._gl.attachShader(this._program, vertextShader);\r\n      this._gl.attachShader(this._program, fragmentShader);\r\n      this._gl.linkProgram(this._program);\r\n\r\n      if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\r\n         Logger.getInstance().error('Unable to link shader program!');\r\n      }\r\n\r\n      this._gl.useProgram(this._program);\r\n   }\r\n   \r\n   private _getFragmentShaderByMode(colorMode: ColorBlindness) {\r\n      var code = '';\r\n      if (colorMode === ColorBlindness.Protanope) {\r\n         code =\r\n            'float l = 0.0 * L + 2.02344 * M + -2.52581 * S;' +\r\n            'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\r\n            'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\r\n      } else if (colorMode === ColorBlindness.Deuteranope) {\r\n         code =\r\n            'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n            'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\r\n            'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\r\n      }else if (colorMode === ColorBlindness.Tritanope) {\r\n         code =\r\n            'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\r\n            'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\r\n            'float s = -0.395913 * L + 0.801109 * M + 0.0 * S;';\r\n      }\r\n\r\n      if (this.simulate) {\r\n         this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = error.rgba;');\r\n      } else {\r\n         this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = correction.rgba;');\r\n      }\r\n\r\n      return this._fragmentShader.replace('//MODE CODE//', code);\r\n\r\n   }\r\n\r\n   private _setRectangle(x: number, y: number, width: number, height: number) {\r\n      var x1 = x;\r\n      var x2 = x + width;\r\n      var y1 = y;\r\n      var y2 = y + height;\r\n      this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([\r\n         x1, y1,\r\n         x2, y1,\r\n         x1, y2,\r\n         x1, y2,\r\n         x2, y1,\r\n         x2, y2]), this._gl.STATIC_DRAW);\r\n   }\r\n\r\n   private _getShader(type: string, program: string): WebGLShader {\r\n      var shader: WebGLShader;\r\n      if (type === 'Fragment') {\r\n         shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);   \r\n      }else if (type === 'Vertex') {\r\n         shader = this._gl.createShader(this._gl.VERTEX_SHADER);\r\n      } else {\r\n         Logger.getInstance().error('Error unknown shader type', type);\r\n      }\r\n\r\n\r\n      this._gl.shaderSource(shader, program);\r\n      this._gl.compileShader(shader);\r\n\r\n      if (!this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {\r\n         Logger.getInstance().error('Unable to compile shader!', this._gl.getShaderInfoLog(shader));\r\n         return null;\r\n      }\r\n\r\n      return shader;\r\n   }\r\n\r\n   public process(image: ImageData, out: CanvasRenderingContext2D) {\r\n      // look up where the vertex data needs to go.\r\n      var positionLocation = this._gl.getAttribLocation(this._program, 'a_position');\r\n      var texCoordLocation = this._gl.getAttribLocation(this._program, 'a_texCoord');\r\n\r\n      var texCoordBuffer = this._gl.createBuffer();\r\n      this._gl.bindBuffer(this._gl.ARRAY_BUFFER, texCoordBuffer);\r\n      this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([\r\n         0.0, 0.0,\r\n         1.0, 0.0,\r\n         0.0, 1.0,\r\n         0.0, 1.0,\r\n         1.0, 0.0,\r\n         1.0, 1.0]), this._gl.STATIC_DRAW);\r\n      this._gl.enableVertexAttribArray(texCoordLocation);\r\n      this._gl.vertexAttribPointer(texCoordLocation, 2, this._gl.FLOAT, false, 0, 0);\r\n\r\n      // Create a texture.\r\n      var texture = this._gl.createTexture();\r\n      this._gl.bindTexture(this._gl.TEXTURE_2D, texture);\r\n\r\n      // Set the parameters so we can render any size image.\r\n      this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._gl.CLAMP_TO_EDGE);\r\n      this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._gl.CLAMP_TO_EDGE);\r\n      this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.NEAREST);\r\n      this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.NEAREST);\r\n      // Flip the texture when unpacking into the gl context, gl reads textures in the opposite order as everything else :/\r\n      this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n      // Upload the image into the texture.\r\n      this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, image);\r\n\r\n      // lookup uniforms\r\n      var resolutionLocation = this._gl.getUniformLocation(this._program, 'u_resolution');\r\n\r\n      // set the resolution\r\n      this._gl.uniform2f(resolutionLocation, this._internalCanvas.width, this._internalCanvas.height);\r\n\r\n      // Create a buffer for the position of the rectangle corners.\r\n      var positionBuffer = this._gl.createBuffer();\r\n      this._gl.bindBuffer(this._gl.ARRAY_BUFFER, positionBuffer);\r\n      this._gl.enableVertexAttribArray(positionLocation);\r\n      this._gl.vertexAttribPointer(positionLocation, 2, this._gl.FLOAT, false, 0, 0);\r\n\r\n      // Set a rectangle the same size as the image.\r\n      this._setRectangle(0, 0, image.width, image.height);\r\n\r\n      // Draw the rectangle.\r\n      this._gl.drawArrays(this._gl.TRIANGLES, 0, 6);\r\n\r\n\r\n\r\n      // Grab tranformed image from internal canvas\r\n      var pixelData = new Uint8Array(image.width * image.height * 4);\r\n      this._gl.readPixels(0, 0, image.width, image.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, pixelData);\r\n\r\n      (<any>image.data).set(pixelData);\r\n\r\n      out.putImageData(image, 0, 0);\r\n   }\r\n\r\n\r\n}","export * from './ColorBlindCorrector';\r\nexport * from './IPostProcessor';","export * from './Resource';\r\nexport * from './Sound';\r\nexport * from './Texture';","import { Engine } from './../Engine';\r\nimport { Class } from './../Class';\r\nimport { GameEvent, GamepadConnectEvent, GamepadDisconnectEvent, GamepadButtonEvent, GamepadAxisEvent } from '../Events';\r\nimport * as Events from '../Events';\r\n\r\n/**\r\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\r\n * to provide controller support for your games.\r\n *\r\n * [[include:Gamepads.md]]\r\n */\r\nexport class Gamepads extends Class {\r\n   \r\n   /**\r\n    * Whether or not to poll for Gamepad input (default: `false`)\r\n    */\r\n   public enabled = false;\r\n\r\n   /**\r\n    * Whether or not Gamepad API is supported\r\n    */\r\n   public supported = !!(<any>navigator).getGamepads;\r\n\r\n   /**\r\n    * The minimum value an axis has to move before considering it a change\r\n    */\r\n   public static MinAxisMoveThreshold = 0.05;\r\n\r\n   private _gamePadTimeStamps = [0, 0, 0, 0];\r\n   private _oldPads: Gamepad[] = [];\r\n   private _pads: Gamepad[] = [];\r\n   private _initSuccess: boolean = false;\r\n   private _engine: Engine;\r\n   private _navigator: INavigatorGamepads = <any>navigator;\r\n   private _minimumConfiguration: IGamepadConfiguration = null;\r\n\r\n   constructor(engine: Engine) {\r\n      super();\r\n      this._engine = engine;\r\n   }\r\n\r\n   public init() {\r\n      if (!this.supported) { return; }\r\n      if (this._initSuccess) { return; }\r\n\r\n      // In Chrome, this will return 4 undefined items until a button is pressed\r\n      // In FF, this will not return any items until a button is pressed\r\n      this._oldPads = this._clonePads(this._navigator.getGamepads());\r\n      if (this._oldPads.length && this._oldPads[0]) {\r\n         this._initSuccess = true;\r\n      }\r\n   }\r\n   \r\n   /**\r\n    * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\r\n    * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\r\n    * all other controllers with more axis or buttons are valid as well. If no minimum \r\n    * configuration is set all pads are valid.\r\n    */\r\n   public setMinimumGamepadConfiguration(config: IGamepadConfiguration) : void {\r\n      this._enableAndUpdate(); // if config is used, implicitly enable\r\n      this._minimumConfiguration = config;\r\n   }\r\n   \r\n   /** \r\n    * When implicitly enabled, set the enabled flag and run an update so information is updated\r\n    */\r\n   private _enableAndUpdate() {\r\n      if (!this.enabled) {\r\n         this.enabled = true;\r\n         this.update();\r\n      }\r\n   }\r\n   \r\n   /**\r\n    * Checks a navigator gamepad against the minimum configuration if present.\r\n    */\r\n   private _isGamepadValid(pad: INavigatorGamepad) : boolean {\r\n      if (!this._minimumConfiguration) { return true; };\r\n      if (!pad) { return false; };\r\n      var axesLength = pad.axes.filter((value) => {\r\n         return (typeof value !== undefined);\r\n      }).length;\r\n      \r\n      var buttonLength = pad.buttons.filter((value) => {\r\n         return (typeof value !== undefined);\r\n      }).length;\r\n      return axesLength >= this._minimumConfiguration.axis && \r\n               buttonLength >= this._minimumConfiguration.buttons &&\r\n               pad.connected;\r\n   }\r\n   \r\n   public on(eventName: Events.connect, handler: (event?: GamepadConnectEvent) => void): void;\r\n   public on(eventName: Events.disconnect, handler: (event?: GamepadDisconnectEvent) => void): void;\r\n   public on(eventName: Events.button, handler: (event?: GamepadButtonEvent) => void): void;\r\n   public on(eventName: Events.axis, handler: (event?: GamepadAxisEvent) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void {\r\n      this._enableAndUpdate(); // implicitly enable\r\n      super.on(eventName, handler);  \r\n   }\r\n   \r\n   public off(eventName: string, handler?: (event?: GameEvent<any>) => void) {\r\n      this._enableAndUpdate(); // implicitly enable\r\n      super.off(eventName, handler);  \r\n   }\r\n   \r\n   /**\r\n    * Updates Gamepad state and publishes Gamepad events\r\n    */\r\n   public update() {\r\n      if (!this.enabled || !this.supported) { return; }\r\n      this.init();\r\n\r\n      var gamepads = this._navigator.getGamepads();\r\n\r\n      for (var i = 0; i < gamepads.length; i++) {\r\n\r\n         if (!gamepads[i]) {\r\n            let gamepad = this.at(i);\r\n            // If was connected, but now isn't emit the disconnect event\r\n            if (gamepad.connected) {\r\n               this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\r\n            }\r\n            // Reset connection status\r\n            gamepad.connected = false;\r\n            continue;\r\n         } else {\r\n\r\n            if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\r\n               this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));   \r\n            } \r\n            // Set connection status\r\n            this.at(i).connected = true;               \r\n         };\r\n\r\n         // Only supported in Chrome\r\n         if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\r\n            continue;\r\n         }\r\n\r\n         this._gamePadTimeStamps[i] = gamepads[i].timestamp;\r\n         \r\n         // Add reference to navigator gamepad\r\n         this.at(i).navigatorGamepad = gamepads[i];\r\n\r\n         // Buttons\r\n         var b: string, bi: number, a: string, ai: number, value: number;\r\n         \r\n         for (b in Buttons) {\r\n            bi = <any>Buttons[b];\r\n            if (typeof bi === 'number') {                                          \r\n               if (gamepads[i].buttons[bi]) {\r\n                  value = gamepads[i].buttons[bi].value;\r\n                  if (value !== this._oldPads[i].getButton(bi)) {\r\n                     if (gamepads[i].buttons[bi].pressed) {\r\n                        this.at(i).updateButton(bi, value);\r\n                        this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\r\n                     } else {\r\n                        this.at(i).updateButton(bi, 0);\r\n                     }\r\n                  }\r\n               }\r\n            }\r\n         }\r\n\r\n         // Axes\r\n         for (a in Axes) {\r\n            ai = <any>Axes[a];\r\n            if (typeof ai === 'number') {\r\n               value = gamepads[i].axes[ai];\r\n               if (value !== this._oldPads[i].getAxes(ai)) {\r\n                  this.at(i).updateAxes(ai, value);\r\n                  this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\r\n               }\r\n            }\r\n         }                      \r\n\r\n         this._oldPads[i] = this._clonePad(gamepads[i]);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\r\n    */\r\n   public at(index: number): Gamepad {\r\n      this._enableAndUpdate(); // implicitly enable gamepads when at() is called         \r\n      if (index >= this._pads.length) {\r\n\r\n         // Ensure there is a pad to retrieve\r\n         for (var i = this._pads.length - 1, max = index; i < max; i++) {\r\n            this._pads.push(new Gamepad());\r\n            this._oldPads.push(new Gamepad());\r\n         }\r\n      }\r\n\r\n      return this._pads[index];\r\n   }\r\n   \r\n   /**\r\n    * Returns a list of all valid gamepads that meet the minimum configuration requirement.\r\n    */\r\n   public getValidGamepads(): Gamepad[] {\r\n      this._enableAndUpdate();\r\n      var result : Gamepad[] = [];\r\n      for (var i = 0; i < this._pads.length; i++) {\r\n         if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\r\n            result.push(this.at(i));\r\n         }\r\n      }         \r\n      return result;\r\n   }\r\n\r\n   /**\r\n    * Gets the number of connected gamepads\r\n    */\r\n   public count() {\r\n      return this._pads.filter(p => p.connected).length;\r\n   }\r\n\r\n   private _clonePads(pads: INavigatorGamepad[]): Gamepad[] {\r\n      var arr = [];\r\n      for (var i = 0, len = pads.length; i < len; i++) {\r\n         arr.push(this._clonePad(pads[i]));\r\n      }\r\n      return arr;\r\n   }\r\n\r\n   /**\r\n    * Fastest way to clone a known object is to do it yourself\r\n    */\r\n   private _clonePad(pad: INavigatorGamepad): Gamepad {\r\n      var i, len;\r\n      var clonedPad = new Gamepad();\r\n\r\n      if (!pad) { return clonedPad; }\r\n\r\n      for (i = 0, len = pad.buttons.length; i < len; i++) {\r\n         if (pad.buttons[i]) {\r\n            clonedPad.updateButton(i, pad.buttons[i].value);\r\n         }\r\n      }\r\n      for (i = 0, len = pad.axes.length; i < len; i++) {\r\n         clonedPad.updateAxes(i, pad.axes[i]);\r\n      }\r\n\r\n      return clonedPad;\r\n   }\r\n}\r\n\r\n/**\r\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\r\n * for more information on handling controller input.\r\n */\r\nexport class Gamepad extends Class {\r\n   public connected = false;\r\n   public navigatorGamepad: INavigatorGamepad;\r\n   private _buttons: number[] = new Array(16);\r\n   private _axes: number[] = new Array(4);\r\n\r\n   constructor() {\r\n      super();\r\n\r\n      var i: number;\r\n      for (i = 0; i < this._buttons.length; i++) {\r\n         this._buttons[i] = 0;\r\n      }\r\n      for (i = 0; i < this._axes.length; i++) {\r\n         this._axes[i] = 0;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Whether or not the given button is pressed\r\n    * @param button     The button to query\r\n    * @param threshold  The threshold over which the button is considered to be pressed\r\n    */\r\n   public isButtonPressed(button: Buttons, threshold: number = 1) {\r\n      return this._buttons[button] >= threshold;\r\n   }\r\n\r\n   /**\r\n    * Gets the given button value between 0 and 1\r\n    */\r\n   public getButton(button: Buttons) {\r\n      return this._buttons[button];\r\n   }\r\n\r\n   /**\r\n    * Gets the given axis value between -1 and 1. Values below\r\n    * [[MinAxisMoveThreshold]] are considered 0.\r\n    */\r\n   public getAxes(axes: Axes) {\r\n      var value = this._axes[axes];\r\n\r\n      if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\r\n         return 0;\r\n      } else {\r\n         return value;\r\n      }\r\n   }\r\n\r\n   public updateButton(buttonIndex: number, value: number) {\r\n      this._buttons[buttonIndex] = value;\r\n   }\r\n\r\n   public updateAxes(axesIndex: number, value: number) {\r\n      this._axes[axesIndex] = value;\r\n   }\r\n}\r\n\r\n/**\r\n * Gamepad Buttons enumeration\r\n */\r\nexport enum Buttons {\r\n   /**\r\n    * Face 1 button (e.g. A)\r\n    */\r\n   Face1 = 0,\r\n   /**\r\n    * Face 2 button (e.g. B)\r\n    */\r\n   Face2 = 1,\r\n   /**\r\n    * Face 3 button (e.g. X)\r\n    */\r\n   Face3 = 2,\r\n   /**\r\n    * Face 4 button (e.g. Y)\r\n    */\r\n   Face4 = 3,\r\n   /**\r\n    * Left bumper button\r\n    */\r\n   LeftBumper = 4,\r\n   /**\r\n    * Right bumper button\r\n    */\r\n   RightBumper = 5,\r\n   /**\r\n    * Left trigger button\r\n    */\r\n   LeftTrigger = 6,\r\n   /**\r\n    * Right trigger button\r\n    */\r\n   RightTrigger = 7,\r\n   /**\r\n    * Select button\r\n    */\r\n   Select = 8,\r\n   /**\r\n    * Start button\r\n    */\r\n   Start = 9,\r\n   /**\r\n    * Left analog stick press (e.g. L3)\r\n    */\r\n   LeftStick = 10,\r\n   /**\r\n    * Right analog stick press (e.g. R3)\r\n    */\r\n   RightStick = 11,\r\n   /**\r\n    * D-pad up\r\n    */\r\n   DpadUp = 12,\r\n   /**\r\n    * D-pad down\r\n    */\r\n   DpadDown = 13,\r\n   /**\r\n    * D-pad left\r\n    */\r\n   DpadLeft = 14,\r\n   /**\r\n    * D-pad right\r\n    */\r\n   DpadRight = 15\r\n}\r\n\r\n/**\r\n * Gamepad Axes enumeration\r\n */\r\nexport enum Axes {\r\n   /**\r\n    * Left analogue stick X direction\r\n    */\r\n   LeftStickX = 0,\r\n   /**\r\n    * Left analogue stick Y direction\r\n    */\r\n   LeftStickY = 1,\r\n   /**\r\n    * Right analogue stick X direction\r\n    */\r\n   RightStickX = 2,\r\n   /**\r\n    * Right analogue stick Y direction\r\n    */\r\n   RightStickY = 3\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\ninterface INavigatorGamepads {\r\n   getGamepads(): INavigatorGamepad[];\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface INavigatorGamepad {\r\n   axes: number[];\r\n   buttons: INavigatorGamepadButton[];\r\n   connected: boolean;\r\n   id: string;\r\n   index: number;\r\n   mapping: string;\r\n   timestamp: number;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface INavigatorGamepadButton {\r\n   pressed: boolean;\r\n   value: number;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface INavigatorGamepadEvent {\r\n   gamepad: INavigatorGamepad;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport interface IGamepadConfiguration {\r\n   axis: number;\r\n   buttons: number;\r\n}","import { Engine } from './../Engine';\r\nimport { GameEvent } from '../Events';\r\nimport { UIActor } from '../UIActor';\r\nimport { Vector } from '../Algebra';\r\nimport { Class } from '../Class';\r\nimport * as Util from '../Util/Util';\r\nimport * as Events from '../Events';\r\n\r\n/**\r\n * The type of pointer for a [[PointerEvent]].\r\n */\r\nexport enum PointerType {\r\n   Touch,\r\n   Mouse,\r\n   Pen,\r\n   Unknown\r\n}\r\n\r\n/**\r\n * The mouse button being pressed.\r\n */\r\nexport enum PointerButton {\r\n   Left,\r\n   Middle,\r\n   Right,\r\n   Unknown\r\n}\r\n\r\n/**\r\n * Determines the scope of handling mouse/touch events. See [[Pointers]] for more information.\r\n */\r\nexport enum PointerScope {\r\n\r\n   /**\r\n    * Handle events on the `canvas` element only. Events originating outside the\r\n    * `canvas` will not be handled.\r\n    */\r\n   Canvas,\r\n\r\n   /**\r\n    * Handles events on the entire document. All events will be handled by Excalibur.\r\n    */\r\n   Document\r\n}\r\n\r\n/**\r\n * Pointer events\r\n *\r\n * Represents a mouse, touch, or stylus event. See [[Pointers]] for more information on\r\n * handling pointer input.\r\n *\r\n * For mouse-based events, you can inspect [[PointerEvent.button]] to see what button was pressed.\r\n */\r\nexport class PointerEvent extends GameEvent<any> {\r\n\r\n   /**\r\n    * @param x            The `x` coordinate of the event (in world coordinates)\r\n    * @param y            The `y` coordinate of the event (in world coordinates)\r\n    * @param pageX        The `x` coordinate of the event (in document coordinates)\r\n    * @param pageY        The `y` coordinate of the event (in document coordinates)\r\n    * @param screenX      The `x` coordinate of the event (in screen coordinates)\r\n    * @param screenY      The `y` coordinate of the event (in screen coordinates)\r\n    * @param index        The index of the pointer (zero-based)\r\n    * @param pointerType  The type of pointer\r\n    * @param button       The button pressed (if [[PointerType.Mouse]])\r\n    * @param ev           The raw DOM event being handled\r\n    */\r\n   constructor(public x: number, \r\n               public y: number, \r\n               public pageX: number,\r\n               public pageY: number,\r\n               public screenX: number,\r\n               public screenY: number,\r\n               public index: number, \r\n               public pointerType: PointerType, \r\n               public button: PointerButton, \r\n               public ev: any) {\r\n      super();\r\n   }\r\n};\r\n\r\n/**\r\n * Handles pointer events (mouse, touch, stylus, etc.) and normalizes to \r\n * [W3C Pointer Events](http://www.w3.org/TR/pointerevents/).\r\n *\r\n * [[include:Pointers.md]]\r\n */\r\nexport class Pointers extends Class {\r\n   private _engine: Engine;\r\n\r\n   private _pointerDown: PointerEvent[] = [];\r\n   private _pointerUp: PointerEvent[] = [];\r\n   private _pointerMove: PointerEvent[] = [];\r\n   private _pointerCancel: PointerEvent[] = [];\r\n   private _pointers: Pointer[] = [];\r\n   private _activePointers: number[] = [];\r\n\r\n   constructor(engine: Engine) {\r\n      super();\r\n\r\n      this._engine = engine;\r\n      this._pointers.push(new Pointer());\r\n      this._activePointers = [-1];\r\n      this.primary = this._pointers[0];\r\n   }\r\n\r\n   public on(eventName: Events.up, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: Events.down, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: Events.move, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: Events.cancel, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void {\r\n      super.on(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * Primary pointer (mouse, 1 finger, stylus, etc.)\r\n    */\r\n   public primary: Pointer;\r\n   \r\n   /**\r\n    * Initializes pointer event listeners\r\n    */\r\n   public init(scope: PointerScope = PointerScope.Document): void {\r\n      var target = <any>document;\r\n      if (scope === PointerScope.Document) {\r\n         target = document;\r\n      } else {\r\n         target = <any>this._engine.canvas;\r\n      }\r\n\r\n      // Touch Events\r\n      target.addEventListener('touchstart', this._handleTouchEvent('down', this._pointerDown));\r\n      target.addEventListener('touchend', this._handleTouchEvent('up', this._pointerUp));\r\n      target.addEventListener('touchmove', this._handleTouchEvent('move', this._pointerMove));\r\n      target.addEventListener('touchcancel', this._handleTouchEvent('cancel', this._pointerCancel));\r\n\r\n      // W3C Pointer Events\r\n      // Current: IE11, IE10\r\n      if ((<any>window).PointerEvent) {\r\n         // IE11\r\n         this._engine.canvas.style.touchAction = 'none';\r\n         target.addEventListener('pointerdown', this._handlePointerEvent('down', this._pointerDown));\r\n         target.addEventListener('pointerup', this._handlePointerEvent('up', this._pointerUp));\r\n         target.addEventListener('pointermove', this._handlePointerEvent('move', this._pointerMove));\r\n         target.addEventListener('pointercancel', this._handlePointerEvent('cancel', this._pointerMove));\r\n\r\n      } else if ((<any>window).MSPointerEvent) {\r\n         // IE10\r\n         this._engine.canvas.style.msTouchAction = 'none';\r\n         target.addEventListener('MSPointerDown', this._handlePointerEvent('down', this._pointerDown));\r\n         target.addEventListener('MSPointerUp', this._handlePointerEvent('up', this._pointerUp));\r\n         target.addEventListener('MSPointerMove', this._handlePointerEvent('move', this._pointerMove));\r\n         target.addEventListener('MSPointerCancel', this._handlePointerEvent('cancel', this._pointerMove));\r\n\r\n      } else {\r\n\r\n         // Mouse Events\r\n         target.addEventListener('mousedown', this._handleMouseEvent('down', this._pointerDown));\r\n         target.addEventListener('mouseup', this._handleMouseEvent('up', this._pointerUp));\r\n         target.addEventListener('mousemove', this._handleMouseEvent('move', this._pointerMove));\r\n      }\r\n   }\r\n\r\n   public update(): void {\r\n      this._pointerUp.length = 0;\r\n      this._pointerDown.length = 0;\r\n      this._pointerMove.length = 0;\r\n      this._pointerCancel.length = 0;\r\n   }\r\n   \r\n   /**\r\n    * Safely gets a Pointer at a specific index and initializes one if it doesn't yet exist\r\n    * @param index  The pointer index to retrieve\r\n    */\r\n   public at(index: number): Pointer {\r\n      if (index >= this._pointers.length) {\r\n\r\n         // Ensure there is a pointer to retrieve\r\n         for (var i = this._pointers.length - 1, max = index; i < max; i++) {\r\n            this._pointers.push(new Pointer());\r\n            this._activePointers.push(-1);\r\n         }\r\n      }\r\n\r\n      return this._pointers[index];\r\n   }\r\n\r\n   /**\r\n    * Get number of pointers being watched\r\n    */\r\n   public count(): number {\r\n      return this._pointers.length;\r\n   }\r\n\r\n   /**\r\n    * Propogates events to actor if necessary\r\n    */\r\n   public propogate(actor: any) {\r\n      var isUIActor = actor instanceof UIActor;\r\n      var i: number = 0, \r\n            len: number = this._pointerUp.length;\r\n\r\n      for (i; i < len; i++) {\r\n         if (actor.contains(this._pointerUp[i].x, this._pointerUp[i].y, !isUIActor)) {\r\n            actor.eventDispatcher.emit('pointerup', this._pointerUp[i]);\r\n         }\r\n      }\r\n\r\n      i = 0;\r\n      len = this._pointerDown.length;\r\n\r\n      for (i; i < len; i++) {\r\n         if (actor.contains(this._pointerDown[i].x, this._pointerDown[i].y, !isUIActor)) {\r\n            actor.eventDispatcher.emit('pointerdown', this._pointerDown[i]);\r\n         }\r\n      }\r\n\r\n      if (actor.capturePointer.captureMoveEvents) {\r\n\r\n         i = 0;\r\n         len = this._pointerMove.length;\r\n\r\n         for (i; i < len; i++) {\r\n            if (actor.contains(this._pointerMove[i].x, this._pointerMove[i].y, !isUIActor)) {\r\n               actor.eventDispatcher.emit('pointermove', this._pointerMove[i]);\r\n            }\r\n         }\r\n      }\r\n\r\n      i = 0;\r\n      len = this._pointerCancel.length;\r\n\r\n      for (i; i < len; i++) {\r\n         if (actor.contains(this._pointerCancel[i].x, this._pointerCancel[i].y, !isUIActor)) {\r\n            actor.eventDispatcher.emit('pointercancel', this._pointerCancel[i]);\r\n         }\r\n      }\r\n   }\r\n\r\n   private _handleMouseEvent(eventName: string, eventArr: PointerEvent[]) {\r\n      return (e: MouseEvent) => {\r\n         e.preventDefault();\r\n         var x: number = e.pageX - Util.getPosition(this._engine.canvas).x;\r\n         var y: number = e.pageY - Util.getPosition(this._engine.canvas).y;\r\n         var transformedPoint = this._engine.screenToWorldCoordinates(new Vector(x, y));\r\n         var pe = new PointerEvent(transformedPoint.x, transformedPoint.y, e.pageX, e.pageY, x, y, 0, PointerType.Mouse, e.button, e);\r\n         eventArr.push(pe);\r\n         this.at(0).eventDispatcher.emit(eventName, pe);\r\n      };\r\n   }\r\n\r\n   private _handleTouchEvent(eventName: string, eventArr: PointerEvent[]) {\r\n      return (e: ITouchEvent) => {\r\n         e.preventDefault();\r\n         for (var i = 0, len = e.changedTouches.length; i < len; i++) {\r\n            var index = this._pointers.length > 1 ? this._getPointerIndex(e.changedTouches[i].identifier) : 0;\r\n            if (index === -1) { continue; }\r\n            var x: number = e.changedTouches[i].pageX - Util.getPosition(this._engine.canvas).x;\r\n            var y: number = e.changedTouches[i].pageY - Util.getPosition(this._engine.canvas).y;\r\n            var transformedPoint = this._engine.screenToWorldCoordinates(new Vector(x, y));\r\n            var pe = new PointerEvent(transformedPoint.x, transformedPoint.y, \r\n               e.changedTouches[i].pageX, e.changedTouches[i].pageY, x, y, index, PointerType.Touch, PointerButton.Unknown, e);\r\n            eventArr.push(pe);\r\n            this.at(index).eventDispatcher.emit(eventName, pe);\r\n            // only with multi-pointer\r\n            if (this._pointers.length > 1) {\r\n               if (eventName === 'up') {\r\n\r\n                  // remove pointer ID from pool when pointer is lifted\r\n                  this._activePointers[index] = -1;\r\n               } else if (eventName === 'down') {\r\n\r\n                  // set pointer ID to given index\r\n                  this._activePointers[index] = e.changedTouches[i].identifier;\r\n               }\r\n            }\r\n         }\r\n      };\r\n   }\r\n\r\n   private _handlePointerEvent(eventName: string, eventArr: PointerEvent[]) {\r\n      return (e: MSPointerEvent) => {\r\n         e.preventDefault();\r\n         \r\n         // get the index for this pointer ID if multi-pointer is asked for\r\n         var index = this._pointers.length > 1 ? this._getPointerIndex(e.pointerId) : 0;\r\n         if (index === -1) { return; }\r\n         var x: number = e.pageX - Util.getPosition(this._engine.canvas).x;\r\n         var y: number = e.pageY - Util.getPosition(this._engine.canvas).y;\r\n         var transformedPoint = this._engine.screenToWorldCoordinates(new Vector(x, y));\r\n         var pe = new PointerEvent(transformedPoint.x, transformedPoint.y, \r\n            e.pageX, e.pageY, x, y, index, this._stringToPointerType(e.pointerType), e.button, e);\r\n         eventArr.push(pe);\r\n         this.at(index).eventDispatcher.emit(eventName, pe);\r\n\r\n         // only with multi-pointer\r\n         if (this._pointers.length > 1) {\r\n            if (eventName === 'up') {\r\n\r\n               // remove pointer ID from pool when pointer is lifted\r\n               this._activePointers[index] = -1;\r\n            } else if (eventName === 'down') {\r\n\r\n               // set pointer ID to given index\r\n               this._activePointers[index] = e.pointerId;\r\n            }\r\n         }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Gets the index of the pointer specified for the given pointer ID or finds the next empty pointer slot available.\r\n    * This is required because IE10/11 uses incrementing pointer IDs so we need to store a mapping of ID => idx\r\n    */\r\n   private _getPointerIndex(pointerId: number) {\r\n      var idx;\r\n      if ((idx = this._activePointers.indexOf(pointerId)) > -1) {\r\n         return idx;\r\n      }\r\n\r\n      for (var i = 0; i < this._activePointers.length; i++) {\r\n         if (this._activePointers[i] === -1) { return i; }\r\n      }\r\n\r\n      // ignore pointer because game isn't watching\r\n      return -1;\r\n   }\r\n\r\n   private _stringToPointerType(s: string) {\r\n      switch (s) {\r\n         case 'touch':\r\n            return PointerType.Touch;\r\n         case 'mouse':\r\n            return PointerType.Mouse;\r\n         case 'pen':\r\n            return PointerType.Pen;\r\n         default:\r\n            return PointerType.Unknown;\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n * Captures and dispatches PointerEvents\r\n */\r\nexport class Pointer extends Class {\r\n   \r\n   constructor() {\r\n      super();\r\n      \r\n      this.on('move', this._onPointerMove);\r\n   }\r\n\r\n   /**\r\n    * The last position on the document this pointer was at. Can be `null` if pointer was never active.\r\n    */\r\n   lastPagePos: Vector = null;\r\n\r\n   /**\r\n    * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\r\n    */\r\n   lastScreenPos: Vector = null;\r\n\r\n   /**\r\n    * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\r\n    */\r\n   lastWorldPos: Vector = null;   \r\n\r\n   private _onPointerMove(ev: PointerEvent) {\r\n      this.lastWorldPos = new Vector(ev.x, ev.y);\r\n      this.lastPagePos = new Vector(ev.pageX, ev.pageY);\r\n      this.lastScreenPos = new Vector(ev.screenX, ev.screenY);      \r\n   }\r\n}\r\n\r\ninterface ITouchEvent extends Event {\r\n   altKey: boolean;\r\n   changedTouches: ITouch[];\r\n   ctrlKey: boolean;\r\n   metaKey: boolean;\r\n   shiftKey: boolean;\r\n   targetTouches: ITouch[];\r\n   touches: ITouch[];\r\n   type: string;\r\n   target: Element;\r\n}\r\n\r\ninterface ITouch {\r\n   identifier: number;\r\n   screenX: number;\r\n   screenY: number;\r\n   clientX: number;\r\n   clientY: number;\r\n   pageX: number;\r\n   pageY: number;\r\n   radiusX: number;\r\n   radiusY: number;\r\n   rotationAngle: number;\r\n   force: number;\r\n   target: Element;\r\n}","import { Engine } from './../Engine';\r\nimport { Class } from './../Class';\r\nimport { GameEvent } from '../Events';\r\nimport * as Events from '../Events';\r\n    \r\n/**\r\n * Enum representing input key codes \r\n */\r\nexport enum Keys {\r\n   Num1 = 97,\r\n   Num2 = 98,\r\n   Num3 = 99,\r\n   Num4 = 100,\r\n   Num5 = 101,\r\n   Num6 = 102,\r\n   Num7 = 103,\r\n   Num8 = 104,\r\n   Num9 = 105,\r\n   Num0 = 96,\r\n   \r\n   Numlock = 144,\r\n   \r\n   Semicolon = 186,\r\n   \r\n   A = 65,\r\n   B = 66,\r\n   C = 67,\r\n   D = 68,\r\n   E = 69,\r\n   F = 70,\r\n   G = 71,\r\n   H = 72,\r\n   I = 73,\r\n   J = 74,\r\n   K = 75,\r\n   L = 76,\r\n   M = 77,\r\n   N = 78,\r\n   O = 79,\r\n   P = 80,\r\n   Q = 81,\r\n   R = 82,\r\n   S = 83,\r\n   T = 84,\r\n   U = 85,\r\n   V = 86,\r\n   W = 87,\r\n   X = 88,\r\n   Y = 89,\r\n   Z = 90,\r\n   \r\n   Shift = 16,\r\n   Alt = 18,\r\n   Up = 38,\r\n   Down = 40,\r\n   Left = 37,\r\n   Right = 39,\r\n   Space = 32,\r\n   Esc = 27\r\n};\r\n\r\n/**\r\n * Event thrown on a game object for a key event\r\n */\r\nexport class KeyEvent extends GameEvent<any> {\r\n\r\n   /**\r\n    * @param key  The key responsible for throwing the event\r\n    */\r\n   constructor(public key: Keys) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Provides keyboard support for Excalibur.\r\n *\r\n * [[include:Keyboard.md]]\r\n */\r\nexport class Keyboard extends Class {\r\n\r\n   private _keys: number[] = [];\r\n   private _keysUp: number[] = [];\r\n   private _keysDown: number[] = [];\r\n   private _engine: Engine;\r\n\r\n   constructor(engine: Engine) {\r\n      super();\r\n\r\n      this._engine = engine;\r\n   }\r\n\r\n   public on(eventName: Events.press, handler: (event?: KeyEvent) => void): void;\r\n   public on(eventName: Events.release, handler: (event?: KeyEvent) => void): void;\r\n   public on(eventName: Events.hold, handler: (event?: KeyEvent) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void {\r\n      super.on(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * Initialize Keyboard event listeners\r\n    */\r\n   init(global?: any): void {\r\n      global = global || window;\r\n      global.addEventListener('blur', () => {\r\n         this._keys.length = 0; // empties array efficiently\r\n      });\r\n\r\n      // key up is on window because canvas cannot have focus\r\n      global.addEventListener('keyup', (ev: KeyboardEvent) => {\r\n         var key = this._keys.indexOf(ev.keyCode);\r\n         this._keys.splice(key, 1);\r\n         this._keysUp.push(ev.keyCode);\r\n         var keyEvent = new KeyEvent(ev.keyCode);\r\n         \r\n         // alias the old api, we may want to deprecate this in the future\r\n         this.eventDispatcher.emit('up', keyEvent);\r\n         this.eventDispatcher.emit('release', keyEvent);            \r\n      });\r\n\r\n      // key down is on window because canvas cannot have focus\r\n      global.addEventListener('keydown', (ev: KeyboardEvent) => {\r\n         if (this._keys.indexOf(ev.keyCode) === -1) {\r\n            this._keys.push(ev.keyCode);\r\n            this._keysDown.push(ev.keyCode);\r\n            var keyEvent = new KeyEvent(ev.keyCode);\r\n            this.eventDispatcher.emit('down', keyEvent);\r\n            this.eventDispatcher.emit('press', keyEvent);                 \r\n         }\r\n      });\r\n   }\r\n\r\n   public update() {\r\n      // Reset keysDown and keysUp after update is complete\r\n      this._keysDown.length = 0;\r\n      this._keysUp.length = 0;\r\n      \r\n      // Emit synthetic \"hold\" event\r\n      for (var i = 0; i < this._keys.length; i++) {\r\n         this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\r\n      }\r\n   }      \r\n\r\n   /**\r\n    * Gets list of keys being pressed down\r\n    */\r\n   public getKeys(): Keys[] {\r\n      return this._keys;\r\n   }\r\n\r\n   /**\r\n    * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\r\n    * @param key Test whether a key was just pressed\r\n    */\r\n   public wasPressed(key: Keys): boolean {\r\n      return this._keysDown.indexOf(key) > -1;\r\n   }\r\n\r\n   /**\r\n    * Tests if a certain key is held down. This is persisted between frames.\r\n    * @param key  Test whether a key is held down\r\n    */\r\n   public isHeld(key: Keys): boolean {\r\n      return this._keys.indexOf(key) > -1;\r\n   }\r\n\r\n   /**\r\n    * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\r\n    * @param key  Test whether a key was just released\r\n    */\r\n   public wasReleased(key: Keys): boolean {\r\n      return this._keysUp.indexOf(key) > -1;\r\n   }\r\n}","/**\t\t\r\n * Provides support for mice, keyboards, and controllers.\t\t\r\n * \t\t\r\n * [[include:Input.md]]\t\t\r\n */\r\n\r\n/**\r\n * @typedoc\r\n */\r\nexport * from './Gamepad';\r\nexport * from './Pointer';\r\nexport * from './Keyboard';\r\nexport * from './IEngineInput';","export * from './Util';\r\nimport * as drawUtil from './DrawUtil';\r\n\r\nexport { drawUtil as DrawUtil };","import { Logger } from './Log';\r\n/**\r\n * This is the list of features that will be used to log the supported\r\n * features to the console when Detector.logBrowserFeatures() is called.\r\n */\r\n\r\nconst REPORTED_FEATURES: { [key: string]: string } = {\r\n   webgl: 'WebGL',\r\n   webaudio: 'WebAudio',\r\n   gamepadapi: 'Gamepad API'\r\n};\r\n\r\n/**\r\n * Interface for detected browser features matrix\r\n */\r\nexport interface IDetectedFeatures {\r\n   readonly canvas: boolean;\r\n   readonly arraybuffer: boolean;\r\n   readonly dataurl: boolean;\r\n   readonly objecturl: boolean;\r\n   readonly rgba: boolean;\r\n   readonly webaudio: boolean;\r\n   readonly webgl: boolean;\r\n   readonly gamepadapi: boolean;\r\n}\r\n\r\ninterface ICriticalTests {\r\n   canvasSupport(): boolean;\r\n   arrayBufferSupport(): boolean;\r\n   dataUrlSupport(): boolean;\r\n   objectUrlSupport(): boolean;\r\n   rgbaSupport(): boolean;   \r\n}\r\n\r\ninterface IWarningTests {\r\n   webAudioSupport(): boolean;\r\n   webglSupport(): boolean;\r\n}\r\n\r\n/**\r\n * Excalibur internal feature detection helper class\r\n */\r\nexport class Detector {\r\n\r\n   private _features: IDetectedFeatures = null;\r\n\r\n   public failedTests: string[] = [];\r\n\r\n   public constructor() {\r\n      this._features = this._loadBrowserFeatures();\r\n   }\r\n\r\n   /**\r\n    * Returns a map of currently supported browser features. This method\r\n    * treats the features as a singleton and will only calculate feature\r\n    * support if it has not previously been done.\r\n    */\r\n   public getBrowserFeatures(): IDetectedFeatures {\r\n      if (this._features === null) {\r\n         this._features = this._loadBrowserFeatures();\r\n      }\r\n      return this._features;\r\n   }\r\n   \r\n   /**\r\n    * Report on non-critical browser support for debugging purposes.\r\n    * Use native browser console colors for visibility.\r\n    */\r\n   public logBrowserFeatures(): void {\r\n      let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\r\n      let args = [\r\n         'font-weight: bold; color: navy',\r\n         'font-weight: normal; color: inherit'\r\n      ];\r\n\r\n      let supported: any = this.getBrowserFeatures();\r\n      for (let feature of Object.keys(REPORTED_FEATURES)) {\r\n         if (supported[feature]) {\r\n            msg += '(%c\\u2713%c)'; // (✓)\r\n            args.push('font-weight: bold; color: green');\r\n            args.push('font-weight: normal; color: inherit');\r\n         } else {\r\n            msg += '(%c\\u2717%c)'; // (✗)\r\n            args.push('font-weight: bold; color: red');\r\n            args.push('font-weight: normal; color: inherit'); \r\n         };\r\n\r\n         msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\r\n      }         \r\n\r\n      args.unshift(msg);\r\n      console.log.apply(console, args);\r\n   }\r\n\r\n   /**\r\n    * Executes several IIFE's to get a constant reference to supported\r\n    * features within the current execution context.\r\n    */\r\n   private _loadBrowserFeatures(): IDetectedFeatures {\r\n      return {\r\n         // IIFE to check canvas support\r\n         canvas: (() => {\r\n            return this._criticalTests.canvasSupport();\r\n         })(),\r\n\r\n         // IIFE to check arraybuffer support\r\n         arraybuffer: (() => {\r\n            return this._criticalTests.arrayBufferSupport();\r\n         })(),\r\n\r\n         // IIFE to check dataurl support\r\n         dataurl: (() => {\r\n            return this._criticalTests.dataUrlSupport();\r\n         })(),\r\n\r\n         // IIFE to check objecturl support\r\n         objecturl: (() => {\r\n            return this._criticalTests.objectUrlSupport();\r\n         })(),\r\n\r\n         // IIFE to check rgba support\r\n         rgba: (() => {\r\n            return this._criticalTests.rgbaSupport();\r\n         })(),\r\n\r\n         // IIFE to check webaudio support\r\n         webaudio: (() => {\r\n            return this._warningTest.webAudioSupport();\r\n         })(),\r\n\r\n         // IIFE to check webgl support\r\n         webgl: (() => {\r\n            return this._warningTest.webglSupport();\r\n         })(),\r\n\r\n         // IIFE to check gamepadapi support\r\n         gamepadapi: (() => {\r\n            return !!(<any>navigator).getGamepads;\r\n         })()\r\n      };\r\n   }\r\n\r\n   // critical browser features required for ex to run\r\n   private _criticalTests: ICriticalTests = {\r\n      // Test canvas/2d context support\r\n      canvasSupport: function() {\r\n         var elem = document.createElement('canvas');\r\n         return !!(elem.getContext && elem.getContext('2d'));\r\n      },\r\n      \r\n      // Test array buffer support ex uses for downloading binary data\r\n      arrayBufferSupport: function() {\r\n         var xhr = new XMLHttpRequest();\r\n         xhr.open('GET', '/');\r\n         try {\r\n            xhr.responseType = 'arraybuffer';\r\n         } catch (e) {\r\n            return false;\r\n         }\r\n         return xhr.responseType === 'arraybuffer';\r\n      },\r\n      \r\n      // Test data urls ex uses for sprites\r\n      dataUrlSupport: function() {\r\n         var canvas = document.createElement('canvas');\r\n         return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\r\n      },\r\n      \r\n      // Test object url support for loading\r\n      objectUrlSupport: function() {\r\n         return ('URL' in window) && ('revokeObjectURL' in URL) && ('createObjectURL' in URL);\r\n      },\r\n      \r\n      // RGBA support for colors\r\n      rgbaSupport: function() {\r\n         var style = document.createElement('a').style;\r\n         style.cssText = 'background-color:rgba(150,255,150,.5)';\r\n         return ('' + style.backgroundColor).indexOf('rgba') > -1;\r\n      }\r\n   };\r\n   \r\n   // warnings excalibur performance will be degraded\r\n   private _warningTest: IWarningTests = {\r\n      webAudioSupport: function() {\r\n         return !!((<any>window).AudioContext || \r\n                  (<any>window).webkitAudioContext || \r\n                  (<any>window).mozAudioContext || \r\n                  (<any>window).msAudioContext || \r\n                  (<any>window).oAudioContext);\r\n      },\r\n      webglSupport: function() {\r\n         var elem = document.createElement('canvas');\r\n         return !!(elem.getContext && elem.getContext('webgl'));\r\n      }\r\n   };\r\n\r\n   public test(): boolean {\t\t\t\r\n      // Critical test will for ex not to run\r\n      var failedCritical = false;\r\n      for (var test in this._criticalTests) {\r\n         if (!this._criticalTests[<keyof ICriticalTests>test].call(this)) {\r\n            this.failedTests.push(test);\r\n            Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', \r\n               test);\r\n            failedCritical = true;\r\n         }\r\n      }\r\n      if (failedCritical) {\r\n         return false;\r\n      }\r\n      \r\n      // Warning tests do not for ex to return false to compatibility\r\n      for (var warning in this._warningTest) {\r\n         if (!this._warningTest[<keyof IWarningTests>warning]()) {\r\n            Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', \r\n               warning);\r\n         }\r\n      }\r\n      \r\n      return true;\r\n   }\r\n   \r\n}","/**\r\n * A sorted list implementation. NOTE: this implementation is not self-balancing\r\n */\r\nexport class SortedList<T> {\r\n\r\n   private _getComparable: Function;\r\n   private _root: BinaryTreeNode;\r\n\r\n   constructor(getComparable: () => any) {\r\n      this._getComparable = getComparable;\r\n   }\r\n\r\n   public find(element: any): boolean {\r\n      return this._find(this._root, element);\r\n   }\r\n\r\n   private _find(node: BinaryTreeNode, element: any): boolean {\r\n      if (node == null) {\r\n         return false;\r\n      } else if (this._getComparable.call(element) === node.getKey()) {\r\n         if (node.getData().indexOf(element) > -1) {\r\n            return true;\r\n         } else {\r\n            return false;\r\n         }\r\n      } else if (this._getComparable.call(element) < node.getKey()) {\r\n         return this._find(node.getLeft(), element);\r\n      } else {\r\n         return this._find(node.getRight(), element);\r\n      }\r\n   }\r\n\r\n   // returns the array of elements at a specific key value\r\n   public get(key: number): any[] {\r\n      return this._get(this._root, key);\r\n   }\r\n\r\n   private _get(node: BinaryTreeNode, key: number): any[] {\r\n      if (node == null) {\r\n         return [];\r\n      } else if (key === node.getKey()) {\r\n         return node.getData();\r\n      } else if (key < node.getKey()) {\r\n         return this._get(node.getLeft(), key);\r\n      } else {\r\n         return this._get(node.getRight(), key);\r\n      }\r\n   }\r\n\r\n   public add(element: any): boolean {\r\n      if (this._root == null) {\r\n         this._root = new BinaryTreeNode(this._getComparable.call(element), [element], null, null);\r\n         return true;\r\n      } else {\r\n         return this._insert(this._root, element);\r\n      }\r\n   }\r\n\r\n   private _insert(node: BinaryTreeNode, element: any): boolean {\r\n      if (node != null) {\r\n         if (this._getComparable.call(element) === node.getKey()) {\r\n            if (node.getData().indexOf(element) > -1) {\r\n               return false; // the element we're trying to insert already exists\r\n            } else {\r\n               node.getData().push(element);\r\n               return true;\r\n            }\r\n         } else if (this._getComparable.call(element) < node.getKey()) {\r\n            if (node.getLeft() == null) {\r\n               node.setLeft(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\r\n               return true;\r\n            } else {\r\n               return this._insert(node.getLeft(), element);\r\n            }\r\n         } else {\r\n            if (node.getRight() == null) {\r\n               node.setRight(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\r\n               return true;\r\n            } else {\r\n               return this._insert(node.getRight(), element);\r\n            }\r\n         }\r\n      }\r\n      return false;\r\n   }\r\n\r\n   public removeByComparable(element: any): void {\r\n      this._root = this._remove(this._root, element);\r\n   }\r\n\r\n   private _remove(node: BinaryTreeNode, element: any): BinaryTreeNode {\r\n      if (node == null) {\r\n         return null;\r\n      } else if (this._getComparable.call(element) === node.getKey()) {\r\n         var elementIndex = node.getData().indexOf(element);\r\n         // if the node contains the element, remove the element\r\n         if (elementIndex > -1) {\r\n            node.getData().splice(elementIndex, 1);\r\n            // if we have removed the last element at this node, remove the node\r\n            if (node.getData().length === 0) {\r\n               // if the node is a leaf\r\n               if (node.getLeft() == null && node.getRight() == null) {\r\n                  return null;\r\n               } else if (node.getLeft() == null) {\r\n                  return node.getRight();\r\n               } else if (node.getRight() == null) {\r\n                  return node.getLeft();\r\n               }\r\n               // if node has 2 children\r\n               var temp = this._findMinNode(node.getRight());\r\n               node.setKey(temp.getKey());\r\n               node.setData(temp.getData());\r\n               node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\r\n               return node;\r\n\r\n            } else {\r\n               // this prevents the node from being removed since it still contains elements\r\n               return node;\r\n            }\r\n         }\r\n      } else if (this._getComparable.call(element) < node.getKey()) {\r\n         node.setLeft(this._remove(node.getLeft(), element));\r\n         return node;\r\n      } else {\r\n         node.setRight(this._remove(node.getRight(), element));\r\n         return node;\r\n      }\r\n      return null;\r\n   }\r\n\r\n   // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\r\n   private _cleanup(node: BinaryTreeNode, element: BinaryTreeNode): BinaryTreeNode {\r\n      var comparable = element.getKey();\r\n      if (node == null) {\r\n         return null;\r\n      } else if (comparable === node.getKey()) {\r\n         // if the node is a leaf\r\n         if (node.getLeft() == null && node.getRight() == null) {\r\n            return null;\r\n         } else if (node.getLeft() == null) {\r\n            return node.getRight();\r\n         } else if (node.getRight() == null) {\r\n            return node.getLeft();\r\n         }\r\n         // if node has 2 children\r\n         var temp = this._findMinNode(node.getRight());\r\n         node.setKey(temp.getKey());\r\n         node.setData(temp.getData());\r\n\r\n         node.setRight(this._cleanup(node.getRight(), temp));\r\n         return node;\r\n      } else if (this._getComparable.call(element) < node.getKey()) {\r\n         node.setLeft(this._cleanup(node.getLeft(), element));\r\n         return node;\r\n      } else {\r\n         node.setRight(this._cleanup(node.getRight(), element));\r\n         return node;\r\n      }\r\n   }\r\n\r\n   private _findMinNode(node: BinaryTreeNode): BinaryTreeNode {\r\n      var current = node;\r\n      while (current.getLeft() != null) {\r\n         current = current.getLeft();\r\n      }\r\n      return current;\r\n   }\r\n\r\n   public list(): Array<T> {\r\n      var results = new Array<any>();\r\n      this._list(this._root, results);\r\n      return results;\r\n   }\r\n\r\n   private _list(treeNode: BinaryTreeNode, results: Array<T>): void {\r\n      if (treeNode != null) {\r\n         this._list(treeNode.getLeft(), results);\r\n         treeNode.getData().forEach(function (element) {\r\n            results.push(element);\r\n         });\r\n         this._list(treeNode.getRight(), results);\r\n      }\r\n   }\r\n\r\n}\r\n\r\n/**\r\n * A tree node part of [[SortedList]]\r\n */\r\nexport class BinaryTreeNode {\r\n   private _key: number;\r\n   private _data: Array<any>;\r\n   private _left: BinaryTreeNode;\r\n   private _right: BinaryTreeNode;\r\n\r\n   constructor(key: number, data: Array<any>, left: BinaryTreeNode, right: BinaryTreeNode) {\r\n      this._key = key;\r\n      this._data = data;\r\n      this._left = left;\r\n      this._right = right;\r\n   }\r\n\r\n   public getKey(): number {\r\n      return this._key;\r\n   }\r\n\r\n   public setKey(key: number) {\r\n      this._key = key;\r\n   }\r\n\r\n   public getData(): Array<any> {\r\n      return this._data;\r\n   }\r\n\r\n   public setData(data: any) {\r\n      this._data = data;\r\n   }\r\n\r\n   public getLeft(): BinaryTreeNode {\r\n      return this._left;\r\n   }\r\n\r\n   public setLeft(left: BinaryTreeNode) {\r\n      this._left = left;\r\n   }\r\n\r\n   public getRight(): BinaryTreeNode {\r\n      return this._right;\r\n   }\r\n\r\n   public setRight(right: BinaryTreeNode) {\r\n      this._right = right;\r\n   }\r\n}\r\n\r\n/**\r\n * Mock element for testing\r\n * \r\n * @internal\r\n */\r\nexport class MockedElement {\r\n   private _key: number = 0;\r\n\r\n   constructor(key: number) {\r\n      this._key = key;\r\n   }\r\n\r\n   public getTheKey() {\r\n      return this._key;\r\n   }\r\n\r\n   public setKey(key: number) {\r\n      this._key = key;\r\n   }\r\n}","/**\r\n * The current Excalibur version string\r\n */\r\nexport var EX_VERSION = '__EX_VERSION';\r\n\r\n// This file is used as the bundle entrypoint and exports everything\r\n// that will be exposed as the `ex` global variable.\r\n\r\nexport * from './Actor';\r\nexport * from './Algebra';\r\nexport * from './Camera';\r\nexport * from './Class';\r\nexport * from './Debug';\r\nexport * from './Engine';\r\nexport * from './EventDispatcher';\r\nexport * from './Events';\r\nexport * from './Group';\r\nexport * from './Label';\r\nexport * from './Loader';\r\nexport * from './Particles';\r\nexport * from './Physics';\r\nexport * from './Promises';\r\nexport * from './Scene';\r\nexport * from './TileMap';\r\nexport * from './Timer';\r\nexport * from './Trigger';\r\nexport * from './UIActor';\r\n\r\nexport * from './Actions/Index';\r\nexport * from './Collision/Index';\r\nexport * from './Drawing/Index';\r\nexport * from './Interfaces/Index';\r\nexport * from './Math/Index';\r\nexport * from './PostProcessing/Index';\r\nexport * from './Resources/Index';\r\n\r\n// ex.Events namespace\r\nimport * as events from './Events';\r\nexport { events as Events }\r\n\r\n// ex.Input namespace\r\nimport * as input from './Input/Index';\r\nexport { input as Input }\r\n\r\n// ex.Traits namespace\r\nimport * as traits from './Traits/Index';\r\nexport { traits as Traits }\r\n\r\n// ex.Util namespaces\r\nimport * as util from './Util/Index';\r\nexport { util as Util }\r\n\r\nexport * from './Util/Decorators';\r\nexport * from './Util/Detector';\r\nexport * from './Util/CullingBox';\r\nexport * from './Util/EasingFunctions';\r\nexport * from './Util/Log';\r\nexport * from './Util/SortedList';","import { EX_VERSION } from './Index';\r\nimport { ILoadable } from './Interfaces/ILoadable';\r\nimport { Promise } from './Promises';\r\nimport { Vector } from './Algebra';\r\nimport { UIActor } from './UIActor';\r\nimport { Actor } from './Actor';\r\nimport { Timer } from './Timer';\r\nimport { TileMap } from './TileMap';\r\nimport { Animation } from './Drawing/Animation';\r\nimport { Loader } from './Loader';\r\nimport { Detector } from './Util/Detector';\r\nimport { VisibleEvent, HiddenEvent, GameStartEvent, GameStopEvent, PreUpdateEvent, \r\n   PostUpdateEvent, PreFrameEvent, PostFrameEvent, GameEvent, DeactivateEvent, ActivateEvent, PreDrawEvent, PostDrawEvent } from './Events';\r\nimport { ILoader } from './Interfaces/ILoader';\r\nimport { Logger, LogLevel } from './Util/Log';\r\nimport { Color } from './Drawing/Color';\r\nimport { Scene } from './Scene';\r\nimport { IPostProcessor } from './PostProcessing/IPostProcessor';\r\nimport { Debug, IDebugStats } from './Debug';\r\nimport { Class } from './Class';\r\nimport * as Input from './Input/Index';\r\nimport { obsolete } from './Util/Decorators';\r\nimport * as Util from './Util/Util';\r\nimport * as Events from './Events';\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\n\r\n/**\r\n * Enum representing the different display modes available to Excalibur\r\n */\r\nexport enum DisplayMode {\r\n   /** \r\n    * Show the game as full screen \r\n    */\r\n   FullScreen,\r\n   /** \r\n    * Scale the game to the parent DOM container \r\n    */\r\n   Container,\r\n   /** \r\n    * Show the game as a fixed size \r\n    */\r\n   Fixed\r\n}\r\n\r\n/**\r\n * Defines the available options to configure the Excalibur engine at constructor time.\r\n */\r\nexport interface IEngineOptions {\r\n   /**\r\n    * Optionally configure the native canvas width of the game\r\n    */\r\n   width?: number;\r\n\r\n   /**\r\n    * Optionally configure the native canvas height of the game\r\n    */\r\n   height?: number;\r\n\r\n   /**\r\n    * Optionally specify the target canvas DOM element to render the game in\r\n    */\r\n   canvasElementId?: string;\r\n\r\n   /**\r\n    * The [[DisplayMode]] of the game. Depending on this value, [[width]] and [[height]] may be ignored.\r\n    */\r\n   displayMode?: DisplayMode;\r\n\r\n   /**\r\n    * Configures the pointer scope. Pointers scoped to the 'Canvas' can only fire events within the canvas viewport; whereas, 'Document'\r\n    * (default) scoped will fire anywhere on the page.\r\n    */\r\n   pointerScope?: Input.PointerScope;\r\n\r\n   /**\r\n    * Suppress boot up console message, which contains the \"powered by Excalibur message\"\r\n    */\r\n   suppressConsoleBootMessage?: boolean;\r\n\r\n   /**\r\n    * Suppress minimum browser feature detection, it is not recommended users of excalibur switch this off. This feature ensures that \r\n    * the currently running browser meets the minimum requirements for running excalibur. This can be useful if running on non-standard\r\n    * browsers or if there is a bug in excalibur preventing execution.\r\n    */\r\n   suppressMinimumBrowserFeatureDetection?: boolean;\r\n}\r\n\r\n/**\r\n * The Excalibur Engine\r\n *\r\n * The [[Engine]] is the main driver for a game. It is responsible for \r\n * starting/stopping the game, maintaining state, transmitting events, \r\n * loading resources, and managing the scene.\r\n *\r\n * [[include:Engine.md]]\r\n */\r\nexport class Engine extends Class {\r\n\r\n   /**\r\n    * Direct access to the engine's canvas element\r\n    */\r\n   public canvas: HTMLCanvasElement;\r\n\r\n   /**\r\n    * Direct access to the engine's 2D rendering context\r\n    */\r\n   public ctx: CanvasRenderingContext2D;\r\n\r\n   /**\r\n    * Direct access to the canvas element ID, if an ID exists\r\n    */\r\n   public canvasElementId: string;\r\n\r\n   /**\r\n    * The width of the game canvas in pixels\r\n    */\r\n   public canvasWidth: number;\r\n   /**\r\n    * The height of the game canvas in pixels\r\n    */\r\n   public canvasHeight: number;\r\n\r\n   /**\r\n    * Access engine input like pointer, keyboard, or gamepad\r\n    */\r\n   public input: Input.IEngineInput;\r\n\r\n\r\n   private _hasStarted: boolean = false;\r\n\r\n   /**\r\n    * Current FPS\r\n    * @obsolete Use [[FrameStats.fps|Engine.stats.fps]]. Will be deprecated in future versions.\r\n    */\r\n   @obsolete({ alternateMethod: 'ex.Engine.stats.currFrame.fps' })\r\n   public get fps(): number {\r\n      return this.stats.currFrame.fps;\r\n   }\r\n\r\n   /**\r\n    * Access Excalibur debugging functionality.\r\n    */\r\n   public debug = new Debug();\r\n\r\n   /**\r\n    * Access [[stats]] that holds frame statistics.\r\n    */\r\n   public get stats(): IDebugStats {\r\n      return this.debug.stats;\r\n   }\r\n\r\n   /**\r\n    * Gets or sets the list of post processors to apply at the end of drawing a frame (such as [[ColorBlindCorrector]])\r\n    */\r\n   public postProcessors: IPostProcessor[] = [];\r\n\r\n   /**\r\n    * The current [[Scene]] being drawn and updated on screen\r\n    */\r\n   public currentScene: Scene;\r\n\r\n   /**\r\n    * The default [[Scene]] of the game, use [[Engine.goToScene]] to transition to different scenes.\r\n    */\r\n   public rootScene: Scene;\r\n\r\n   /**\r\n    * Contains all the scenes currently registered with Excalibur\r\n    */\r\n   public scenes: { [key: string]: Scene; } = {};\r\n\r\n   private _animations: AnimationNode[] = [];\r\n\r\n   /**\r\n    * Indicates whether the engine is set to fullscreen or not\r\n    */\r\n   public isFullscreen: boolean = false;\r\n\r\n   /**\r\n    * Indicates the current [[DisplayMode]] of the engine.\r\n    */\r\n   public displayMode: DisplayMode = DisplayMode.FullScreen;\r\n\r\n   /**\r\n    * Indicates whether audio should be paused when the game is no longer visible.\r\n    */\r\n   public pauseAudioWhenHidden: boolean = true;\r\n\r\n   /**\r\n    * Indicates whether the engine should draw with debug information\r\n    */\r\n   public isDebug: boolean = false;\r\n   public debugColor: Color = new Color(255, 255, 255);\r\n   /**\r\n    * Sets the background color for the engine.\r\n    */\r\n   public backgroundColor: Color = new Color(0, 0, 100);\r\n\r\n   /**\r\n    * The action to take when a fatal exception is thrown\r\n    */\r\n   public onFatalException = (e: any) => { Logger.getInstance().fatal(e); };\r\n\r\n   private _logger: Logger;\r\n   private _isSmoothingEnabled: boolean = true;\r\n\r\n   // this is a reference to the current requestAnimationFrame return value\r\n   private _requestId: number;\r\n\r\n   // this determines whether excalibur is compatible with your browser\r\n   private _compatible: boolean;\r\n\r\n   private _timescale: number = 1.0;\r\n\r\n   // loading\r\n   private _loader: ILoader;\r\n   private _isLoading: boolean = false;\r\n\r\n   public on(eventName: Events.visible, handler: (event?: VisibleEvent) => void): void;\r\n   public on(eventName: Events.hidden, handler: (event?: HiddenEvent) => void): void;\r\n   public on(eventName: Events.start, handler: (event?: GameStartEvent) => void): void;\r\n   public on(eventName: Events.stop, handler: (event?: GameStopEvent) => void): void;\r\n   public on(eventName: Events.preupdate, handler: (event?: PreUpdateEvent) => void): void;\r\n   public on(eventName: Events.postupdate, handler: (event?: PostUpdateEvent) => void): void;\r\n   public on(eventName: Events.preframe, handler: (event?: PreFrameEvent) => void): void;\r\n   public on(eventName: Events.postframe, handler: (event?: PostFrameEvent) => void): void;   \r\n   public on(eventName: Events.predraw, handler: (event?: PreDrawEvent) => void): void;\r\n   public on(eventName: Events.postdraw, handler: (event?: PostDrawEvent) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void {\r\n      super.on(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * Default [[IEngineOptions]]\r\n    */\r\n   private static _DefaultEngineOptions: IEngineOptions = {\r\n      width: 0,\r\n      height: 0,\r\n      canvasElementId: '',\r\n      pointerScope: Input.PointerScope.Document,\r\n      suppressConsoleBootMessage: null,\r\n      suppressMinimumBrowserFeatureDetection: null\r\n   };\r\n\r\n   /**\r\n    * Creates a new game using the given [[IEngineOptions]]. By default, if no options are provided,\r\n    * the game will be rendered full screen (taking up all available browser window space).\r\n    * You can customize the game rendering through [[IEngineOptions]].\r\n    * \r\n    * Example:\r\n    * \r\n    * ```js\r\n    * var game = new ex.Engine({ \r\n    *   width: 0, // the width of the canvas\r\n    *   height: 0, // the height of the canvas\r\n    *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\r\n    *   displayMode: ex.DisplayMode.FullScreen, // the display mode\r\n    *   pointerScope: ex.Input.PointerScope.Document // the scope of capturing pointer (mouse/touch) events\r\n    * });\r\n    *\r\n    * // call game.start, which is a Promise\r\n    * game.start().then(function () {\r\n    *   // ready, set, go!\r\n    * });\r\n    * ```\r\n    */\r\n   constructor(options?: IEngineOptions) {\r\n      super();\r\n\r\n      options = Util.extend({}, Engine._DefaultEngineOptions, options);\r\n\r\n      // Check compatibility \r\n      var detector = new Detector();\r\n      if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\r\n         var message = document.createElement('div');\r\n         message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\r\n         document.body.appendChild(message);\r\n\r\n         detector.failedTests.forEach(function (test) {\r\n            var testMessage = document.createElement('div');\r\n            testMessage.innerText = 'Browser feature missing ' + test;\r\n            document.body.appendChild(testMessage);\r\n         });\r\n\r\n         if (options.canvasElementId) {\r\n            var canvas = document.getElementById(options.canvasElementId);\r\n            if (canvas) {\r\n               canvas.parentElement.removeChild(canvas);\r\n            }\r\n         }\r\n\r\n         return;\r\n      } else {\r\n         this._compatible = true;\r\n      }\r\n\r\n      // Use native console API for color fun\r\n      if (console.log && !options.suppressConsoleBootMessage) {\r\n         console.log(`%cPowered by Excalibur.js (v${EX_VERSION})`,\r\n            'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\r\n         console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\r\n         console.log('Visit', 'http://excaliburjs.com', 'for more information');\r\n      }\r\n\r\n      this._logger = Logger.getInstance();\r\n\r\n      // If debug is enabled, let's log browser features to the console.\r\n      if (this._logger.defaultLevel === LogLevel.Debug) {\r\n         detector.logBrowserFeatures();\r\n      }\r\n\r\n      this._logger.debug('Building engine...');\r\n\r\n      this.canvasElementId = options.canvasElementId;\r\n\r\n      if (options.canvasElementId) {\r\n         this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\r\n         this.canvas = <HTMLCanvasElement>document.getElementById(options.canvasElementId);\r\n      } else {\r\n         this._logger.debug('Using generated canvas element');\r\n         this.canvas = <HTMLCanvasElement>document.createElement('canvas');\r\n      }\r\n      if (options.width && options.height) {\r\n         if (options.displayMode === undefined) {\r\n            this.displayMode = DisplayMode.Fixed;\r\n         }\r\n         this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\r\n         this.canvasWidth = options.width;\r\n         this.canvas.width = options.width;\r\n         this.canvasHeight = options.height;\r\n         this.canvas.height = options.height;\r\n\r\n      } else if (!options.displayMode) {\r\n         this._logger.debug('Engine viewport is fullscreen');\r\n         this.displayMode = DisplayMode.FullScreen;\r\n      }\r\n\r\n\r\n      this._loader = new Loader();\r\n\r\n      this._initialize(options);\r\n\r\n      this.rootScene = this.currentScene = new Scene(this);\r\n\r\n      this.addScene('root', this.rootScene);\r\n      this.goToScene('root');\r\n   }\r\n\r\n   /**\r\n    * Returns a BoundingBox of the top left corner of the screen\r\n    * and the bottom right corner of the screen.\r\n    */\r\n   public getWorldBounds() {\r\n      var left = this.screenToWorldCoordinates(Vector.Zero).x;\r\n      var top = this.screenToWorldCoordinates(Vector.Zero).y;\r\n      var right = left + this.getDrawWidth();\r\n      var bottom = top + this.getDrawHeight();\r\n\r\n      return new BoundingBox(left, top, right, bottom);\r\n   }\r\n\r\n\r\n   /**\r\n    * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\r\n    */\r\n   public get timescale() {\r\n      return this._timescale;\r\n   }\r\n\r\n   /**\r\n    * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\r\n    * when using time-based movement.\r\n    */\r\n   public set timescale(value: number) {\r\n      if (value <= 0) {\r\n         Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\r\n         return;\r\n      }\r\n\r\n      this._timescale = value;\r\n   }\r\n\r\n   /**\r\n    * Plays a sprite animation on the screen at the specified `x` and `y`\r\n    * (in game coordinates, not screen pixels). These animations play\r\n    * independent of actors, and will be cleaned up internally as soon\r\n    * as they are complete. Note animations that loop will never be\r\n    * cleaned up.\r\n    *\r\n    * @param animation  Animation to play\r\n    * @param x          x game coordinate to play the animation\r\n    * @param y          y game coordinate to play the animation\r\n    */\r\n   public playAnimation(animation: Animation, x: number, y: number) {\r\n      this._animations.push(new AnimationNode(animation, x, y));\r\n   }\r\n\r\n   /**\r\n    * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap \r\n    * will be drawn and updated.\r\n    */\r\n   public addTileMap(tileMap: TileMap) {\r\n      this.currentScene.addTileMap(tileMap);\r\n   }\r\n\r\n   /**\r\n    * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\r\n    */\r\n   public removeTileMap(tileMap: TileMap) {\r\n      this.currentScene.removeTileMap(tileMap);\r\n   }\r\n\r\n   /**\r\n    * Adds a [[Timer]] to the [[currentScene]].\r\n    * @param timer  The timer to add to the [[currentScene]].\r\n    */\r\n   public addTimer(timer: Timer): Timer {\r\n      return this.currentScene.addTimer(timer);\r\n   }\r\n\r\n   /**\r\n    * Removes a [[Timer]] from the [[currentScene]].\r\n    * @param timer  The timer to remove to the [[currentScene]].       \r\n    */\r\n   public removeTimer(timer: Timer): Timer {\r\n      return this.currentScene.removeTimer(timer);\r\n   }\r\n\r\n   /**\r\n    * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\r\n    * would levels or menus.\r\n    *\r\n    * @param key  The name of the scene, must be unique\r\n    * @param scene The scene to add to the engine       \r\n    */\r\n   public addScene(key: string, scene: Scene) {\r\n      if (this.scenes[key]) {\r\n         this._logger.warn('Scene', key, 'already exists overwriting');\r\n      }\r\n      this.scenes[key] = scene;\r\n      scene.engine = this;\r\n   }\r\n\r\n   /**\r\n    * Removes a [[Scene]] instance from the engine\r\n    * @param scene  The scene to remove\r\n    */\r\n   public removeScene(scene: Scene): void;\r\n   /**\r\n    * Removes a scene from the engine by key\r\n    * @param key  The scene key to remove\r\n    */\r\n   public removeScene(key: string): void;\r\n   /**\r\n    * @internal\r\n    */\r\n   public removeScene(entity: any): void {\r\n      if (entity instanceof Scene) {\r\n         // remove scene\r\n         for (var key in this.scenes) {\r\n            if (this.scenes.hasOwnProperty(key)) {\r\n               if (this.scenes[key] === entity) {\r\n                  delete this.scenes[key];\r\n               }\r\n            }\r\n         }\r\n      }\r\n\r\n      if (typeof entity === 'string') {\r\n         // remove scene\r\n         delete this.scenes[entity];\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\r\n    * would levels or menus.\r\n    * @param sceneKey  The key of the scene, must be unique\r\n    * @param scene     The scene to add to the engine       \r\n    */\r\n   public add(sceneKey: string, scene: Scene): void;\r\n   /**\r\n    * Adds a [[Timer]] to the [[currentScene]].\r\n    * @param timer  The timer to add to the [[currentScene]].\r\n    */\r\n   public add(timer: Timer): void;\r\n   /**\r\n    * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap \r\n    * will be drawn and updated.\r\n    */\r\n   public add(tileMap: TileMap): void;\r\n   /**\r\n    * Adds an actor to the [[currentScene]] of the game. This is synonymous\r\n    * to calling `engine.currentScene.add(actor)`.\r\n    *\r\n    * Actors can only be drawn if they are a member of a scene, and only\r\n    * the [[currentScene]] may be drawn or updated.\r\n    *\r\n    * @param actor  The actor to add to the [[currentScene]]\r\n    */\r\n   public add(actor: Actor): void;\r\n\r\n   /**\r\n    * Adds a [[UIActor]] to the [[currentScene]] of the game, \r\n    * UIActors do not participate in collisions, instead the \r\n    * remain in the same place on the screen.\r\n    * @param uiActor  The UIActor to add to the [[currentScene]]\r\n    */\r\n   public add(uiActor: UIActor): void;\r\n   public add(entity: any): void {\r\n      if (entity instanceof UIActor) {\r\n         this.currentScene.addUIActor(entity);\r\n         return;\r\n      }\r\n      if (entity instanceof Actor) {\r\n         this._addChild(entity);\r\n      }\r\n      if (entity instanceof Timer) {\r\n         this.addTimer(entity);\r\n      }\r\n\r\n      if (entity instanceof TileMap) {\r\n         this.addTileMap(entity);\r\n      }\r\n\r\n      if (arguments.length === 2) {\r\n         this.addScene((<string>arguments[0]), (<Scene>arguments[1]));\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes a scene instance from the engine\r\n    * @param scene  The scene to remove\r\n    */\r\n   public remove(scene: Scene): void;\r\n   /**\r\n    * Removes a scene from the engine by key\r\n    * @param sceneKey  The scene to remove\r\n    */\r\n   public remove(sceneKey: string): void;\r\n   /**\r\n    * Removes a [[Timer]] from the [[currentScene]].\r\n    * @param timer  The timer to remove to the [[currentScene]].       \r\n    */\r\n   public remove(timer: Timer): void;\r\n   /**\r\n    * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\r\n    */\r\n   public remove(tileMap: TileMap): void;\r\n   /**\r\n    * Removes an actor from the [[currentScene]] of the game. This is synonymous\r\n    * to calling `engine.currentScene.removeChild(actor)`.\r\n    * Actors that are removed from a scene will no longer be drawn or updated.\r\n    *\r\n    * @param actor  The actor to remove from the [[currentScene]].      \r\n    */\r\n   public remove(actor: Actor): void;\r\n   /**\r\n    * Removes a [[UIActor]] to the scene, it will no longer be drawn or updated\r\n    * @param uiActor  The UIActor to remove from the [[currentScene]]\r\n    */\r\n   public remove(uiActor: UIActor): void;\r\n   public remove(entity: any): void {\r\n      if (entity instanceof UIActor) {\r\n         this.currentScene.removeUIActor(entity);\r\n         return;\r\n      }\r\n      if (entity instanceof Actor) {\r\n         this._removeChild(entity);\r\n      }\r\n      if (entity instanceof Timer) {\r\n         this.removeTimer(entity);\r\n      }\r\n\r\n      if (entity instanceof TileMap) {\r\n         this.removeTileMap(entity);\r\n      }\r\n\r\n      if (entity instanceof Scene) {\r\n         this.removeScene(entity);\r\n      }\r\n\r\n      if (typeof entity === 'string') {\r\n         this.removeScene(entity);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Adds an actor to the [[currentScene]] of the game. This is synonymous\r\n    * to calling `engine.currentScene.add(actor)`.\r\n    *\r\n    * Actors can only be drawn if they are a member of a scene, and only\r\n    * the [[currentScene]] may be drawn or updated.\r\n    *\r\n    * @param actor  The actor to add to the [[currentScene]]       \r\n    */\r\n   protected _addChild(actor: Actor) {\r\n      this.currentScene.add(actor);\r\n   }\r\n\r\n   /**\r\n    * Removes an actor from the [[currentScene]] of the game. This is synonymous\r\n    * to calling `engine.currentScene.remove(actor)`.\r\n    * Actors that are removed from a scene will no longer be drawn or updated.\r\n    *\r\n    * @param actor  The actor to remove from the [[currentScene]].      \r\n    */\r\n   protected _removeChild(actor: Actor) {\r\n      this.currentScene.remove(actor);\r\n   }\r\n\r\n   /**\r\n    * Changes the currently updating and drawing scene to a different,\r\n    * named scene. Calls the [[Scene]] lifecycle events.\r\n    * @param key  The key of the scene to trasition to.       \r\n    */\r\n   public goToScene(key: string) {\r\n      if (this.scenes[key]) {\r\n         var oldScene = this.currentScene;\r\n         var newScene = this.scenes[key];\r\n\r\n         this._logger.debug('Going to scene:', key);\r\n\r\n         // only deactivate when initialized\r\n         if (this.currentScene.isInitialized) {\r\n            this.currentScene.onDeactivate.call(this.currentScene);\r\n            this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\r\n         }\r\n\r\n         // set current scene to new one\r\n         this.currentScene = newScene;\r\n\r\n         // initialize the current scene if has not been already\r\n         this.currentScene._initialize(this);\r\n\r\n         this.currentScene.onActivate.call(this.currentScene);\r\n         this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\r\n      } else {\r\n         this._logger.error('Scene', key, 'does not exist!');\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns the width of the engine's drawing surface in pixels.\r\n    */\r\n   public getDrawWidth(): number {\r\n      if (this.currentScene && this.currentScene.camera) {\r\n         return this.canvasWidth / this.currentScene.camera.getZoom();\r\n      }\r\n      return this.canvasWidth;\r\n   }\r\n\r\n   /**\r\n    * Returns the height of the engine's drawing surface in pixels.\r\n    */\r\n   public getDrawHeight(): number {\r\n      if (this.currentScene && this.currentScene.camera) {\r\n         return this.canvasHeight / this.currentScene.camera.getZoom();\r\n      }\r\n      return this.canvasHeight;\r\n   }\r\n\r\n   /**\r\n    * Transforms the current x, y from screen coordinates to world coordinates\r\n    * @param point  Screen coordinate to convert\r\n    */\r\n   public screenToWorldCoordinates(point: Vector): Vector {\r\n\r\n      var newX = point.x;\r\n      var newY = point.y;\r\n\r\n      // transform back to world space\r\n      newX = (newX / this.canvas.clientWidth) * this.getDrawWidth();\r\n      newY = (newY / this.canvas.clientHeight) * this.getDrawHeight();\r\n\r\n\r\n      // transform based on zoom\r\n      newX = newX - this.getDrawWidth() / 2;\r\n      newY = newY - this.getDrawHeight() / 2;\r\n\r\n      // shift by focus\r\n      if (this.currentScene && this.currentScene.camera) {\r\n         var focus = this.currentScene.camera.getFocus();\r\n         newX += focus.x;\r\n         newY += focus.y;\r\n      }\r\n\r\n      return new Vector(Math.floor(newX), Math.floor(newY));\r\n   }\r\n\r\n   /**\r\n    * Transforms a world coordinate, to a screen coordinate\r\n    * @param point  World coordinate to convert\r\n    */\r\n   public worldToScreenCoordinates(point: Vector): Vector {\r\n\r\n      var screenX = point.x;\r\n      var screenY = point.y;\r\n\r\n      // shift by focus\r\n      if (this.currentScene && this.currentScene.camera) {\r\n         var focus = this.currentScene.camera.getFocus();\r\n         screenX -= focus.x;\r\n         screenY -= focus.y;\r\n      }\r\n\r\n      // transform back on zoom\r\n      screenX = screenX + this.getDrawWidth() / 2;\r\n      screenY = screenY + this.getDrawHeight() / 2;\r\n\r\n      // transform back to screen space\r\n      screenX = (screenX * this.canvas.clientWidth) / this.getDrawWidth();\r\n      screenY = (screenY * this.canvas.clientHeight) / this.getDrawHeight();\r\n\r\n      return new Vector(Math.floor(screenX), Math.floor(screenY));\r\n   }\r\n\r\n   /**\r\n    * Sets the internal canvas height based on the selected display mode.\r\n    */\r\n   private _setHeightByDisplayMode(parent: HTMLElement | Window) {\r\n      if (this.displayMode === DisplayMode.Container) {\r\n         this.canvasWidth = this.canvas.width = (<HTMLElement>parent).clientWidth;\r\n         this.canvasHeight = this.canvas.height = (<HTMLElement>parent).clientHeight;\r\n      }\r\n\r\n      if (this.displayMode === DisplayMode.FullScreen) {\r\n         document.body.style.margin = '0px';\r\n         document.body.style.overflow = 'hidden';\r\n         this.canvasWidth = this.canvas.width = (<Window>parent).innerWidth;\r\n         this.canvasHeight = this.canvas.height = (<Window>parent).innerHeight;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Initializes the internal canvas, rendering context, displaymode, and native event listeners\r\n    */\r\n   private _initialize(options?: IEngineOptions) {\r\n      if (this.displayMode === DisplayMode.FullScreen || this.displayMode === DisplayMode.Container) {\r\n\r\n\r\n         var parent = <any>(this.displayMode === DisplayMode.Container ?\r\n            <any>(this.canvas.parentElement || document.body) : <any>window);\r\n\r\n         this._setHeightByDisplayMode(parent);\r\n\r\n         window.addEventListener('resize', () => {\r\n            this._logger.debug('View port resized');\r\n            this._setHeightByDisplayMode(parent);\r\n            this._logger.info('parent.clientHeight ' + parent.clientHeight);\r\n            this.setAntialiasing(this._isSmoothingEnabled);\r\n         });\r\n      }\r\n\r\n      // initialize inputs\r\n      this.input = {\r\n         keyboard: new Input.Keyboard(this),\r\n         pointers: new Input.Pointers(this),\r\n         gamepads: new Input.Gamepads(this)\r\n      };\r\n      this.input.keyboard.init();\r\n      this.input.pointers.init(options ? options.pointerScope : Input.PointerScope.Document);\r\n      this.input.gamepads.init();\r\n\r\n      // Issue #385 make use of the visibility api\r\n      // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n\r\n      var hidden: keyof HTMLDocument, visibilityChange: string;\r\n      if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support \r\n         hidden = 'hidden';\r\n         visibilityChange = 'visibilitychange';\r\n      } else if ('msHidden' in document) {\r\n         hidden = <keyof HTMLDocument>'msHidden';\r\n         visibilityChange = 'msvisibilitychange';\r\n      } else if ('webkitHidden' in document) {\r\n         hidden = <keyof HTMLDocument>'webkitHidden';\r\n         visibilityChange = 'webkitvisibilitychange';\r\n      }\r\n\r\n      document.addEventListener(visibilityChange, () => {\r\n         if (document[hidden]) {\r\n            this.eventDispatcher.emit('hidden', new HiddenEvent(this));\r\n            this._logger.debug('Window hidden');\r\n         } else {\r\n            this.eventDispatcher.emit('visible', new VisibleEvent(this));\r\n            this._logger.debug('Window visible');\r\n         }\r\n      });\r\n\r\n      this.ctx = <CanvasRenderingContext2D>this.canvas.getContext('2d');\r\n      if (!this.canvasElementId) {\r\n         document.body.appendChild(this.canvas);\r\n      }\r\n\r\n   }\r\n\r\n   /**\r\n    * If supported by the browser, this will set the antialiasing flag on the\r\n    * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\r\n    * image resources.\r\n    * @param isSmooth  Set smoothing to true or false       \r\n    */\r\n   public setAntialiasing(isSmooth: boolean) {\r\n      this._isSmoothingEnabled = isSmooth;\r\n\r\n      var ctx: any = this.ctx;\r\n      ctx.imageSmoothingEnabled = isSmooth;\r\n      for (var smoothing of ['webkitImageSmoothingEnabled', 'mozImageSmoothingEnabled', 'msImageSmoothingEnabled']) {\r\n         if (smoothing in ctx) {\r\n            ctx[smoothing] = isSmooth;\r\n         }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Return the current smoothing status of the canvas\r\n    */\r\n   public getAntialiasing(): boolean {\r\n      return (<any>this.ctx).imageSmoothingEnabled ||\r\n         (<any>this.ctx).webkitImageSmoothingEnabled ||\r\n         (<any>this.ctx).mozImageSmoothingEnabled ||\r\n         (<any>this.ctx).msImageSmoothingEnabled;\r\n   }\r\n\r\n\r\n   /**\r\n    * Updates the entire state of the game\r\n    * @param delta  Number of milliseconds elapsed since the last update.\r\n    */\r\n   private _update(delta: number) {\r\n      if (this._isLoading) {\r\n         // suspend updates untill loading is finished\r\n         this._loader.update(this, delta);\r\n         // Update input listeners\r\n         this.input.keyboard.update();\r\n         this.input.pointers.update();\r\n         this.input.gamepads.update();\r\n         return;\r\n      }\r\n      this.emit('preupdate', new PreUpdateEvent(this, delta, this));\r\n      // process engine level events\r\n      this.currentScene.update(this, delta);\r\n\r\n      // update animations\r\n      this._animations = this._animations.filter(function (a) {\r\n         return !a.animation.isDone();\r\n      });\r\n\r\n      // Update input listeners\r\n      this.input.keyboard.update();\r\n      this.input.pointers.update();\r\n      this.input.gamepads.update();\r\n\r\n      // Publish update event\r\n      // TODO: Obsolete `update` event on Engine\r\n      this.eventDispatcher.emit('update', new PostUpdateEvent(this, delta, this));\r\n      this.emit('postupdate', new PostUpdateEvent(this, delta, this));\r\n   }\r\n\r\n   /**\r\n    * Draws the entire game\r\n    * @param delta  Number of milliseconds elapsed since the last draw.\r\n    */\r\n   private _draw(delta: number) {\r\n      var ctx = this.ctx;\r\n      this.emit('predraw', new PreDrawEvent(ctx, delta, this));\r\n      if (this._isLoading) {\r\n         this._loader.draw(ctx, delta);\r\n         // Drawing nothing else while loading\r\n         return;\r\n      }\r\n\r\n      ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n      ctx.fillStyle = this.backgroundColor.toString();\r\n      ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n      this.currentScene.draw(this.ctx, delta);\r\n\r\n      // todo needs to be a better way of doing this\r\n      var a = 0, len = this._animations.length;\r\n      for (a; a < len; a++) {\r\n         this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\r\n      }\r\n\r\n      // Draw debug information\r\n      if (this.isDebug) {\r\n\r\n         this.ctx.font = 'Consolas';\r\n         this.ctx.fillStyle = this.debugColor.toString();\r\n         var keys = this.input.keyboard.getKeys();\r\n         for (var j = 0; j < keys.length; j++) {\r\n            this.ctx.fillText(keys[j].toString() + ' : ' + (Input.Keys[keys[j]] ? Input.Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\r\n         }\r\n\r\n         this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\r\n      }\r\n\r\n      // Post processing\r\n      for (var i = 0; i < this.postProcessors.length; i++) {\r\n         this.postProcessors[i].process(this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight), this.ctx);\r\n      }\r\n\r\n      this.emit('postdraw', new PostDrawEvent(ctx, delta, this));\r\n   }\r\n\r\n   /**\r\n    * Starts the internal game loop for Excalibur after loading\r\n    * any provided assets. \r\n    * @param loader  Optional [[ILoader]] to use to load resources. The default loader is [[Loader]], override to provide your own\r\n    * custom loader.\r\n    */\r\n   public start(loader?: ILoader): Promise<any> {\r\n      if (!this._compatible) {\r\n         var promise = new Promise();\r\n         return promise.reject('Excalibur is incompatible with your browser');\r\n      }\r\n\r\n      var loadingComplete: Promise<any>;\r\n      if (loader) {\r\n         this._loader = loader;\r\n         this._loader.wireEngine(this);\r\n         loadingComplete = this.load(this._loader);\r\n      } else {\r\n         loadingComplete = Promise.resolve();\r\n      }\r\n\r\n      loadingComplete.then(() => {\r\n         this.emit('start', new GameStartEvent(this));\r\n      });\r\n\r\n      if (!this._hasStarted) {\r\n         this._hasStarted = true;\r\n         this._logger.debug('Starting game...');\r\n\r\n         Engine.createMainLoop(this, window.requestAnimationFrame, Date.now)();\r\n\r\n         this._logger.debug('Game started');\r\n\r\n      } else {\r\n         // Game already started;\r\n      }\r\n      return loadingComplete;\r\n\r\n   }\r\n\r\n   public static createMainLoop(game: Engine, raf: (func: Function) => number, nowFn: () => number) {\r\n      var lastTime = nowFn();\r\n\r\n      return function mainloop() {\r\n         if (!game._hasStarted) {\r\n            return;\r\n         }\r\n         try {\r\n            game._requestId = raf(mainloop);\r\n            game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\r\n\r\n            // Get the time to calculate time-elapsed\r\n            var now = nowFn();\r\n            var elapsed = Math.floor(now - lastTime) || 1;\r\n            // Resolves issue #138 if the game has been paused, or blurred for \r\n            // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability \r\n            // and provides more expected behavior when the engine comes back\r\n            // into focus\r\n            if (elapsed > 200) {\r\n               elapsed = 1;\r\n            }\r\n            var delta = elapsed * game.timescale;\r\n\r\n            // reset frame stats (reuse existing instances)\r\n            var frameId = game.stats.prevFrame.id + 1;\r\n            game.stats.prevFrame.reset(game.stats.currFrame);\r\n            game.stats.currFrame.reset();\r\n            game.stats.currFrame.id = frameId;\r\n            game.stats.currFrame.delta = delta;\r\n            game.stats.currFrame.fps = 1.0 / (delta / 1000);\r\n\r\n            var beforeUpdate = nowFn();\r\n            game._update(delta);\r\n            var afterUpdate = nowFn();\r\n            game._draw(delta);\r\n            var afterDraw = nowFn();\r\n\r\n            game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\r\n            game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\r\n\r\n            lastTime = now;\r\n\r\n            game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\r\n         } catch (e) {\r\n            window.cancelAnimationFrame(game._requestId);\r\n            game.stop();\r\n            game.onFatalException(e);\r\n         }\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Stops Excalibur's main loop, useful for pausing the game.\r\n    */\r\n   public stop() {\r\n      if (this._hasStarted) {\r\n         this.emit('stop', new GameStopEvent(this));\r\n         this._hasStarted = false;\r\n         this._logger.debug('Game stopped');\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\r\n    */\r\n   public isPaused(): boolean {\r\n      return !(this._hasStarted);\r\n   }\r\n\r\n   /**\r\n    * Takes a screen shot of the current viewport and returns it as an\r\n    * HTML Image Element.\r\n    */\r\n   public screenshot(): HTMLImageElement {\r\n      var result = new Image();\r\n      var raw = this.canvas.toDataURL('image/png');\r\n      result.src = raw;\r\n      return result;\r\n   }\r\n\r\n   /**\r\n    * Another option available to you to load resources into the game. \r\n    * Immediately after calling this the game will pause and the loading screen\r\n    * will appear.\r\n    * @param loader  Some [[ILoadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\r\n    */\r\n   public load(loader: ILoadable): Promise<any> {\r\n      var complete = new Promise<any>();\r\n\r\n      this._isLoading = true;\r\n\r\n      loader.load().then(() => {\r\n         setTimeout(() => {\r\n            this._isLoading = false;\r\n            complete.resolve();\r\n         }, 500);\r\n      });\r\n\r\n      return complete;\r\n   }\r\n\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nclass AnimationNode {\r\n   constructor(public animation: Animation, public x: number, public y: number) { }\r\n}\r\n","import { Vector } from './Algebra';\r\nimport { Engine } from './Engine';\r\nimport { Actor, CollisionType } from './Actor';\r\nimport * as Traits from './Traits/Index';\r\n\r\n/**\r\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\r\n * not participate in collisions. Drawn on top of all other actors.\r\n */\r\nexport class UIActor extends Actor {\r\n   protected _engine: Engine;\r\n\r\n   /**\r\n    * @param x       The starting x coordinate of the actor\r\n    * @param y       The starting y coordinate of the actor\r\n    * @param width   The starting width of the actor\r\n    * @param height  The starting height of the actor\r\n    */\r\n   constructor(x?: number, y?: number, width?: number, height?: number) {\r\n      super(x, y, width, height);\r\n      this.traits = [];\r\n      this.traits.push(new Traits.CapturePointer());\r\n      this.anchor.setTo(0, 0);\r\n      this.collisionType = CollisionType.PreventCollision;\r\n      this.enableCapturePointer = true;\r\n   }\r\n\r\n   public onInitialize(engine: Engine) {\r\n      this._engine = engine;\r\n   }\r\n\r\n   public contains(x: number, y: number, useWorld: boolean = true) {\r\n      if (useWorld) { return super.contains(x, y); }\r\n\r\n      var coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\r\n      return super.contains(coords.x, coords.y);\r\n   }\r\n}","import { Actor } from '../Actor';\r\nimport { UIActor } from '../UIActor';\r\nimport { Label } from '../Label';\r\nimport { Trigger } from '../Trigger';\r\n\r\nexport function isVanillaActor(actor: Actor) {\r\n   return !(actor instanceof UIActor) &&\r\n          !(actor instanceof Trigger) &&\r\n          !(actor instanceof Label);\r\n}\r\n\r\nexport function isUIActor(actor: Actor) {\r\n   return actor instanceof UIActor;\r\n}","import { UIActor } from './UIActor';\r\nimport { Physics } from './Physics';\r\nimport { InitializeEvent, ActivateEvent, DeactivateEvent, PreUpdateEvent, PostUpdateEvent, \r\n   PreDrawEvent, PostDrawEvent, PreDebugDrawEvent, PostDebugDrawEvent, GameEvent } from './Events';\r\nimport { Logger } from './Util/Log';\r\nimport { Timer } from './Timer';\r\nimport { DynamicTreeCollisionBroadphase } from './Collision/DynamicTreeCollisionBroadphase';\r\nimport { ICollisionBroadphase } from './Collision/ICollisionResolver';\r\nimport { SortedList } from './Util/SortedList';\r\nimport { Engine } from './Engine';\r\nimport { Group } from './Group';\r\nimport { TileMap } from './TileMap';\r\nimport { BaseCamera } from './Camera';\r\nimport { Actor } from './Actor';\r\nimport { Class } from './Class';\r\nimport * as Util from './Util/Util';\r\nimport * as Events from './Events';\r\nimport * as ActorUtils from './Util/Actors';\r\n\r\n/**\r\n * [[Actor|Actors]] are composed together into groupings called Scenes in \r\n * Excalibur. The metaphor models the same idea behind real world \r\n * actors in a scene. Only actors in scenes will be updated and drawn.\r\n *\r\n * Typical usages of a scene include: levels, menus, loading screens, etc.\r\n *\r\n * [[include:Scenes.md]]\r\n */\r\nexport class Scene extends Class {\r\n\r\n   /**\r\n    * The actor this scene is attached to, if any\r\n    */\r\n   public actor: Actor;\r\n\r\n   /**\r\n    * Gets or sets the current camera for the scene\r\n    */\r\n   public camera: BaseCamera;\r\n\r\n   /**\r\n    * The actors in the current scene\r\n    */\r\n   public children: Actor[] = [];\r\n\r\n   /**\r\n    * The [[TileMap]]s in the scene, if any\r\n    */\r\n   public tileMaps: TileMap[] = [];\r\n\r\n   /**\r\n    * The [[Group]]s in the scene, if any\r\n    */\r\n   public groups: { [key: string]: Group } = {};\r\n\r\n   /**\r\n    * Access to the Excalibur engine\r\n    */\r\n   public engine: Engine;\r\n\r\n   /**\r\n    * The [[UIActor]]s in a scene, if any; these are drawn last\r\n    */\r\n   public uiActors: Actor[] = [];\r\n\r\n\r\n   private _isInitialized: boolean = false;\r\n\r\n   private _sortedDrawingTree: SortedList<Actor> = new SortedList<Actor>(Actor.prototype.getZIndex);\r\n\r\n   private _broadphase: ICollisionBroadphase = new DynamicTreeCollisionBroadphase();\r\n\r\n   private _killQueue: Actor[] = [];\r\n   private _timers: Timer[] = [];\r\n   private _cancelQueue: Timer[] = [];\r\n   private _logger: Logger = Logger.getInstance();\r\n\r\n   constructor(engine?: Engine) {\r\n      super();\r\n      this.camera = new BaseCamera();\r\n      if (engine) {\r\n         this.camera.x = engine.canvasWidth / 2;\r\n         this.camera.y = engine.canvasHeight / 2;\r\n      }\r\n   }\r\n\r\n   public on(eventName: Events.initialize, handler: (event?: InitializeEvent) => void): void;\r\n   public on(eventName: Events.activate, handler: (event?: ActivateEvent) => void): void;\r\n   public on(eventName: Events.deactivate, handler: (event?: DeactivateEvent) => void): void;\r\n   public on(eventName: Events.preupdate, handler: (event?: PreUpdateEvent) => void): void;\r\n   public on(eventName: Events.postupdate, handler: (event?: PostUpdateEvent) => void): void;\r\n   public on(eventName: Events.predraw, handler: (event?: PreDrawEvent) => void): void;\r\n   public on(eventName: Events.postdraw, handler: (event?: PostDrawEvent) => void): void;\r\n   public on(eventName: Events.predebugdraw, handler: (event?: PreDebugDrawEvent) => void): void;\r\n   public on(eventName: Events.postdebugdraw, handler: (event?: PostDebugDrawEvent) => void): void;   \r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void {\r\n      super.on(eventName, handler);\r\n   }\r\n\r\n\r\n   /**\r\n    * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\r\n    * overridden. This is where initialization of child actors should take place.\r\n    */\r\n   public onInitialize(engine: Engine): void {\r\n      // will be overridden\r\n      if (this.camera) {\r\n         this.camera.x = engine.canvasWidth / 2;\r\n         this.camera.y = engine.canvasHeight / 2;\r\n      }\r\n      this._logger.debug('Scene.onInitialize', this, engine);\r\n   }\r\n\r\n   /**\r\n    * This is called when the scene is made active and started. It is meant to be overriden,\r\n    * this is where you should setup any DOM UI or event handlers needed for the scene.\r\n    */\r\n   public onActivate(): void {\r\n      // will be overridden\r\n      this._logger.debug('Scene.onActivate', this);\r\n   }\r\n\r\n   /**\r\n    * This is called when the scene is made transitioned away from and stopped. It is meant to be overriden,\r\n    * this is where you should cleanup any DOM UI or event handlers needed for the scene.\r\n    */\r\n   public onDeactivate(): void {\r\n      // will be overridden\r\n      this._logger.debug('Scene.onDeactivate', this);\r\n   }\r\n\r\n   /**\r\n    * Initializes actors in the scene\r\n    */\r\n   private _initializeChildren(): void {\r\n      for (var child of this.children) {\r\n         child._initialize(this.engine);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Gets whether or not the [[Scene]] has been initialized\r\n    */\r\n   public get isInitialized(): boolean {\r\n      return this._isInitialized;\r\n   }\r\n\r\n   /**\r\n    * Initializes the scene before the first update, meant to be called by engine not by users of \r\n    * Excalibur\r\n    * @internal\r\n    */\r\n   public _initialize(engine: Engine) {\r\n      if (!this.isInitialized) {\r\n         this.onInitialize.call(this, engine);\r\n         this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\r\n         this._initializeChildren();\r\n         this._isInitialized = true;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Updates all the actors and timers in the scene. Called by the [[Engine]].\r\n    * @param engine  Reference to the current Engine\r\n    * @param delta   The number of milliseconds since the last update\r\n    */\r\n   public update(engine: Engine, delta: number) {\r\n      this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n      var i: number, len: number;\r\n\r\n      if (this.camera) {\r\n         this.camera.update(engine, delta);\r\n      }\r\n\r\n      // Remove timers in the cancel queue before updating them\r\n      for (i = 0, len = this._cancelQueue.length; i < len; i++) {\r\n         this.removeTimer(this._cancelQueue[i]);\r\n      }\r\n      this._cancelQueue.length = 0;\r\n\r\n      // Cycle through timers updating timers\r\n      this._timers = this._timers.filter(timer => {\r\n         timer.update(delta);\r\n         return !timer.complete;\r\n      });\r\n\r\n      // Cycle through actors updating UI actors\r\n      for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n         this.uiActors[i].update(engine, delta);\r\n      }\r\n\r\n      // Cycle through actors updating tile maps\r\n      for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n         this.tileMaps[i].update(engine, delta);\r\n      }\r\n\r\n      // Cycle through actors updating actors\r\n      for (i = 0, len = this.children.length; i < len; i++) {         \r\n         this.children[i].update(engine, delta);\r\n      }\r\n\r\n      this._collectActorStats(engine);\r\n\r\n      // Run the broadphase and narrowphase\r\n      if (this._broadphase && Physics.enabled) {\r\n         var beforeBroadphase = Date.now();\r\n         this._broadphase.update(this.children, delta);\r\n         var pairs = this._broadphase.broadphase(this.children, delta, engine.stats.currFrame);\r\n         var afterBroadphase = Date.now();\r\n\r\n         var beforeNarrowphase = Date.now();\r\n         var iter: number = Physics.collisionPasses;\r\n         var collisionDelta = delta / iter;\r\n         while (iter > 0) {\r\n            // Run the narrowphase\r\n            this._broadphase.narrowphase(pairs, engine.stats.currFrame);\r\n            // Run collision resolution strategy\r\n            this._broadphase.resolve(collisionDelta, Physics.collisionResolutionStrategy);\r\n            iter--;\r\n         }\r\n         var afterNarrowphase = Date.now();\r\n         engine.stats.currFrame.physics.broadphase = afterBroadphase - beforeBroadphase;\r\n         engine.stats.currFrame.physics.narrowphase = afterNarrowphase - beforeNarrowphase;\r\n      }\r\n\r\n      // Remove actors from scene graph after being killed\r\n      var actorIndex: number;\r\n\r\n      for (i = 0, len = this._killQueue.length; i < len; i++) {\r\n         actorIndex = this.children.indexOf(this._killQueue[i]);\r\n         if (actorIndex > -1) {\r\n            this._sortedDrawingTree.removeByComparable(this._killQueue[i]);\r\n            this.children.splice(actorIndex, 1);\r\n         }\r\n      }\r\n      engine.stats.currFrame.actors.killed = this._killQueue.length;\r\n      this._killQueue.length = 0;      \r\n\r\n      this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n   }\r\n\r\n   /**\r\n    * Draws all the actors in the Scene. Called by the [[Engine]].\r\n    * @param ctx    The current rendering context\r\n    * @param delta  The number of milliseconds since the last draw\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n      this.emit('predraw', new PreDrawEvent(ctx, delta, this));\r\n      ctx.save();\r\n\r\n      if (this.camera) {\r\n         this.camera.draw(ctx);\r\n      }\r\n\r\n      var i: number, len: number;\r\n\r\n      for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n         this.tileMaps[i].draw(ctx, delta);\r\n      }\r\n\r\n      var sortedChildren = this._sortedDrawingTree.list();\r\n      for (i = 0, len = sortedChildren.length; i < len; i++) {\r\n\r\n         // only draw actors that are visible and on screen\r\n         if (sortedChildren[i].visible && !sortedChildren[i].isOffScreen) {\r\n            sortedChildren[i].draw(ctx, delta);\r\n         }\r\n      }\r\n\r\n      if (this.engine && this.engine.isDebug) {\r\n         ctx.strokeStyle = 'yellow';\r\n         this.debugDraw(ctx);\r\n      }\r\n\r\n      ctx.restore();\r\n\r\n      for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n         // only draw ui actors that are visible and on screen\r\n         if (this.uiActors[i].visible) {\r\n            this.uiActors[i].draw(ctx, delta);\r\n         }\r\n      }\r\n\r\n      if (this.engine && this.engine.isDebug) {\r\n         for (i = 0, len = this.uiActors.length; i < len; i++) {\r\n            this.uiActors[i].debugDraw(ctx);\r\n         }\r\n      }\r\n      this.emit('postdraw', new PostDrawEvent(ctx, delta, this));\r\n   }\r\n\r\n   /**\r\n    * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\r\n    * @param ctx  The current rendering context\r\n    */\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n\r\n      var i: number, len: number;\r\n\r\n      for (i = 0, len = this.tileMaps.length; i < len; i++) {\r\n         this.tileMaps[i].debugDraw(ctx);\r\n      }\r\n\r\n      for (i = 0, len = this.children.length; i < len; i++) {\r\n         this.children[i].debugDraw(ctx);\r\n      }\r\n\r\n      this._broadphase.debugDraw(ctx, 20);\r\n\r\n      this.camera.debugDraw(ctx);\r\n      this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n   }\r\n\r\n   /**\r\n    * Checks whether an actor is contained in this scene or not\r\n    */\r\n   public contains(actor: Actor): boolean {\r\n      return this.children.indexOf(actor) > -1;\r\n   }\r\n\r\n   /**\r\n    * Adds a [[Timer]] to the current scene.\r\n    * @param timer  The timer to add to the current scene.\r\n    */\r\n   public add(timer: Timer): void;\r\n\r\n   /**\r\n    * Adds a [[TileMap]] to the Scene, once this is done the TileMap will be drawn and updated.\r\n    */\r\n   public add(tileMap: TileMap): void;\r\n\r\n   /**\r\n    * Adds an actor to the scene, once this is done the [[Actor]] will be drawn and updated.\r\n    * @param actor  The actor to add to the current scene\r\n    */\r\n   public add(actor: Actor): void;\r\n\r\n   /**\r\n    * Adds a [[UIActor]] to the scene.\r\n    * @param uiActor  The UIActor to add to the current scene\r\n    */\r\n   public add(uiActor: UIActor): void;\r\n   public add(entity: any): void {\r\n      if (entity instanceof Actor) {\r\n         (<Actor>entity).unkill();\r\n      }\r\n      if (entity instanceof UIActor) {\r\n         if (!Util.contains(this.uiActors, entity)) {\r\n            this.addUIActor(entity);\r\n         }\r\n         return;\r\n      }\r\n      if (entity instanceof Actor) {\r\n         if (!Util.contains(this.children, entity)) {\r\n            this._addChild(entity);\r\n            this._sortedDrawingTree.add(entity);\r\n         }\r\n         return;\r\n      }\r\n      if (entity instanceof Timer) {\r\n         if (!Util.contains(this._timers, entity)) {\r\n            this.addTimer(entity);\r\n         }\r\n         return;\r\n      }\r\n      if (entity instanceof TileMap) {\r\n         if (!Util.contains(this.tileMaps, entity)) {\r\n            this.addTileMap(entity);\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes a [[Timer]] from the current scene, it will no longer be updated.\r\n    * @param timer  The timer to remove to the current scene.       \r\n    */\r\n   public remove(timer: Timer): void;\r\n\r\n   /**\r\n    * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\r\n    * @param tileMap {TileMap}\r\n    */\r\n   public remove(tileMap: TileMap): void;\r\n\r\n   /**\r\n    * Removes an actor from the scene, it will no longer be drawn or updated.\r\n    * @param actor  The actor to remove from the current scene.      \r\n    */\r\n   public remove(actor: Actor): void;\r\n\r\n   /**\r\n    * Removes a [[UIActor]] to the scene, it will no longer be drawn or updated\r\n    * @param uiActor  The UIActor to remove from the current scene\r\n    */\r\n   public remove(uiActor: UIActor): void;\r\n   public remove(entity: any): void {\r\n      if (entity instanceof UIActor) {\r\n         this.removeUIActor(entity);\r\n         return;\r\n      }\r\n      if (entity instanceof Actor) {\r\n         this._broadphase.untrack(entity.body);\r\n         this._removeChild(entity);\r\n      }\r\n      if (entity instanceof Timer) {\r\n         this.removeTimer(entity);\r\n      }\r\n\r\n      if (entity instanceof TileMap) {\r\n         this.removeTileMap(entity);\r\n      }\r\n\r\n   }\r\n\r\n   /**\r\n    * Adds (any) actor to act as a piece of UI, meaning it is always positioned\r\n    * in screen coordinates. UI actors do not participate in collisions.\r\n    * @todo Should this be `UIActor` only?\r\n    */\r\n   public addUIActor(actor: Actor) {\r\n      this.uiActors.push(actor);\r\n      actor.scene = this;\r\n   }\r\n\r\n   /**\r\n    * Removes an actor as a piece of UI\r\n    */\r\n   public removeUIActor(actor: Actor) {\r\n      var index = this.uiActors.indexOf(actor);\r\n      if (index > -1) {\r\n         this.uiActors.splice(index, 1);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Adds an actor to the scene, once this is done the actor will be drawn and updated.       \r\n    */\r\n   protected _addChild(actor: Actor) {\r\n      this._broadphase.track(actor.body);\r\n      actor.scene = this;\r\n      this.children.push(actor);\r\n      this._sortedDrawingTree.add(actor);\r\n      actor.parent = this.actor;\r\n   }\r\n\r\n   /**\r\n    * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\r\n    */\r\n   public addTileMap(tileMap: TileMap) {\r\n      this.tileMaps.push(tileMap);\r\n   }\r\n\r\n   /**\r\n    * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\r\n    */\r\n   public removeTileMap(tileMap: TileMap) {\r\n      var index = this.tileMaps.indexOf(tileMap);\r\n      if (index > -1) {\r\n         this.tileMaps.splice(index, 1);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes an actor from the scene, it will no longer be drawn or updated.\r\n    */\r\n   protected _removeChild(actor: Actor) {\r\n      this._broadphase.untrack(actor.body);\r\n      this._killQueue.push(actor);\r\n      actor.parent = null;\r\n   }\r\n\r\n   /**\r\n    * Adds a [[Timer]] to the scene\r\n    * @param timer  The timer to add\r\n    */\r\n   public addTimer(timer: Timer): Timer {\r\n      this._timers.push(timer);\r\n      timer.scene = this;\r\n      return timer;\r\n   }\r\n\r\n   /**\r\n    * Removes a [[Timer]] from the scene. \r\n    * @warning Can be dangerous, use [[cancelTimer]] instead\r\n    * @param timer  The timer to remove\r\n    */\r\n   public removeTimer(timer: Timer): Timer {\r\n      var i = this._timers.indexOf(timer);\r\n      if (i !== -1) {\r\n         this._timers.splice(i, 1);\r\n      }\r\n      return timer;\r\n   }\r\n\r\n   /**\r\n    * Cancels a [[Timer]], removing it from the scene nicely\r\n    * @param timer  The timer to cancel\r\n    */\r\n   public cancelTimer(timer: Timer): Timer {\r\n      this._cancelQueue.push(timer);\r\n      return timer;\r\n   }\r\n\r\n   /**\r\n    * Tests whether a [[Timer]] is active in the scene\r\n    */\r\n   public isTimerActive(timer: Timer): boolean {\r\n      return (this._timers.indexOf(timer) > -1);\r\n   }\r\n\r\n   /**\r\n    * Creates and adds a [[Group]] to the scene with a name\r\n    */\r\n   public createGroup(name: string): Group {\r\n      return new Group(name, this);\r\n   }\r\n\r\n   /**\r\n    * Returns a [[Group]] by name\r\n    */\r\n   public getGroup(name: string): Group {\r\n      return this.groups[name];\r\n   }\r\n\r\n   /**\r\n    * Removes a [[Group]] by name\r\n    */\r\n   public removeGroup(name: string): void;\r\n\r\n   /**\r\n    * Removes a [[Group]] by reference\r\n    */\r\n   public removeGroup(group: Group): void;\r\n   public removeGroup(group: any): void {\r\n      if (typeof group === 'string') {\r\n         delete this.groups[group];\r\n      } else if (group instanceof Group) {\r\n         delete this.groups[group.name];\r\n      } else {\r\n         this._logger.error('Invalid arguments to removeGroup', group);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Removes the given actor from the sorted drawing tree\r\n    */\r\n   public cleanupDrawTree(actor: Actor) {\r\n      this._sortedDrawingTree.removeByComparable(actor);\r\n   }\r\n\r\n   /**\r\n    * Updates the given actor's position in the sorted drawing tree\r\n    */\r\n   public updateDrawTree(actor: Actor) {\r\n      this._sortedDrawingTree.add(actor);\r\n   }\r\n\r\n   private _collectActorStats(engine: Engine) {\r\n      for (var _ui of this.uiActors) {\r\n         engine.stats.currFrame.actors.ui++;\r\n      }\r\n\r\n      for (var actor of this.children) {\r\n         engine.stats.currFrame.actors.alive++;\r\n         for (var child of actor.children) {\r\n            if (ActorUtils.isUIActor(child)) {\r\n               engine.stats.currFrame.actors.ui++;\r\n            } else {\r\n               engine.stats.currFrame.actors.alive++;\r\n            }\r\n         }\r\n      }\r\n   }\r\n}","import { Scene } from './Scene';\r\nimport { Vector } from './Algebra';\r\nimport { Actor } from './Actor';\r\nimport { FrameStats } from './Debug';\r\nimport { Engine } from './Engine';\r\nimport { TileMap } from './TileMap';\r\nimport { Side } from './Collision/Side';\r\nimport * as Input from './Input/Index';\r\n\r\n/* istanbul ignore next */\r\n/* compiler only: these are internal to lib */\r\nexport type kill = 'kill';\r\n\r\nexport type predraw = 'predraw';\r\nexport type postdraw = 'postdraw';\r\n\r\nexport type predebugdraw = 'predebugdraw';\r\nexport type postdebugdraw = 'postdebugdraw';\r\n\r\nexport type preupdate = 'preupdate';\r\nexport type postupdate = 'postupdate';\r\n\r\nexport type preframe = 'preframe';\r\nexport type postframe = 'postframe';\r\n\r\nexport type collision = 'collision';\r\n\r\nexport type initialize = 'initialize';\r\nexport type activate = 'activate';\r\nexport type deactivate = 'deactivate';\r\n\r\nexport type exitviewport = 'exitviewport';\r\nexport type enterviewport = 'enterviewport';\r\n\r\nexport type connect = 'connect';\r\nexport type disconnect = 'disconnect';\r\nexport type button = 'button';\r\nexport type axis = 'axis';\r\n\r\nexport type subscribe = 'subscribe';\r\nexport type unsubscribe = 'unsubscribe';\r\n\r\nexport type visible = 'visible';\r\nexport type hidden = 'hidden';\r\nexport type start = 'start';\r\nexport type stop = 'stop';\r\n\r\nexport type pointerup = 'pointerup';\r\nexport type pointerdown = 'pointerdown';\r\nexport type pointermove = 'pointermove';\r\nexport type pointercancel = 'pointercancel';\r\n\r\nexport type up = 'up';\r\nexport type down = 'down';\r\nexport type move = 'move';\r\nexport type cancel = 'cancel';\r\n\r\nexport type press = 'press';\r\nexport type release = 'release';\r\nexport type hold = 'hold';\r\n\r\n/**\r\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects, \r\n * some events are unique to a type, others are not.\r\n *  \r\n */\r\nexport class GameEvent<T> {\r\n   /**\r\n    * Target object for this event.\r\n    */\r\n   public target: T;\r\n}\r\n\r\n/**\r\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed. \r\n */\r\nexport class KillEvent extends GameEvent<Actor> {\r\n   constructor(public target: Actor) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'start' event is emitted on engine when has started and is ready for interaction. \r\n */\r\nexport class GameStartEvent extends GameEvent<Engine> {\r\n   constructor(public target: Engine) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw. \r\n */\r\nexport class GameStopEvent extends GameEvent<Engine> {\r\n   constructor(public target: Engine) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics \r\n * transform so that all drawing takes place with the actor as the origin.\r\n *   \r\n */\r\nexport class PreDrawEvent extends GameEvent<Actor | Scene | Engine | TileMap> {\r\n   constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Actor | Scene | Engine | TileMap) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics \r\n * transform so that all drawing takes place with the actor as the origin.\r\n *   \r\n */\r\nexport class PostDrawEvent extends GameEvent<Actor | Scene | Engine | TileMap> {\r\n   constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Actor | Scene | Engine | TileMap) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\r\n */\r\nexport class PreDebugDrawEvent extends GameEvent<Actor | Scene | Engine> {\r\n   constructor(public ctx: CanvasRenderingContext2D, public target: Actor | Scene | Engine) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\r\n */\r\nexport class PostDebugDrawEvent extends GameEvent<Actor | Scene | Engine> {\r\n   constructor(public ctx: CanvasRenderingContext2D, public target: Actor | Scene | Engine) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'preupdate' event is emitted on actors, scenes, and engine before the update starts.\r\n */\r\nexport class PreUpdateEvent extends GameEvent<Actor | Scene | Engine | TileMap> {\r\n   constructor(public engine: Engine, public delta: number, public target: Actor | Scene | Engine | TileMap) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'postupdate' event is emitted on actors, scenes, and engine after the update ends. This is equivalent to the obsolete 'update'\r\n * event.\r\n */\r\nexport class PostUpdateEvent extends GameEvent<Actor | Scene | Engine | TileMap> {\r\n   constructor(public engine: Engine, public delta: number, public target: Actor | Scene | Engine | TileMap) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * The 'preframe' event is emitted on the engine, before the frame begins.\r\n */\r\nexport class PreFrameEvent extends GameEvent<Engine> {\r\n   constructor(public engine: Engine, public prevStats: FrameStats) {\r\n      super();\r\n      this.target = engine;\r\n   }\r\n}\r\n\r\n/**\r\n * The 'postframe' event is emitted on the engine, after a frame ends.\r\n */\r\nexport class PostFrameEvent extends GameEvent<Engine> {\r\n   constructor(public engine: Engine, public stats: FrameStats) {\r\n      super();\r\n      this.target = engine;\r\n   }\r\n}\r\n\r\n/**\r\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\r\n */\r\nexport class GamepadConnectEvent extends GameEvent<Input.Gamepad> {\r\n   constructor(public index: number, public gamepad: Input.Gamepad) {\r\n      super();\r\n      this.target = gamepad;\r\n   }\r\n}\r\n\r\n/**\r\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\r\n */\r\nexport class GamepadDisconnectEvent extends GameEvent<Input.Gamepad> {\r\n   constructor(public index: number, public gamepad: Input.Gamepad) {\r\n      super();\r\n      this.target = gamepad;\r\n   }\r\n}\r\n\r\n/**\r\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nexport class GamepadButtonEvent extends GameEvent<Input.Gamepad> {\r\n\r\n   /**\r\n    * @param button  The Gamepad button\r\n    * @param value   A numeric value between 0 and 1\r\n    */\r\n   constructor(public button: Input.Buttons, public value: number, public target: Input.Gamepad) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nexport class GamepadAxisEvent extends GameEvent<Input.Gamepad> {\r\n\r\n   /**\r\n    * @param axis  The Gamepad axis\r\n    * @param value A numeric value between -1 and 1\r\n    */\r\n   constructor(public axis: Input.Axes, public value: number, public target: Input.Gamepad) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by \r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nexport class SubscribeEvent<T> extends GameEvent<T> {\r\n   constructor(public topic: string, public handler: (event?: GameEvent<T>) => void) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by \r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nexport class UnsubscribeEvent<T> extends GameEvent<T> {\r\n   constructor(public topic: string, public handler: (event?: GameEvent<T>) => void) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Event received by the [[Engine]] when the browser window is visible on a screen.\r\n */\r\nexport class VisibleEvent extends GameEvent<Engine> {\r\n   constructor(public target: Engine) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\r\n */\r\nexport class HiddenEvent extends GameEvent<Engine> {\r\n   constructor(public target: Engine) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision has occurred\r\n */\r\nexport class CollisionEvent extends GameEvent<Actor> {\r\n\r\n   /**\r\n    * @param actor         The actor the event was thrown on\r\n    * @param other         The actor that was collided with\r\n    * @param side          The side that was collided with\r\n    * @param intersection  Intersection vector\r\n    */\r\n   constructor(public actor: Actor, public other: Actor, public side: Side, public intersection: Vector) {\r\n      super();\r\n      this.target = actor;\r\n   }\r\n}\r\n\r\n/**\r\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\r\n */\r\nexport class InitializeEvent extends GameEvent<Actor | Scene> {\r\n\r\n   /**\r\n    * @param engine  The reference to the current engine\r\n    */\r\n   constructor(public engine: Engine, public target: Actor | Scene) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Event thrown on a [[Scene]] on activation\r\n */\r\nexport class ActivateEvent extends GameEvent<Scene> {\r\n\r\n   /**\r\n    * @param oldScene  The reference to the old scene\r\n    */\r\n   constructor(public oldScene: Scene, public target: Scene) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Event thrown on a [[Scene]] on deactivation\r\n */\r\nexport class DeactivateEvent extends GameEvent<Scene> {\r\n\r\n   /**\r\n    * @param newScene  The reference to the new scene\r\n    */\r\n   constructor(public newScene: Scene, public target: Scene) {\r\n      super();\r\n   }\r\n}\r\n\r\n\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nexport class ExitViewPortEvent extends GameEvent<Actor> {\r\n   constructor(public target: Actor) {\r\n      super();\r\n   }\r\n}\r\n\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nexport class EnterViewPortEvent extends GameEvent<Actor> {\r\n   constructor(public target: Actor) {\r\n      super();\r\n   }\r\n}","import { GameEvent } from './Events';\r\nimport { EventDispatcher } from './EventDispatcher';\r\nimport { IEvented } from './Interfaces/IEvented';\r\n\r\n/**\r\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\r\n * and extending abilities for vanilla Javascript projects\r\n */\r\nexport class Class implements IEvented {\r\n\r\n   /**\r\n    * Direct access to the game object event dispatcher.\r\n    */\r\n   public eventDispatcher: EventDispatcher;\r\n\r\n   constructor() {\r\n      this.eventDispatcher = new EventDispatcher(this);\r\n   }\r\n\r\n   /**\r\n    * Alias for `addEventListener`. You can listen for a variety of\r\n    * events off of the engine; see the events section below for a complete list.\r\n    * @param eventName  Name of the event to listen for\r\n    * @param handler    Event handler for the thrown event\r\n    */\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void) {\r\n      this.eventDispatcher.on(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * Alias for `removeEventListener`. If only the eventName is specified\r\n    * it will remove all handlers registered for that specific event. If the eventName\r\n    * and the handler instance are specified only that handler will be removed.\r\n    *\r\n    * @param eventName  Name of the event to listen for\r\n    * @param handler    Event handler for the thrown event\r\n    */\r\n   public off(eventName: string, handler?: (event?: GameEvent<any>) => void) {\r\n      this.eventDispatcher.off(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * Emits a new event\r\n    * @param eventName   Name of the event to emit\r\n    * @param eventObject Data associated with this event\r\n    */\r\n   public emit(eventName: string, eventObject?: GameEvent<any>) {\r\n      this.eventDispatcher.emit(eventName, eventObject);\r\n   }\r\n\r\n\r\n   /**\r\n    * You may wish to extend native Excalibur functionality in vanilla Javascript. \r\n    * Any method on a class inheriting [[Class]] may be extended to support \r\n    * additional functionality. In the example below we create a new type called `MyActor`.\r\n    * \r\n    *\r\n    * ```js\r\n    * var MyActor = Actor.extend({\r\n    *\r\n    *    constructor: function() { \r\n    *       this.newprop = 'something';\r\n    *       Actor.apply(this, arguments);\r\n    *    },\r\n    *\r\n    *    update: function(engine, delta) {\r\n    *       // Implement custom update \r\n    *       // Call super constructor update\r\n    *       Actor.prototype.update.call(this, engine, delta);\r\n    *\r\n    *       console.log(\"Something cool!\");\r\n    *    }\r\n    * });\r\n    * \r\n    * var myActor = new MyActor(100, 100, 100, 100, Color.Azure);\r\n    * ```\r\n    *\r\n    * In TypeScript, you only need to use the `extends` syntax, you do not need\r\n    * to use this method of extension.\r\n    *\r\n    * @param methods A JSON object contain any methods/properties you want to extend\r\n    */\r\n   public static extend(methods: any): any {\r\n      var parent: any = this;\r\n      var child: any;\r\n\r\n      if (methods && methods.hasOwnProperty('constructor')) {\r\n         child = methods.constructor;\r\n      } else {\r\n         child = function (this: any) { return parent.apply(this, arguments); };\r\n      }\r\n\r\n      // Using constructor allows JS to lazily instantiate super classes\r\n      var Super: any = function (this: any) { this.constructor = child; };\r\n      Super.prototype = parent.prototype;\r\n      child.prototype = new Super;\r\n\r\n      if (methods) {\r\n         for (var prop in methods) {\r\n            if (methods.hasOwnProperty(prop)) {\r\n               child.prototype[prop] = methods[prop];\r\n            }\r\n         }\r\n      }\r\n\r\n      // Make subclasses extendable\r\n      child.extend = Class.extend;\r\n\r\n      return child;\r\n   }\r\n}","import { Physics } from './Physics';\r\nimport { Class } from './Class';\r\nimport { BoundingBox } from './Collision/BoundingBox';\r\nimport { Texture } from './Resources/Texture';\r\nimport {\r\n   InitializeEvent, KillEvent, PreUpdateEvent, PostUpdateEvent,\r\n   PreDrawEvent, PostDrawEvent, PreDebugDrawEvent, PostDebugDrawEvent, GameEvent\r\n} from './Events';\r\nimport { Engine } from './Engine';\r\nimport { Color } from './Drawing/Color';\r\nimport { Sprite } from './Drawing/Sprite';\r\nimport { IActorTrait } from './Interfaces/IActorTrait';\r\nimport { IDrawable } from './Interfaces/IDrawable';\r\nimport { Scene } from './Scene';\r\nimport { Logger } from './Util/Log';\r\nimport { ActionContext } from './Actions/ActionContext';\r\nimport { ActionQueue } from './Actions/Action';\r\nimport { Vector } from './Algebra';\r\nimport { ICollisionArea } from './Collision/ICollisionArea';\r\nimport { Body } from './Collision/Body';\r\nimport { Side } from './Collision/Side';\r\nimport { IEvented } from './Interfaces/IEvented';\r\nimport { IActionable } from './Actions/IActionable';\r\nimport * as Traits from './Traits/Index';\r\nimport * as Effects from './Drawing/SpriteEffects';\r\nimport * as Util from './Util/Util';\r\nimport * as Events from './Events';\r\n\r\n/**\r\n * The most important primitive in Excalibur is an `Actor`. Anything that\r\n * can move on the screen, collide with another `Actor`, respond to events, \r\n * or interact with the current scene, must be an actor. An `Actor` **must**\r\n * be part of a [[Scene]] for it to be drawn to the screen.\r\n *\r\n * [[include:Actors.md]]\r\n *\r\n */\r\nexport class Actor extends Class implements IActionable, IEvented {\r\n   /**\r\n    * Indicates the next id to be set\r\n    */\r\n   public static maxId = 0;\r\n   /**\r\n    * The unique identifier for the actor\r\n    */\r\n   public id: number = Actor.maxId++;\r\n\r\n   /**\r\n    * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\r\n    * acceleration, mass, inertia, etc.\r\n    */\r\n   public body: Body = new Body(this);\r\n\r\n   /**\r\n    * Gets the collision area shape to use for collision possible options are [CircleArea|circles], [PolygonArea|polygons], and \r\n    * [EdgeArea|edges]. \r\n    */\r\n   public get collisionArea(): ICollisionArea {\r\n      return this.body.collisionArea;\r\n   }\r\n\r\n   /**\r\n    * Gets the collision area shape to use for collision possible options are [CircleArea|circles], [PolygonArea|polygons], and \r\n    * [EdgeArea|edges]. \r\n    */\r\n   public set collisionArea(area: ICollisionArea) {\r\n      this.body.collisionArea = area;\r\n   }\r\n\r\n   /**\r\n    * Gets the x position of the actor relative to it's parent (if any)\r\n    */\r\n   public get x(): number {\r\n      return this.body.pos.x;\r\n   }\r\n\r\n   /**\r\n    * Sets the x position of the actor relative to it's parent (if any)\r\n    */\r\n   public set x(theX: number) {\r\n      this.body.pos.x = theX;\r\n   }\r\n\r\n   /**\r\n    * Gets the y position of the actor relative to it's parent (if any)\r\n    */\r\n   public get y(): number {\r\n      return this.body.pos.y;\r\n   }\r\n\r\n   /**\r\n    * Sets the y position of the actor relative to it's parent (if any)\r\n    */\r\n   public set y(theY: number) {\r\n      this.body.pos.y = theY;\r\n   }\r\n\r\n   /**\r\n    * Gets the position vector of the actor in pixels\r\n    */\r\n   public get pos(): Vector {\r\n      return this.body.pos;\r\n   }\r\n\r\n   /**\r\n    * Sets the position vector of the actor in pixels\r\n    */\r\n   public set pos(thePos: Vector) {\r\n      this.body.pos = thePos;\r\n   }\r\n\r\n   /**\r\n    * Gets the position vector of the actor from the last frame\r\n    */\r\n   public get oldPos(): Vector {\r\n      return this.body.oldPos;\r\n   }\r\n\r\n   /**\r\n    * Sets the position vector of the actor in the last frame\r\n    */\r\n   public set oldPos(thePos: Vector) {\r\n      this.body.oldPos = thePos;\r\n   }\r\n\r\n   /**\r\n    * Gets the velocity vector of the actor in pixels/sec\r\n    */\r\n   public get vel(): Vector {\r\n      return this.body.vel;\r\n   }\r\n\r\n   /**\r\n    * Sets the velocity vector of the actor in pixels/sec\r\n    */\r\n   public set vel(theVel: Vector) {\r\n      this.body.vel = theVel;\r\n   }\r\n\r\n   /**\r\n    * Gets the velocity vector of the actor from the last frame\r\n    */\r\n   public get oldVel(): Vector {\r\n      return this.body.oldVel;\r\n   }\r\n\r\n   /**\r\n    * Sets the velocity vector of the actor from the last frame\r\n    */\r\n   public set oldVel(theVel: Vector) {\r\n      this.body.oldVel = theVel;\r\n   }\r\n\r\n   /**\r\n    * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be \r\n    * useful to simulate a gravitational effect.  \r\n    */\r\n   public get acc(): Vector {\r\n      return this.body.acc;\r\n   }\r\n\r\n   /**\r\n    * Sets the acceleration vector of teh actor in pixels/second/second\r\n    */\r\n   public set acc(theAcc: Vector) {\r\n      this.body.acc = theAcc;\r\n   }\r\n\r\n   /** \r\n    * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n    */\r\n   public get rotation(): number {\r\n      return this.body.rotation;\r\n   }\r\n\r\n   /**\r\n    * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n    */\r\n   public set rotation(theAngle: number) {\r\n      this.body.rotation = theAngle;\r\n   }\r\n\r\n   /** \r\n    * Gets the rotational velocity of the actor in radians/second\r\n    */\r\n   public get rx(): number {\r\n      return this.body.rx;\r\n   }\r\n\r\n   /**\r\n    * Sets the rotational velocity of the actor in radians/sec\r\n    */\r\n   public set rx(angularVelocity: number) {\r\n      this.body.rx = angularVelocity;\r\n   }\r\n\r\n   /**\r\n    * Gets the current torque applied to the actor. Torque can be thought of as rotational force\r\n    */\r\n   public get torque() {\r\n      return this.body.torque;\r\n   }\r\n\r\n   /**\r\n    * Sets the current torque applied to the actor. Torque can be thought of as rotational force\r\n    */\r\n   public set torque(theTorque: number) {\r\n      this.body.torque = theTorque;\r\n   }\r\n\r\n   /**\r\n    * Get the current mass of the actor, mass can be thought of as the resistance to acceleration.\r\n    */\r\n   public get mass() {\r\n      return this.body.mass;\r\n   }\r\n\r\n   /**\r\n    * Sets the mass of the actor, mass can be thought of as the resistance to acceleration.\r\n    */\r\n   public set mass(theMass: number) {\r\n      this.body.mass = theMass;\r\n   }\r\n\r\n   /**\r\n    * Gets the current moment of inertia, moi can be thought of as the resistance to rotation.\r\n    */\r\n   public get moi() {\r\n      return this.body.moi;\r\n   }\r\n\r\n   /**\r\n    * Sets the current moment of inertia, moi can be thought of as the resistance to rotation.\r\n    */\r\n   public set moi(theMoi: number) {\r\n      this.body.moi = theMoi;\r\n   }\r\n\r\n   /**\r\n    * Gets the coefficient of friction on this actor, this can be thought of as how sticky or slippery an object is.\r\n    */\r\n   public get friction() {\r\n      return this.body.friction;\r\n   }\r\n\r\n   /**\r\n    * Sets the coefficient of friction of this actor, this can ve thought of as how stick or slippery an object is.\r\n    */\r\n   public set friction(theFriction: number) {\r\n      this.body.friction = theFriction;\r\n   }\r\n\r\n   /**\r\n    * Gets the coefficient of restitution of this actor, represents the amount of energy preserved after collision. Think of this  \r\n    * as bounciness.\r\n    */\r\n   public get restitution() {\r\n      return this.body.restitution;\r\n   }\r\n\r\n   /**\r\n    * Sets the coefficient of restitution of this actor, represents the amount of energy preserved after collision. Think of this\r\n    * as bounciness.\r\n    */\r\n   public set restitution(theRestitution: number) {\r\n      this.body.restitution = theRestitution;\r\n   }\r\n\r\n   /**\r\n    * The anchor to apply all actor related transformations like rotation,\r\n    * translation, and rotation. By default the anchor is in the center of\r\n    * the actor. By default it is set to the center of the actor (.5, .5)\r\n    * \r\n    * An anchor of (.5, .5) will ensure that drawings are centered.\r\n    *\r\n    * Use `anchor.setTo` to set the anchor to a different point using\r\n    * values between 0 and 1. For example, anchoring to the top-left would be\r\n    * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\r\n    */\r\n   public anchor: Vector;\r\n\r\n   private _height: number = 0;\r\n   private _width: number = 0;\r\n\r\n   /**\r\n    * The scale vector of the actor\r\n    */\r\n   public scale: Vector = new Vector(1, 1);\r\n   /** \r\n    * The x scalar velocity of the actor in scale/second\r\n    */\r\n   public sx: number = 0; //scale/sec\r\n   /** \r\n    * The y scalar velocity of the actor in scale/second\r\n    */\r\n   public sy: number = 0; //scale/sec\r\n\r\n   /**\r\n    * Indicates whether the actor is physically in the viewport\r\n    */\r\n   public isOffScreen = false;\r\n   /** \r\n    * The visibility of an actor\r\n    */\r\n   public visible: boolean = true;\r\n   /**\r\n    * The opacity of an actor. Passing in a color in the [[constructor]] will use the \r\n    * color's opacity.\r\n    */\r\n   public opacity: number = 1;\r\n   public previousOpacity: number = 1;\r\n\r\n   /** \r\n    * Direct access to the actor's [[ActionQueue]]. Useful if you are building custom actions.\r\n    */\r\n   public actionQueue: ActionQueue;\r\n\r\n   /**\r\n    * [[ActionContext|Action context]] of the actor. Useful for scripting actor behavior.\r\n    */\r\n   public actions: ActionContext;\r\n   /**\r\n    * Convenience reference to the global logger\r\n    */\r\n   public logger: Logger = Logger.getInstance();\r\n   /**\r\n    * The scene that the actor is in\r\n    */\r\n   public scene: Scene = null;\r\n   /**\r\n    * The parent of this actor\r\n    */\r\n   public parent: Actor = null;\r\n   // TODO: Replace this with the new actor collection once z-indexing is built\r\n   /**\r\n    * The children of this actor\r\n    */\r\n   public children: Actor[] = [];\r\n   /**\r\n    * Gets or sets the current collision type of this actor. By \r\n    * default it is ([[CollisionType.PreventCollision]]).\r\n    */\r\n   public collisionType: CollisionType = CollisionType.PreventCollision;\r\n   public collisionGroups: string[] = [];\r\n\r\n\r\n   private _collisionHandlers: { [key: string]: { (actor: Actor): void }[]; } = {};\r\n   private _isInitialized: boolean = false;\r\n   public frames: { [key: string]: IDrawable; } = {};\r\n   private _effectsDirty: boolean = false;\r\n\r\n   /**\r\n    * Access to the current drawing for the actor, this can be \r\n    * an [[Animation]], [[Sprite]], or [[Polygon]]. \r\n    * Set drawings with [[setDrawing]].\r\n    */\r\n   public currentDrawing: IDrawable = null;\r\n\r\n   /**\r\n    * Modify the current actor update pipeline. \r\n    */\r\n   public traits: IActorTrait[] = [];\r\n\r\n   /**\r\n    * Sets the color of the actor. A rectangle of this color will be \r\n    * drawn if no [[IDrawable]] is specified as the actors drawing.\r\n    * \r\n    * The default is `null` which prevents a rectangle from being drawn.\r\n    */\r\n   public color: Color;\r\n\r\n   /**\r\n    * Whether or not to enable the [[CapturePointer]] trait that propagates \r\n    * pointer events to this actor\r\n    */\r\n   public enableCapturePointer: boolean = false;\r\n\r\n   /**\r\n    * Configuration for [[CapturePointer]] trait\r\n    */\r\n   public capturePointer: Traits.ICapturePointerConfig = {\r\n      captureMoveEvents: false\r\n   };\r\n\r\n   private _zIndex: number = 0;\r\n   private _isKilled: boolean = false;\r\n   private _opacityFx = new Effects.Opacity(this.opacity);\r\n\r\n   /**\r\n    * @param x       The starting x coordinate of the actor\r\n    * @param y       The starting y coordinate of the actor\r\n    * @param width   The starting width of the actor\r\n    * @param height  The starting height of the actor\r\n    * @param color   The starting color of the actor. Leave null to draw a transparent actor. The opacity of the color will be used as the\r\n    * initial [[opacity]].\r\n    */\r\n   constructor(x?: number, y?: number, width?: number, height?: number, color?: Color) {\r\n      super();\r\n      this.pos.x = x || 0;\r\n      this.pos.y = y || 0;\r\n      this._width = width || 0;\r\n      this._height = height || 0;\r\n      if (color) {\r\n         this.color = color.clone();\r\n         // set default opacity of an actor to the color\r\n         this.opacity = color.a;\r\n      }\r\n      // Build default pipeline\r\n      //this.traits.push(new ex.Traits.EulerMovement());\r\n      // TODO: TileMaps should be converted to a collision area\r\n      this.traits.push(new Traits.TileMapCollisionDetection());\r\n      this.traits.push(new Traits.OffscreenCulling());\r\n      this.traits.push(new Traits.CapturePointer());\r\n\r\n      // Build the action queue\r\n      this.actionQueue = new ActionQueue(this);\r\n      this.actions = new ActionContext(this);\r\n\r\n      // default anchor is in the middle\r\n      this.anchor = new Vector(.5, .5);\r\n\r\n      // Initialize default collision area to be box\r\n      this.body.useBoxCollision();\r\n   }\r\n\r\n   /**\r\n    * This is called before the first update of the actor. This method is meant to be\r\n    * overridden. This is where initialization of child actors should take place.\r\n    */\r\n   public onInitialize(_engine: Engine): void {\r\n      // Override me\r\n   }\r\n\r\n   /**\r\n    * Gets wether the actor is Initialized \r\n    */\r\n   public get isInitialized(): boolean {\r\n      return this._isInitialized;\r\n   }\r\n\r\n   /**\r\n    * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\r\n    * @internal\r\n    */\r\n   public _initialize(engine: Engine) {\r\n      if (!this.isInitialized) {\r\n         this.onInitialize(engine);\r\n         this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\r\n         this._isInitialized = true;\r\n      }\r\n      for (var child of this.children) {\r\n         child._initialize(engine);\r\n      }\r\n   }\r\n\r\n   private _checkForPointerOptIn(eventName: string) {\r\n      if (eventName) {\r\n         const normalized = eventName.toLowerCase();\r\n         if (normalized === 'pointerup' || normalized === 'pointerdown' || normalized === 'pointermove') {\r\n            this.enableCapturePointer = true;\r\n            if (normalized === 'pointermove') {\r\n               this.capturePointer.captureMoveEvents = true;\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n   public on(eventName: Events.kill, handler: (event?: KillEvent) => void): void;\r\n   public on(eventName: Events.initialize, handler: (event?: InitializeEvent) => void): void;\r\n   public on(eventName: Events.preupdate, handler: (event?: PreUpdateEvent) => void): void;\r\n   public on(eventName: Events.postupdate, handler: (event?: PostUpdateEvent) => void): void;\r\n   public on(eventName: Events.predraw, handler: (event?: PreDrawEvent) => void): void;\r\n   public on(eventName: Events.postdraw, handler: (event?: PostDrawEvent) => void): void;\r\n   public on(eventName: Events.predebugdraw, handler: (event?: PreDebugDrawEvent) => void): void;\r\n   public on(eventName: Events.postdebugdraw, handler: (event?: PostDebugDrawEvent) => void): void;\r\n   public on(eventName: Events.pointerup, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: Events.pointerdown, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: Events.pointermove, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: Events.pointercancel, handler: (event?: PointerEvent) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void;\r\n   public on(eventName: string, handler: (event?: GameEvent<any>) => void): void {\r\n      this._checkForPointerOptIn(eventName);\r\n      this.eventDispatcher.on(eventName, handler);\r\n   }\r\n\r\n   /**\r\n    * If the current actor is a member of the scene, this will remove\r\n    * it from the scene graph. It will no longer be drawn or updated.\r\n    */\r\n   public kill() {\r\n      if (this.scene) {\r\n         this.emit('kill', new KillEvent(this));\r\n         this.scene.remove(this);\r\n         this._isKilled = true;\r\n      } else {\r\n         this.logger.warn('Cannot kill actor, it was never added to the Scene');\r\n      }\r\n   }\r\n\r\n   /**\r\n    * If the current actor is killed, it will now not be killed. \r\n    */\r\n   public unkill() {\r\n      this._isKilled = false;\r\n   }\r\n\r\n   /**\r\n    * Indicates wether the actor has been killed.\r\n    */\r\n   public isKilled(): boolean {\r\n      return this._isKilled;\r\n   }\r\n\r\n   /**\r\n    * Adds a child actor to this actor. All movement of the child actor will be\r\n    * relative to the parent actor. Meaning if the parent moves the child will\r\n    * move with it.\r\n    * @param actor The child actor to add\r\n    */\r\n   public add(actor: Actor) {\r\n      actor.collisionType = CollisionType.PreventCollision;\r\n      if (Util.addItemToArray(actor, this.children)) {\r\n         actor.parent = this;\r\n      }\r\n   }\r\n   /**\r\n    * Removes a child actor from this actor. \r\n    * @param actor The child actor to remove\r\n    */\r\n   public remove(actor: Actor) {\r\n      if (Util.removeItemToArray(actor, this.children)) {\r\n         actor.parent = null;\r\n      }\r\n   }\r\n   /**\r\n    * Sets the current drawing of the actor to the drawing corresponding to\r\n    * the key.\r\n    * @param key The key of the drawing\r\n    */\r\n   public setDrawing(key: string): void;\r\n   /**\r\n    * Sets the current drawing of the actor to the drawing corresponding to\r\n    * an `enum` key (e.g. `Animations.Left`)\r\n    * @param key The `enum` key of the drawing\r\n    */\r\n   public setDrawing(key: number): void;\r\n   public setDrawing(key: any): void {\r\n      key = key.toString();\r\n      if (this.currentDrawing !== this.frames[<string>key]) {\r\n         if (this.frames[key] != null) {\r\n            this.frames[key].reset();\r\n            this.currentDrawing = this.frames[key];\r\n         } else {\r\n            Logger.getInstance().error('the specified drawing key \\'' + key + '\\' does not exist');\r\n         }\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Adds a whole texture as the \"default\" drawing. Set a drawing using [[setDrawing]].\r\n    */\r\n   public addDrawing(texture: Texture): void;\r\n   /**\r\n    * Adds a whole sprite as the \"default\" drawing. Set a drawing using [[setDrawing]].\r\n    */\r\n   public addDrawing(sprite: Sprite): void;\r\n   /**\r\n    * Adds a drawing to the list of available drawings for an actor. Set a drawing using [[setDrawing]].\r\n    * @param key     The key to associate with a drawing for this actor\r\n    * @param drawing This can be an [[Animation]], [[Sprite]], or [[Polygon]]. \r\n    */\r\n   public addDrawing(key: any, drawing: IDrawable): void;\r\n   public addDrawing(): void {\r\n      if (arguments.length === 2) {\r\n         this.frames[<string>arguments[0]] = arguments[1];\r\n         if (!this.currentDrawing) {\r\n            this.currentDrawing = arguments[1];\r\n         }\r\n         this._effectsDirty = true;\r\n      } else {\r\n         if (arguments[0] instanceof Sprite) {\r\n            this.addDrawing('default', arguments[0]);\r\n         }\r\n         if (arguments[0] instanceof Texture) {\r\n            this.addDrawing('default', arguments[0].asSprite());\r\n         }\r\n      }\r\n   }\r\n\r\n\r\n   public get z(): number {\r\n      return this.getZIndex();\r\n   }\r\n\r\n   public set z(newZ: number) {\r\n      this.setZIndex(newZ);\r\n   }\r\n\r\n   /**\r\n    * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\r\n    * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n    */\r\n   public getZIndex(): number {\r\n      return this._zIndex;\r\n   }\r\n\r\n   /**\r\n    * Sets the z-index of an actor and updates it in the drawing list for the scene. \r\n    * The z-index determines the relative order an actor is drawn in.\r\n    * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n    * @param newIndex new z-index to assign\r\n    */\r\n   public setZIndex(newIndex: number) {\r\n      this.scene.cleanupDrawTree(this);\r\n      this._zIndex = newIndex;\r\n      this.scene.updateDrawTree(this);\r\n   }\r\n\r\n   /** \r\n    * Adds an actor to a collision group. Actors with no named collision groups are\r\n    * considered to be in every collision group.\r\n    *\r\n    * Once in a collision group(s) actors will only collide with other actors in \r\n    * that group.\r\n    *\r\n    * @param name The name of the collision group\r\n    */\r\n   public addCollisionGroup(name: string) {\r\n      this.collisionGroups.push(name);\r\n   }\r\n   /**\r\n    * Removes an actor from a collision group.\r\n    * @param name The name of the collision group\r\n    */\r\n   public removeCollisionGroup(name: string) {\r\n      var index = this.collisionGroups.indexOf(name);\r\n      if (index !== -1) {\r\n         this.collisionGroups.splice(index, 1);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Get the center point of an actor\r\n    */\r\n   public getCenter(): Vector {\r\n      return new Vector(this.pos.x + this.getWidth() / 2 - this.anchor.x * this.getWidth(),\r\n         this.pos.y + this.getHeight() / 2 - this.anchor.y * this.getHeight());\r\n   }\r\n   /**\r\n    * Gets the calculated width of an actor, factoring in scale\r\n    */\r\n   public getWidth() {\r\n      return this._width * this.getGlobalScale().x;\r\n   }\r\n   /**\r\n    * Sets the width of an actor, factoring in the current scale\r\n    */\r\n   public setWidth(width: number) {\r\n      this._width = width / this.scale.x;\r\n   }\r\n   /**\r\n    * Gets the calculated height of an actor, factoring in scale\r\n    */\r\n   public getHeight() {\r\n      return this._height * this.getGlobalScale().y;\r\n   }\r\n   /**\r\n    * Sets the height of an actor, factoring in the current scale\r\n    */\r\n   public setHeight(height: number) {\r\n      this._height = height / this.scale.y;\r\n   }\r\n   /**\r\n    * Gets the left edge of the actor\r\n    */\r\n   public getLeft() {\r\n      return this.getBounds().left;\r\n   }\r\n   /**\r\n    * Gets the right edge of the actor\r\n    */\r\n   public getRight() {\r\n      return this.getBounds().right;\r\n   }\r\n   /**\r\n    * Gets the top edge of the actor\r\n    */\r\n   public getTop() {\r\n      return this.getBounds().top;\r\n   }\r\n   /**\r\n    * Gets the bottom edge of the actor\r\n    */\r\n   public getBottom() {\r\n      return this.getBounds().bottom;\r\n   }\r\n\r\n   /**\r\n    * Gets this actor's rotation taking into account any parent relationships\r\n    * \r\n    * @returns Rotation angle in radians\r\n    */\r\n   public getWorldRotation(): number {\r\n      if (!this.parent) {\r\n         return this.rotation;\r\n      }\r\n\r\n      return this.rotation + this.parent.getWorldRotation();\r\n   }\r\n\r\n   /**\r\n    * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\r\n    * \r\n    * @returns Position in world coordinates\r\n    */\r\n   public getWorldPos(): Vector {\r\n      if (!this.parent) {\r\n         return this.pos.clone();\r\n      }\r\n\r\n      // collect parents                  \r\n      var parents: Actor[] = [];\r\n      var root: Actor = this;\r\n\r\n      parents.push(this);\r\n\r\n      // find parents\r\n      while (root.parent) {\r\n         root = root.parent;\r\n         parents.push(root);\r\n      }\r\n\r\n      // calculate position       \r\n      var x = parents.reduceRight((px, p) => {\r\n         if (p.parent) {\r\n            return px + (p.pos.x * p.getGlobalScale().x);\r\n         }\r\n         return px + p.pos.x;\r\n      }, 0);\r\n\r\n      var y = parents.reduceRight((py, p) => {\r\n         if (p.parent) {\r\n            return py + (p.pos.y * p.getGlobalScale().y);\r\n         }\r\n         return py + p.pos.y;\r\n      }, 0);\r\n\r\n      // rotate around root anchor\r\n      var ra = root.getWorldPos(); // 10, 10\r\n      var r = this.getWorldRotation();\r\n\r\n      return new Vector(x, y).rotate(r, ra);\r\n   }\r\n\r\n   /**\r\n    * Gets the global scale of the Actor\r\n    */\r\n   public getGlobalScale(): Vector {\r\n      if (!this.parent) {\r\n         return new Vector(this.scale.x, this.scale.y);\r\n      }\r\n\r\n      var parentScale = this.parent.getGlobalScale();\r\n      return new Vector(this.scale.x * parentScale.x, this.scale.y * parentScale.y);\r\n   }\r\n   /**\r\n    * Returns the actor's [[BoundingBox]] calculated for this instant in world space.\r\n    */\r\n   public getBounds() {\r\n      // todo cache bounding box\r\n      var anchor = this._getCalculatedAnchor();\r\n      var pos = this.getWorldPos();\r\n\r\n      return new BoundingBox(pos.x - anchor.x,\r\n         pos.y - anchor.y,\r\n         pos.x + this.getWidth() - anchor.x,\r\n         pos.y + this.getHeight() - anchor.y).rotate(this.rotation, pos);\r\n   }\r\n\r\n   /**\r\n    * Returns the actor's [[BoundingBox]] relative to the actors position.\r\n    */\r\n   public getRelativeBounds() {\r\n      // todo cache bounding box\r\n      var anchor = this._getCalculatedAnchor();\r\n      return new BoundingBox(-anchor.x,\r\n         -anchor.y,\r\n         this.getWidth() - anchor.x,\r\n         this.getHeight() - anchor.y).rotate(this.rotation);\r\n   }\r\n\r\n\r\n   /**\r\n    * Tests whether the x/y specified are contained in the actor\r\n    * @param x  X coordinate to test (in world coordinates)\r\n    * @param y  Y coordinate to test (in world coordinates)\r\n    * @param recurse checks whether the x/y are contained in any child actors (if they exist).\r\n    */\r\n   public contains(x: number, y: number, recurse: boolean = false): boolean {\r\n      var containment = this.getBounds().contains(new Vector(x, y));\r\n\r\n      if (recurse) {\r\n\r\n         return containment || this.children.some((child: Actor) => {\r\n            return child.contains(x, y, true);\r\n         });\r\n      }\r\n\r\n      return containment;\r\n   }\r\n\r\n   /**\r\n    * Returns the side of the collision based on the intersection \r\n    * @param intersect The displacement vector returned by a collision\r\n    */\r\n   public getSideFromIntersect(intersect: Vector) {\r\n      if (intersect) {\r\n         if (Math.abs(intersect.x) > Math.abs(intersect.y)) {\r\n            if (intersect.x < 0) {\r\n               return Side.Right;\r\n            }\r\n            return Side.Left;\r\n         } else {\r\n            if (intersect.y < 0) {\r\n               return Side.Bottom;\r\n            }\r\n            return Side.Top;\r\n         }\r\n      }\r\n      return Side.None;\r\n   }\r\n   /**\r\n    * Test whether the actor has collided with another actor, returns the side of the current actor that collided.\r\n    * @param actor The other actor to test\r\n    */\r\n   public collidesWithSide(actor: Actor): Side {\r\n      var separationVector = this.collides(actor);\r\n      if (!separationVector) {\r\n         return Side.None;\r\n      }\r\n      if (Math.abs(separationVector.x) > Math.abs(separationVector.y)) {\r\n         if (this.pos.x < actor.pos.x) {\r\n            return Side.Right;\r\n         } else {\r\n            return Side.Left;\r\n         }\r\n      } else {\r\n         if (this.pos.y < actor.pos.y) {\r\n            return Side.Bottom;\r\n         } else {\r\n            return Side.Top;\r\n         }\r\n      }\r\n   }\r\n   /**\r\n    * Test whether the actor has collided with another actor, returns the intersection vector on collision. Returns\r\n    * `null` when there is no collision;\r\n    * @param actor The other actor to test\r\n    */\r\n   public collides(actor: Actor): Vector {\r\n      var bounds = this.getBounds();\r\n      var otherBounds = actor.getBounds();\r\n      var intersect = bounds.collides(otherBounds);\r\n      return intersect;\r\n   }\r\n   /**\r\n    * Register a handler to fire when this actor collides with another in a specified group\r\n    * @param group The group name to listen for\r\n    * @param func The callback to fire on collision with another actor from the group. The callback is passed the other actor.\r\n    */\r\n   public onCollidesWith(group: string, func: (actor: Actor) => void) {\r\n      if (!this._collisionHandlers[group]) {\r\n         this._collisionHandlers[group] = [];\r\n      }\r\n      this._collisionHandlers[group].push(func);\r\n   }\r\n   public getCollisionHandlers(): { [key: string]: { (actor: Actor): void }[]; } {\r\n      return this._collisionHandlers;\r\n   }\r\n   /**\r\n    * Removes all collision handlers for this group on this actor\r\n    * @param group Group to remove all handlers for on this actor.\r\n    */\r\n   public removeCollidesWith(group: string) {\r\n      this._collisionHandlers[group] = [];\r\n   }\r\n   /**\r\n    * Returns true if the two actors are less than or equal to the distance specified from each other\r\n    * @param actor     Actor to test\r\n    * @param distance  Distance in pixels to test\r\n    */\r\n   public within(actor: Actor, distance: number): boolean {\r\n      return Math.sqrt(Math.pow(this.pos.x - actor.pos.x, 2) + Math.pow(this.pos.y - actor.pos.y, 2)) <= distance;\r\n   }\r\n\r\n   private _getCalculatedAnchor(): Vector {\r\n      return new Vector(this.getWidth() * this.anchor.x, this.getHeight() * this.anchor.y);\r\n   }\r\n\r\n   protected _reapplyEffects(drawing: IDrawable) {\r\n      drawing.removeEffect(this._opacityFx);\r\n      drawing.addEffect(this._opacityFx);\r\n   }\r\n\r\n   /**\r\n    * Perform euler integration at the specified time step\r\n    */\r\n   public integrate(delta: number) {\r\n      // Update placements based on linear algebra\r\n      var seconds = delta / 1000;\r\n\r\n      var totalAcc = this.acc.clone();\r\n      // Only active vanilla actors are affected by global acceleration\r\n      if (this.collisionType === CollisionType.Active) {\r\n         totalAcc.addEqual(Physics.acc);\r\n      }\r\n\r\n      this.vel.addEqual(totalAcc.scale(seconds));\r\n      this.pos.addEqual(this.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n\r\n      this.rx += this.torque * (1.0 / this.moi) * seconds;\r\n      this.rotation += this.rx * seconds;\r\n\r\n      this.scale.x += this.sx * delta / 1000;\r\n      this.scale.y += this.sy * delta / 1000;\r\n\r\n      // Update physics body\r\n      this.body.update();\r\n   }\r\n\r\n   /**\r\n    * Called by the Engine, updates the state of the actor\r\n    * @param engine The reference to the current game engine\r\n    * @param delta  The time elapsed since the last update in milliseconds\r\n    */\r\n   public update(engine: Engine, delta: number) {\r\n      this._initialize(engine);\r\n      this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n\r\n      // Update action queue\r\n      this.actionQueue.update(delta);\r\n\r\n      // Update color only opacity\r\n      if (this.color) {\r\n         this.color.a = this.opacity;\r\n      }\r\n\r\n      // calculate changing opacity\r\n      if (this.previousOpacity !== this.opacity) {\r\n         this.previousOpacity = this.opacity;\r\n         this._opacityFx.opacity = this.opacity;\r\n         this._effectsDirty = true;\r\n      }\r\n\r\n      // Capture old values before integration step updates them\r\n      this.oldVel.setTo(this.vel.x, this.vel.y);\r\n      this.oldPos.setTo(this.pos.x, this.pos.y);\r\n\r\n      // Run Euler integration\r\n      this.integrate(delta);\r\n\r\n      // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\r\n      for (var trait of this.traits) {\r\n         trait.update(this, engine, delta);\r\n      }\r\n\r\n      // Update child actors\r\n      for (var i = 0; i < this.children.length; i++) {         \r\n         this.children[i].update(engine, delta);\r\n      }\r\n\r\n      // TODO: Obsolete `update` event on Actor\r\n      this.eventDispatcher.emit('update', new PostUpdateEvent(engine, delta, this));\r\n      this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n   }\r\n   /**\r\n    * Called by the Engine, draws the actor to the screen\r\n    * @param ctx   The rendering context\r\n    * @param delta The time since the last draw in milliseconds\r\n    */\r\n   public draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n      ctx.save();\r\n      ctx.translate(this.pos.x, this.pos.y);\r\n      ctx.rotate(this.rotation);\r\n      ctx.scale(this.scale.x, this.scale.y);\r\n\r\n      // translate canvas by anchor offset\r\n      ctx.save();\r\n      ctx.translate(-(this._width * this.anchor.x), -(this._height * this.anchor.y));\r\n\r\n      this.emit('predraw', new PreDrawEvent(ctx, delta, this));\r\n\r\n      if (this.currentDrawing) {\r\n         var drawing = this.currentDrawing;\r\n         // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula          \r\n         var offsetX = (this._width - drawing.naturalWidth * drawing.scale.x) * this.anchor.x;\r\n         var offsetY = (this._height - drawing.naturalHeight * drawing.scale.y) * this.anchor.y;\r\n\r\n         if (this._effectsDirty) {\r\n            this._reapplyEffects(this.currentDrawing);\r\n            this._effectsDirty = false;\r\n         }\r\n\r\n         this.currentDrawing.draw(ctx, offsetX, offsetY);\r\n      } else {\r\n         if (this.color) {\r\n            ctx.fillStyle = this.color.toString();\r\n            ctx.fillRect(0, 0, this._width, this._height);\r\n         }\r\n      }\r\n      ctx.restore();\r\n\r\n      // Draw child actors\r\n      for (var i = 0; i < this.children.length; i++) {\r\n         if (this.children[i].visible) {\r\n            this.children[i].draw(ctx, delta);\r\n         }\r\n      }\r\n\r\n      this.emit('postdraw', new PostDrawEvent(ctx, delta, this));\r\n      ctx.restore();\r\n   }\r\n\r\n   /**\r\n    * Called by the Engine, draws the actors debugging to the screen\r\n    * @param ctx The rendering context\r\n    */\r\n   /* istanbul ignore next */\r\n   public debugDraw(ctx: CanvasRenderingContext2D) {\r\n      this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n\r\n      this.body.debugDraw(ctx);\r\n\r\n      // Draw actor bounding box\r\n      var bb = this.getBounds();\r\n      bb.debugDraw(ctx);\r\n\r\n\r\n      // Draw actor Id\r\n      ctx.fillText('id: ' + this.id, bb.left + 3, bb.top + 10);\r\n\r\n      // Draw actor anchor Vector\r\n      ctx.fillStyle = Color.Yellow.toString();\r\n      ctx.beginPath();\r\n      ctx.arc(this.getWorldPos().x, this.getWorldPos().y, 3, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n\r\n      // Culling Box debug draw\r\n      for (var j = 0; j < this.traits.length; j++) {\r\n         if (this.traits[j] instanceof Traits.OffscreenCulling) {\r\n            (<Traits.OffscreenCulling>this.traits[j]).cullingBox.debugDraw(ctx);\r\n         }\r\n      }\r\n\r\n      // Unit Circle debug draw\r\n      ctx.strokeStyle = Color.Yellow.toString();\r\n      ctx.beginPath();\r\n      var radius = Math.min(this.getWidth(), this.getHeight());\r\n      ctx.arc(this.getWorldPos().x, this.getWorldPos().y, radius, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.stroke();\r\n      var ticks: { [key: string]: number } = {\r\n         '0 Pi': 0,\r\n         'Pi/2': Math.PI / 2,\r\n         'Pi': Math.PI,\r\n         '3/2 Pi': 3 * Math.PI / 2\r\n      };\r\n\r\n      var oldFont = ctx.font;\r\n      for (var tick in ticks) {\r\n         ctx.fillStyle = Color.Yellow.toString();\r\n         ctx.font = '14px';\r\n         ctx.textAlign = 'center';\r\n         ctx.fillText(tick, this.getWorldPos().x + Math.cos(ticks[tick]) * (radius + 10),\r\n            this.getWorldPos().y + Math.sin(ticks[tick]) * (radius + 10));\r\n      }\r\n\r\n      ctx.font = oldFont;\r\n\r\n      // Draw child actors\r\n      for (var i = 0; i < this.children.length; i++) {\r\n         this.children[i].debugDraw(ctx);\r\n      }\r\n\r\n      this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n   }\r\n}\r\n\r\n/**\r\n * An enum that describes the types of collisions actors can participate in\r\n */\r\nexport enum CollisionType {\r\n   /**\r\n    * Actors with the `PreventCollision` setting do not participate in any\r\n    * collisions and do not raise collision events.\r\n    */\r\n   PreventCollision,\r\n   /**\r\n    * Actors with the `Passive` setting only raise collision events, but are not\r\n    * influenced or moved by other actors and do not influence or move other actors.\r\n    */\r\n   Passive,\r\n   /**\r\n    * Actors with the `Active` setting raise collision events and participate\r\n    * in collisions with other actors and will be push or moved by actors sharing\r\n    * the `Active` or `Fixed` setting.\r\n    */\r\n   Active,\r\n   /**\r\n    * Actors with the `Elastic` setting will behave the same as `Active`, except that they will\r\n    * \"bounce\" in the opposite direction given their velocity dx/dy. This is a naive implementation meant for\r\n    * prototyping, for a more robust elastic collision listen to the \"collision\" event and perform your custom logic.\r\n    * @obsolete This behavior will be handled by a future physics system\r\n    */\r\n   Elastic,\r\n   /**\r\n    * Actors with the `Fixed` setting raise collision events and participate in\r\n    * collisions with other actors. Actors with the `Fixed` setting will not be\r\n    * pushed or moved by other actors sharing the `Fixed`. Think of Fixed\r\n    * actors as \"immovable/onstoppable\" objects. If two `Fixed` actors meet they will\r\n    * not be pushed or moved by each other, they will not interact except to throw\r\n    * collision events.\r\n    */\r\n   Fixed\r\n}","import { RotationType } from './RotationType';\r\n\r\nimport { Actor } from '../Actor';\r\nimport { Vector } from '../Algebra';\r\nimport { Logger } from '../Util/Log';\r\nimport * as Util from '../Util/Util';\r\n\r\n/**\r\n * Used for implementing actions for the [[ActionContext|Action API]].\r\n */\r\nexport interface IAction {\r\n   update(delta: number): void;\r\n   isComplete(actor: Actor): boolean;\r\n   reset(): void;\r\n   stop(): void;\r\n}\r\n\r\nexport class EaseTo implements IAction {\r\n   private _currentLerpTime: number = 0;\r\n   private _lerpDuration: number = 1 * 1000; // 1 second\r\n   private _lerpStart: Vector = new Vector(0, 0);\r\n   private _lerpEnd: Vector = new Vector(0, 0);\r\n   private _initialized: boolean = false;\r\n   private _stopped: boolean = false;\r\n   private _distance: number = 0;\r\n   constructor(public actor: Actor, \r\n               x: number, \r\n               y: number, \r\n               duration: number, \r\n               public easingFcn: (currentTime: number, startValue: number, endValue: number, duration: number) => number) {\r\n      this._lerpDuration = duration;\r\n      this._lerpEnd = new Vector(x, y);\r\n   }\r\n   private _initialize() {\r\n      this._lerpStart = new Vector(this.actor.pos.x, this.actor.pos.y);\r\n      this._currentLerpTime = 0;\r\n      this._distance = this._lerpStart.distance(this._lerpEnd);\r\n   }\r\n\r\n   public update(delta: number): void {\r\n      if (!this._initialized) {\r\n         this._initialize();\r\n         this._initialized = true;\r\n      }\r\n\r\n      var newX = this.actor.pos.x;\r\n      var newY = this.actor.pos.y;\r\n      if (this._currentLerpTime < this._lerpDuration) {\r\n\r\n         if (this._lerpEnd.x < this._lerpStart.x) {\r\n            newX = this._lerpStart.x - (this.easingFcn(this._currentLerpTime, \r\n                                                         this._lerpEnd.x, \r\n                                                         this._lerpStart.x, \r\n                                                         this._lerpDuration) - this._lerpEnd.x);\r\n         } else {\r\n            newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n         }\r\n\r\n         if (this._lerpEnd.y < this._lerpStart.y) {\r\n            newY = this._lerpStart.y - (this.easingFcn(this._currentLerpTime, \r\n                                                         this._lerpEnd.y, \r\n                                                         this._lerpStart.y, \r\n                                                         this._lerpDuration) - this._lerpEnd.y);\r\n         } else {\r\n            newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n         }\r\n         this.actor.pos.x = newX;\r\n         this.actor.pos.y = newY;\r\n\r\n         this._currentLerpTime += delta;\r\n\r\n      } else {\r\n         this.actor.pos.x = this._lerpEnd.x;\r\n         this.actor.pos.y = this._lerpEnd.y;\r\n         //this._lerpStart = null;\r\n         //this._lerpEnd = null;\r\n         //this._currentLerpTime = 0;\r\n      }\r\n\r\n   }\r\n   public isComplete(actor: Actor): boolean {\r\n      return this._stopped || (new Vector(actor.pos.x, actor.pos.y)).distance(this._lerpStart) >= this._distance;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._initialized = false;\r\n   }\r\n   public stop(): void {\r\n      this._stopped = true;\r\n   }\r\n}\r\n\r\nexport class MoveTo implements IAction {\r\n   private _actor: Actor;\r\n   public x: number;\r\n   public y: number;\r\n   private _start: Vector;\r\n   private _end: Vector;\r\n   private _dir: Vector;\r\n   private _speed: number;\r\n   private _distance: number;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   constructor(actor: Actor, destx: number, desty: number, speed: number) {\r\n      this._actor = actor;\r\n      this._end = new Vector(destx, desty);\r\n      this._speed = speed;\r\n   }\r\n\r\n   public update(_delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n         this._distance = this._start.distance(this._end);\r\n         this._dir = this._end.sub(this._start).normalize();\r\n      }\r\n      var m = this._dir.scale(this._speed);\r\n      this._actor.vel.x = m.x;\r\n      this._actor.vel.y = m.y;\r\n      \r\n      if (this.isComplete(this._actor)) {\r\n         this._actor.pos.x = this._end.x;\r\n         this._actor.pos.y = this._end.y;\r\n      }\r\n   }\r\n\r\n   public isComplete(actor: Actor): boolean {\r\n      return this._stopped || (new Vector(actor.pos.x, actor.pos.y)).distance(this._start) >= this._distance;\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.vel.y = 0;\r\n      this._actor.vel.x = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class MoveBy implements IAction {\r\n   private _actor: Actor;\r\n   public x: number;\r\n   public y: number;\r\n   private _distance: number;\r\n   private _speed: number;\r\n   private _time: number;\r\n\r\n   private _start: Vector;\r\n   private _end: Vector;\r\n   private _dir: Vector;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   constructor(actor: Actor, destx: number, desty: number, time: number) {\r\n      this._actor = actor;\r\n      this._end = new Vector(destx, desty);\r\n      if (time <= 0) {\r\n         Logger.getInstance().error('Attempted to moveBy time less than or equal to zero : ' + time);\r\n         throw new Error('Cannot move in time <= 0');\r\n      }\r\n      this._time = time;\r\n\r\n   }\r\n\r\n   public update(_delta: number) {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n         this._distance = this._start.distance(this._end);\r\n         this._dir = this._end.sub(this._start).normalize();\r\n         this._speed = this._distance / (this._time / 1000);\r\n      }\r\n\r\n      var m = this._dir.scale(this._speed);\r\n      this._actor.vel.x = m.x;\r\n      this._actor.vel.y = m.y;\r\n\r\n      \r\n      if (this.isComplete(this._actor)) {\r\n         this._actor.pos.x = this._end.x;\r\n         this._actor.pos.y = this._end.y;\r\n         this._actor.vel.y = 0;\r\n         this._actor.vel.x = 0;\r\n      }\r\n   }\r\n\r\n   public isComplete(actor: Actor): boolean {\r\n      return this._stopped || (new Vector(actor.pos.x, actor.pos.y)).distance(this._start) >= this._distance;\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.vel.y = 0;\r\n      this._actor.vel.x = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class Follow implements IAction {\r\n   private _actor : Actor;\r\n   private _actorToFollow : Actor;\r\n   public x : number;\r\n   public y : number;\r\n   private _current : Vector;\r\n   private _end : Vector;\r\n   private _dir : Vector;\r\n   private _speed : number;\r\n   private _maximumDistance : number;\r\n   private _distanceBetween : number;\r\n   private _started = false;\r\n   private _stopped = false;\r\n\r\n   constructor(actor: Actor, actorToFollow : Actor, followDistance? : number) {\r\n      this._actor = actor;\r\n      this._actorToFollow = actorToFollow;\r\n      this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n      this._end = new Vector(actorToFollow.pos.x, actorToFollow.pos.y);\r\n      this._maximumDistance = (followDistance !== undefined) ? followDistance : this._current.distance(this._end);\r\n      this._speed = 0;\r\n   }\r\n\r\n   public update(_delta: number) : void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._distanceBetween = this._current.distance(this._end);\r\n         this._dir = this._end.sub(this._current).normalize();\r\n      }\r\n      \r\n      var actorToFollowSpeed = Math.sqrt(Math.pow(this._actorToFollow.vel.x, 2) + Math.pow(this._actorToFollow.vel.y, 2));\r\n      if (actorToFollowSpeed !== 0) {\r\n         this._speed = actorToFollowSpeed;\r\n      }\r\n      this._current.x = this._actor.pos.x;\r\n      this._current.y = this._actor.pos.y;\r\n\r\n      this._end.x = this._actorToFollow.pos.x;\r\n      this._end.y = this._actorToFollow.pos.y;\r\n      this._distanceBetween = this._current.distance(this._end);\r\n      this._dir = this._end.sub(this._current).normalize();\r\n\r\n      if (this._distanceBetween >= this._maximumDistance) {\r\n         var m = this._dir.scale(this._speed);\r\n         this._actor.vel.x = m.x;\r\n         this._actor.vel.y = m.y;\r\n      } else {\r\n         this._actor.vel.x = 0;\r\n         this._actor.vel.y = 0;\r\n      }\r\n\r\n      if (this.isComplete()) {\r\n         // TODO this should never occur\r\n         this._actor.pos.x = this._end.x;\r\n         this._actor.pos.y = this._end.y;\r\n         this._actor.vel.y = 0;\r\n         this._actor.vel.x = 0;\r\n      }\r\n   }\r\n\r\n   public stop(): void {\r\n         this._actor.vel.y = 0;\r\n         this._actor.vel.x = 0;\r\n         this._stopped = true;\r\n   }\r\n\r\n   public isComplete() : boolean {\r\n      // the actor following should never stop unless specified to do so\r\n      return this._stopped;\r\n   }\r\n\r\n   public reset() : void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class Meet implements IAction {\r\n   private _actor : Actor;\r\n   private _actorToMeet : Actor;\r\n   public x : number;\r\n   public y : number;\r\n   private _current : Vector;\r\n   private _end : Vector;\r\n   private _dir : Vector;\r\n   private _speed : number;\r\n   private _distanceBetween : number;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   private _speedWasSpecified = false;\r\n\r\n   constructor(actor: Actor, actorToMeet : Actor, speed? : number) {\r\n      this._actor = actor;\r\n      this._actorToMeet = actorToMeet;\r\n      this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\r\n      this._end = new Vector(actorToMeet.pos.x, actorToMeet.pos.y);\r\n      this._speed = speed || 0;\r\n\r\n      if (speed !== undefined) {\r\n         this._speedWasSpecified = true;\r\n      }\r\n   }\r\n\r\n   public update(_delta: number) : void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._distanceBetween = this._current.distance(this._end);\r\n         this._dir = this._end.sub(this._current).normalize();\r\n      }\r\n\r\n      var actorToMeetSpeed = Math.sqrt(Math.pow(this._actorToMeet.vel.x, 2) + Math.pow(this._actorToMeet.vel.y, 2));\r\n      if ((actorToMeetSpeed !== 0) && (!this._speedWasSpecified)) {\r\n         this._speed = actorToMeetSpeed;\r\n      }\r\n      this._current.x = this._actor.pos.x;\r\n      this._current.y = this._actor.pos.y;\r\n\r\n      this._end.x = this._actorToMeet.pos.x;\r\n      this._end.y = this._actorToMeet.pos.y;\r\n      this._distanceBetween = this._current.distance(this._end);\r\n      this._dir = this._end.sub(this._current).normalize();\r\n\r\n      var m = this._dir.scale(this._speed);\r\n      this._actor.vel.x = m.x;\r\n      this._actor.vel.y = m.y;\r\n\r\n      if (this.isComplete()) {\r\n         \r\n         this._actor.pos.x = this._end.x;\r\n         this._actor.pos.y = this._end.y;\r\n         this._actor.vel.y = 0;\r\n         this._actor.vel.x = 0;\r\n      }\r\n   }\r\n\r\n   public isComplete() : boolean {\r\n      return this._stopped || (this._distanceBetween <= 1);\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.vel.y = 0;\r\n      this._actor.vel.x = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset() : void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class RotateTo implements IAction {\r\n   private _actor: Actor;\r\n   public x: number;\r\n   public y: number;\r\n   private _start: number;\r\n   private _end: number;\r\n   private _speed: number;\r\n   private _rotationType: RotationType;\r\n   private _direction: number;\r\n   private _distance: number;\r\n   private _shortDistance: number;\r\n   private _longDistance: number;\r\n   private _shortestPathIsPositive: boolean;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   constructor(actor: Actor, angleRadians: number, speed: number, rotationType?: RotationType) {\r\n      this._actor = actor;\r\n      this._end = angleRadians;\r\n      this._speed = speed;\r\n      this._rotationType = rotationType || RotationType.ShortestPath;\r\n   }\r\n\r\n   public update(_delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._start = this._actor.rotation;\r\n         var distance1 = Math.abs(this._end - this._start);\r\n         var distance2 = Util.TwoPI - distance1;\r\n         if (distance1 > distance2) {\r\n            this._shortDistance = distance2;\r\n            this._longDistance = distance1;\r\n         } else {\r\n            this._shortDistance = distance1;\r\n            this._longDistance = distance2;\r\n         }\r\n\r\n         this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\r\n\r\n         switch (this._rotationType) {\r\n            case RotationType.ShortestPath:\r\n               this._distance = this._shortDistance;\r\n               if (this._shortestPathIsPositive) {\r\n                  this._direction = 1;\r\n               } else {\r\n                  this._direction = -1;\r\n               }\r\n               break;\r\n            case RotationType.LongestPath:\r\n               this._distance = this._longDistance;\r\n               if (this._shortestPathIsPositive) {\r\n                  this._direction = -1;\r\n               } else {\r\n                  this._direction = 1;\r\n               }\r\n               break;\r\n            case RotationType.Clockwise:\r\n               this._direction = 1;\r\n               if (this._shortestPathIsPositive) {\r\n                  this._distance = this._shortDistance;\r\n               } else {\r\n                  this._distance = this._longDistance;\r\n               }\r\n               break;\r\n            case RotationType.CounterClockwise:\r\n               this._direction = -1;\r\n               if (!this._shortestPathIsPositive) {\r\n                  this._distance = this._shortDistance;\r\n               } else {\r\n                  this._distance = this._longDistance;\r\n               }\r\n               break;\r\n         }\r\n      }\r\n\r\n      this._actor.rx = this._direction * this._speed;\r\n      \r\n      if (this.isComplete()) {\r\n         this._actor.rotation = this._end;\r\n         this._actor.rx = 0;\r\n         this._stopped = true;\r\n      }\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      var distanceTravelled = Math.abs(this._actor.rotation - this._start);\r\n      return this._stopped || (distanceTravelled >= Math.abs(this._distance));\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.rx = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class RotateBy implements IAction {\r\n   private _actor: Actor;\r\n   public x: number;\r\n   public y: number;\r\n   private _start: number;\r\n   private _end: number;\r\n   private _speed: number;\r\n   private _time: number;\r\n   private _rotationType: RotationType;\r\n   private _direction: number;\r\n   private _distance: number;\r\n   private _shortDistance: number;\r\n   private _longDistance: number;\r\n   private _shortestPathIsPositive: boolean;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   constructor(actor: Actor, angleRadians: number, time: number, rotationType?: RotationType) {\r\n      this._actor = actor;\r\n      this._end = angleRadians;\r\n      this._time = time;\r\n      this._rotationType = rotationType || RotationType.ShortestPath;\r\n   }\r\n\r\n   public update(_delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._start = this._actor.rotation;\r\n         var distance1 = Math.abs(this._end - this._start);\r\n         var distance2 = Util.TwoPI - distance1;\r\n         if (distance1 > distance2) {\r\n            this._shortDistance = distance2;\r\n            this._longDistance = distance1;\r\n         } else {\r\n            this._shortDistance = distance1;\r\n            this._longDistance = distance2;\r\n         }\r\n\r\n         this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\r\n\r\n         switch (this._rotationType) {\r\n            case RotationType.ShortestPath:\r\n               this._distance = this._shortDistance;\r\n               if (this._shortestPathIsPositive) {\r\n                  this._direction = 1;\r\n               } else {\r\n                  this._direction = -1;\r\n               }\r\n               break;\r\n            case RotationType.LongestPath:\r\n               this._distance = this._longDistance;\r\n               if (this._shortestPathIsPositive) {\r\n                  this._direction = -1;\r\n               } else {\r\n                  this._direction = 1;\r\n               }\r\n               break;\r\n            case RotationType.Clockwise:\r\n               this._direction = 1;\r\n               if (this._shortDistance >= 0) {\r\n                  this._distance = this._shortDistance;\r\n               } else {\r\n                  this._distance = this._longDistance;\r\n               }\r\n               break;\r\n            case RotationType.CounterClockwise:\r\n               this._direction = -1;\r\n               if (this._shortDistance <= 0) {\r\n                  this._distance = this._shortDistance;\r\n               } else {\r\n                  this._distance = this._longDistance;\r\n               }\r\n               break;\r\n         }\r\n         this._speed = Math.abs(this._distance / this._time * 1000);\r\n      }\r\n\r\n      this._actor.rx = this._direction * this._speed;\r\n\r\n      \r\n      if (this.isComplete()) {\r\n         this._actor.rotation = this._end;\r\n         this._actor.rx = 0;\r\n         this._stopped = true;\r\n      }\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      var distanceTravelled = Math.abs(this._actor.rotation - this._start);\r\n      return this._stopped || (distanceTravelled >= Math.abs(this._distance));\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.rx = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class ScaleTo implements IAction {\r\n   private _actor: Actor;\r\n   public x: number;\r\n   public y: number;\r\n   private _startX: number;\r\n   private _startY: number;\r\n   private _endX: number;\r\n   private _endY: number;\r\n   private _speedX: number;\r\n   private _speedY: number;\r\n   private _distanceX: number;\r\n   private _distanceY: number;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   constructor(actor: Actor, scaleX: number, scaleY: number, speedX: number, speedY: number) {\r\n      this._actor = actor;\r\n      this._endX = scaleX;\r\n      this._endY = scaleY;\r\n      this._speedX = speedX;\r\n      this._speedY = speedY;\r\n\r\n   }\r\n\r\n   public update(_delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._startX = this._actor.scale.x;\r\n         this._startY = this._actor.scale.y;\r\n         this._distanceX = Math.abs(this._endX - this._startX);\r\n         this._distanceY = Math.abs(this._endY - this._startY);\r\n      }\r\n\r\n      if (!(Math.abs(this._actor.scale.x - this._startX) >= this._distanceX)) {\r\n         var directionX = this._endY < this._startY ? -1 : 1;\r\n         this._actor.sx = this._speedX * directionX;\r\n      } else {\r\n         this._actor.sx = 0;\r\n      }\r\n      \r\n      if (!(Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)) {\r\n         var directionY = this._endY < this._startY ? -1 : 1;\r\n         this._actor.sy = this._speedY * directionY;\r\n      } else {\r\n         this._actor.sy = 0;\r\n      }\r\n\r\n      \r\n      if (this.isComplete()) {\r\n         this._actor.scale.x = this._endX;\r\n         this._actor.scale.y = this._endY;\r\n         this._actor.sx = 0;\r\n         this._actor.sy = 0;\r\n      }\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped || ((Math.abs(this._actor.scale.y - this._startX) >= this._distanceX) && \r\n                                 (Math.abs(this._actor.scale.y - this._startY) >= this._distanceY));\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.sx = 0;\r\n      this._actor.sy = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class ScaleBy implements IAction {\r\n   private _actor: Actor;\r\n   public x: number;\r\n   public y: number;\r\n   private _startX: number;\r\n   private _startY: number;\r\n   private _endX: number;\r\n   private _endY: number;\r\n   private _time: number;\r\n   private _distanceX: number;\r\n   private _distanceY: number;\r\n   private _started = false;\r\n   private _stopped = false;\r\n   private _speedX: number;\r\n   private _speedY: number;\r\n   constructor(actor: Actor, scaleX: number, scaleY: number, time: number) {\r\n      this._actor = actor;\r\n      this._endX = scaleX;\r\n      this._endY = scaleY;\r\n      this._time = time;\r\n      this._speedX = (this._endX - this._actor.scale.x) / time * 1000;\r\n      this._speedY = (this._endY - this._actor.scale.y) / time * 1000;\r\n   }\r\n\r\n   public update(_delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n         this._startX = this._actor.scale.x;\r\n         this._startY = this._actor.scale.y;\r\n         this._distanceX = Math.abs(this._endX - this._startX);\r\n         this._distanceY = Math.abs(this._endY - this._startY);\r\n      }\r\n      var directionX = this._endX < this._startX ? -1 : 1;\r\n      var directionY = this._endY < this._startY ? -1 : 1;\r\n      this._actor.sx = this._speedX * directionX;\r\n      this._actor.sy = this._speedY * directionY;\r\n\r\n      \r\n      if (this.isComplete()) {\r\n         this._actor.scale.x = this._endX;\r\n         this._actor.scale.y = this._endY;\r\n         this._actor.sx = 0;\r\n         this._actor.sy = 0;\r\n      }\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped || ((Math.abs(this._actor.scale.x - this._startX) >= this._distanceX) && \r\n                                 (Math.abs(this._actor.scale.y - this._startY) >= this._distanceY));\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.sx = 0;\r\n      this._actor.sy = 0;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class Delay implements IAction {\r\n   public x: number;\r\n   public y: number;\r\n   private _actor: Actor;\r\n   private _elapsedTime: number = 0;\r\n   private _delay: number;\r\n   private _started: boolean = false;\r\n   private _stopped = false;\r\n   constructor(actor: Actor, delay: number) {\r\n      this._actor = actor;\r\n      this._delay = delay;\r\n   }\r\n\r\n   public update(delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n      }\r\n\r\n      this.x = this._actor.pos.x;\r\n      this.y = this._actor.pos.y;\r\n\r\n      this._elapsedTime += delta;\r\n   }\r\n\r\n   isComplete(): boolean {\r\n      return this._stopped || (this._elapsedTime >= this._delay);\r\n   }\r\n\r\n   public stop(): void {\r\n      this._stopped = true;\r\n   }\r\n\r\n   reset(): void {\r\n      this._elapsedTime = 0;\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class Blink implements IAction {\r\n   private _timeVisible: number = 0;\r\n   private _timeNotVisible: number = 0;\r\n   private _elapsedTime: number = 0;\r\n   private _totalTime: number = 0;\r\n   private _actor: Actor;\r\n   private _duration: number;\r\n   private _stopped: boolean = false;\r\n   private _started: boolean = false;\r\n   constructor(actor: Actor, timeVisible: number, timeNotVisible: number, numBlinks: number = 1) {\r\n      this._actor = actor;\r\n      this._timeVisible = timeVisible;\r\n      this._timeNotVisible = timeNotVisible;\r\n      this._duration = (timeVisible + timeNotVisible) * numBlinks;\r\n   }\r\n\r\n   public update(delta: number): void {\r\n      if (!this._started) {\r\n         this._started = true;\r\n      }\r\n\r\n      this._elapsedTime += delta;\r\n      this._totalTime += delta;\r\n      if (this._actor.visible && this._elapsedTime >= this._timeVisible) {\r\n         this._actor.visible = false;\r\n         this._elapsedTime = 0;\r\n      }\r\n\r\n      if (!this._actor.visible && this._elapsedTime >= this._timeNotVisible) {\r\n         this._actor.visible = true;\r\n         this._elapsedTime = 0;\r\n      }\r\n\r\n      if (this.isComplete()) {\r\n         this._actor.visible = true;\r\n      }\r\n\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped || (this._totalTime >= this._duration);\r\n   }\r\n\r\n   public stop(): void {\r\n      this._actor.visible = true;\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset() {\r\n      this._started = false;\r\n      this._elapsedTime = 0;\r\n      this._totalTime = 0;\r\n   }\r\n}\r\n\r\nexport class Fade implements IAction {\r\n   public x: number;\r\n   public y: number;\r\n\r\n   private _actor: Actor;\r\n   private _endOpacity: number;\r\n   private _speed: number;\r\n   private _multiplier: number = 1;\r\n   private _started = false;\r\n   private _stopped = false;\r\n\r\n   constructor(actor: Actor, endOpacity: number, speed: number) {\r\n      this._actor = actor;\r\n      this._endOpacity = endOpacity;\r\n      this._speed = speed;               \r\n   }\r\n\r\n   public update(delta: number): void {         \r\n      if (!this._started) {\r\n         this._started = true;\r\n\r\n         // determine direction when we start\r\n         if (this._endOpacity < this._actor.opacity) {\r\n            this._multiplier = -1;\r\n         } else {\r\n            this._multiplier = 1;\r\n         }\r\n      }\r\n      \r\n      if (this._speed > 0) {\r\n         this._actor.opacity += this._multiplier * (Math.abs(this._actor.opacity - this._endOpacity) * delta) / this._speed;\r\n      }\r\n\r\n      this._speed -= delta;\r\n\r\n      if (this.isComplete()) {\r\n         this._actor.opacity = this._endOpacity;\r\n      }\r\n\r\n      Logger.getInstance().debug('[Action fade] Actor opacity:', this._actor.opacity);\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped || (Math.abs(this._actor.opacity - this._endOpacity) < 0.05);\r\n   }\r\n\r\n   public stop(): void {\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._started = false;\r\n   }\r\n}\r\n\r\nexport class Die implements IAction {\r\n   public x: number;\r\n   public y: number;\r\n\r\n   private _actor: Actor;\r\n   private _stopped = false;\r\n\r\n   constructor(actor: Actor) {\r\n      this._actor = actor;\r\n   }\r\n\r\n   public update(_delta: number): void {\r\n      this._actor.actionQueue.clearActions();\r\n      this._actor.kill();\r\n      this._stopped = true;\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped;\r\n   }\r\n\r\n   public stop(): void { return; }\r\n\r\n   public reset(): void { return; }\r\n}\r\n\r\nexport class CallMethod implements IAction {\r\n   public x: number;\r\n   public y: number;\r\n   private _method: () => any = null;\r\n   private _actor: Actor = null;\r\n   private _hasBeenCalled: boolean = false;\r\n   constructor(actor: Actor, method: () => any) {\r\n      this._actor = actor;\r\n      this._method = method;\r\n   }\r\n\r\n   public update(_delta: number) {\r\n      this._method.call(this._actor);\r\n      this._hasBeenCalled = true;\r\n   }\r\n   public isComplete() {\r\n      return this._hasBeenCalled;\r\n   }\r\n   public reset() {\r\n      this._hasBeenCalled = false;\r\n   }\r\n   public stop() {\r\n      this._hasBeenCalled = true;\r\n   }\r\n}\r\n\r\nexport class Repeat implements IAction {\r\n   public x: number;\r\n   public y: number;\r\n   private _actor: Actor;\r\n   private _actionQueue: ActionQueue;\r\n   private _repeat: number;\r\n   private _originalRepeat: number;\r\n   private _stopped: boolean = false;\r\n   constructor(actor: Actor, repeat: number, actions: IAction[]) {\r\n      this._actor = actor;\r\n      this._actionQueue = new ActionQueue(actor);\r\n      this._repeat = repeat;\r\n      this._originalRepeat = repeat;\r\n\r\n      var i = 0, len = actions.length;\r\n      for (i; i < len; i++) {\r\n         actions[i].reset();\r\n         this._actionQueue.add(actions[i]);\r\n      };\r\n   }\r\n\r\n   public update(delta: number): void {\r\n      this.x = this._actor.pos.x;\r\n      this.y = this._actor.pos.y;\r\n      if (!this._actionQueue.hasNext()) {\r\n         this._actionQueue.reset();\r\n         this._repeat--;\r\n      }\r\n      this._actionQueue.update(delta);\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped || (this._repeat <= 0);\r\n   }\r\n\r\n   public stop(): void {\r\n      this._stopped = true;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._repeat = this._originalRepeat;\r\n   }\r\n}\r\n\r\nexport class RepeatForever implements IAction {\r\n   public x: number;\r\n   public y: number;\r\n   private _actor: Actor;\r\n   private _actionQueue: ActionQueue;\r\n   private _stopped: boolean = false;\r\n   constructor(actor: Actor, actions: IAction[]) {\r\n      this._actor = actor;\r\n      this._actionQueue = new ActionQueue(actor);\r\n\r\n      var i = 0, len = actions.length;\r\n      for (i; i < len; i++) {\r\n         actions[i].reset();\r\n         this._actionQueue.add(actions[i]);\r\n      };\r\n   }\r\n\r\n   public update(delta: number): void {\r\n      this.x = this._actor.pos.x;\r\n      this.y = this._actor.pos.y;\r\n      if (this._stopped) {\r\n         return;\r\n      }\r\n\r\n\r\n      if (!this._actionQueue.hasNext()) {\r\n         this._actionQueue.reset();\r\n      }\r\n\r\n      this._actionQueue.update(delta);\r\n\r\n   }\r\n\r\n   public isComplete(): boolean {\r\n      return this._stopped;\r\n   }\r\n\r\n   public stop(): void {\r\n      this._stopped = true;\r\n      this._actionQueue.clearActions();\r\n   }\r\n\r\n   public reset(): void { return; }\r\n}\r\n\r\n/**\r\n * Action Queues\r\n *\r\n * Action queues are part of the [[ActionContext|Action API]] and\r\n * store the list of actions to be executed for an [[Actor]].\r\n *\r\n * Actors implement [[Actor.actions]] which can be manipulated by\r\n * advanced users to adjust the actions currently being executed in the\r\n * queue.\r\n */\r\nexport class ActionQueue {\r\n   private _actor: Actor;\r\n   private _actions: IAction[] = [];\r\n   private _currentAction: IAction;\r\n   private _completedActions: IAction[] = [];\r\n   constructor(actor: Actor) {\r\n      this._actor = actor;\r\n   }\r\n\r\n   public add(action: IAction) {\r\n      this._actions.push(action);\r\n   }\r\n\r\n   public remove(action: IAction) {\r\n      var index = this._actions.indexOf(action);\r\n      this._actions.splice(index, 1);\r\n   }\r\n\r\n   public clearActions(): void {\r\n      this._actions.length = 0;\r\n      this._completedActions.length = 0;\r\n      if (this._currentAction) {\r\n         this._currentAction.stop();\r\n      }\r\n   }\r\n\r\n   public getActions(): IAction[] {\r\n      return this._actions.concat(this._completedActions);\r\n   }\r\n\r\n   public hasNext(): boolean {\r\n      return this._actions.length > 0;\r\n   }\r\n\r\n   public reset(): void {\r\n      this._actions = this.getActions();\r\n\r\n      var i = 0, len = this._actions.length;\r\n      for (i; i < len; i++) {\r\n         this._actions[i].reset();\r\n      }\r\n      this._completedActions = [];\r\n   }\r\n\r\n   public update(delta: number) {\r\n      if (this._actions.length > 0) {\r\n         this._currentAction = this._actions[0];\r\n         this._currentAction.update(delta);\r\n\r\n         if (this._currentAction.isComplete(this._actor)) {\r\n            this._completedActions.push(this._actions.shift());\r\n         }\r\n      }\r\n   }\r\n}","/* istanbul ignore next */\r\nif (typeof window === 'undefined') {\r\n   window = (<any>{ audioContext: function () { return; } });\r\n}\r\n/* istanbul ignore next */\r\nif (typeof window !== 'undefined' && !window.requestAnimationFrame) {\r\n   (<any>window).requestAnimationFrame =\r\n   (<any>window).webkitRequestAnimationFrame ||\r\n   (<any>window).mozRequestAnimationFrame ||\r\n   function (callback: Function) { window.setInterval(callback, 1000 / 60); };\r\n}\r\n/* istanbul ignore next */\r\nif (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\r\n   (<any>window).cancelAnimationFrame =\r\n   (<any>window).webkitCancelAnimationFrame ||\r\n   (<any>window).mozCancelAnimationFrame ||\r\n   function () { return; };\r\n}\r\n/* istanbul ignore next */\r\nif (typeof window !== 'undefined' && !(<any>window).AudioContext) {\r\n   (<any>window).AudioContext = (<any>window).AudioContext || \r\n                                (<any>window).webkitAudioContext || \r\n                                (<any>window).mozAudioContext || \r\n                                (<any>window).msAudioContext || \r\n                                (<any>window).oAudioContext;\r\n}\r\n\r\n// Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\r\n// Production steps of ECMA-262, Edition 5, 15.4.4.18\r\n// Reference: http://es5.github.io/#x15.4.4.18\r\n/* istanbul ignore next */\r\nif (!Array.prototype.forEach) {\r\n\r\n   Array.prototype.forEach = function (this: Array<any>, callback, thisArg) {\r\n\r\n      var T, k;\r\n\r\n      if (this == null) {\r\n         throw new TypeError('this is null or not defined');\r\n      }\r\n\r\n      // 1. Let O be the result of calling ToObject passing the |this| value as the argument. \r\n      var O = Object(this);\r\n\r\n      // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\r\n      // 3. Let len be ToUint32(lenValue).\r\n      var len = O.length >>> 0;\r\n\r\n      // 4. If IsCallable(callback) is false, throw a TypeError exception.\r\n      // See: http://es5.github.com/#x9.11\r\n      if (typeof callback !== 'function') {\r\n         throw new TypeError(callback + ' is not a function');\r\n      }\r\n\r\n      // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n      if (arguments.length > 1) {\r\n         T = thisArg;\r\n      }\r\n\r\n      // 6. Let k be 0\r\n      k = 0;\r\n\r\n      // 7. Repeat, while k < len\r\n      while (k < len) {\r\n\r\n         var kValue;\r\n\r\n         // a. Let Pk be ToString(k).\r\n         //   This is implicit for LHS operands of the in operator\r\n         // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\r\n         //   This step can be combined with c\r\n         // c. If kPresent is true, then\r\n         if (k in O) {\r\n\r\n            // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\r\n            kValue = O[k];\r\n\r\n            // ii. Call the Call internal method of callback with T as the this value and\r\n            // argument list containing kValue, k, and O.\r\n            callback.call(T, kValue, k, O);\r\n         }\r\n         // d. Increase k by 1.\r\n         k++;\r\n      }\r\n      // 8. return undefined\r\n   };\r\n}\r\n\r\n// Polyfill from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\r\n/* istanbul ignore next */\r\nif (!Array.prototype.some) {\r\n  Array.prototype.some = function(this: Array<any>, fun /*, thisArg */){\r\n    'use strict';\r\n\r\n    if (this === void 0 || this === null) {\r\n      throw new TypeError();\r\n    }\r\n\r\n    var t = Object(this);\r\n    var len = t.length >>> 0;\r\n    if (typeof fun !== 'function') {\r\n      throw new TypeError();\r\n    }\r\n\r\n    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n    for (var i = 0; i < len; i++) {\r\n      if (i in t && fun.call(thisArg, t[i], i, t)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\n// Polyfill from  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill\r\n/* istanbul ignore next */\r\nif (!Function.prototype.bind) {\r\n   Function.prototype.bind = function (oThis) {\r\n      if (typeof this !== 'function') {\r\n         // closest thing possible to the ECMAScript 5\r\n         // internal IsCallable function\r\n         throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\r\n      }\r\n\r\n      var aArgs = Array.prototype.slice.call(arguments, 1),\r\n         fToBind = this,\r\n         fNOP: any = function () { return; },\r\n         fBound = function (this: Function) {\r\n            return fToBind.apply(this instanceof fNOP && oThis\r\n               ? this\r\n               : oThis,\r\n               aArgs.concat(Array.prototype.slice.call(arguments)));\r\n         };\r\n\r\n      fNOP.prototype = this.prototype;\r\n      fBound.prototype = new fNOP();\r\n\r\n      return fBound;\r\n   };\r\n}"]}